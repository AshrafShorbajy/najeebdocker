var V0=e=>{throw TypeError(e)};var wp=(e,t,n)=>t.has(e)||V0("Cannot "+n);var Z=(e,t,n)=>(wp(e,t,"read from private field"),n?n.call(e):t.get(e)),st=(e,t,n)=>t.has(e)?V0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),We=(e,t,n,r)=>(wp(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Sn=(e,t,n)=>(wp(e,t,"access private method"),n);var Qu=(e,t,n,r)=>({set _(s){We(e,t,s,n)},get _(){return Z(e,t,r)}});function KA(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function c1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u1={exports:{}},uf={},d1={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=Symbol.for("react.element"),HA=Symbol.for("react.portal"),GA=Symbol.for("react.fragment"),YA=Symbol.for("react.strict_mode"),JA=Symbol.for("react.profiler"),QA=Symbol.for("react.provider"),XA=Symbol.for("react.context"),ZA=Symbol.for("react.forward_ref"),eI=Symbol.for("react.suspense"),tI=Symbol.for("react.memo"),nI=Symbol.for("react.lazy"),B0=Symbol.iterator;function rI(e){return e===null||typeof e!="object"?null:(e=B0&&e[B0]||e["@@iterator"],typeof e=="function"?e:null)}var h1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f1=Object.assign,p1={};function Pl(e,t,n){this.props=e,this.context=t,this.refs=p1,this.updater=n||h1}Pl.prototype.isReactComponent={};Pl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function m1(){}m1.prototype=Pl.prototype;function Zv(e,t,n){this.props=e,this.context=t,this.refs=p1,this.updater=n||h1}var ex=Zv.prototype=new m1;ex.constructor=Zv;f1(ex,Pl.prototype);ex.isPureReactComponent=!0;var z0=Array.isArray,g1=Object.prototype.hasOwnProperty,tx={current:null},v1={key:!0,ref:!0,__self:!0,__source:!0};function x1(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)g1.call(t,r)&&!v1.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Nu,type:e,key:o,ref:a,props:s,_owner:tx.current}}function sI(e,t){return{$$typeof:Nu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nu}function iI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var q0=/\/+/g;function bp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iI(""+e.key):t.toString(36)}function Fd(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Nu:case HA:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+bp(a,0):r,z0(s)?(n="",e!=null&&(n=e.replace(q0,"$&/")+"/"),Fd(s,t,n,"",function(u){return u})):s!=null&&(nx(s)&&(s=sI(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(q0,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",z0(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+bp(o,l);a+=Fd(o,t,n,c,s)}else if(c=rI(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+bp(o,l++),a+=Fd(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Xu(e,t,n){if(e==null)return e;var r=[],s=0;return Fd(e,r,"","",function(o){return t.call(n,o,s++)}),r}function oI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fn={current:null},Ud={transition:null},aI={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:Ud,ReactCurrentOwner:tx};function y1(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Xu,forEach:function(e,t,n){Xu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xu(e,function(){t++}),t},toArray:function(e){return Xu(e,function(t){return t})||[]},only:function(e){if(!nx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=Pl;Xe.Fragment=GA;Xe.Profiler=JA;Xe.PureComponent=Zv;Xe.StrictMode=YA;Xe.Suspense=eI;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aI;Xe.act=y1;Xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f1({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=tx.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)g1.call(t,c)&&!v1.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Nu,type:e.type,key:s,ref:o,props:r,_owner:a}};Xe.createContext=function(e){return e={$$typeof:XA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QA,_context:e},e.Consumer=e};Xe.createElement=x1;Xe.createFactory=function(e){var t=x1.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:ZA,render:e}};Xe.isValidElement=nx;Xe.lazy=function(e){return{$$typeof:nI,_payload:{_status:-1,_result:e},_init:oI}};Xe.memo=function(e,t){return{$$typeof:tI,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=Ud.transition;Ud.transition={};try{e()}finally{Ud.transition=t}};Xe.unstable_act=y1;Xe.useCallback=function(e,t){return Fn.current.useCallback(e,t)};Xe.useContext=function(e){return Fn.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return Fn.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return Fn.current.useEffect(e,t)};Xe.useId=function(){return Fn.current.useId()};Xe.useImperativeHandle=function(e,t,n){return Fn.current.useImperativeHandle(e,t,n)};Xe.useInsertionEffect=function(e,t){return Fn.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return Fn.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return Fn.current.useMemo(e,t)};Xe.useReducer=function(e,t,n){return Fn.current.useReducer(e,t,n)};Xe.useRef=function(e){return Fn.current.useRef(e)};Xe.useState=function(e){return Fn.current.useState(e)};Xe.useSyncExternalStore=function(e,t,n){return Fn.current.useSyncExternalStore(e,t,n)};Xe.useTransition=function(){return Fn.current.useTransition()};Xe.version="18.3.1";d1.exports=Xe;var h=d1.exports;const ie=c1(h),rx=KA({__proto__:null,default:ie},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI=h,cI=Symbol.for("react.element"),uI=Symbol.for("react.fragment"),dI=Object.prototype.hasOwnProperty,hI=lI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fI={key:!0,ref:!0,__self:!0,__source:!0};function w1(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)dI.call(t,r)&&!fI.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:cI,type:e,key:o,ref:a,props:s,_owner:hI.current}}uf.Fragment=uI;uf.jsx=w1;uf.jsxs=w1;u1.exports=uf;var i=u1.exports,b1={exports:{}},wr={},_1={exports:{}},j1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,L){var X=M.length;M.push(L);e:for(;0<X;){var le=X-1>>>1,E=M[le];if(0<s(E,L))M[le]=L,M[X]=E,X=le;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var L=M[0],X=M.pop();if(X!==L){M[0]=X;e:for(var le=0,E=M.length,V=E>>>1;le<V;){var q=2*(le+1)-1,J=M[q],oe=q+1,A=M[oe];if(0>s(J,X))oe<E&&0>s(A,J)?(M[le]=A,M[oe]=X,le=oe):(M[le]=J,M[q]=X,le=q);else if(oe<E&&0>s(A,X))M[le]=A,M[oe]=X,le=oe;else break e}}return L}function s(M,L){var X=M.sortIndex-L.sortIndex;return X!==0?X:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,p=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=M)r(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(u)}}function _(M){if(g=!1,b(M),!y)if(n(c)!==null)y=!0,W(N);else{var L=n(u);L!==null&&R(_,L.startTime-M)}}function N(M,L){y=!1,g&&(g=!1,v(I),I=-1),p=!0;var X=m;try{for(b(L),f=n(c);f!==null&&(!(f.expirationTime>L)||M&&!U());){var le=f.callback;if(typeof le=="function"){f.callback=null,m=f.priorityLevel;var E=le(f.expirationTime<=L);L=e.unstable_now(),typeof E=="function"?f.callback=E:f===n(c)&&r(c),b(L)}else r(c);f=n(c)}if(f!==null)var V=!0;else{var q=n(u);q!==null&&R(_,q.startTime-L),V=!1}return V}finally{f=null,m=X,p=!1}}var C=!1,k=null,I=-1,$=5,O=-1;function U(){return!(e.unstable_now()-O<$)}function P(){if(k!==null){var M=e.unstable_now();O=M;var L=!0;try{L=k(!0,M)}finally{L?K():(C=!1,k=null)}}else C=!1}var K;if(typeof x=="function")K=function(){x(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=P,K=function(){F.postMessage(null)}}else K=function(){w(P,0)};function W(M){k=M,C||(C=!0,K())}function R(M,L){I=w(function(){M(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,W(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var X=m;m=L;try{return M()}finally{m=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=m;m=M;try{return L()}finally{m=X}},e.unstable_scheduleCallback=function(M,L,X){var le=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,M){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=X+E,M={id:d++,callback:L,priorityLevel:M,startTime:X,expirationTime:E,sortIndex:-1},X>le?(M.sortIndex=X,t(u,M),n(c)===null&&M===n(u)&&(g?(v(I),I=-1):g=!0,R(_,X-le))):(M.sortIndex=E,t(c,M),y||p||(y=!0,W(N))),M},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(M){var L=m;return function(){var X=m;m=L;try{return M.apply(this,arguments)}finally{m=X}}}})(j1);_1.exports=j1;var pI=_1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mI=h,vr=pI;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S1=new Set,$c={};function Go(e,t){ml(e,t),ml(e+"Capture",t)}function ml(e,t){for($c[e]=t,e=0;e<t.length;e++)S1.add(t[e])}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$m=Object.prototype.hasOwnProperty,gI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W0={},K0={};function vI(e){return $m.call(K0,e)?!0:$m.call(W0,e)?!1:gI.test(e)?K0[e]=!0:(W0[e]=!0,!1)}function xI(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yI(e,t,n,r){if(t===null||typeof t>"u"||xI(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Un(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xn[e]=new Un(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xn[t]=new Un(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xn[e]=new Un(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xn[e]=new Un(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xn[e]=new Un(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xn[e]=new Un(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xn[e]=new Un(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xn[e]=new Un(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xn[e]=new Un(e,5,!1,e.toLowerCase(),null,!1,!1)});var sx=/[\-:]([a-z])/g;function ix(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sx,ix);xn[t]=new Un(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sx,ix);xn[t]=new Un(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sx,ix);xn[t]=new Un(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xn[e]=new Un(e,1,!1,e.toLowerCase(),null,!1,!1)});xn.xlinkHref=new Un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xn[e]=new Un(e,1,!1,e.toLowerCase(),null,!0,!0)});function ox(e,t,n,r){var s=xn.hasOwnProperty(t)?xn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yI(t,n,s,r)&&(n=null),r||s===null?vI(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Xs=mI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),Ca=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),ax=Symbol.for("react.strict_mode"),Fm=Symbol.for("react.profiler"),N1=Symbol.for("react.provider"),k1=Symbol.for("react.context"),lx=Symbol.for("react.forward_ref"),Um=Symbol.for("react.suspense"),Vm=Symbol.for("react.suspense_list"),cx=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),C1=Symbol.for("react.offscreen"),H0=Symbol.iterator;function Xl(e){return e===null||typeof e!="object"?null:(e=H0&&e[H0]||e["@@iterator"],typeof e=="function"?e:null)}var Ot=Object.assign,_p;function hc(e){if(_p===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_p=t&&t[1]||""}return`
`+_p+e}var jp=!1;function Sp(e,t){if(!e||jp)return"";jp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{jp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hc(e):""}function wI(e){switch(e.tag){case 5:return hc(e.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return e=Sp(e.type,!1),e;case 11:return e=Sp(e.type.render,!1),e;case 1:return e=Sp(e.type,!0),e;default:return""}}function Bm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ea:return"Fragment";case Ca:return"Portal";case Fm:return"Profiler";case ax:return"StrictMode";case Um:return"Suspense";case Vm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k1:return(e.displayName||"Context")+".Consumer";case N1:return(e._context.displayName||"Context")+".Provider";case lx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cx:return t=e.displayName||null,t!==null?t:Bm(e.type)||"Memo";case di:t=e._payload,e=e._init;try{return Bm(e(t))}catch{}}return null}function bI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bm(t);case 8:return t===ax?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function E1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _I(e){var t=E1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ed(e){e._valueTracker||(e._valueTracker=_I(e))}function T1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=E1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zm(e,t){var n=t.checked;return Ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function G0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function P1(e,t){t=t.checked,t!=null&&ox(e,"checked",t,!1)}function qm(e,t){P1(e,t);var n=Fi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wm(e,t.type,Fi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Y0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wm(e,t,n){(t!=="number"||hh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fc=Array.isArray;function Wa(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Km(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function J0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ce(92));if(fc(n)){if(1<n.length)throw Error(ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fi(n)}}function R1(e,t){var n=Fi(t.value),r=Fi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Q0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function A1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var td,I1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=td.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _c={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jI=["Webkit","ms","Moz","O"];Object.keys(_c).forEach(function(e){jI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_c[t]=_c[e]})});function O1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_c.hasOwnProperty(e)&&_c[e]?(""+t).trim():t+"px"}function D1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=O1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var SI=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gm(e,t){if(t){if(SI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Ym(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=null;function ux(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qm=null,Ka=null,Ha=null;function X0(e){if(e=Eu(e)){if(typeof Qm!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=mf(t),Qm(e.stateNode,e.type,t))}}function M1(e){Ka?Ha?Ha.push(e):Ha=[e]:Ka=e}function L1(){if(Ka){var e=Ka,t=Ha;if(Ha=Ka=null,X0(e),t)for(e=0;e<t.length;e++)X0(t[e])}}function $1(e,t){return e(t)}function F1(){}var Np=!1;function U1(e,t,n){if(Np)return e(t,n);Np=!0;try{return $1(e,t,n)}finally{Np=!1,(Ka!==null||Ha!==null)&&(F1(),L1())}}function Uc(e,t){var n=e.stateNode;if(n===null)return null;var r=mf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ce(231,t,typeof n));return n}var Xm=!1;if(qs)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{Xm=!1}function NI(e,t,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var jc=!1,fh=null,ph=!1,Zm=null,kI={onError:function(e){jc=!0,fh=e}};function CI(e,t,n,r,s,o,a,l,c){jc=!1,fh=null,NI.apply(kI,arguments)}function EI(e,t,n,r,s,o,a,l,c){if(CI.apply(this,arguments),jc){if(jc){var u=fh;jc=!1,fh=null}else throw Error(ce(198));ph||(ph=!0,Zm=u)}}function Yo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function V1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Z0(e){if(Yo(e)!==e)throw Error(ce(188))}function TI(e){var t=e.alternate;if(!t){if(t=Yo(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Z0(s),e;if(o===r)return Z0(s),t;o=o.sibling}throw Error(ce(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?e:t}function B1(e){return e=TI(e),e!==null?z1(e):null}function z1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=z1(e);if(t!==null)return t;e=e.sibling}return null}var q1=vr.unstable_scheduleCallback,ew=vr.unstable_cancelCallback,PI=vr.unstable_shouldYield,RI=vr.unstable_requestPaint,zt=vr.unstable_now,AI=vr.unstable_getCurrentPriorityLevel,dx=vr.unstable_ImmediatePriority,W1=vr.unstable_UserBlockingPriority,mh=vr.unstable_NormalPriority,II=vr.unstable_LowPriority,K1=vr.unstable_IdlePriority,df=null,_s=null;function OI(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(df,e,void 0,(e.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:LI,DI=Math.log,MI=Math.LN2;function LI(e){return e>>>=0,e===0?32:31-(DI(e)/MI|0)|0}var nd=64,rd=4194304;function pc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=pc(l):(o&=a,o!==0&&(r=pc(o)))}else a=n&~s,a!==0?r=pc(a):o!==0&&(r=pc(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-es(t),s=1<<n,r|=e[n],t&=~s;return r}function $I(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-es(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=$I(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function eg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H1(){var e=nd;return nd<<=1,!(nd&4194240)&&(nd=64),e}function kp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ku(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-es(t),e[t]=n}function UI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-es(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function hx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-es(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ct=0;function G1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Y1,fx,J1,Q1,X1,tg=!1,sd=[],Ci=null,Ei=null,Ti=null,Vc=new Map,Bc=new Map,mi=[],VI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tw(e,t){switch(e){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":Vc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(t.pointerId)}}function ec(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Eu(t),t!==null&&fx(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function BI(e,t,n,r,s){switch(t){case"focusin":return Ci=ec(Ci,e,t,n,r,s),!0;case"dragenter":return Ei=ec(Ei,e,t,n,r,s),!0;case"mouseover":return Ti=ec(Ti,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Vc.set(o,ec(Vc.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Bc.set(o,ec(Bc.get(o)||null,e,t,n,r,s)),!0}return!1}function Z1(e){var t=xo(e.target);if(t!==null){var n=Yo(t);if(n!==null){if(t=n.tag,t===13){if(t=V1(n),t!==null){e.blockedOn=t,X1(e.priority,function(){J1(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ng(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Jm=r,n.target.dispatchEvent(r),Jm=null}else return t=Eu(n),t!==null&&fx(t),e.blockedOn=n,!1;t.shift()}return!0}function nw(e,t,n){Vd(e)&&n.delete(t)}function zI(){tg=!1,Ci!==null&&Vd(Ci)&&(Ci=null),Ei!==null&&Vd(Ei)&&(Ei=null),Ti!==null&&Vd(Ti)&&(Ti=null),Vc.forEach(nw),Bc.forEach(nw)}function tc(e,t){e.blockedOn===t&&(e.blockedOn=null,tg||(tg=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,zI)))}function zc(e){function t(s){return tc(s,e)}if(0<sd.length){tc(sd[0],e);for(var n=1;n<sd.length;n++){var r=sd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ci!==null&&tc(Ci,e),Ei!==null&&tc(Ei,e),Ti!==null&&tc(Ti,e),Vc.forEach(t),Bc.forEach(t),n=0;n<mi.length;n++)r=mi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mi.length&&(n=mi[0],n.blockedOn===null);)Z1(n),n.blockedOn===null&&mi.shift()}var Ga=Xs.ReactCurrentBatchConfig,vh=!0;function qI(e,t,n,r){var s=ct,o=Ga.transition;Ga.transition=null;try{ct=1,px(e,t,n,r)}finally{ct=s,Ga.transition=o}}function WI(e,t,n,r){var s=ct,o=Ga.transition;Ga.transition=null;try{ct=4,px(e,t,n,r)}finally{ct=s,Ga.transition=o}}function px(e,t,n,r){if(vh){var s=ng(e,t,n,r);if(s===null)Mp(e,t,r,xh,n),tw(e,r);else if(BI(s,e,t,n,r))r.stopPropagation();else if(tw(e,r),t&4&&-1<VI.indexOf(e)){for(;s!==null;){var o=Eu(s);if(o!==null&&Y1(o),o=ng(e,t,n,r),o===null&&Mp(e,t,r,xh,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Mp(e,t,r,null,n)}}var xh=null;function ng(e,t,n,r){if(xh=null,e=ux(r),e=xo(e),e!==null)if(t=Yo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=V1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xh=e,null}function eS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AI()){case dx:return 1;case W1:return 4;case mh:case II:return 16;case K1:return 536870912;default:return 16}default:return 16}}var ji=null,mx=null,Bd=null;function tS(){if(Bd)return Bd;var e,t=mx,n=t.length,r,s="value"in ji?ji.value:ji.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Bd=s.slice(e,1<r?1-r:void 0)}function zd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function id(){return!0}function rw(){return!1}function br(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?id:rw,this.isPropagationStopped=rw,this}return Ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),t}var Rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gx=br(Rl),Cu=Ot({},Rl,{view:0,detail:0}),KI=br(Cu),Cp,Ep,nc,hf=Ot({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nc&&(nc&&e.type==="mousemove"?(Cp=e.screenX-nc.screenX,Ep=e.screenY-nc.screenY):Ep=Cp=0,nc=e),Cp)},movementY:function(e){return"movementY"in e?e.movementY:Ep}}),sw=br(hf),HI=Ot({},hf,{dataTransfer:0}),GI=br(HI),YI=Ot({},Cu,{relatedTarget:0}),Tp=br(YI),JI=Ot({},Rl,{animationName:0,elapsedTime:0,pseudoElement:0}),QI=br(JI),XI=Ot({},Rl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZI=br(XI),eO=Ot({},Rl,{data:0}),iw=br(eO),tO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rO[e])?!!t[e]:!1}function vx(){return sO}var iO=Ot({},Cu,{key:function(e){if(e.key){var t=tO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vx,charCode:function(e){return e.type==="keypress"?zd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oO=br(iO),aO=Ot({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ow=br(aO),lO=Ot({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vx}),cO=br(lO),uO=Ot({},Rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),dO=br(uO),hO=Ot({},hf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fO=br(hO),pO=[9,13,27,32],xx=qs&&"CompositionEvent"in window,Sc=null;qs&&"documentMode"in document&&(Sc=document.documentMode);var mO=qs&&"TextEvent"in window&&!Sc,nS=qs&&(!xx||Sc&&8<Sc&&11>=Sc),aw=" ",lw=!1;function rS(e,t){switch(e){case"keyup":return pO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ta=!1;function gO(e,t){switch(e){case"compositionend":return sS(t);case"keypress":return t.which!==32?null:(lw=!0,aw);case"textInput":return e=t.data,e===aw&&lw?null:e;default:return null}}function vO(e,t){if(Ta)return e==="compositionend"||!xx&&rS(e,t)?(e=tS(),Bd=mx=ji=null,Ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nS&&t.locale!=="ko"?null:t.data;default:return null}}var xO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xO[e.type]:t==="textarea"}function iS(e,t,n,r){M1(r),t=yh(t,"onChange"),0<t.length&&(n=new gx("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nc=null,qc=null;function yO(e){gS(e,0)}function ff(e){var t=Aa(e);if(T1(t))return e}function wO(e,t){if(e==="change")return t}var oS=!1;if(qs){var Pp;if(qs){var Rp="oninput"in document;if(!Rp){var uw=document.createElement("div");uw.setAttribute("oninput","return;"),Rp=typeof uw.oninput=="function"}Pp=Rp}else Pp=!1;oS=Pp&&(!document.documentMode||9<document.documentMode)}function dw(){Nc&&(Nc.detachEvent("onpropertychange",aS),qc=Nc=null)}function aS(e){if(e.propertyName==="value"&&ff(qc)){var t=[];iS(t,qc,e,ux(e)),U1(yO,t)}}function bO(e,t,n){e==="focusin"?(dw(),Nc=t,qc=n,Nc.attachEvent("onpropertychange",aS)):e==="focusout"&&dw()}function _O(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ff(qc)}function jO(e,t){if(e==="click")return ff(t)}function SO(e,t){if(e==="input"||e==="change")return ff(t)}function NO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rs=typeof Object.is=="function"?Object.is:NO;function Wc(e,t){if(rs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$m.call(t,s)||!rs(e[s],t[s]))return!1}return!0}function hw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fw(e,t){var n=hw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hw(n)}}function lS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cS(){for(var e=window,t=hh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hh(e.document)}return t}function yx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kO(e){var t=cS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lS(n.ownerDocument.documentElement,n)){if(r!==null&&yx(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=fw(n,o);var a=fw(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CO=qs&&"documentMode"in document&&11>=document.documentMode,Pa=null,rg=null,kc=null,sg=!1;function pw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sg||Pa==null||Pa!==hh(r)||(r=Pa,"selectionStart"in r&&yx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kc&&Wc(kc,r)||(kc=r,r=yh(rg,"onSelect"),0<r.length&&(t=new gx("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Pa)))}function od(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ra={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},Ap={},uS={};qs&&(uS=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function pf(e){if(Ap[e])return Ap[e];if(!Ra[e])return e;var t=Ra[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uS)return Ap[e]=t[n];return e}var dS=pf("animationend"),hS=pf("animationiteration"),fS=pf("animationstart"),pS=pf("transitionend"),mS=new Map,mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hi(e,t){mS.set(e,t),Go(t,[e])}for(var Ip=0;Ip<mw.length;Ip++){var Op=mw[Ip],EO=Op.toLowerCase(),TO=Op[0].toUpperCase()+Op.slice(1);Hi(EO,"on"+TO)}Hi(dS,"onAnimationEnd");Hi(hS,"onAnimationIteration");Hi(fS,"onAnimationStart");Hi("dblclick","onDoubleClick");Hi("focusin","onFocus");Hi("focusout","onBlur");Hi(pS,"onTransitionEnd");ml("onMouseEnter",["mouseout","mouseover"]);ml("onMouseLeave",["mouseout","mouseover"]);ml("onPointerEnter",["pointerout","pointerover"]);ml("onPointerLeave",["pointerout","pointerover"]);Go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Go("onBeforeInput",["compositionend","keypress","textInput","paste"]);Go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PO=new Set("cancel close invalid load scroll toggle".split(" ").concat(mc));function gw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,EI(r,t,void 0,e),e.currentTarget=null}function gS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;gw(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;gw(s,l,u),o=c}}}if(ph)throw e=Zm,ph=!1,Zm=null,e}function St(e,t){var n=t[cg];n===void 0&&(n=t[cg]=new Set);var r=e+"__bubble";n.has(r)||(vS(t,e,2,!1),n.add(r))}function Dp(e,t,n){var r=0;t&&(r|=4),vS(n,e,r,t)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Kc(e){if(!e[ad]){e[ad]=!0,S1.forEach(function(n){n!=="selectionchange"&&(PO.has(n)||Dp(n,!1,e),Dp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ad]||(t[ad]=!0,Dp("selectionchange",!1,t))}}function vS(e,t,n,r){switch(eS(t)){case 1:var s=qI;break;case 4:s=WI;break;default:s=px}n=s.bind(null,t,n,e),s=void 0,!Xm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Mp(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=xo(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}U1(function(){var u=o,d=ux(n),f=[];e:{var m=mS.get(e);if(m!==void 0){var p=gx,y=e;switch(e){case"keypress":if(zd(n)===0)break e;case"keydown":case"keyup":p=oO;break;case"focusin":y="focus",p=Tp;break;case"focusout":y="blur",p=Tp;break;case"beforeblur":case"afterblur":p=Tp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=sw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cO;break;case dS:case hS:case fS:p=QI;break;case pS:p=dO;break;case"scroll":p=KI;break;case"wheel":p=fO;break;case"copy":case"cut":case"paste":p=ZI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ow}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var x=u,b;x!==null;){b=x;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=Uc(x,v),_!=null&&g.push(Hc(x,_,b)))),w)break;x=x.return}0<g.length&&(m=new p(m,y,null,n,d),f.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==Jm&&(y=n.relatedTarget||n.fromElement)&&(xo(y)||y[Ws]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?xo(y):null,y!==null&&(w=Yo(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(g=sw,_="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=ow,_="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?m:Aa(p),b=y==null?m:Aa(y),m=new g(_,x+"leave",p,n,d),m.target=w,m.relatedTarget=b,_=null,xo(d)===u&&(g=new g(v,x+"enter",y,n,d),g.target=b,g.relatedTarget=w,_=g),w=_,p&&y)t:{for(g=p,v=y,x=0,b=g;b;b=oa(b))x++;for(b=0,_=v;_;_=oa(_))b++;for(;0<x-b;)g=oa(g),x--;for(;0<b-x;)v=oa(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=oa(g),v=oa(v)}g=null}else g=null;p!==null&&vw(f,m,p,g,!1),y!==null&&w!==null&&vw(f,w,y,g,!0)}}e:{if(m=u?Aa(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var N=wO;else if(cw(m))if(oS)N=SO;else{N=_O;var C=bO}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=jO);if(N&&(N=N(e,u))){iS(f,N,n,d);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Wm(m,"number",m.value)}switch(C=u?Aa(u):window,e){case"focusin":(cw(C)||C.contentEditable==="true")&&(Pa=C,rg=u,kc=null);break;case"focusout":kc=rg=Pa=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,pw(f,n,d);break;case"selectionchange":if(CO)break;case"keydown":case"keyup":pw(f,n,d)}var k;if(xx)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ta?rS(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(nS&&n.locale!=="ko"&&(Ta||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ta&&(k=tS()):(ji=d,mx="value"in ji?ji.value:ji.textContent,Ta=!0)),C=yh(u,I),0<C.length&&(I=new iw(I,e,null,n,d),f.push({event:I,listeners:C}),k?I.data=k:(k=sS(n),k!==null&&(I.data=k)))),(k=mO?gO(e,n):vO(e,n))&&(u=yh(u,"onBeforeInput"),0<u.length&&(d=new iw("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=k))}gS(f,t)})}function Hc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yh(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Uc(e,n),o!=null&&r.unshift(Hc(e,o,s)),o=Uc(e,t),o!=null&&r.push(Hc(e,o,s))),e=e.return}return r}function oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vw(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Uc(n,o),c!=null&&a.unshift(Hc(n,c,l))):s||(c=Uc(n,o),c!=null&&a.push(Hc(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var RO=/\r\n?/g,AO=/\u0000|\uFFFD/g;function xw(e){return(typeof e=="string"?e:""+e).replace(RO,`
`).replace(AO,"")}function ld(e,t,n){if(t=xw(t),xw(e)!==t&&n)throw Error(ce(425))}function wh(){}var ig=null,og=null;function ag(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lg=typeof setTimeout=="function"?setTimeout:void 0,IO=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,OO=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(e){return yw.resolve(null).then(e).catch(DO)}:lg;function DO(e){setTimeout(function(){throw e})}function Lp(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),zc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);zc(t)}function Pi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ww(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Al=Math.random().toString(36).slice(2),ys="__reactFiber$"+Al,Gc="__reactProps$"+Al,Ws="__reactContainer$"+Al,cg="__reactEvents$"+Al,MO="__reactListeners$"+Al,LO="__reactHandles$"+Al;function xo(e){var t=e[ys];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ws]||n[ys]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ww(e);e!==null;){if(n=e[ys])return n;e=ww(e)}return t}e=n,n=e.parentNode}return null}function Eu(e){return e=e[ys]||e[Ws],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Aa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function mf(e){return e[Gc]||null}var ug=[],Ia=-1;function Gi(e){return{current:e}}function Nt(e){0>Ia||(e.current=ug[Ia],ug[Ia]=null,Ia--)}function yt(e,t){Ia++,ug[Ia]=e.current,e.current=t}var Ui={},Pn=Gi(Ui),Qn=Gi(!1),$o=Ui;function gl(e,t){var n=e.type.contextTypes;if(!n)return Ui;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Xn(e){return e=e.childContextTypes,e!=null}function bh(){Nt(Qn),Nt(Pn)}function bw(e,t,n){if(Pn.current!==Ui)throw Error(ce(168));yt(Pn,t),yt(Qn,n)}function xS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ce(108,bI(e)||"Unknown",s));return Ot({},n,r)}function _h(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ui,$o=Pn.current,yt(Pn,e),yt(Qn,Qn.current),!0}function _w(e,t,n){var r=e.stateNode;if(!r)throw Error(ce(169));n?(e=xS(e,t,$o),r.__reactInternalMemoizedMergedChildContext=e,Nt(Qn),Nt(Pn),yt(Pn,e)):Nt(Qn),yt(Qn,n)}var Ls=null,gf=!1,$p=!1;function yS(e){Ls===null?Ls=[e]:Ls.push(e)}function $O(e){gf=!0,yS(e)}function Yi(){if(!$p&&Ls!==null){$p=!0;var e=0,t=ct;try{var n=Ls;for(ct=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ls=null,gf=!1}catch(s){throw Ls!==null&&(Ls=Ls.slice(e+1)),q1(dx,Yi),s}finally{ct=t,$p=!1}}return null}var Oa=[],Da=0,jh=null,Sh=0,kr=[],Cr=0,Fo=null,Us=1,Vs="";function uo(e,t){Oa[Da++]=Sh,Oa[Da++]=jh,jh=e,Sh=t}function wS(e,t,n){kr[Cr++]=Us,kr[Cr++]=Vs,kr[Cr++]=Fo,Fo=e;var r=Us;e=Vs;var s=32-es(r)-1;r&=~(1<<s),n+=1;var o=32-es(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Us=1<<32-es(t)+s|n<<s|r,Vs=o+e}else Us=1<<o|n<<s|r,Vs=e}function wx(e){e.return!==null&&(uo(e,1),wS(e,1,0))}function bx(e){for(;e===jh;)jh=Oa[--Da],Oa[Da]=null,Sh=Oa[--Da],Oa[Da]=null;for(;e===Fo;)Fo=kr[--Cr],kr[Cr]=null,Vs=kr[--Cr],kr[Cr]=null,Us=kr[--Cr],kr[Cr]=null}var mr=null,pr=null,Et=!1,Zr=null;function bS(e,t){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mr=e,pr=Pi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mr=e,pr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fo!==null?{id:Us,overflow:Vs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mr=e,pr=null,!0):!1;default:return!1}}function dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hg(e){if(Et){var t=pr;if(t){var n=t;if(!jw(e,t)){if(dg(e))throw Error(ce(418));t=Pi(n.nextSibling);var r=mr;t&&jw(e,t)?bS(r,n):(e.flags=e.flags&-4097|2,Et=!1,mr=e)}}else{if(dg(e))throw Error(ce(418));e.flags=e.flags&-4097|2,Et=!1,mr=e}}}function Sw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mr=e}function cd(e){if(e!==mr)return!1;if(!Et)return Sw(e),Et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ag(e.type,e.memoizedProps)),t&&(t=pr)){if(dg(e))throw _S(),Error(ce(418));for(;t;)bS(e,t),t=Pi(t.nextSibling)}if(Sw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pr=Pi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pr=null}}else pr=mr?Pi(e.stateNode.nextSibling):null;return!0}function _S(){for(var e=pr;e;)e=Pi(e.nextSibling)}function vl(){pr=mr=null,Et=!1}function _x(e){Zr===null?Zr=[e]:Zr.push(e)}var FO=Xs.ReactCurrentBatchConfig;function rc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,e))}return e}function ud(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nw(e){var t=e._init;return t(e._payload)}function jS(e){function t(v,x){if(e){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Oi(v,x),v.index=0,v.sibling=null,v}function o(v,x,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,b,_){return x===null||x.tag!==6?(x=Wp(b,v.mode,_),x.return=v,x):(x=s(x,b),x.return=v,x)}function c(v,x,b,_){var N=b.type;return N===Ea?d(v,x,b.props.children,_,b.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===di&&Nw(N)===x.type)?(_=s(x,b.props),_.ref=rc(v,x,b),_.return=v,_):(_=Jd(b.type,b.key,b.props,null,v.mode,_),_.ref=rc(v,x,b),_.return=v,_)}function u(v,x,b,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Kp(b,v.mode,_),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function d(v,x,b,_,N){return x===null||x.tag!==7?(x=Do(b,v.mode,_,N),x.return=v,x):(x=s(x,b),x.return=v,x)}function f(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Wp(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zu:return b=Jd(x.type,x.key,x.props,null,v.mode,b),b.ref=rc(v,null,x),b.return=v,b;case Ca:return x=Kp(x,v.mode,b),x.return=v,x;case di:var _=x._init;return f(v,_(x._payload),b)}if(fc(x)||Xl(x))return x=Do(x,v.mode,b,null),x.return=v,x;ud(v,x)}return null}function m(v,x,b,_){var N=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(v,x,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:return b.key===N?c(v,x,b,_):null;case Ca:return b.key===N?u(v,x,b,_):null;case di:return N=b._init,m(v,x,N(b._payload),_)}if(fc(b)||Xl(b))return N!==null?null:d(v,x,b,_,null);ud(v,b)}return null}function p(v,x,b,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(b)||null,l(x,v,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zu:return v=v.get(_.key===null?b:_.key)||null,c(x,v,_,N);case Ca:return v=v.get(_.key===null?b:_.key)||null,u(x,v,_,N);case di:var C=_._init;return p(v,x,b,C(_._payload),N)}if(fc(_)||Xl(_))return v=v.get(b)||null,d(x,v,_,N,null);ud(x,_)}return null}function y(v,x,b,_){for(var N=null,C=null,k=x,I=x=0,$=null;k!==null&&I<b.length;I++){k.index>I?($=k,k=null):$=k.sibling;var O=m(v,k,b[I],_);if(O===null){k===null&&(k=$);break}e&&k&&O.alternate===null&&t(v,k),x=o(O,x,I),C===null?N=O:C.sibling=O,C=O,k=$}if(I===b.length)return n(v,k),Et&&uo(v,I),N;if(k===null){for(;I<b.length;I++)k=f(v,b[I],_),k!==null&&(x=o(k,x,I),C===null?N=k:C.sibling=k,C=k);return Et&&uo(v,I),N}for(k=r(v,k);I<b.length;I++)$=p(k,v,I,b[I],_),$!==null&&(e&&$.alternate!==null&&k.delete($.key===null?I:$.key),x=o($,x,I),C===null?N=$:C.sibling=$,C=$);return e&&k.forEach(function(U){return t(v,U)}),Et&&uo(v,I),N}function g(v,x,b,_){var N=Xl(b);if(typeof N!="function")throw Error(ce(150));if(b=N.call(b),b==null)throw Error(ce(151));for(var C=N=null,k=x,I=x=0,$=null,O=b.next();k!==null&&!O.done;I++,O=b.next()){k.index>I?($=k,k=null):$=k.sibling;var U=m(v,k,O.value,_);if(U===null){k===null&&(k=$);break}e&&k&&U.alternate===null&&t(v,k),x=o(U,x,I),C===null?N=U:C.sibling=U,C=U,k=$}if(O.done)return n(v,k),Et&&uo(v,I),N;if(k===null){for(;!O.done;I++,O=b.next())O=f(v,O.value,_),O!==null&&(x=o(O,x,I),C===null?N=O:C.sibling=O,C=O);return Et&&uo(v,I),N}for(k=r(v,k);!O.done;I++,O=b.next())O=p(k,v,I,O.value,_),O!==null&&(e&&O.alternate!==null&&k.delete(O.key===null?I:O.key),x=o(O,x,I),C===null?N=O:C.sibling=O,C=O);return e&&k.forEach(function(P){return t(v,P)}),Et&&uo(v,I),N}function w(v,x,b,_){if(typeof b=="object"&&b!==null&&b.type===Ea&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:e:{for(var N=b.key,C=x;C!==null;){if(C.key===N){if(N=b.type,N===Ea){if(C.tag===7){n(v,C.sibling),x=s(C,b.props.children),x.return=v,v=x;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===di&&Nw(N)===C.type){n(v,C.sibling),x=s(C,b.props),x.ref=rc(v,C,b),x.return=v,v=x;break e}n(v,C);break}else t(v,C);C=C.sibling}b.type===Ea?(x=Do(b.props.children,v.mode,_,b.key),x.return=v,v=x):(_=Jd(b.type,b.key,b.props,null,v.mode,_),_.ref=rc(v,x,b),_.return=v,v=_)}return a(v);case Ca:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=Kp(b,v.mode,_),x.return=v,v=x}return a(v);case di:return C=b._init,w(v,x,C(b._payload),_)}if(fc(b))return y(v,x,b,_);if(Xl(b))return g(v,x,b,_);ud(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,b),x.return=v,v=x):(n(v,x),x=Wp(b,v.mode,_),x.return=v,v=x),a(v)):n(v,x)}return w}var xl=jS(!0),SS=jS(!1),Nh=Gi(null),kh=null,Ma=null,jx=null;function Sx(){jx=Ma=kh=null}function Nx(e){var t=Nh.current;Nt(Nh),e._currentValue=t}function fg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ya(e,t){kh=e,jx=Ma=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jn=!0),e.firstContext=null)}function Or(e){var t=e._currentValue;if(jx!==e)if(e={context:e,memoizedValue:t,next:null},Ma===null){if(kh===null)throw Error(ce(308));Ma=e,kh.dependencies={lanes:0,firstContext:e}}else Ma=Ma.next=e;return t}var yo=null;function kx(e){yo===null?yo=[e]:yo.push(e)}function NS(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,kx(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ks(e,r)}function Ks(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var hi=!1;function Cx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ks(e,n)}return s=r.interleaved,s===null?(t.next=t,kx(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ks(e,n)}function qd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hx(e,n)}}function kw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ch(e,t,n,r){var s=e.updateQueue;hi=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,d=u=c=null,l=o;do{var m=l.lane,p=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(m=t,p=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(p,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,m=typeof y=="function"?y.call(p,f,m):y,m==null)break e;f=Ot({},f,m);break e;case 2:hi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Vo|=a,e.lanes=a,e.memoizedState=f}}function Cw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ce(191,s));s.call(r)}}}var Tu={},js=Gi(Tu),Yc=Gi(Tu),Jc=Gi(Tu);function wo(e){if(e===Tu)throw Error(ce(174));return e}function Ex(e,t){switch(yt(Jc,t),yt(Yc,e),yt(js,Tu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hm(t,e)}Nt(js),yt(js,t)}function yl(){Nt(js),Nt(Yc),Nt(Jc)}function CS(e){wo(Jc.current);var t=wo(js.current),n=Hm(t,e.type);t!==n&&(yt(Yc,e),yt(js,n))}function Tx(e){Yc.current===e&&(Nt(js),Nt(Yc))}var Rt=Gi(0);function Eh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fp=[];function Px(){for(var e=0;e<Fp.length;e++)Fp[e]._workInProgressVersionPrimary=null;Fp.length=0}var Wd=Xs.ReactCurrentDispatcher,Up=Xs.ReactCurrentBatchConfig,Uo=0,It=null,en=null,on=null,Th=!1,Cc=!1,Qc=0,UO=0;function Nn(){throw Error(ce(321))}function Rx(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rs(e[n],t[n]))return!1;return!0}function Ax(e,t,n,r,s,o){if(Uo=o,It=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wd.current=e===null||e.memoizedState===null?qO:WO,e=n(r,s),Cc){o=0;do{if(Cc=!1,Qc=0,25<=o)throw Error(ce(301));o+=1,on=en=null,t.updateQueue=null,Wd.current=KO,e=n(r,s)}while(Cc)}if(Wd.current=Ph,t=en!==null&&en.next!==null,Uo=0,on=en=It=null,Th=!1,t)throw Error(ce(300));return e}function Ix(){var e=Qc!==0;return Qc=0,e}function ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?It.memoizedState=on=e:on=on.next=e,on}function Dr(){if(en===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=en.next;var t=on===null?It.memoizedState:on.next;if(t!==null)on=t,en=e;else{if(e===null)throw Error(ce(310));en=e,e={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},on===null?It.memoizedState=on=e:on=on.next=e}return on}function Xc(e,t){return typeof t=="function"?t(e):t}function Vp(e){var t=Dr(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=en,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((Uo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,It.lanes|=d,Vo|=d}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,rs(r,t.memoizedState)||(Jn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,It.lanes|=o,Vo|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bp(e){var t=Dr(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);rs(o,t.memoizedState)||(Jn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ES(){}function TS(e,t){var n=It,r=Dr(),s=t(),o=!rs(r.memoizedState,s);if(o&&(r.memoizedState=s,Jn=!0),r=r.queue,Ox(AS.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||on!==null&&on.memoizedState.tag&1){if(n.flags|=2048,Zc(9,RS.bind(null,n,r,s,t),void 0,null),an===null)throw Error(ce(349));Uo&30||PS(n,t,s)}return s}function PS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RS(e,t,n,r){t.value=n,t.getSnapshot=r,IS(t)&&OS(e)}function AS(e,t,n){return n(function(){IS(t)&&OS(e)})}function IS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rs(e,n)}catch{return!0}}function OS(e){var t=Ks(e,1);t!==null&&ts(t,e,1,-1)}function Ew(e){var t=ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:e},t.queue=e,e=e.dispatch=zO.bind(null,It,e),[t.memoizedState,e]}function Zc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function DS(){return Dr().memoizedState}function Kd(e,t,n,r){var s=ps();It.flags|=e,s.memoizedState=Zc(1|t,n,void 0,r===void 0?null:r)}function vf(e,t,n,r){var s=Dr();r=r===void 0?null:r;var o=void 0;if(en!==null){var a=en.memoizedState;if(o=a.destroy,r!==null&&Rx(r,a.deps)){s.memoizedState=Zc(t,n,o,r);return}}It.flags|=e,s.memoizedState=Zc(1|t,n,o,r)}function Tw(e,t){return Kd(8390656,8,e,t)}function Ox(e,t){return vf(2048,8,e,t)}function MS(e,t){return vf(4,2,e,t)}function LS(e,t){return vf(4,4,e,t)}function $S(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FS(e,t,n){return n=n!=null?n.concat([e]):null,vf(4,4,$S.bind(null,t,e),n)}function Dx(){}function US(e,t){var n=Dr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rx(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function VS(e,t){var n=Dr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rx(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BS(e,t,n){return Uo&21?(rs(n,t)||(n=H1(),It.lanes|=n,Vo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jn=!0),e.memoizedState=n)}function VO(e,t){var n=ct;ct=n!==0&&4>n?n:4,e(!0);var r=Up.transition;Up.transition={};try{e(!1),t()}finally{ct=n,Up.transition=r}}function zS(){return Dr().memoizedState}function BO(e,t,n){var r=Ii(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qS(e))WS(t,n);else if(n=NS(e,t,n,r),n!==null){var s=$n();ts(n,e,r,s),KS(n,t,r)}}function zO(e,t,n){var r=Ii(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qS(e))WS(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,rs(l,a)){var c=t.interleaved;c===null?(s.next=s,kx(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=NS(e,t,s,r),n!==null&&(s=$n(),ts(n,e,r,s),KS(n,t,r))}}function qS(e){var t=e.alternate;return e===It||t!==null&&t===It}function WS(e,t){Cc=Th=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function KS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hx(e,n)}}var Ph={readContext:Or,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},qO={readContext:Or,useCallback:function(e,t){return ps().memoizedState=[e,t===void 0?null:t],e},useContext:Or,useEffect:Tw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Kd(4194308,4,$S.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Kd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kd(4,2,e,t)},useMemo:function(e,t){var n=ps();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ps();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=BO.bind(null,It,e),[r.memoizedState,e]},useRef:function(e){var t=ps();return e={current:e},t.memoizedState=e},useState:Ew,useDebugValue:Dx,useDeferredValue:function(e){return ps().memoizedState=e},useTransition:function(){var e=Ew(!1),t=e[0];return e=VO.bind(null,e[1]),ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=It,s=ps();if(Et){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=t(),an===null)throw Error(ce(349));Uo&30||PS(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Tw(AS.bind(null,r,o,e),[e]),r.flags|=2048,Zc(9,RS.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ps(),t=an.identifierPrefix;if(Et){var n=Vs,r=Us;n=(r&~(1<<32-es(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UO++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},WO={readContext:Or,useCallback:US,useContext:Or,useEffect:Ox,useImperativeHandle:FS,useInsertionEffect:MS,useLayoutEffect:LS,useMemo:VS,useReducer:Vp,useRef:DS,useState:function(){return Vp(Xc)},useDebugValue:Dx,useDeferredValue:function(e){var t=Dr();return BS(t,en.memoizedState,e)},useTransition:function(){var e=Vp(Xc)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:ES,useSyncExternalStore:TS,useId:zS,unstable_isNewReconciler:!1},KO={readContext:Or,useCallback:US,useContext:Or,useEffect:Ox,useImperativeHandle:FS,useInsertionEffect:MS,useLayoutEffect:LS,useMemo:VS,useReducer:Bp,useRef:DS,useState:function(){return Bp(Xc)},useDebugValue:Dx,useDeferredValue:function(e){var t=Dr();return en===null?t.memoizedState=e:BS(t,en.memoizedState,e)},useTransition:function(){var e=Bp(Xc)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:ES,useSyncExternalStore:TS,useId:zS,unstable_isNewReconciler:!1};function Kr(e,t){if(e&&e.defaultProps){t=Ot({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ot({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xf={isMounted:function(e){return(e=e._reactInternals)?Yo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$n(),s=Ii(e),o=zs(r,s);o.payload=t,n!=null&&(o.callback=n),t=Ri(e,o,s),t!==null&&(ts(t,e,s,r),qd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$n(),s=Ii(e),o=zs(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ri(e,o,s),t!==null&&(ts(t,e,s,r),qd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$n(),r=Ii(e),s=zs(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ri(e,s,r),t!==null&&(ts(t,e,r,n),qd(t,e,r))}};function Pw(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Wc(n,r)||!Wc(s,o):!0}function HS(e,t,n){var r=!1,s=Ui,o=t.contextType;return typeof o=="object"&&o!==null?o=Or(o):(s=Xn(t)?$o:Pn.current,r=t.contextTypes,o=(r=r!=null)?gl(e,s):Ui),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Rw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xf.enqueueReplaceState(t,t.state,null)}function mg(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Cx(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Or(o):(o=Xn(t)?$o:Pn.current,s.context=gl(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(pg(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&xf.enqueueReplaceState(s,s.state,null),Ch(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function wl(e,t){try{var n="",r=t;do n+=wI(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function zp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var HO=typeof WeakMap=="function"?WeakMap:Map;function GS(e,t,n){n=zs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ah||(Ah=!0,kg=r),gg(e,t)},n}function YS(e,t,n){n=zs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){gg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){gg(e,t),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Aw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new HO;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=aD.bind(null,e,t,n),t.then(e,e))}function Iw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ow(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zs(-1,1),t.tag=2,Ri(n,t,1))),n.lanes|=1),e)}var GO=Xs.ReactCurrentOwner,Jn=!1;function In(e,t,n,r){t.child=e===null?SS(t,null,n,r):xl(t,e.child,n,r)}function Dw(e,t,n,r,s){n=n.render;var o=t.ref;return Ya(t,s),r=Ax(e,t,n,r,o,s),n=Ix(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hs(e,t,s)):(Et&&n&&wx(t),t.flags|=1,In(e,t,r,s),t.child)}function Mw(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!zx(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,JS(e,t,o,r,s)):(e=Jd(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Wc,n(a,r)&&e.ref===t.ref)return Hs(e,t,s)}return t.flags|=1,e=Oi(o,r),e.ref=t.ref,e.return=t,t.child=e}function JS(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Wc(o,r)&&e.ref===t.ref)if(Jn=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Jn=!0);else return t.lanes=e.lanes,Hs(e,t,s)}return vg(e,t,n,r,s)}function QS(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt($a,ur),ur|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yt($a,ur),ur|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,yt($a,ur),ur|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,yt($a,ur),ur|=r;return In(e,t,s,n),t.child}function XS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function vg(e,t,n,r,s){var o=Xn(n)?$o:Pn.current;return o=gl(t,o),Ya(t,s),n=Ax(e,t,n,r,o,s),r=Ix(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hs(e,t,s)):(Et&&r&&wx(t),t.flags|=1,In(e,t,n,s),t.child)}function Lw(e,t,n,r,s){if(Xn(n)){var o=!0;_h(t)}else o=!1;if(Ya(t,s),t.stateNode===null)Hd(e,t),HS(t,n,r),mg(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Or(u):(u=Xn(n)?$o:Pn.current,u=gl(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Rw(t,a,r,u),hi=!1;var m=t.memoizedState;a.state=m,Ch(t,r,a,s),c=t.memoizedState,l!==r||m!==c||Qn.current||hi?(typeof d=="function"&&(pg(t,n,d,r),c=t.memoizedState),(l=hi||Pw(t,n,l,r,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,kS(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Kr(t.type,l),a.props=u,f=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Or(c):(c=Xn(n)?$o:Pn.current,c=gl(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Rw(t,a,r,c),hi=!1,m=t.memoizedState,a.state=m,Ch(t,r,a,s);var y=t.memoizedState;l!==f||m!==y||Qn.current||hi?(typeof p=="function"&&(pg(t,n,p,r),y=t.memoizedState),(u=hi||Pw(t,n,u,r,m,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return xg(e,t,n,r,o,s)}function xg(e,t,n,r,s,o){XS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&_w(t,n,!1),Hs(e,t,o);r=t.stateNode,GO.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=xl(t,e.child,null,o),t.child=xl(t,null,l,o)):In(e,t,l,o),t.memoizedState=r.state,s&&_w(t,n,!0),t.child}function ZS(e){var t=e.stateNode;t.pendingContext?bw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bw(e,t.context,!1),Ex(e,t.containerInfo)}function $w(e,t,n,r,s){return vl(),_x(s),t.flags|=256,In(e,t,n,r),t.child}var yg={dehydrated:null,treeContext:null,retryLane:0};function wg(e){return{baseLanes:e,cachePool:null,transitions:null}}function eN(e,t,n){var r=t.pendingProps,s=Rt.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),yt(Rt,s&1),e===null)return hg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=bf(a,r,0,null),e=Do(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=wg(n),t.memoizedState=yg,e):Mx(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return YO(e,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Oi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Oi(l,o):(o=Do(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?wg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=yg,r}return o=e.child,e=o.sibling,r=Oi(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mx(e,t){return t=bf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dd(e,t,n,r){return r!==null&&_x(r),xl(t,e.child,null,n),e=Mx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YO(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=zp(Error(ce(422))),dd(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=bf({mode:"visible",children:r.children},s,0,null),o=Do(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&xl(t,e.child,null,a),t.child.memoizedState=wg(a),t.memoizedState=yg,o);if(!(t.mode&1))return dd(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ce(419)),r=zp(o,r,void 0),dd(e,t,a,r)}if(l=(a&e.childLanes)!==0,Jn||l){if(r=an,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ks(e,s),ts(r,e,s,-1))}return Bx(),r=zp(Error(ce(421))),dd(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=lD.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,pr=Pi(s.nextSibling),mr=t,Et=!0,Zr=null,e!==null&&(kr[Cr++]=Us,kr[Cr++]=Vs,kr[Cr++]=Fo,Us=e.id,Vs=e.overflow,Fo=t),t=Mx(t,r.children),t.flags|=4096,t)}function Fw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fg(e.return,t,n)}function qp(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function tN(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(In(e,t,r.children,n),r=Rt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fw(e,n,t);else if(e.tag===19)Fw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(yt(Rt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Eh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),qp(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Eh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}qp(t,!0,n,null,o);break;case"together":qp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,n=Oi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Oi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function JO(e,t,n){switch(t.tag){case 3:ZS(t),vl();break;case 5:CS(t);break;case 1:Xn(t.type)&&_h(t);break;case 4:Ex(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;yt(Nh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(yt(Rt,Rt.current&1),t.flags|=128,null):n&t.child.childLanes?eN(e,t,n):(yt(Rt,Rt.current&1),e=Hs(e,t,n),e!==null?e.sibling:null);yt(Rt,Rt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tN(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(Rt,Rt.current),r)break;return null;case 22:case 23:return t.lanes=0,QS(e,t,n)}return Hs(e,t,n)}var nN,bg,rN,sN;nN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bg=function(){};rN=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,wo(js.current);var o=null;switch(n){case"input":s=zm(e,s),r=zm(e,r),o=[];break;case"select":s=Ot({},s,{value:void 0}),r=Ot({},r,{value:void 0}),o=[];break;case"textarea":s=Km(e,s),r=Km(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wh)}Gm(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($c.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($c.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};sN=function(e,t,n,r){n!==r&&(t.flags|=4)};function sc(e,t){if(!Et)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function QO(e,t,n){var r=t.pendingProps;switch(bx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(t),null;case 1:return Xn(t.type)&&bh(),kn(t),null;case 3:return r=t.stateNode,yl(),Nt(Qn),Nt(Pn),Px(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(cd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zr!==null&&(Tg(Zr),Zr=null))),bg(e,t),kn(t),null;case 5:Tx(t);var s=wo(Jc.current);if(n=t.type,e!==null&&t.stateNode!=null)rN(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ce(166));return kn(t),null}if(e=wo(js.current),cd(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ys]=t,r[Gc]=o,e=(t.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(s=0;s<mc.length;s++)St(mc[s],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":G0(r,o),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},St("invalid",r);break;case"textarea":J0(r,o),St("invalid",r)}Gm(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ld(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ld(r.textContent,l,e),s=["children",""+l]):$c.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&St("scroll",r)}switch(n){case"input":ed(r),Y0(r,o,!0);break;case"textarea":ed(r),Q0(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=wh)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=A1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[ys]=t,e[Gc]=r,nN(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ym(n,r),n){case"dialog":St("cancel",e),St("close",e),s=r;break;case"iframe":case"object":case"embed":St("load",e),s=r;break;case"video":case"audio":for(s=0;s<mc.length;s++)St(mc[s],e);s=r;break;case"source":St("error",e),s=r;break;case"img":case"image":case"link":St("error",e),St("load",e),s=r;break;case"details":St("toggle",e),s=r;break;case"input":G0(e,r),s=zm(e,r),St("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ot({},r,{value:void 0}),St("invalid",e);break;case"textarea":J0(e,r),s=Km(e,r),St("invalid",e);break;default:s=r}Gm(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?D1(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&I1(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Fc(e,c):typeof c=="number"&&Fc(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&($c.hasOwnProperty(o)?c!=null&&o==="onScroll"&&St("scroll",e):c!=null&&ox(e,o,c,a))}switch(n){case"input":ed(e),Y0(e,r,!1);break;case"textarea":ed(e),Q0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fi(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Wa(e,!!r.multiple,o,!1):r.defaultValue!=null&&Wa(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kn(t),null;case 6:if(e&&t.stateNode!=null)sN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ce(166));if(n=wo(Jc.current),wo(js.current),cd(t)){if(r=t.stateNode,n=t.memoizedProps,r[ys]=t,(o=r.nodeValue!==n)&&(e=mr,e!==null))switch(e.tag){case 3:ld(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ld(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ys]=t,t.stateNode=r}return kn(t),null;case 13:if(Nt(Rt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Et&&pr!==null&&t.mode&1&&!(t.flags&128))_S(),vl(),t.flags|=98560,o=!1;else if(o=cd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ce(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ce(317));o[ys]=t}else vl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kn(t),o=!1}else Zr!==null&&(Tg(Zr),Zr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Rt.current&1?tn===0&&(tn=3):Bx())),t.updateQueue!==null&&(t.flags|=4),kn(t),null);case 4:return yl(),bg(e,t),e===null&&Kc(t.stateNode.containerInfo),kn(t),null;case 10:return Nx(t.type._context),kn(t),null;case 17:return Xn(t.type)&&bh(),kn(t),null;case 19:if(Nt(Rt),o=t.memoizedState,o===null)return kn(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)sc(o,!1);else{if(tn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Eh(e),a!==null){for(t.flags|=128,sc(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yt(Rt,Rt.current&1|2),t.child}e=e.sibling}o.tail!==null&&zt()>bl&&(t.flags|=128,r=!0,sc(o,!1),t.lanes=4194304)}else{if(!r)if(e=Eh(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Et)return kn(t),null}else 2*zt()-o.renderingStartTime>bl&&n!==1073741824&&(t.flags|=128,r=!0,sc(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=zt(),t.sibling=null,n=Rt.current,yt(Rt,r?n&1|2:n&1),t):(kn(t),null);case 22:case 23:return Vx(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ur&1073741824&&(kn(t),t.subtreeFlags&6&&(t.flags|=8192)):kn(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function XO(e,t){switch(bx(t),t.tag){case 1:return Xn(t.type)&&bh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yl(),Nt(Qn),Nt(Pn),Px(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tx(t),null;case 13:if(Nt(Rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));vl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nt(Rt),null;case 4:return yl(),null;case 10:return Nx(t.type._context),null;case 22:case 23:return Vx(),null;case 24:return null;default:return null}}var hd=!1,En=!1,ZO=typeof WeakSet=="function"?WeakSet:Set,je=null;function La(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$t(e,t,r)}else n.current=null}function _g(e,t,n){try{n()}catch(r){$t(e,t,r)}}var Uw=!1;function eD(e,t){if(ig=vh,e=cS(),yx(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===n&&++u===s&&(l=a),m===o&&++d===r&&(c=a),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(og={focusedElem:e,selectionRange:n},vh=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Kr(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(_){$t(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return y=Uw,Uw=!1,y}function Ec(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&_g(t,n,o)}s=s.next}while(s!==r)}}function yf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iN(e){var t=e.alternate;t!==null&&(e.alternate=null,iN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ys],delete t[Gc],delete t[cg],delete t[MO],delete t[LO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oN(e){return e.tag===5||e.tag===3||e.tag===4}function Vw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wh));else if(r!==4&&(e=e.child,e!==null))for(Sg(e,t,n),e=e.sibling;e!==null;)Sg(e,t,n),e=e.sibling}function Ng(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ng(e,t,n),e=e.sibling;e!==null;)Ng(e,t,n),e=e.sibling}var mn=null,Qr=!1;function si(e,t,n){for(n=n.child;n!==null;)aN(e,t,n),n=n.sibling}function aN(e,t,n){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(df,n)}catch{}switch(n.tag){case 5:En||La(n,t);case 6:var r=mn,s=Qr;mn=null,si(e,t,n),mn=r,Qr=s,mn!==null&&(Qr?(e=mn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mn.removeChild(n.stateNode));break;case 18:mn!==null&&(Qr?(e=mn,n=n.stateNode,e.nodeType===8?Lp(e.parentNode,n):e.nodeType===1&&Lp(e,n),zc(e)):Lp(mn,n.stateNode));break;case 4:r=mn,s=Qr,mn=n.stateNode.containerInfo,Qr=!0,si(e,t,n),mn=r,Qr=s;break;case 0:case 11:case 14:case 15:if(!En&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&_g(n,t,a),s=s.next}while(s!==r)}si(e,t,n);break;case 1:if(!En&&(La(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){$t(n,t,l)}si(e,t,n);break;case 21:si(e,t,n);break;case 22:n.mode&1?(En=(r=En)||n.memoizedState!==null,si(e,t,n),En=r):si(e,t,n);break;default:si(e,t,n)}}function Bw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ZO),t.forEach(function(r){var s=cD.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ur(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:mn=l.stateNode,Qr=!1;break e;case 3:mn=l.stateNode.containerInfo,Qr=!0;break e;case 4:mn=l.stateNode.containerInfo,Qr=!0;break e}l=l.return}if(mn===null)throw Error(ce(160));aN(o,a,s),mn=null,Qr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){$t(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lN(t,e),t=t.sibling}function lN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ur(t,e),ds(e),r&4){try{Ec(3,e,e.return),yf(3,e)}catch(g){$t(e,e.return,g)}try{Ec(5,e,e.return)}catch(g){$t(e,e.return,g)}}break;case 1:Ur(t,e),ds(e),r&512&&n!==null&&La(n,n.return);break;case 5:if(Ur(t,e),ds(e),r&512&&n!==null&&La(n,n.return),e.flags&32){var s=e.stateNode;try{Fc(s,"")}catch(g){$t(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&P1(s,o),Ym(l,a);var u=Ym(l,o);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?D1(s,f):d==="dangerouslySetInnerHTML"?I1(s,f):d==="children"?Fc(s,f):ox(s,d,f,u)}switch(l){case"input":qm(s,o);break;case"textarea":R1(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Wa(s,!!o.multiple,p,!1):m!==!!o.multiple&&(o.defaultValue!=null?Wa(s,!!o.multiple,o.defaultValue,!0):Wa(s,!!o.multiple,o.multiple?[]:"",!1))}s[Gc]=o}catch(g){$t(e,e.return,g)}}break;case 6:if(Ur(t,e),ds(e),r&4){if(e.stateNode===null)throw Error(ce(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){$t(e,e.return,g)}}break;case 3:if(Ur(t,e),ds(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zc(t.containerInfo)}catch(g){$t(e,e.return,g)}break;case 4:Ur(t,e),ds(e);break;case 13:Ur(t,e),ds(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Fx=zt())),r&4&&Bw(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(En=(u=En)||d,Ur(t,e),En=u):Ur(t,e),ds(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(je=e,d=e.child;d!==null;){for(f=je=d;je!==null;){switch(m=je,p=m.child,m.tag){case 0:case 11:case 14:case 15:Ec(4,m,m.return);break;case 1:La(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){$t(r,n,g)}}break;case 5:La(m,m.return);break;case 22:if(m.memoizedState!==null){qw(f);continue}}p!==null?(p.return=m,je=p):qw(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=O1("display",a))}catch(g){$t(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){$t(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ur(t,e),ds(e),r&4&&Bw(e);break;case 21:break;default:Ur(t,e),ds(e)}}function ds(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(oN(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fc(s,""),r.flags&=-33);var o=Vw(e);Ng(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Vw(e);Sg(e,l,a);break;default:throw Error(ce(161))}}catch(c){$t(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tD(e,t,n){je=e,cN(e)}function cN(e,t,n){for(var r=(e.mode&1)!==0;je!==null;){var s=je,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||hd;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||En;l=hd;var u=En;if(hd=a,(En=c)&&!u)for(je=s;je!==null;)a=je,c=a.child,a.tag===22&&a.memoizedState!==null?Ww(s):c!==null?(c.return=a,je=c):Ww(s);for(;o!==null;)je=o,cN(o),o=o.sibling;je=s,hd=l,En=u}zw(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,je=o):zw(e)}}function zw(e){for(;je!==null;){var t=je;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:En||yf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!En)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Kr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Cw(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cw(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&zc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}En||t.flags&512&&jg(t)}catch(m){$t(t,t.return,m)}}if(t===e){je=null;break}if(n=t.sibling,n!==null){n.return=t.return,je=n;break}je=t.return}}function qw(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,je=n;break}je=t.return}}function Ww(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yf(4,t)}catch(c){$t(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){$t(t,s,c)}}var o=t.return;try{jg(t)}catch(c){$t(t,o,c)}break;case 5:var a=t.return;try{jg(t)}catch(c){$t(t,a,c)}}}catch(c){$t(t,t.return,c)}if(t===e){je=null;break}var l=t.sibling;if(l!==null){l.return=t.return,je=l;break}je=t.return}}var nD=Math.ceil,Rh=Xs.ReactCurrentDispatcher,Lx=Xs.ReactCurrentOwner,Pr=Xs.ReactCurrentBatchConfig,rt=0,an=null,Ht=null,vn=0,ur=0,$a=Gi(0),tn=0,eu=null,Vo=0,wf=0,$x=0,Tc=null,Yn=null,Fx=0,bl=1/0,Os=null,Ah=!1,kg=null,Ai=null,fd=!1,Si=null,Ih=0,Pc=0,Cg=null,Gd=-1,Yd=0;function $n(){return rt&6?zt():Gd!==-1?Gd:Gd=zt()}function Ii(e){return e.mode&1?rt&2&&vn!==0?vn&-vn:FO.transition!==null?(Yd===0&&(Yd=H1()),Yd):(e=ct,e!==0||(e=window.event,e=e===void 0?16:eS(e.type)),e):1}function ts(e,t,n,r){if(50<Pc)throw Pc=0,Cg=null,Error(ce(185));ku(e,n,r),(!(rt&2)||e!==an)&&(e===an&&(!(rt&2)&&(wf|=n),tn===4&&gi(e,vn)),Zn(e,r),n===1&&rt===0&&!(t.mode&1)&&(bl=zt()+500,gf&&Yi()))}function Zn(e,t){var n=e.callbackNode;FI(e,t);var r=gh(e,e===an?vn:0);if(r===0)n!==null&&ew(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ew(n),t===1)e.tag===0?$O(Kw.bind(null,e)):yS(Kw.bind(null,e)),OO(function(){!(rt&6)&&Yi()}),n=null;else{switch(G1(r)){case 1:n=dx;break;case 4:n=W1;break;case 16:n=mh;break;case 536870912:n=K1;break;default:n=mh}n=vN(n,uN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uN(e,t){if(Gd=-1,Yd=0,rt&6)throw Error(ce(327));var n=e.callbackNode;if(Ja()&&e.callbackNode!==n)return null;var r=gh(e,e===an?vn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Oh(e,r);else{t=r;var s=rt;rt|=2;var o=hN();(an!==e||vn!==t)&&(Os=null,bl=zt()+500,Oo(e,t));do try{iD();break}catch(l){dN(e,l)}while(!0);Sx(),Rh.current=o,rt=s,Ht!==null?t=0:(an=null,vn=0,t=tn)}if(t!==0){if(t===2&&(s=eg(e),s!==0&&(r=s,t=Eg(e,s))),t===1)throw n=eu,Oo(e,0),gi(e,r),Zn(e,zt()),n;if(t===6)gi(e,r);else{if(s=e.current.alternate,!(r&30)&&!rD(s)&&(t=Oh(e,r),t===2&&(o=eg(e),o!==0&&(r=o,t=Eg(e,o))),t===1))throw n=eu,Oo(e,0),gi(e,r),Zn(e,zt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ce(345));case 2:ho(e,Yn,Os);break;case 3:if(gi(e,r),(r&130023424)===r&&(t=Fx+500-zt(),10<t)){if(gh(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){$n(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lg(ho.bind(null,e,Yn,Os),t);break}ho(e,Yn,Os);break;case 4:if(gi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-es(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nD(r/1960))-r,10<r){e.timeoutHandle=lg(ho.bind(null,e,Yn,Os),r);break}ho(e,Yn,Os);break;case 5:ho(e,Yn,Os);break;default:throw Error(ce(329))}}}return Zn(e,zt()),e.callbackNode===n?uN.bind(null,e):null}function Eg(e,t){var n=Tc;return e.current.memoizedState.isDehydrated&&(Oo(e,t).flags|=256),e=Oh(e,t),e!==2&&(t=Yn,Yn=n,t!==null&&Tg(t)),e}function Tg(e){Yn===null?Yn=e:Yn.push.apply(Yn,e)}function rD(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!rs(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gi(e,t){for(t&=~$x,t&=~wf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-es(t),r=1<<n;e[n]=-1,t&=~r}}function Kw(e){if(rt&6)throw Error(ce(327));Ja();var t=gh(e,0);if(!(t&1))return Zn(e,zt()),null;var n=Oh(e,t);if(e.tag!==0&&n===2){var r=eg(e);r!==0&&(t=r,n=Eg(e,r))}if(n===1)throw n=eu,Oo(e,0),gi(e,t),Zn(e,zt()),n;if(n===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ho(e,Yn,Os),Zn(e,zt()),null}function Ux(e,t){var n=rt;rt|=1;try{return e(t)}finally{rt=n,rt===0&&(bl=zt()+500,gf&&Yi())}}function Bo(e){Si!==null&&Si.tag===0&&!(rt&6)&&Ja();var t=rt;rt|=1;var n=Pr.transition,r=ct;try{if(Pr.transition=null,ct=1,e)return e()}finally{ct=r,Pr.transition=n,rt=t,!(rt&6)&&Yi()}}function Vx(){ur=$a.current,Nt($a)}function Oo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,IO(n)),Ht!==null)for(n=Ht.return;n!==null;){var r=n;switch(bx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:yl(),Nt(Qn),Nt(Pn),Px();break;case 5:Tx(r);break;case 4:yl();break;case 13:Nt(Rt);break;case 19:Nt(Rt);break;case 10:Nx(r.type._context);break;case 22:case 23:Vx()}n=n.return}if(an=e,Ht=e=Oi(e.current,null),vn=ur=t,tn=0,eu=null,$x=wf=Vo=0,Yn=Tc=null,yo!==null){for(t=0;t<yo.length;t++)if(n=yo[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}yo=null}return e}function dN(e,t){do{var n=Ht;try{if(Sx(),Wd.current=Ph,Th){for(var r=It.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Th=!1}if(Uo=0,on=en=It=null,Cc=!1,Qc=0,Lx.current=null,n===null||n.return===null){tn=1,eu=t,Ht=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=vn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Iw(a);if(p!==null){p.flags&=-257,Ow(p,a,l,o,t),p.mode&1&&Aw(o,u,t),t=p,c=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){Aw(o,u,t),Bx();break e}c=Error(ce(426))}}else if(Et&&l.mode&1){var w=Iw(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ow(w,a,l,o,t),_x(wl(c,l));break e}}o=c=wl(c,l),tn!==4&&(tn=2),Tc===null?Tc=[o]:Tc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=GS(o,c,t);kw(o,v);break e;case 1:l=c;var x=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ai===null||!Ai.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=YS(o,l,t);kw(o,_);break e}}o=o.return}while(o!==null)}pN(n)}catch(N){t=N,Ht===n&&n!==null&&(Ht=n=n.return);continue}break}while(!0)}function hN(){var e=Rh.current;return Rh.current=Ph,e===null?Ph:e}function Bx(){(tn===0||tn===3||tn===2)&&(tn=4),an===null||!(Vo&268435455)&&!(wf&268435455)||gi(an,vn)}function Oh(e,t){var n=rt;rt|=2;var r=hN();(an!==e||vn!==t)&&(Os=null,Oo(e,t));do try{sD();break}catch(s){dN(e,s)}while(!0);if(Sx(),rt=n,Rh.current=r,Ht!==null)throw Error(ce(261));return an=null,vn=0,tn}function sD(){for(;Ht!==null;)fN(Ht)}function iD(){for(;Ht!==null&&!PI();)fN(Ht)}function fN(e){var t=gN(e.alternate,e,ur);e.memoizedProps=e.pendingProps,t===null?pN(e):Ht=t,Lx.current=null}function pN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=XO(n,t),n!==null){n.flags&=32767,Ht=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tn=6,Ht=null;return}}else if(n=QO(n,t,ur),n!==null){Ht=n;return}if(t=t.sibling,t!==null){Ht=t;return}Ht=t=e}while(t!==null);tn===0&&(tn=5)}function ho(e,t,n){var r=ct,s=Pr.transition;try{Pr.transition=null,ct=1,oD(e,t,n,r)}finally{Pr.transition=s,ct=r}return null}function oD(e,t,n,r){do Ja();while(Si!==null);if(rt&6)throw Error(ce(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(UI(e,o),e===an&&(Ht=an=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fd||(fd=!0,vN(mh,function(){return Ja(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pr.transition,Pr.transition=null;var a=ct;ct=1;var l=rt;rt|=4,Lx.current=null,eD(e,n),lN(n,e),kO(og),vh=!!ig,og=ig=null,e.current=n,tD(n),RI(),rt=l,ct=a,Pr.transition=o}else e.current=n;if(fd&&(fd=!1,Si=e,Ih=s),o=e.pendingLanes,o===0&&(Ai=null),OI(n.stateNode),Zn(e,zt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ah)throw Ah=!1,e=kg,kg=null,e;return Ih&1&&e.tag!==0&&Ja(),o=e.pendingLanes,o&1?e===Cg?Pc++:(Pc=0,Cg=e):Pc=0,Yi(),null}function Ja(){if(Si!==null){var e=G1(Ih),t=Pr.transition,n=ct;try{if(Pr.transition=null,ct=16>e?16:e,Si===null)var r=!1;else{if(e=Si,Si=null,Ih=0,rt&6)throw Error(ce(331));var s=rt;for(rt|=4,je=e.current;je!==null;){var o=je,a=o.child;if(je.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(je=u;je!==null;){var d=je;switch(d.tag){case 0:case 11:case 15:Ec(8,d,o)}var f=d.child;if(f!==null)f.return=d,je=f;else for(;je!==null;){d=je;var m=d.sibling,p=d.return;if(iN(d),d===u){je=null;break}if(m!==null){m.return=p,je=m;break}je=p}}}var y=o.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}je=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,je=a;else e:for(;je!==null;){if(o=je,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ec(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,je=v;break e}je=o.return}}var x=e.current;for(je=x;je!==null;){a=je;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,je=b;else e:for(a=x;je!==null;){if(l=je,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yf(9,l)}}catch(N){$t(l,l.return,N)}if(l===a){je=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,je=_;break e}je=l.return}}if(rt=s,Yi(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(df,e)}catch{}r=!0}return r}finally{ct=n,Pr.transition=t}}return!1}function Hw(e,t,n){t=wl(n,t),t=GS(e,t,1),e=Ri(e,t,1),t=$n(),e!==null&&(ku(e,1,t),Zn(e,t))}function $t(e,t,n){if(e.tag===3)Hw(e,e,n);else for(;t!==null;){if(t.tag===3){Hw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){e=wl(n,e),e=YS(t,e,1),t=Ri(t,e,1),e=$n(),t!==null&&(ku(t,1,e),Zn(t,e));break}}t=t.return}}function aD(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=$n(),e.pingedLanes|=e.suspendedLanes&n,an===e&&(vn&n)===n&&(tn===4||tn===3&&(vn&130023424)===vn&&500>zt()-Fx?Oo(e,0):$x|=n),Zn(e,t)}function mN(e,t){t===0&&(e.mode&1?(t=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):t=1);var n=$n();e=Ks(e,t),e!==null&&(ku(e,t,n),Zn(e,n))}function lD(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mN(e,n)}function cD(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(t),mN(e,n)}var gN;gN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qn.current)Jn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Jn=!1,JO(e,t,n);Jn=!!(e.flags&131072)}else Jn=!1,Et&&t.flags&1048576&&wS(t,Sh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hd(e,t),e=t.pendingProps;var s=gl(t,Pn.current);Ya(t,n),s=Ax(null,t,r,e,s,n);var o=Ix();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xn(r)?(o=!0,_h(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cx(t),s.updater=xf,t.stateNode=s,s._reactInternals=t,mg(t,r,e,n),t=xg(null,t,r,!0,o,n)):(t.tag=0,Et&&o&&wx(t),In(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=dD(r),e=Kr(r,e),s){case 0:t=vg(null,t,r,e,n);break e;case 1:t=Lw(null,t,r,e,n);break e;case 11:t=Dw(null,t,r,e,n);break e;case 14:t=Mw(null,t,r,Kr(r.type,e),n);break e}throw Error(ce(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kr(r,s),vg(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kr(r,s),Lw(e,t,r,s,n);case 3:e:{if(ZS(t),e===null)throw Error(ce(387));r=t.pendingProps,o=t.memoizedState,s=o.element,kS(e,t),Ch(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=wl(Error(ce(423)),t),t=$w(e,t,r,n,s);break e}else if(r!==s){s=wl(Error(ce(424)),t),t=$w(e,t,r,n,s);break e}else for(pr=Pi(t.stateNode.containerInfo.firstChild),mr=t,Et=!0,Zr=null,n=SS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vl(),r===s){t=Hs(e,t,n);break e}In(e,t,r,n)}t=t.child}return t;case 5:return CS(t),e===null&&hg(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,ag(r,s)?a=null:o!==null&&ag(r,o)&&(t.flags|=32),XS(e,t),In(e,t,a,n),t.child;case 6:return e===null&&hg(t),null;case 13:return eN(e,t,n);case 4:return Ex(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xl(t,null,r,n):In(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kr(r,s),Dw(e,t,r,s,n);case 7:return In(e,t,t.pendingProps,n),t.child;case 8:return In(e,t,t.pendingProps.children,n),t.child;case 12:return In(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,yt(Nh,r._currentValue),r._currentValue=a,o!==null)if(rs(o.value,a)){if(o.children===s.children&&!Qn.current){t=Hs(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=zs(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),fg(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ce(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),fg(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}In(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ya(t,n),s=Or(s),r=r(s),t.flags|=1,In(e,t,r,n),t.child;case 14:return r=t.type,s=Kr(r,t.pendingProps),s=Kr(r.type,s),Mw(e,t,r,s,n);case 15:return JS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Kr(r,s),Hd(e,t),t.tag=1,Xn(r)?(e=!0,_h(t)):e=!1,Ya(t,n),HS(t,r,s),mg(t,r,s,n),xg(null,t,r,!0,e,n);case 19:return tN(e,t,n);case 22:return QS(e,t,n)}throw Error(ce(156,t.tag))};function vN(e,t){return q1(e,t)}function uD(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(e,t,n,r){return new uD(e,t,n,r)}function zx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dD(e){if(typeof e=="function")return zx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lx)return 11;if(e===cx)return 14}return 2}function Oi(e,t){var n=e.alternate;return n===null?(n=Er(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Jd(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")zx(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ea:return Do(n.children,s,o,t);case ax:a=8,s|=8;break;case Fm:return e=Er(12,n,t,s|2),e.elementType=Fm,e.lanes=o,e;case Um:return e=Er(13,n,t,s),e.elementType=Um,e.lanes=o,e;case Vm:return e=Er(19,n,t,s),e.elementType=Vm,e.lanes=o,e;case C1:return bf(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N1:a=10;break e;case k1:a=9;break e;case lx:a=11;break e;case cx:a=14;break e;case di:a=16,r=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=Er(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Do(e,t,n,r){return e=Er(7,e,r,t),e.lanes=n,e}function bf(e,t,n,r){return e=Er(22,e,r,t),e.elementType=C1,e.lanes=n,e.stateNode={isHidden:!1},e}function Wp(e,t,n){return e=Er(6,e,null,t),e.lanes=n,e}function Kp(e,t,n){return t=Er(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hD(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kp(0),this.expirationTimes=kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qx(e,t,n,r,s,o,a,l,c){return e=new hD(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Er(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cx(o),e}function fD(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ca,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function xN(e){if(!e)return Ui;e=e._reactInternals;e:{if(Yo(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var n=e.type;if(Xn(n))return xS(e,n,t)}return t}function yN(e,t,n,r,s,o,a,l,c){return e=qx(n,r,!0,e,s,o,a,l,c),e.context=xN(null),n=e.current,r=$n(),s=Ii(n),o=zs(r,s),o.callback=t??null,Ri(n,o,s),e.current.lanes=s,ku(e,s,r),Zn(e,r),e}function _f(e,t,n,r){var s=t.current,o=$n(),a=Ii(s);return n=xN(n),t.context===null?t.context=n:t.pendingContext=n,t=zs(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ri(s,t,a),e!==null&&(ts(e,s,a,o),qd(e,s,a)),a}function Dh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wx(e,t){Gw(e,t),(e=e.alternate)&&Gw(e,t)}function pD(){return null}var wN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kx(e){this._internalRoot=e}jf.prototype.render=Kx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));_f(e,t,null,null)};jf.prototype.unmount=Kx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bo(function(){_f(null,e,null,null)}),t[Ws]=null}};function jf(e){this._internalRoot=e}jf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q1();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mi.length&&t!==0&&t<mi[n].priority;n++);mi.splice(n,0,e),n===0&&Z1(e)}};function Hx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yw(){}function mD(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Dh(a);o.call(u)}}var a=yN(t,r,e,0,null,!1,!1,"",Yw);return e._reactRootContainer=a,e[Ws]=a.current,Kc(e.nodeType===8?e.parentNode:e),Bo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Dh(c);l.call(u)}}var c=qx(e,0,!1,null,null,!1,!1,"",Yw);return e._reactRootContainer=c,e[Ws]=c.current,Kc(e.nodeType===8?e.parentNode:e),Bo(function(){_f(t,c,n,r)}),c}function Nf(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Dh(a);l.call(c)}}_f(t,a,e,s)}else a=mD(n,t,e,s,r);return Dh(a)}Y1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pc(t.pendingLanes);n!==0&&(hx(t,n|1),Zn(t,zt()),!(rt&6)&&(bl=zt()+500,Yi()))}break;case 13:Bo(function(){var r=Ks(e,1);if(r!==null){var s=$n();ts(r,e,1,s)}}),Wx(e,1)}};fx=function(e){if(e.tag===13){var t=Ks(e,134217728);if(t!==null){var n=$n();ts(t,e,134217728,n)}Wx(e,134217728)}};J1=function(e){if(e.tag===13){var t=Ii(e),n=Ks(e,t);if(n!==null){var r=$n();ts(n,e,t,r)}Wx(e,t)}};Q1=function(){return ct};X1=function(e,t){var n=ct;try{return ct=e,t()}finally{ct=n}};Qm=function(e,t,n){switch(t){case"input":if(qm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=mf(r);if(!s)throw Error(ce(90));T1(r),qm(r,s)}}}break;case"textarea":R1(e,n);break;case"select":t=n.value,t!=null&&Wa(e,!!n.multiple,t,!1)}};$1=Ux;F1=Bo;var gD={usingClientEntryPoint:!1,Events:[Eu,Aa,mf,M1,L1,Ux]},ic={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vD={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=B1(e),e===null?null:e.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||pD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{df=pd.inject(vD),_s=pd}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gD;wr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hx(t))throw Error(ce(200));return fD(e,t,null,n)};wr.createRoot=function(e,t){if(!Hx(e))throw Error(ce(299));var n=!1,r="",s=wN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=qx(e,1,!1,null,null,n,!1,r,s),e[Ws]=t.current,Kc(e.nodeType===8?e.parentNode:e),new Kx(t)};wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=B1(t),e=e===null?null:e.stateNode,e};wr.flushSync=function(e){return Bo(e)};wr.hydrate=function(e,t,n){if(!Sf(t))throw Error(ce(200));return Nf(null,e,t,!0,n)};wr.hydrateRoot=function(e,t,n){if(!Hx(e))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=wN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=yN(t,null,e,1,n??null,s,!1,o,a),e[Ws]=t.current,Kc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new jf(t)};wr.render=function(e,t,n){if(!Sf(t))throw Error(ce(200));return Nf(null,e,t,!1,n)};wr.unmountComponentAtNode=function(e){if(!Sf(e))throw Error(ce(40));return e._reactRootContainer?(Bo(function(){Nf(null,null,e,!1,function(){e._reactRootContainer=null,e[Ws]=null})}),!0):!1};wr.unstable_batchedUpdates=Ux;wr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sf(n))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return Nf(e,t,n,!1,r)};wr.version="18.3.1-next-f1338f8080-20240426";function bN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bN)}catch(e){console.error(e)}}bN(),b1.exports=wr;var Jo=b1.exports;const _N=c1(Jo);var jN,Jw=Jo;jN=Jw.createRoot,Jw.hydrateRoot;const xD=1,yD=1e6;let Hp=0;function wD(){return Hp=(Hp+1)%Number.MAX_SAFE_INTEGER,Hp.toString()}const Gp=new Map,Qw=e=>{if(Gp.has(e))return;const t=setTimeout(()=>{Gp.delete(e),Rc({type:"REMOVE_TOAST",toastId:e})},yD);Gp.set(e,t)},bD=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,xD)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Qw(n):e.toasts.forEach(r=>{Qw(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Qd=[];let Xd={toasts:[]};function Rc(e){Xd=bD(Xd,e),Qd.forEach(t=>{t(Xd)})}function Zd({...e}){const t=wD(),n=s=>Rc({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Rc({type:"DISMISS_TOAST",toastId:t});return Rc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function _D(){const[e,t]=h.useState(Xd);return h.useEffect(()=>(Qd.push(t),()=>{const n=Qd.indexOf(t);n>-1&&Qd.splice(n,1)}),[e]),{...e,toast:Zd,dismiss:n=>Rc({type:"DISMISS_TOAST",toastId:n})}}function de(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Xw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Gs(...e){return t=>{let n=!1;const r=e.map(s=>{const o=Xw(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():Xw(e[s],null)}}}}function He(...e){return h.useCallback(Gs(...e),e)}function jD(e,t){const n=h.createContext(t),r=o=>{const{children:a,...l}=o,c=h.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(o){const a=h.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function yn(e,t=[]){let n=[];function r(o,a){const l=h.createContext(a),c=n.length;n=[...n,a];const u=f=>{var v;const{scope:m,children:p,...y}=f,g=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,w=h.useMemo(()=>y,Object.values(y));return i.jsx(g.Provider,{value:w,children:p})};u.displayName=o+"Provider";function d(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,y=h.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=n.map(a=>h.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,SD(s,...t)]}function SD(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Vi(e){const t=kD(e),n=h.forwardRef((r,s)=>{const{children:o,...a}=r,l=h.Children.toArray(o),c=l.find(CD);if(c){const u=c.props.children,d=l.map(f=>f===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...a,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,d):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var ND=Vi("Slot");function kD(e){const t=h.forwardRef((n,r)=>{const{children:s,...o}=n;if(h.isValidElement(s)){const a=TD(s),l=ED(o,s.props);return s.type!==h.Fragment&&(l.ref=r?Gs(r,a):a),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var SN=Symbol("radix.slottable");function NN(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=SN,t}function CD(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===SN}function ED(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function TD(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Pu(e){const t=e+"CollectionProvider",[n,r]=yn(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:v}=g,x=ie.useRef(null),b=ie.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:b,collectionRef:x,children:v})};a.displayName=t;const l=e+"CollectionSlot",c=Vi(l),u=ie.forwardRef((g,w)=>{const{scope:v,children:x}=g,b=o(l,v),_=He(w,b.collectionRef);return i.jsx(c,{ref:_,children:x})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=Vi(d),p=ie.forwardRef((g,w)=>{const{scope:v,children:x,...b}=g,_=ie.useRef(null),N=He(w,_),C=o(d,v);return ie.useEffect(()=>(C.itemMap.set(_,{ref:_,...b}),()=>void C.itemMap.delete(_))),i.jsx(m,{[f]:"",ref:N,children:x})});p.displayName=d;function y(g){const w=o(e+"CollectionConsumer",g);return ie.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((C,k)=>b.indexOf(C.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:p},y,r]}var PD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=PD.reduce((e,t)=>{const n=Vi(`Primitive.${t}`),r=h.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Gx(e,t){e&&Jo.flushSync(()=>e.dispatchEvent(t))}function tr(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function RD(e,t=globalThis==null?void 0:globalThis.document){const n=tr(e);h.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var AD="DismissableLayer",Pg="dismissableLayer.update",ID="dismissableLayer.pointerDownOutside",OD="dismissableLayer.focusOutside",Zw,kN=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qo=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=h.useContext(kN),[d,f]=h.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=h.useState({}),y=He(t,k=>f(k)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),x=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=v,N=MD(k=>{const I=k.target,$=[...u.branches].some(O=>O.contains(I));!_||$||(s==null||s(k),a==null||a(k),k.defaultPrevented||l==null||l())},m),C=LD(k=>{const I=k.target;[...u.branches].some(O=>O.contains(I))||(o==null||o(k),a==null||a(k),k.defaultPrevented||l==null||l())},m);return RD(k=>{x===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),h.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Zw=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),eb(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Zw)}},[d,m,n,u]),h.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),eb())},[d,u]),h.useEffect(()=>{const k=()=>p({});return document.addEventListener(Pg,k),()=>document.removeEventListener(Pg,k)},[]),i.jsx(we.div,{...c,ref:y,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:de(e.onFocusCapture,C.onFocusCapture),onBlurCapture:de(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:de(e.onPointerDownCapture,N.onPointerDownCapture)})});Qo.displayName=AD;var DD="DismissableLayerBranch",CN=h.forwardRef((e,t)=>{const n=h.useContext(kN),r=h.useRef(null),s=He(t,r);return h.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(we.div,{...e,ref:s})});CN.displayName=DD;function MD(e,t=globalThis==null?void 0:globalThis.document){const n=tr(e),r=h.useRef(!1),s=h.useRef(()=>{});return h.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){EN(ID,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function LD(e,t=globalThis==null?void 0:globalThis.document){const n=tr(e),r=h.useRef(!1);return h.useEffect(()=>{const s=o=>{o.target&&!r.current&&EN(OD,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function eb(){const e=new CustomEvent(Pg);document.dispatchEvent(e)}function EN(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Gx(s,o):s.dispatchEvent(o)}var $D=Qo,FD=CN,ln=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},UD="Portal",Il=h.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,o]=h.useState(!1);ln(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?_N.createPortal(i.jsx(we.div,{...r,ref:t}),a):null});Il.displayName=UD;function VD(e,t){return h.useReducer((n,r)=>t[n][r]??n,e)}var Vn=e=>{const{present:t,children:n}=e,r=BD(t),s=typeof n=="function"?n({present:r.isPresent}):h.Children.only(n),o=He(r.ref,zD(s));return typeof n=="function"||r.isPresent?h.cloneElement(s,{ref:o}):null};Vn.displayName="Presence";function BD(e){const[t,n]=h.useState(),r=h.useRef(null),s=h.useRef(e),o=h.useRef("none"),a=e?"mounted":"unmounted",[l,c]=VD(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const u=md(r.current);o.current=l==="mounted"?u:"none"},[l]),ln(()=>{const u=r.current,d=s.current;if(d!==e){const m=o.current,p=md(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ln(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const g=md(r.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=p=>{p.target===t&&(o.current=md(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function md(e){return(e==null?void 0:e.animationName)||"none"}function zD(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var qD=rx[" useInsertionEffect ".trim().toString()]||ln;function xr({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,a]=WD({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=h.useRef(e!==void 0);h.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=h.useCallback(d=>{var f;if(l){const m=KD(d)?d(e):d;m!==e&&((f=a.current)==null||f.call(a,m))}else o(d)},[l,e,o,a]);return[c,u]}function WD({defaultProp:e,onChange:t}){const[n,r]=h.useState(e),s=h.useRef(n),o=h.useRef(t);return qD(()=>{o.current=t},[t]),h.useEffect(()=>{var a;s.current!==n&&((a=o.current)==null||a.call(o,n),s.current=n)},[n,s]),[n,r,o]}function KD(e){return typeof e=="function"}var TN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),HD="VisuallyHidden",kf=h.forwardRef((e,t)=>i.jsx(we.span,{...e,ref:t,style:{...TN,...e.style}}));kf.displayName=HD;var GD=kf,Yx="ToastProvider",[Jx,YD,JD]=Pu("Toast"),[PN,IH]=yn("Toast",[JD]),[QD,Cf]=PN(Yx),RN=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=h.useState(null),[u,d]=h.useState(0),f=h.useRef(!1),m=h.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Yx}\`. Expected non-empty \`string\`.`),i.jsx(Jx.Provider,{scope:t,children:i.jsx(QD,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>d(p=>p+1),[]),onToastRemove:h.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};RN.displayName=Yx;var AN="ToastViewport",XD=["F8"],Rg="toast.viewportPause",Ag="toast.viewportResume",IN=h.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=XD,label:s="Notifications ({hotkey})",...o}=e,a=Cf(AN,n),l=YD(n),c=h.useRef(null),u=h.useRef(null),d=h.useRef(null),f=h.useRef(null),m=He(t,f,a.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;h.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(_=>v[_]||v.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),h.useEffect(()=>{const w=c.current,v=f.current;if(y&&w&&v){const x=()=>{if(!a.isClosePausedRef.current){const C=new CustomEvent(Rg);v.dispatchEvent(C),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const C=new CustomEvent(Ag);v.dispatchEvent(C),a.isClosePausedRef.current=!1}},_=C=>{!w.contains(C.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",_),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",N),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",_),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,a.isClosePausedRef]);const g=h.useCallback(({tabbingDirection:w})=>{const x=l().map(b=>{const _=b.ref.current,N=[_,...dM(_)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?x.reverse():x).flat()},[l]);return h.useEffect(()=>{const w=f.current;if(w){const v=x=>{var N,C,k;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const I=document.activeElement,$=x.shiftKey;if(x.target===w&&$){(N=u.current)==null||N.focus();return}const P=g({tabbingDirection:$?"backwards":"forwards"}),K=P.findIndex(D=>D===I);Yp(P.slice(K+1))?x.preventDefault():$?(C=u.current)==null||C.focus():(k=d.current)==null||k.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[l,g]),i.jsxs(FD,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&i.jsx(Ig,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});Yp(w)}}),i.jsx(Jx.Slot,{scope:n,children:i.jsx(we.ol,{tabIndex:-1,...o,ref:m})}),y&&i.jsx(Ig,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});Yp(w)}})]})});IN.displayName=AN;var ON="ToastFocusProxy",Ig=h.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=Cf(ON,n);return i.jsx(kf,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});Ig.displayName=ON;var Ru="Toast",ZD="toast.swipeStart",eM="toast.swipeMove",tM="toast.swipeCancel",nM="toast.swipeEnd",DN=h.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=e,[l,c]=xr({prop:r,defaultProp:s??!0,onChange:o,caller:Ru});return i.jsx(Vn,{present:n||l,children:i.jsx(iM,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:tr(e.onPause),onResume:tr(e.onResume),onSwipeStart:de(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:de(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});DN.displayName=Ru;var[rM,sM]=PN(Ru,{onClose(){}}),iM=h.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...y}=e,g=Cf(Ru,n),[w,v]=h.useState(null),x=He(t,D=>v(D)),b=h.useRef(null),_=h.useRef(null),N=s||g.duration,C=h.useRef(0),k=h.useRef(N),I=h.useRef(0),{onToastAdd:$,onToastRemove:O}=g,U=tr(()=>{var F;(w==null?void 0:w.contains(document.activeElement))&&((F=g.viewport)==null||F.focus()),a()}),P=h.useCallback(D=>{!D||D===1/0||(window.clearTimeout(I.current),C.current=new Date().getTime(),I.current=window.setTimeout(U,D))},[U]);h.useEffect(()=>{const D=g.viewport;if(D){const F=()=>{P(k.current),u==null||u()},W=()=>{const R=new Date().getTime()-C.current;k.current=k.current-R,window.clearTimeout(I.current),c==null||c()};return D.addEventListener(Rg,W),D.addEventListener(Ag,F),()=>{D.removeEventListener(Rg,W),D.removeEventListener(Ag,F)}}},[g.viewport,N,c,u,P]),h.useEffect(()=>{o&&!g.isClosePausedRef.current&&P(N)},[o,N,g.isClosePausedRef,P]),h.useEffect(()=>($(),()=>O()),[$,O]);const K=h.useMemo(()=>w?BN(w):null,[w]);return g.viewport?i.jsxs(i.Fragment,{children:[K&&i.jsx(oM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),i.jsx(rM,{scope:n,onClose:U,children:Jo.createPortal(i.jsx(Jx.ItemSlot,{scope:n,children:i.jsx($D,{asChild:!0,onEscapeKeyDown:de(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||U(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:de(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:de(e.onPointerDown,D=>{D.button===0&&(b.current={x:D.clientX,y:D.clientY})}),onPointerMove:de(e.onPointerMove,D=>{if(!b.current)return;const F=D.clientX-b.current.x,W=D.clientY-b.current.y,R=!!_.current,M=["left","right"].includes(g.swipeDirection),L=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,X=M?L(0,F):0,le=M?0:L(0,W),E=D.pointerType==="touch"?10:2,V={x:X,y:le},q={originalEvent:D,delta:V};R?(_.current=V,gd(eM,f,q,{discrete:!1})):tb(V,g.swipeDirection,E)?(_.current=V,gd(ZD,d,q,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(F)>E||Math.abs(W)>E)&&(b.current=null)}),onPointerUp:de(e.onPointerUp,D=>{const F=_.current,W=D.target;if(W.hasPointerCapture(D.pointerId)&&W.releasePointerCapture(D.pointerId),_.current=null,b.current=null,F){const R=D.currentTarget,M={originalEvent:D,delta:F};tb(F,g.swipeDirection,g.swipeThreshold)?gd(nM,p,M,{discrete:!0}):gd(tM,m,M,{discrete:!0}),R.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),oM=e=>{const{__scopeToast:t,children:n,...r}=e,s=Cf(Ru,t),[o,a]=h.useState(!1),[l,c]=h.useState(!1);return cM(()=>a(!0)),h.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Il,{asChild:!0,children:i.jsx(kf,{...r,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},aM="ToastTitle",MN=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});MN.displayName=aM;var lM="ToastDescription",LN=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});LN.displayName=lM;var $N="ToastAction",FN=h.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(VN,{altText:n,asChild:!0,children:i.jsx(Qx,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${$N}\`. Expected non-empty \`string\`.`),null)});FN.displayName=$N;var UN="ToastClose",Qx=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=sM(UN,n);return i.jsx(VN,{asChild:!0,children:i.jsx(we.button,{type:"button",...r,ref:t,onClick:de(e.onClick,s.onClose)})})});Qx.displayName=UN;var VN=h.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function BN(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),uM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...BN(r))}}),t}function gd(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Gx(s,o):s.dispatchEvent(o)}var tb=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function cM(e=()=>{}){const t=tr(e);ln(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function uM(e){return e.nodeType===e.ELEMENT_NODE}function dM(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Yp(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var hM=RN,zN=IN,qN=DN,WN=MN,KN=LN,HN=FN,GN=Qx;function YN(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=YN(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function JN(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=YN(e))&&(r&&(r+=" "),r+=t);return r}const nb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,rb=JN,Ef=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return rb(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],f=o==null?void 0:o[u];if(d===null)return null;const m=nb(d)||nb(f);return s[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:m,...p}=d;return Object.entries(p).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...o,...l}[g]):{...o,...l}[g]===w})?[...u,f,m]:u},[]);return rb(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QN=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},c)=>h.createElement("svg",{ref:c,...pM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:QN("lucide",s),...l},[...a.map(([u,d])=>h.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,t)=>{const n=h.forwardRef(({className:r,...s},o)=>h.createElement(mM,{ref:o,iconNode:t,className:QN(`lucide-${fM(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=xe("Backpack",[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=xe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=xe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=xe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=xe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=xe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=xe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=xe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=xe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=xe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=xe("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=xe("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=xe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=xe("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=xe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=xe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=xe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=xe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=xe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=xe("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=xe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=xe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=xe("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=xe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=xe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=xe("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=xe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ny="-",MM=e=>{const t=$M(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(ny);return l[0]===""&&l.length!==1&&l.shift(),lk(l,t)||LM(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},lk=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?lk(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(ny);return(a=t.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},db=/^\[(.+)\]$/,LM=e=>{if(db.test(e)){const t=db.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},$M=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return UM(Object.entries(e.classGroups),n).forEach(([o,a])=>{Vg(a,r,o,t)}),r},Vg=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:hb(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(FM(s)){Vg(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{Vg(a,hb(t,o),n,r)})})},hb=(e,t)=>{let n=e;return t.split(ny).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},FM=e=>e.isThemeGetter,UM=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[t+a,l])):o);return[n,s]}):e,VM=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},ck="!",BM=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,a=l=>{const c=[];let u=0,d=0,f;for(let w=0;w<l.length;w++){let v=l[w];if(u===0){if(v===s&&(r||l.slice(w,w+o)===t)){c.push(l.slice(d,w)),d=w+o;continue}if(v==="/"){f=w;continue}}v==="["?u++:v==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(ck),y=p?m.substring(1):m,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:a}):a},zM=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},qM=e=>({cache:VM(e.cacheSize),parseClassName:BM(e),...MM(e)}),WM=/\s+/,KM=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(WM);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let y=!!p,g=r(y?m.substring(0,p):m);if(!g){if(!y){l=u+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=u+(l.length>0?" "+l:l);continue}y=!1}const w=zM(d).join(":"),v=f?w+ck:w,x=v+g;if(o.includes(x))continue;o.push(x);const b=s(g,y);for(let _=0;_<b.length;++_){const N=b[_];o.push(v+N)}l=u+(l.length>0?" "+l:l)}return l};function HM(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=uk(t))&&(r&&(r+=" "),r+=n);return r}const uk=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=uk(e[r]))&&(n&&(n+=" "),n+=t);return n};function GM(e,...t){let n,r,s,o=a;function a(c){const u=t.reduce((d,f)=>f(d),e());return n=qM(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=KM(c,n);return s(c,d),d}return function(){return o(HM.apply(null,arguments))}}const jt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},dk=/^\[(?:([a-z-]+):)?(.+)\]$/i,YM=/^\d+\/\d+$/,JM=new Set(["px","full","screen"]),QM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,e4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,t4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,As=e=>Xa(e)||JM.has(e)||YM.test(e),ii=e=>Ol(e,"length",c4),Xa=e=>!!e&&!Number.isNaN(Number(e)),Qp=e=>Ol(e,"number",Xa),ac=e=>!!e&&Number.isInteger(Number(e)),n4=e=>e.endsWith("%")&&Xa(e.slice(0,-1)),Ye=e=>dk.test(e),oi=e=>QM.test(e),r4=new Set(["length","size","percentage"]),s4=e=>Ol(e,r4,hk),i4=e=>Ol(e,"position",hk),o4=new Set(["image","url"]),a4=e=>Ol(e,o4,d4),l4=e=>Ol(e,"",u4),lc=()=>!0,Ol=(e,t,n)=>{const r=dk.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},c4=e=>XM.test(e)&&!ZM.test(e),hk=()=>!1,u4=e=>e4.test(e),d4=e=>t4.test(e),h4=()=>{const e=jt("colors"),t=jt("spacing"),n=jt("blur"),r=jt("brightness"),s=jt("borderColor"),o=jt("borderRadius"),a=jt("borderSpacing"),l=jt("borderWidth"),c=jt("contrast"),u=jt("grayscale"),d=jt("hueRotate"),f=jt("invert"),m=jt("gap"),p=jt("gradientColorStops"),y=jt("gradientColorStopPositions"),g=jt("inset"),w=jt("margin"),v=jt("opacity"),x=jt("padding"),b=jt("saturate"),_=jt("scale"),N=jt("sepia"),C=jt("skew"),k=jt("space"),I=jt("translate"),$=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Ye,t],P=()=>[Ye,t],K=()=>["",As,ii],D=()=>["auto",Xa,Ye],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Ye],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[Xa,Ye];return{cacheSize:500,separator:":",theme:{colors:[lc],spacing:[As,ii],blur:["none","",oi,Ye],brightness:le(),borderColor:[e],borderRadius:["none","","full",oi,Ye],borderSpacing:P(),borderWidth:K(),contrast:le(),grayscale:L(),hueRotate:le(),invert:L(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[n4,ii],inset:U(),margin:U(),opacity:le(),padding:P(),saturate:le(),scale:le(),sepia:L(),skew:le(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[oi]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Ye]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ac,Ye]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",ac,Ye]}],"grid-cols":[{"grid-cols":[lc]}],"col-start-end":[{col:["auto",{span:["full",ac,Ye]},Ye]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[lc]}],"row-start-end":[{row:["auto",{span:[ac,Ye]},Ye]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ye,t]}],"min-w":[{"min-w":[Ye,t,"min","max","fit"]}],"max-w":[{"max-w":[Ye,t,"none","full","min","max","fit","prose",{screen:[oi]},oi]}],h:[{h:[Ye,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ye,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ye,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ye,t,"auto","min","max","fit"]}],"font-size":[{text:["base",oi,ii]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qp]}],"font-family":[{font:[lc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",Xa,Qp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",As,Ye]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",As,ii]}],"underline-offset":[{"underline-offset":["auto",As,Ye]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),i4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",s4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},a4]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[As,Ye]}],"outline-w":[{outline:[As,ii]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[As,ii]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",oi,l4]}],"shadow-color":[{shadow:[lc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",oi,Ye]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[ac,Ye]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[As,ii,Qp]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},f4=GM(h4);function ve(...e){return f4(JN(e))}const p4=hM,fk=h.forwardRef(({className:e,...t},n)=>i.jsx(zN,{ref:n,className:ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));fk.displayName=zN.displayName;const m4=Ef("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pk=h.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(qN,{ref:r,className:ve(m4({variant:t}),e),...n}));pk.displayName=qN.displayName;const g4=h.forwardRef(({className:e,...t},n)=>i.jsx(HN,{ref:n,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));g4.displayName=HN.displayName;const mk=h.forwardRef(({className:e,...t},n)=>i.jsx(GN,{ref:n,className:ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Tf,{className:"h-4 w-4"})}));mk.displayName=GN.displayName;const gk=h.forwardRef(({className:e,...t},n)=>i.jsx(WN,{ref:n,className:ve("text-sm font-semibold",e),...t}));gk.displayName=WN.displayName;const vk=h.forwardRef(({className:e,...t},n)=>i.jsx(KN,{ref:n,className:ve("text-sm opacity-90",e),...t}));vk.displayName=KN.displayName;function v4(){const{toasts:e}=_D();return i.jsxs(p4,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return i.jsxs(pk,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(gk,{children:n}),r&&i.jsx(vk,{children:r})]}),s,i.jsx(mk,{})]},t)}),i.jsx(fk,{})]})}var fb=["light","dark"],x4="(prefers-color-scheme: dark)",y4=h.createContext(void 0),w4={setTheme:e=>{},themes:[]},b4=()=>{var e;return(e=h.useContext(y4))!=null?e:w4};h.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:a,attrs:l,nonce:c})=>{let u=o==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?fb.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(y,g=!1,w=!0)=>{let v=a?a[y]:y,x=g?y+"|| ''":`'${v}'`,b="";return s&&w&&!g&&fb.includes(y)&&(b+=`d.style.colorScheme = '${y}';`),n==="class"?g||v?b+=`c.add(${x})`:b+="null":v&&(b+=`d[s](n,${x})`),b},p=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${x4}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${u?"":"else{"+m(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(o,!1,!1)};}${f}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var _4=e=>{switch(e){case"success":return N4;case"info":return C4;case"warning":return k4;case"error":return E4;default:return null}},j4=Array(12).fill(0),S4=({visible:e,className:t})=>ie.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ie.createElement("div",{className:"sonner-spinner"},j4.map((n,r)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),N4=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),k4=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),C4=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),E4=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),T4=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),P4=()=>{let[e,t]=ie.useState(document.hidden);return ie.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Bg=1,R4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Bg++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:a,title:n}):l):this.addToast({title:n,...r,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,o,a=r.then(async c=>{if(o=["resolve",c],ie.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(I4(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Bg++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Kn=new R4,A4=(e,t)=>{let n=(t==null?void 0:t.id)||Bg++;return Kn.addToast({title:e,...t,id:n}),n},I4=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",O4=A4,D4=()=>Kn.toasts,M4=()=>Kn.getActiveToasts(),Q=Object.assign(O4,{success:Kn.success,info:Kn.info,warning:Kn.warning,error:Kn.error,custom:Kn.custom,message:Kn.message,promise:Kn.promise,dismiss:Kn.dismiss,loading:Kn.loading},{getHistory:D4,getToasts:M4});function L4(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}L4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function vd(e){return e.label!==void 0}var $4=3,F4="32px",U4="16px",pb=4e3,V4=356,B4=14,z4=20,q4=200;function Vr(...e){return e.filter(Boolean).join(" ")}function W4(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var K4=e=>{var t,n,r,s,o,a,l,c,u,d,f;let{invert:m,toast:p,unstyled:y,interacting:g,setHeights:w,visibleToasts:v,heights:x,index:b,toasts:_,expanded:N,removeToast:C,defaultRichColors:k,closeButton:I,style:$,cancelButtonStyle:O,actionButtonStyle:U,className:P="",descriptionClassName:K="",duration:D,position:F,gap:W,loadingIcon:R,expandByDefault:M,classNames:L,icons:X,closeButtonAriaLabel:le="Close toast",pauseWhenPageIsHidden:E}=e,[V,q]=ie.useState(null),[J,oe]=ie.useState(null),[A,Y]=ie.useState(!1),[ee,H]=ie.useState(!1),[ge,ke]=ie.useState(!1),[ye,Ae]=ie.useState(!1),[Ge,bt]=ie.useState(!1),[Ke,pt]=ie.useState(0),[z,pe]=ie.useState(0),Fe=ie.useRef(p.duration||D||pb),be=ie.useRef(null),Ze=ie.useRef(null),ut=b===0,Je=b+1<=v,nt=p.type,Dt=p.dismissible!==!1,Rn=p.className||"",Ie=p.descriptionClassName||"",_t=ie.useMemo(()=>x.findIndex(Oe=>Oe.toastId===p.id)||0,[x,p.id]),cn=ie.useMemo(()=>{var Oe;return(Oe=p.closeButton)!=null?Oe:I},[p.closeButton,I]),zn=ie.useMemo(()=>p.duration||D||pb,[p.duration,D]),ae=ie.useRef(0),_e=ie.useRef(0),G=ie.useRef(0),Ne=ie.useRef(null),[et,at]=F.split("-"),qe=ie.useMemo(()=>x.reduce((Oe,tt,ot)=>ot>=_t?Oe:Oe+tt.height,0),[x,_t]),dt=P4(),un=p.invert||m,rn=nt==="loading";_e.current=ie.useMemo(()=>_t*W+qe,[_t,qe]),ie.useEffect(()=>{Fe.current=zn},[zn]),ie.useEffect(()=>{Y(!0)},[]),ie.useEffect(()=>{let Oe=Ze.current;if(Oe){let tt=Oe.getBoundingClientRect().height;return pe(tt),w(ot=>[{toastId:p.id,height:tt,position:p.position},...ot]),()=>w(ot=>ot.filter(bn=>bn.toastId!==p.id))}},[w,p.id]),ie.useLayoutEffect(()=>{if(!A)return;let Oe=Ze.current,tt=Oe.style.height;Oe.style.height="auto";let ot=Oe.getBoundingClientRect().height;Oe.style.height=tt,pe(ot),w(bn=>bn.find(Yt=>Yt.toastId===p.id)?bn.map(Yt=>Yt.toastId===p.id?{...Yt,height:ot}:Yt):[{toastId:p.id,height:ot,position:p.position},...bn])},[A,p.title,p.description,w,p.id]);let Ue=ie.useCallback(()=>{H(!0),pt(_e.current),w(Oe=>Oe.filter(tt=>tt.toastId!==p.id)),setTimeout(()=>{C(p)},q4)},[p,C,w,_e]);ie.useEffect(()=>{if(p.promise&&nt==="loading"||p.duration===1/0||p.type==="loading")return;let Oe;return N||g||E&&dt?(()=>{if(G.current<ae.current){let tt=new Date().getTime()-ae.current;Fe.current=Fe.current-tt}G.current=new Date().getTime()})():Fe.current!==1/0&&(ae.current=new Date().getTime(),Oe=setTimeout(()=>{var tt;(tt=p.onAutoClose)==null||tt.call(p,p),Ue()},Fe.current)),()=>clearTimeout(Oe)},[N,g,p,nt,E,dt,Ue]),ie.useEffect(()=>{p.delete&&Ue()},[Ue,p.delete]);function kt(){var Oe,tt,ot;return X!=null&&X.loading?ie.createElement("div",{className:Vr(L==null?void 0:L.loader,(Oe=p==null?void 0:p.classNames)==null?void 0:Oe.loader,"sonner-loader"),"data-visible":nt==="loading"},X.loading):R?ie.createElement("div",{className:Vr(L==null?void 0:L.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":nt==="loading"},R):ie.createElement(S4,{className:Vr(L==null?void 0:L.loader,(ot=p==null?void 0:p.classNames)==null?void 0:ot.loader),visible:nt==="loading"})}return ie.createElement("li",{tabIndex:0,ref:Ze,className:Vr(P,Rn,L==null?void 0:L.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[nt],(n=p==null?void 0:p.classNames)==null?void 0:n[nt]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:k,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":A,"data-promise":!!p.promise,"data-swiped":Ge,"data-removed":ee,"data-visible":Je,"data-y-position":et,"data-x-position":at,"data-index":b,"data-front":ut,"data-swiping":ge,"data-dismissible":Dt,"data-type":nt,"data-invert":un,"data-swipe-out":ye,"data-swipe-direction":J,"data-expanded":!!(N||M&&A),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${ee?Ke:_e.current}px`,"--initial-height":M?"auto":`${z}px`,...$,...p.style},onDragEnd:()=>{ke(!1),q(null),Ne.current=null},onPointerDown:Oe=>{rn||!Dt||(be.current=new Date,pt(_e.current),Oe.target.setPointerCapture(Oe.pointerId),Oe.target.tagName!=="BUTTON"&&(ke(!0),Ne.current={x:Oe.clientX,y:Oe.clientY}))},onPointerUp:()=>{var Oe,tt,ot,bn;if(ye||!Dt)return;Ne.current=null;let Yt=Number(((Oe=Ze.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sr=Number(((tt=Ze.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),T=new Date().getTime()-((ot=be.current)==null?void 0:ot.getTime()),ue=V==="x"?Yt:sr,Ee=Math.abs(ue)/T;if(Math.abs(ue)>=z4||Ee>.11){pt(_e.current),(bn=p.onDismiss)==null||bn.call(p,p),oe(V==="x"?Yt>0?"right":"left":sr>0?"down":"up"),Ue(),Ae(!0),bt(!1);return}ke(!1),q(null)},onPointerMove:Oe=>{var tt,ot,bn,Yt;if(!Ne.current||!Dt||((tt=window.getSelection())==null?void 0:tt.toString().length)>0)return;let sr=Oe.clientY-Ne.current.y,T=Oe.clientX-Ne.current.x,ue=(ot=e.swipeDirections)!=null?ot:W4(F);!V&&(Math.abs(T)>1||Math.abs(sr)>1)&&q(Math.abs(T)>Math.abs(sr)?"x":"y");let Ee={x:0,y:0};V==="y"?(ue.includes("top")||ue.includes("bottom"))&&(ue.includes("top")&&sr<0||ue.includes("bottom")&&sr>0)&&(Ee.y=sr):V==="x"&&(ue.includes("left")||ue.includes("right"))&&(ue.includes("left")&&T<0||ue.includes("right")&&T>0)&&(Ee.x=T),(Math.abs(Ee.x)>0||Math.abs(Ee.y)>0)&&bt(!0),(bn=Ze.current)==null||bn.style.setProperty("--swipe-amount-x",`${Ee.x}px`),(Yt=Ze.current)==null||Yt.style.setProperty("--swipe-amount-y",`${Ee.y}px`)}},cn&&!p.jsx?ie.createElement("button",{"aria-label":le,"data-disabled":rn,"data-close-button":!0,onClick:rn||!Dt?()=>{}:()=>{var Oe;Ue(),(Oe=p.onDismiss)==null||Oe.call(p,p)},className:Vr(L==null?void 0:L.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(o=X==null?void 0:X.close)!=null?o:T4):null,p.jsx||h.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:ie.createElement(ie.Fragment,null,nt||p.icon||p.promise?ie.createElement("div",{"data-icon":"",className:Vr(L==null?void 0:L.icon,(a=p==null?void 0:p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||kt():null,p.type!=="loading"?p.icon||(X==null?void 0:X[nt])||_4(nt):null):null,ie.createElement("div",{"data-content":"",className:Vr(L==null?void 0:L.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},ie.createElement("div",{"data-title":"",className:Vr(L==null?void 0:L.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?ie.createElement("div",{"data-description":"",className:Vr(K,Ie,L==null?void 0:L.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),h.isValidElement(p.cancel)?p.cancel:p.cancel&&vd(p.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||O,onClick:Oe=>{var tt,ot;vd(p.cancel)&&Dt&&((ot=(tt=p.cancel).onClick)==null||ot.call(tt,Oe),Ue())},className:Vr(L==null?void 0:L.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,h.isValidElement(p.action)?p.action:p.action&&vd(p.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||U,onClick:Oe=>{var tt,ot;vd(p.action)&&((ot=(tt=p.action).onClick)==null||ot.call(tt,Oe),!Oe.defaultPrevented&&Ue())},className:Vr(L==null?void 0:L.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function mb(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function H4(e,t){let n={};return[e,t].forEach((r,s)=>{let o=s===1,a=o?"--mobile-offset":"--offset",l=o?U4:F4;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${a}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${a}-${u}`]=l:n[`${a}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var G4=h.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:a,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:m,style:p,visibleToasts:y=$4,toastOptions:g,dir:w=mb(),gap:v=B4,loadingIcon:x,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:N}=e,[C,k]=ie.useState([]),I=ie.useMemo(()=>Array.from(new Set([r].concat(C.filter(E=>E.position).map(E=>E.position)))),[C,r]),[$,O]=ie.useState([]),[U,P]=ie.useState(!1),[K,D]=ie.useState(!1),[F,W]=ie.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=ie.useRef(null),M=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=ie.useRef(null),X=ie.useRef(!1),le=ie.useCallback(E=>{k(V=>{var q;return(q=V.find(J=>J.id===E.id))!=null&&q.delete||Kn.dismiss(E.id),V.filter(({id:J})=>J!==E.id)})},[]);return ie.useEffect(()=>Kn.subscribe(E=>{if(E.dismiss){k(V=>V.map(q=>q.id===E.id?{...q,delete:!0}:q));return}setTimeout(()=>{_N.flushSync(()=>{k(V=>{let q=V.findIndex(J=>J.id===E.id);return q!==-1?[...V.slice(0,q),{...V[q],...E},...V.slice(q+1)]:[E,...V]})})})}),[]),ie.useEffect(()=>{if(d!=="system"){W(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;let E=window.matchMedia("(prefers-color-scheme: dark)");try{E.addEventListener("change",({matches:V})=>{W(V?"dark":"light")})}catch{E.addListener(({matches:q})=>{try{W(q?"dark":"light")}catch(J){console.error(J)}})}},[d]),ie.useEffect(()=>{C.length<=1&&P(!1)},[C]),ie.useEffect(()=>{let E=V=>{var q,J;s.every(oe=>V[oe]||V.code===oe)&&(P(!0),(q=R.current)==null||q.focus()),V.code==="Escape"&&(document.activeElement===R.current||(J=R.current)!=null&&J.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[s]),ie.useEffect(()=>{if(R.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,X.current=!1)}},[R.current]),ie.createElement("section",{ref:t,"aria-label":`${_} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((E,V)=>{var q;let[J,oe]=E.split("-");return C.length?ie.createElement("ol",{key:E,dir:w==="auto"?mb():w,tabIndex:-1,ref:R,className:l,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":J,"data-lifted":U&&C.length>1&&!o,"data-x-position":oe,style:{"--front-toast-height":`${((q=$[0])==null?void 0:q.height)||0}px`,"--width":`${V4}px`,"--gap":`${v}px`,...p,...H4(c,u)},onBlur:A=>{X.current&&!A.currentTarget.contains(A.relatedTarget)&&(X.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:A=>{A.target instanceof HTMLElement&&A.target.dataset.dismissible==="false"||X.current||(X.current=!0,L.current=A.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{K||P(!1)},onDragEnd:()=>P(!1),onPointerDown:A=>{A.target instanceof HTMLElement&&A.target.dataset.dismissible==="false"||D(!0)},onPointerUp:()=>D(!1)},C.filter(A=>!A.position&&V===0||A.position===E).map((A,Y)=>{var ee,H;return ie.createElement(K4,{key:A.id,icons:b,index:Y,toast:A,defaultRichColors:f,duration:(ee=g==null?void 0:g.duration)!=null?ee:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:y,closeButton:(H=g==null?void 0:g.closeButton)!=null?H:a,interacting:K,position:E,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:le,toasts:C.filter(ge=>ge.position==A.position),heights:$.filter(ge=>ge.position==A.position),setHeights:O,expandByDefault:o,gap:v,loadingIcon:x,expanded:U,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))});const Y4=({...e})=>{const{theme:t="system"}=b4();return i.jsx(G4,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var J4=rx[" useId ".trim().toString()]||(()=>{}),Q4=0;function nn(e){const[t,n]=h.useState(J4());return ln(()=>{n(r=>r??String(Q4++))},[e]),t?`radix-${t}`:""}const X4=["top","right","bottom","left"],Bi=Math.min,dr=Math.max,$h=Math.round,xd=Math.floor,Ns=e=>({x:e,y:e}),Z4={left:"right",right:"left",bottom:"top",top:"bottom"},eL={start:"end",end:"start"};function zg(e,t,n){return dr(e,Bi(t,n))}function Ys(e,t){return typeof e=="function"?e(t):e}function Js(e){return e.split("-")[0]}function Dl(e){return e.split("-")[1]}function ry(e){return e==="x"?"y":"x"}function sy(e){return e==="y"?"height":"width"}const tL=new Set(["top","bottom"]);function bs(e){return tL.has(Js(e))?"y":"x"}function iy(e){return ry(bs(e))}function nL(e,t,n){n===void 0&&(n=!1);const r=Dl(e),s=iy(e),o=sy(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Fh(a)),[a,Fh(a)]}function rL(e){const t=Fh(e);return[qg(e),t,qg(t)]}function qg(e){return e.replace(/start|end/g,t=>eL[t])}const gb=["left","right"],vb=["right","left"],sL=["top","bottom"],iL=["bottom","top"];function oL(e,t,n){switch(e){case"top":case"bottom":return n?t?vb:gb:t?gb:vb;case"left":case"right":return t?sL:iL;default:return[]}}function aL(e,t,n,r){const s=Dl(e);let o=oL(Js(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(qg)))),o}function Fh(e){return e.replace(/left|right|bottom|top/g,t=>Z4[t])}function lL(e){return{top:0,right:0,bottom:0,left:0,...e}}function xk(e){return typeof e!="number"?lL(e):{top:e,right:e,bottom:e,left:e}}function Uh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function xb(e,t,n){let{reference:r,floating:s}=e;const o=bs(t),a=iy(t),l=sy(a),c=Js(t),u=o==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Dl(t)){case"start":p[a]-=m*(n&&u?-1:1);break;case"end":p[a]+=m*(n&&u?-1:1);break}return p}const cL=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=xb(u,r,c),m=r,p={},y=0;for(let g=0;g<l.length;g++){const{name:w,fn:v}=l[g],{x,y:b,data:_,reset:N}=await v({x:d,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});d=x??d,f=b??f,p={...p,[w]:{...p[w],..._}},N&&y<=50&&(y++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(u=N.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):N.rects),{x:d,y:f}=xb(u,m,c)),g=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:p}};async function tu(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=Ys(t,e),y=xk(p),w=l[m?f==="floating"?"reference":"floating":f],v=Uh(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},N=Uh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:c}):x);return{top:(v.top-N.top+y.top)/_.y,bottom:(N.bottom-v.bottom+y.bottom)/_.y,left:(v.left-N.left+y.left)/_.x,right:(N.right-v.right+y.right)/_.x}}const uL=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Ys(e,t)||{};if(u==null)return{};const f=xk(d),m={x:n,y:r},p=iy(s),y=sy(p),g=await a.getDimensions(u),w=p==="y",v=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",_=o.reference[y]+o.reference[p]-m[p]-o.floating[y],N=m[p]-o.reference[p],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let k=C?C[b]:0;(!k||!await(a.isElement==null?void 0:a.isElement(C)))&&(k=l.floating[b]||o.floating[y]);const I=_/2-N/2,$=k/2-g[y]/2-1,O=Bi(f[v],$),U=Bi(f[x],$),P=O,K=k-g[y]-U,D=k/2-g[y]/2+I,F=zg(P,D,K),W=!c.arrow&&Dl(s)!=null&&D!==F&&o.reference[y]/2-(D<P?O:U)-g[y]/2<0,R=W?D<P?D-P:D-K:0;return{[p]:m[p]+R,data:{[p]:F,centerOffset:D-F-R,...W&&{alignmentOffset:R}},reset:W}}}),dL=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...w}=Ys(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Js(s),x=bs(l),b=Js(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=m||(b||!g?[Fh(l)]:rL(l)),C=y!=="none";!m&&C&&N.push(...aL(l,g,y,_));const k=[l,...N],I=await tu(t,w),$=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&$.push(I[v]),f){const D=nL(s,a,_);$.push(I[D[0]],I[D[1]])}if(O=[...O,{placement:s,overflows:$}],!$.every(D=>D<=0)){var U,P;const D=(((U=o.flip)==null?void 0:U.index)||0)+1,F=k[D];if(F&&(!(f==="alignment"?x!==bs(F):!1)||O.every(M=>M.overflows[0]>0&&bs(M.placement)===x)))return{data:{index:D,overflows:O},reset:{placement:F}};let W=(P=O.filter(R=>R.overflows[0]<=0).sort((R,M)=>R.overflows[1]-M.overflows[1])[0])==null?void 0:P.placement;if(!W)switch(p){case"bestFit":{var K;const R=(K=O.filter(M=>{if(C){const L=bs(M.placement);return L===x||L==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(L=>L>0).reduce((L,X)=>L+X,0)]).sort((M,L)=>M[1]-L[1])[0])==null?void 0:K[0];R&&(W=R);break}case"initialPlacement":W=l;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function yb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function wb(e){return X4.some(t=>e[t]>=0)}const hL=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Ys(e,t);switch(r){case"referenceHidden":{const o=await tu(t,{...s,elementContext:"reference"}),a=yb(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:wb(a)}}}case"escaped":{const o=await tu(t,{...s,altBoundary:!0}),a=yb(o,n.floating);return{data:{escapedOffsets:a,escaped:wb(a)}}}default:return{}}}}},yk=new Set(["left","top"]);async function fL(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Js(n),l=Dl(n),c=bs(n)==="y",u=yk.has(a)?-1:1,d=o&&c?-1:1,f=Ys(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const pL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await fL(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},mL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...c}=Ys(e,t),u={x:n,y:r},d=await tu(t,c),f=bs(Js(s)),m=ry(f);let p=u[m],y=u[f];if(o){const w=m==="y"?"top":"left",v=m==="y"?"bottom":"right",x=p+d[w],b=p-d[v];p=zg(x,p,b)}if(a){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=y+d[w],b=y-d[v];y=zg(x,y,b)}const g=l.fn({...t,[m]:p,[f]:y});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[m]:o,[f]:a}}}}}},gL=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ys(e,t),d={x:n,y:r},f=bs(s),m=ry(f);let p=d[m],y=d[f];const g=Ys(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",_=o.reference[m]-o.floating[b]+w.mainAxis,N=o.reference[m]+o.reference[b]-w.mainAxis;p<_?p=_:p>N&&(p=N)}if(u){var v,x;const b=m==="y"?"width":"height",_=yk.has(Js(s)),N=o.reference[f]-o.floating[b]+(_&&((v=a.offset)==null?void 0:v[f])||0)+(_?0:w.crossAxis),C=o.reference[f]+o.reference[b]+(_?0:((x=a.offset)==null?void 0:x[f])||0)-(_?w.crossAxis:0);y<N?y=N:y>C&&(y=C)}return{[m]:p,[f]:y}}}},vL=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Ys(e,t),d=await tu(t,u),f=Js(s),m=Dl(s),p=bs(s)==="y",{width:y,height:g}=o.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,w=m==="end"?"top":"bottom");const x=g-d.top-d.bottom,b=y-d.left-d.right,_=Bi(g-d[w],x),N=Bi(y-d[v],b),C=!t.middlewareData.shift;let k=_,I=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=x),C&&!m){const O=dr(d.left,0),U=dr(d.right,0),P=dr(d.top,0),K=dr(d.bottom,0);p?I=y-2*(O!==0||U!==0?O+U:dr(d.left,d.right)):k=g-2*(P!==0||K!==0?P+K:dr(d.top,d.bottom))}await c({...t,availableWidth:I,availableHeight:k});const $=await a.getDimensions(l.floating);return y!==$.width||g!==$.height?{reset:{rects:!0}}:{}}}};function Pf(){return typeof window<"u"}function Ml(e){return wk(e)?(e.nodeName||"").toLowerCase():"#document"}function gr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ts(e){var t;return(t=(wk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wk(e){return Pf()?e instanceof Node||e instanceof gr(e).Node:!1}function ss(e){return Pf()?e instanceof Element||e instanceof gr(e).Element:!1}function Cs(e){return Pf()?e instanceof HTMLElement||e instanceof gr(e).HTMLElement:!1}function bb(e){return!Pf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gr(e).ShadowRoot}const xL=new Set(["inline","contents"]);function Au(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=is(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!xL.has(s)}const yL=new Set(["table","td","th"]);function wL(e){return yL.has(Ml(e))}const bL=[":popover-open",":modal"];function Rf(e){return bL.some(t=>{try{return e.matches(t)}catch{return!1}})}const _L=["transform","translate","scale","rotate","perspective"],jL=["transform","translate","scale","rotate","perspective","filter"],SL=["paint","layout","strict","content"];function oy(e){const t=ay(),n=ss(e)?is(e):e;return _L.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||jL.some(r=>(n.willChange||"").includes(r))||SL.some(r=>(n.contain||"").includes(r))}function NL(e){let t=zi(e);for(;Cs(t)&&!Sl(t);){if(oy(t))return t;if(Rf(t))return null;t=zi(t)}return null}function ay(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const kL=new Set(["html","body","#document"]);function Sl(e){return kL.has(Ml(e))}function is(e){return gr(e).getComputedStyle(e)}function Af(e){return ss(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zi(e){if(Ml(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bb(e)&&e.host||Ts(e);return bb(t)?t.host:t}function bk(e){const t=zi(e);return Sl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cs(t)&&Au(t)?t:bk(t)}function nu(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=bk(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=gr(s);if(o){const l=Wg(a);return t.concat(a,a.visualViewport||[],Au(s)?s:[],l&&n?nu(l):[])}return t.concat(s,nu(s,[],n))}function Wg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _k(e){const t=is(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Cs(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=$h(n)!==o||$h(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function ly(e){return ss(e)?e:e.contextElement}function Za(e){const t=ly(e);if(!Cs(t))return Ns(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=_k(t);let a=(o?$h(n.width):n.width)/r,l=(o?$h(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const CL=Ns(0);function jk(e){const t=gr(e);return!ay()||!t.visualViewport?CL:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function EL(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==gr(e)?!1:t}function zo(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=ly(e);let a=Ns(1);t&&(r?ss(r)&&(a=Za(r)):a=Za(e));const l=EL(o,n,r)?jk(o):Ns(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(o){const m=gr(o),p=r&&ss(r)?gr(r):r;let y=m,g=Wg(y);for(;g&&r&&p!==y;){const w=Za(g),v=g.getBoundingClientRect(),x=is(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*w.x,_=v.top+(g.clientTop+parseFloat(x.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,f*=w.y,c+=b,u+=_,y=gr(g),g=Wg(y)}}return Uh({width:d,height:f,x:c,y:u})}function cy(e,t){const n=Af(e).scrollLeft;return t?t.left+n:zo(Ts(e)).left+n}function Sk(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:cy(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function TL(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=Ts(r),l=t?Rf(t.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=Ns(1);const d=Ns(0),f=Cs(r);if((f||!f&&!o)&&((Ml(r)!=="body"||Au(a))&&(c=Af(r)),Cs(r))){const p=zo(r);u=Za(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const m=a&&!f&&!o?Sk(a,c,!0):Ns(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function PL(e){return Array.from(e.getClientRects())}function RL(e){const t=Ts(e),n=Af(e),r=e.ownerDocument.body,s=dr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=dr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+cy(e);const l=-n.scrollTop;return is(r).direction==="rtl"&&(a+=dr(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function AL(e,t){const n=gr(e),r=Ts(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=ay();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}const IL=new Set(["absolute","fixed"]);function OL(e,t){const n=zo(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Cs(e)?Za(e):Ns(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function _b(e,t,n){let r;if(t==="viewport")r=AL(e,n);else if(t==="document")r=RL(Ts(e));else if(ss(t))r=OL(t,n);else{const s=jk(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Uh(r)}function Nk(e,t){const n=zi(e);return n===t||!ss(n)||Sl(n)?!1:is(n).position==="fixed"||Nk(n,t)}function DL(e,t){const n=t.get(e);if(n)return n;let r=nu(e,[],!1).filter(l=>ss(l)&&Ml(l)!=="body"),s=null;const o=is(e).position==="fixed";let a=o?zi(e):e;for(;ss(a)&&!Sl(a);){const l=is(a),c=oy(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&IL.has(s.position)||Au(a)&&!c&&Nk(e,a))?r=r.filter(d=>d!==a):s=l,a=zi(a)}return t.set(e,r),r}function ML(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Rf(t)?[]:DL(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,d)=>{const f=_b(t,d,s);return u.top=dr(f.top,u.top),u.right=Bi(f.right,u.right),u.bottom=Bi(f.bottom,u.bottom),u.left=dr(f.left,u.left),u},_b(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function LL(e){const{width:t,height:n}=_k(e);return{width:t,height:n}}function $L(e,t,n){const r=Cs(t),s=Ts(t),o=n==="fixed",a=zo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Ns(0);function u(){c.x=cy(s)}if(r||!r&&!o)if((Ml(t)!=="body"||Au(s))&&(l=Af(t)),r){const p=zo(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&u();o&&!r&&s&&u();const d=s&&!r&&!o?Sk(s,l):Ns(0),f=a.left+l.scrollLeft-c.x-d.x,m=a.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:a.width,height:a.height}}function Xp(e){return is(e).position==="static"}function jb(e,t){if(!Cs(e)||is(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ts(e)===n&&(n=n.ownerDocument.body),n}function kk(e,t){const n=gr(e);if(Rf(e))return n;if(!Cs(e)){let s=zi(e);for(;s&&!Sl(s);){if(ss(s)&&!Xp(s))return s;s=zi(s)}return n}let r=jb(e,t);for(;r&&wL(r)&&Xp(r);)r=jb(r,t);return r&&Sl(r)&&Xp(r)&&!oy(r)?n:r||NL(e)||n}const FL=async function(e){const t=this.getOffsetParent||kk,n=this.getDimensions,r=await n(e.floating);return{reference:$L(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UL(e){return is(e).direction==="rtl"}const VL={convertOffsetParentRelativeRectToViewportRelativeRect:TL,getDocumentElement:Ts,getClippingRect:ML,getOffsetParent:kk,getElementRects:FL,getClientRects:PL,getDimensions:LL,getScale:Za,isElement:ss,isRTL:UL};function Ck(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function BL(e,t){let n=null,r;const s=Ts(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:p}=u;if(l||t(),!m||!p)return;const y=xd(f),g=xd(s.clientWidth-(d+m)),w=xd(s.clientHeight-(f+p)),v=xd(d),b={rootMargin:-y+"px "+-g+"px "+-w+"px "+-v+"px",threshold:dr(0,Bi(1,c))||1};let _=!0;function N(C){const k=C[0].intersectionRatio;if(k!==c){if(!_)return a();k?a(!1,k):r=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!Ck(u,e.getBoundingClientRect())&&a(),_=!1}try{n=new IntersectionObserver(N,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(e)}return a(!0),o}function zL(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ly(e),d=s||o?[...u?nu(u):[],...nu(t)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const f=u&&l?BL(u,n):null;let m=-1,p=null;a&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let y,g=c?zo(e):null;c&&w();function w(){const v=zo(e);g&&!Ck(g,v)&&n(),g=v,y=requestAnimationFrame(w)}return n(),()=>{var v;d.forEach(x=>{s&&x.removeEventListener("scroll",n),o&&x.removeEventListener("resize",n)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const qL=pL,WL=mL,KL=dL,HL=vL,GL=hL,Sb=uL,YL=gL,JL=(e,t,n)=>{const r=new Map,s={platform:VL,...n},o={...s.platform,_c:r};return cL(e,t,{...s,platform:o})};var QL=typeof document<"u",XL=function(){},nh=QL?h.useLayoutEffect:XL;function Vh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Vh(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Vh(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ek(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Nb(e,t){const n=Ek(e);return Math.round(t*n)/n}function Zp(e){const t=h.useRef(e);return nh(()=>{t.current=e}),t}function ZL(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=h.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=h.useState(r);Vh(m,r)||p(r);const[y,g]=h.useState(null),[w,v]=h.useState(null),x=h.useCallback(M=>{M!==C.current&&(C.current=M,g(M))},[]),b=h.useCallback(M=>{M!==k.current&&(k.current=M,v(M))},[]),_=o||y,N=a||w,C=h.useRef(null),k=h.useRef(null),I=h.useRef(d),$=c!=null,O=Zp(c),U=Zp(s),P=Zp(u),K=h.useCallback(()=>{if(!C.current||!k.current)return;const M={placement:t,strategy:n,middleware:m};U.current&&(M.platform=U.current),JL(C.current,k.current,M).then(L=>{const X={...L,isPositioned:P.current!==!1};D.current&&!Vh(I.current,X)&&(I.current=X,Jo.flushSync(()=>{f(X)}))})},[m,t,n,U,P]);nh(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const D=h.useRef(!1);nh(()=>(D.current=!0,()=>{D.current=!1}),[]),nh(()=>{if(_&&(C.current=_),N&&(k.current=N),_&&N){if(O.current)return O.current(_,N,K);K()}},[_,N,K,O,$]);const F=h.useMemo(()=>({reference:C,floating:k,setReference:x,setFloating:b}),[x,b]),W=h.useMemo(()=>({reference:_,floating:N}),[_,N]),R=h.useMemo(()=>{const M={position:n,left:0,top:0};if(!W.floating)return M;const L=Nb(W.floating,d.x),X=Nb(W.floating,d.y);return l?{...M,transform:"translate("+L+"px, "+X+"px)",...Ek(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:X}},[n,l,W.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:K,refs:F,elements:W,floatingStyles:R}),[d,K,F,W,R])}const e3=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Sb({element:r.current,padding:s}).fn(n):{}:r?Sb({element:r,padding:s}).fn(n):{}}}},t3=(e,t)=>({...qL(e),options:[e,t]}),n3=(e,t)=>({...WL(e),options:[e,t]}),r3=(e,t)=>({...YL(e),options:[e,t]}),s3=(e,t)=>({...KL(e),options:[e,t]}),i3=(e,t)=>({...HL(e),options:[e,t]}),o3=(e,t)=>({...GL(e),options:[e,t]}),a3=(e,t)=>({...e3(e),options:[e,t]});var l3="Arrow",Tk=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return i.jsx(we.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Tk.displayName=l3;var c3=Tk;function uy(e){const[t,n]=h.useState(void 0);return ln(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var dy="Popper",[Pk,Ji]=yn(dy),[u3,Rk]=Pk(dy),Ak=e=>{const{__scopePopper:t,children:n}=e,[r,s]=h.useState(null);return i.jsx(u3,{scope:t,anchor:r,onAnchorChange:s,children:n})};Ak.displayName=dy;var Ik="PopperAnchor",Ok=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=Rk(Ik,n),a=h.useRef(null),l=He(t,a);return h.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(we.div,{...s,ref:l})});Ok.displayName=Ik;var hy="PopperContent",[d3,h3]=Pk(hy),Dk=h.forwardRef((e,t)=>{var A,Y,ee,H,ge,ke;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:y,...g}=e,w=Rk(hy,n),[v,x]=h.useState(null),b=He(t,ye=>x(ye)),[_,N]=h.useState(null),C=uy(_),k=(C==null?void 0:C.width)??0,I=(C==null?void 0:C.height)??0,$=r+(o!=="center"?"-"+o:""),O=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},U=Array.isArray(u)?u:[u],P=U.length>0,K={padding:O,boundary:U.filter(p3),altBoundary:P},{refs:D,floatingStyles:F,placement:W,isPositioned:R,middlewareData:M}=ZL({strategy:"fixed",placement:$,whileElementsMounted:(...ye)=>zL(...ye,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[t3({mainAxis:s+I,alignmentAxis:a}),c&&n3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?r3():void 0,...K}),c&&s3({...K}),i3({...K,apply:({elements:ye,rects:Ae,availableWidth:Ge,availableHeight:bt})=>{const{width:Ke,height:pt}=Ae.reference,z=ye.floating.style;z.setProperty("--radix-popper-available-width",`${Ge}px`),z.setProperty("--radix-popper-available-height",`${bt}px`),z.setProperty("--radix-popper-anchor-width",`${Ke}px`),z.setProperty("--radix-popper-anchor-height",`${pt}px`)}}),_&&a3({element:_,padding:l}),m3({arrowWidth:k,arrowHeight:I}),m&&o3({strategy:"referenceHidden",...K})]}),[L,X]=$k(W),le=tr(y);ln(()=>{R&&(le==null||le())},[R,le]);const E=(A=M.arrow)==null?void 0:A.x,V=(Y=M.arrow)==null?void 0:Y.y,q=((ee=M.arrow)==null?void 0:ee.centerOffset)!==0,[J,oe]=h.useState();return ln(()=>{v&&oe(window.getComputedStyle(v).zIndex)},[v]),i.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:R?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(H=M.transformOrigin)==null?void 0:H.x,(ge=M.transformOrigin)==null?void 0:ge.y].join(" "),...((ke=M.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(d3,{scope:n,placedSide:L,onArrowChange:N,arrowX:E,arrowY:V,shouldHideArrow:q,children:i.jsx(we.div,{"data-side":L,"data-align":X,...g,ref:b,style:{...g.style,animation:R?void 0:"none"}})})})});Dk.displayName=hy;var Mk="PopperArrow",f3={top:"bottom",right:"left",bottom:"top",left:"right"},Lk=h.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=h3(Mk,r),a=f3[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(c3,{...s,ref:n,style:{...s.style,display:"block"}})})});Lk.displayName=Mk;function p3(e){return e!==null}var m3=e=>({name:"transformOrigin",options:e,fn(t){var w,v,x;const{placement:n,rects:r,middlewareData:s}=t,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=$k(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((v=s.arrow)==null?void 0:v.x)??0)+l/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let y="",g="";return u==="bottom"?(y=a?f:`${m}px`,g=`${-c}px`):u==="top"?(y=a?f:`${m}px`,g=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,g=a?f:`${p}px`):u==="left"&&(y=`${r.floating.width+c}px`,g=a?f:`${p}px`),{data:{x:y,y:g}}}});function $k(e){const[t,n="center"]=e.split("-");return[t,n]}var fy=Ak,Iu=Ok,If=Dk,Of=Lk,[Df,OH]=yn("Tooltip",[Ji]),py=Ji(),Fk="TooltipProvider",g3=700,kb="tooltip.open",[v3,Uk]=Df(Fk),Vk=e=>{const{__scopeTooltip:t,delayDuration:n=g3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,a=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(v3,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};Vk.displayName=Fk;var Bk="Tooltip",[DH,Mf]=Df(Bk),Kg="TooltipTrigger",x3=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Mf(Kg,n),o=Uk(Kg,n),a=py(n),l=h.useRef(null),c=He(t,l,s.onTriggerChange),u=h.useRef(!1),d=h.useRef(!1),f=h.useCallback(()=>u.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(Iu,{asChild:!0,...a,children:i.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:de(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:de(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:de(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:de(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:de(e.onBlur,s.onClose),onClick:de(e.onClick,s.onClose)})})});x3.displayName=Kg;var y3="TooltipPortal",[MH,w3]=Df(y3,{forceMount:void 0}),Nl="TooltipContent",zk=h.forwardRef((e,t)=>{const n=w3(Nl,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,a=Mf(Nl,e.__scopeTooltip);return i.jsx(Vn,{present:r||a.open,children:a.disableHoverableContent?i.jsx(qk,{side:s,...o,ref:t}):i.jsx(b3,{side:s,...o,ref:t})})}),b3=h.forwardRef((e,t)=>{const n=Mf(Nl,e.__scopeTooltip),r=Uk(Nl,e.__scopeTooltip),s=h.useRef(null),o=He(t,s),[a,l]=h.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:f}=r,m=h.useCallback(()=>{l(null),f(!1)},[f]),p=h.useCallback((y,g)=>{const w=y.currentTarget,v={x:y.clientX,y:y.clientY},x=k3(v,w.getBoundingClientRect()),b=C3(v,x),_=E3(g.getBoundingClientRect()),N=P3([...b,..._]);l(N),f(!0)},[f]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&d){const y=w=>p(w,d),g=w=>p(w,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",g)}}},[c,d,p,m]),h.useEffect(()=>{if(a){const y=g=>{const w=g.target,v={x:g.clientX,y:g.clientY},x=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),b=!T3(v,a);x?m():b&&(m(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,a,u,m]),i.jsx(qk,{...e,ref:o})}),[_3,j3]=Df(Bk,{isInside:!1}),S3=NN("TooltipContent"),qk=h.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=e,c=Mf(Nl,n),u=py(n),{onClose:d}=c;return h.useEffect(()=>(document.addEventListener(kb,d),()=>document.removeEventListener(kb,d)),[d]),h.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(If,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(S3,{children:r}),i.jsx(_3,{scope:n,isInside:!0,children:i.jsx(GD,{id:c.contentId,role:"tooltip",children:s||r})})]})})});zk.displayName=Nl;var Wk="TooltipArrow",N3=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=py(n);return j3(Wk,n).isInside?null:i.jsx(Of,{...s,...r,ref:t})});N3.displayName=Wk;function k3(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function C3(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function E3(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function T3(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o],c=t[a],u=l.x,d=l.y,f=c.x,m=c.y;d>r!=m>r&&n<(f-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function P3(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),R3(t)}function R3(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var A3=Vk,Kk=zk;const I3=A3,O3=h.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Kk,{ref:r,sideOffset:t,className:ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));O3.displayName=Kk.displayName;var Lf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$f=typeof window>"u"||"Deno"in globalThis;function Hr(){}function D3(e,t){return typeof e=="function"?e(t):e}function M3(e){return typeof e=="number"&&e>=0&&e!==1/0}function L3(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Hg(e,t){return typeof e=="function"?e(t):e}function $3(e,t){return typeof e=="function"?e(t):e}function Cb(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:a,stale:l}=e;if(a){if(r){if(t.queryHash!==my(a,t.options))return!1}else if(!su(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function Eb(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(ru(t.options.mutationKey)!==ru(o))return!1}else if(!su(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function my(e,t){return((t==null?void 0:t.queryKeyHashFn)||ru)(e)}function ru(e){return JSON.stringify(e,(t,n)=>Gg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function su(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>su(e[n],t[n])):!1}function Hk(e,t){if(e===t)return e;const n=Tb(e)&&Tb(t);if(n||Gg(e)&&Gg(t)){const r=n?e:Object.keys(e),s=r.length,o=n?t:Object.keys(t),a=o.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<a;d++){const f=n?d:o[d];(!n&&c.has(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=Hk(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return s===a&&u===s?e:l}return t}function Tb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gg(e){if(!Pb(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Pb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Pb(e){return Object.prototype.toString.call(e)==="[object Object]"}function F3(e){return new Promise(t=>{setTimeout(t,e)})}function U3(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Hk(e,t):t}function V3(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function B3(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var gy=Symbol();function Gk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===gy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Eo,xi,al,t1,z3=(t1=class extends Lf{constructor(){super();st(this,Eo);st(this,xi);st(this,al);We(this,al,t=>{if(!$f&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,xi)||this.setEventListener(Z(this,al))}onUnsubscribe(){var t;this.hasListeners()||((t=Z(this,xi))==null||t.call(this),We(this,xi,void 0))}setEventListener(t){var n;We(this,al,t),(n=Z(this,xi))==null||n.call(this),We(this,xi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Z(this,Eo)!==t&&(We(this,Eo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Z(this,Eo)=="boolean"?Z(this,Eo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Eo=new WeakMap,xi=new WeakMap,al=new WeakMap,t1),Yk=new z3,ll,yi,cl,n1,q3=(n1=class extends Lf{constructor(){super();st(this,ll,!0);st(this,yi);st(this,cl);We(this,cl,t=>{if(!$f&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Z(this,yi)||this.setEventListener(Z(this,cl))}onUnsubscribe(){var t;this.hasListeners()||((t=Z(this,yi))==null||t.call(this),We(this,yi,void 0))}setEventListener(t){var n;We(this,cl,t),(n=Z(this,yi))==null||n.call(this),We(this,yi,t(this.setOnline.bind(this)))}setOnline(t){Z(this,ll)!==t&&(We(this,ll,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Z(this,ll)}},ll=new WeakMap,yi=new WeakMap,cl=new WeakMap,n1),Bh=new q3;function W3(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function K3(e){return Math.min(1e3*2**e,3e4)}function Jk(e){return(e??"online")==="online"?Bh.isOnline():!0}var Qk=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function em(e){return e instanceof Qk}function Xk(e){let t=!1,n=0,r=!1,s;const o=W3(),a=g=>{var w;r||(m(new Qk(g)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Yk.isFocused()&&(e.networkMode==="always"||Bh.isOnline())&&e.canRun(),d=()=>Jk(e.networkMode)&&e.canRun(),f=g=>{var w;r||(r=!0,(w=e.onSuccess)==null||w.call(e,g),s==null||s(),o.resolve(g))},m=g=>{var w;r||(r=!0,(w=e.onError)==null||w.call(e,g),s==null||s(),o.reject(g))},p=()=>new Promise(g=>{var w;s=v=>{(r||u())&&g(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(r)return;let g;const w=n===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var C;if(r)return;const x=e.retry??($f?0:3),b=e.retryDelay??K3,_=typeof b=="function"?b(n,v):b,N=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(t||!N){m(v);return}n++,(C=e.onFail)==null||C.call(e,n,v),F3(_).then(()=>u()?void 0:p()).then(()=>{t?m(v):y()})})};return{promise:o,cancel:a,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():p().then(y),o)}}var H3=e=>setTimeout(e,0);function G3(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=H3;const o=l=>{t?e.push(l):s(()=>{n(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var On=G3(),To,r1,Zk=(r1=class{constructor(){st(this,To)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),M3(this.gcTime)&&We(this,To,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($f?1/0:5*60*1e3))}clearGcTimeout(){Z(this,To)&&(clearTimeout(Z(this,To)),We(this,To,void 0))}},To=new WeakMap,r1),ul,Po,Nr,Ro,Cn,ju,Ao,Yr,Is,s1,Y3=(s1=class extends Zk{constructor(t){super();st(this,Yr);st(this,ul);st(this,Po);st(this,Nr);st(this,Ro);st(this,Cn);st(this,ju);st(this,Ao);We(this,Ao,!1),We(this,ju,t.defaultOptions),this.setOptions(t.options),this.observers=[],We(this,Ro,t.client),We(this,Nr,Z(this,Ro).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,We(this,ul,Q3(this.options)),this.state=t.state??Z(this,ul),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Z(this,Cn))==null?void 0:t.promise}setOptions(t){this.options={...Z(this,ju),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,Nr).remove(this)}setData(t,n){const r=U3(this.state.data,t,this.options);return Sn(this,Yr,Is).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Sn(this,Yr,Is).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=Z(this,Cn))==null?void 0:r.promise;return(s=Z(this,Cn))==null||s.cancel(t),n?n.then(Hr).catch(Hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,ul))}isActive(){return this.observers.some(t=>$3(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Hg(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!L3(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Z(this,Cn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Z(this,Cn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Z(this,Nr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Z(this,Cn)&&(Z(this,Ao)?Z(this,Cn).cancel({revert:!0}):Z(this,Cn).cancelRetry()),this.scheduleGc()),Z(this,Nr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Sn(this,Yr,Is).call(this,{type:"invalidate"})}fetch(t,n){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Z(this,Cn))return Z(this,Cn).continueRetry(),Z(this,Cn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(We(this,Ao,!0),r.signal)})},o=()=>{const m=Gk(this.options,n),y=(()=>{const g={client:Z(this,Ro),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return We(this,Ao,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Z(this,Ro),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),We(this,Po,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Sn(this,Yr,Is).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var p,y,g,w;em(m)&&m.silent||Sn(this,Yr,Is).call(this,{type:"error",error:m}),em(m)||((y=(p=Z(this,Nr).config).onError)==null||y.call(p,m,this),(w=(g=Z(this,Nr).config).onSettled)==null||w.call(g,this.state.data,m,this)),this.scheduleGc()};return We(this,Cn,Xk({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,y,g,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){c(v);return}(y=(p=Z(this,Nr).config).onSuccess)==null||y.call(p,m,this),(w=(g=Z(this,Nr).config).onSettled)==null||w.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{Sn(this,Yr,Is).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Sn(this,Yr,Is).call(this,{type:"pause"})},onContinue:()=>{Sn(this,Yr,Is).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Z(this,Cn).start()}},ul=new WeakMap,Po=new WeakMap,Nr=new WeakMap,Ro=new WeakMap,Cn=new WeakMap,ju=new WeakMap,Ao=new WeakMap,Yr=new WeakSet,Is=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...J3(r.data,this.options),fetchMeta:t.meta??null};case"success":return We(this,Po,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return em(s)&&s.revert&&Z(this,Po)?{...Z(this,Po),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),On.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Z(this,Nr).notify({query:this,type:"updated",action:t})})},s1);function J3(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Q3(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gs,i1,X3=(i1=class extends Lf{constructor(t={}){super();st(this,gs);this.config=t,We(this,gs,new Map)}build(t,n,r){const s=n.queryKey,o=n.queryHash??my(s,n);let a=this.get(o);return a||(a=new Y3({client:t,queryKey:s,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){Z(this,gs).has(t.queryHash)||(Z(this,gs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Z(this,gs).get(t.queryHash);n&&(t.destroy(),n===t&&Z(this,gs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){On.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Z(this,gs).get(t)}getAll(){return[...Z(this,gs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Cb(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Cb(t,r)):n}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){On.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){On.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gs=new WeakMap,i1),vs,An,Io,xs,ai,o1,Z3=(o1=class extends Zk{constructor(t){super();st(this,xs);st(this,vs);st(this,An);st(this,Io);this.mutationId=t.mutationId,We(this,An,t.mutationCache),We(this,vs,[]),this.state=t.state||e$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Z(this,vs).includes(t)||(Z(this,vs).push(t),this.clearGcTimeout(),Z(this,An).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){We(this,vs,Z(this,vs).filter(n=>n!==t)),this.scheduleGc(),Z(this,An).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Z(this,vs).length||(this.state.status==="pending"?this.scheduleGc():Z(this,An).remove(this))}continue(){var t;return((t=Z(this,Io))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,c,u,d,f,m,p,y,g,w,v,x,b,_,N,C,k,I;const n=()=>{Sn(this,xs,ai).call(this,{type:"continue"})};We(this,Io,Xk({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:($,O)=>{Sn(this,xs,ai).call(this,{type:"failed",failureCount:$,error:O})},onPause:()=>{Sn(this,xs,ai).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,An).canRun(this)}));const r=this.state.status==="pending",s=!Z(this,Io).canStart();try{if(r)n();else{Sn(this,xs,ai).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=Z(this,An).config).onMutate)==null?void 0:a.call(o,t,this));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));O!==this.state.context&&Sn(this,xs,ai).call(this,{type:"pending",context:O,variables:t,isPaused:s})}const $=await Z(this,Io).start();return await((d=(u=Z(this,An).config).onSuccess)==null?void 0:d.call(u,$,t,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,$,t,this.state.context)),await((y=(p=Z(this,An).config).onSettled)==null?void 0:y.call(p,$,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,$,null,t,this.state.context)),Sn(this,xs,ai).call(this,{type:"success",data:$}),$}catch($){try{throw await((x=(v=Z(this,An).config).onError)==null?void 0:x.call(v,$,t,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,$,t,this.state.context)),await((C=(N=Z(this,An).config).onSettled)==null?void 0:C.call(N,void 0,$,this.state.variables,this.state.context,this)),await((I=(k=this.options).onSettled)==null?void 0:I.call(k,void 0,$,t,this.state.context)),$}finally{Sn(this,xs,ai).call(this,{type:"error",error:$})}}finally{Z(this,An).runNext(this)}}},vs=new WeakMap,An=new WeakMap,Io=new WeakMap,xs=new WeakSet,ai=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),On.batch(()=>{Z(this,vs).forEach(r=>{r.onMutationUpdate(t)}),Z(this,An).notify({mutation:this,type:"updated",action:t})})},o1);function e$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fs,Jr,Su,a1,t$=(a1=class extends Lf{constructor(t={}){super();st(this,Fs);st(this,Jr);st(this,Su);this.config=t,We(this,Fs,new Set),We(this,Jr,new Map),We(this,Su,0)}build(t,n,r){const s=new Z3({mutationCache:this,mutationId:++Qu(this,Su)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){Z(this,Fs).add(t);const n=yd(t);if(typeof n=="string"){const r=Z(this,Jr).get(n);r?r.push(t):Z(this,Jr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Z(this,Fs).delete(t)){const n=yd(t);if(typeof n=="string"){const r=Z(this,Jr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&Z(this,Jr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=yd(t);if(typeof n=="string"){const r=Z(this,Jr).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=yd(t);if(typeof n=="string"){const s=(r=Z(this,Jr).get(n))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){On.batch(()=>{Z(this,Fs).forEach(t=>{this.notify({type:"removed",mutation:t})}),Z(this,Fs).clear(),Z(this,Jr).clear()})}getAll(){return Array.from(Z(this,Fs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Eb(n,r))}findAll(t={}){return this.getAll().filter(n=>Eb(t,n))}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return On.batch(()=>Promise.all(t.map(n=>n.continue().catch(Hr))))}},Fs=new WeakMap,Jr=new WeakMap,Su=new WeakMap,a1);function yd(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Rb(e){return{onFetch:(t,n)=>{var d,f,m,p,y;const r=t.options,s=(m=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],a=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=Gk(t.options,t.fetchOptions),x=async(b,_,N)=>{if(g)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const k=(()=>{const U={client:t.client,queryKey:t.queryKey,pageParam:_,direction:N?"backward":"forward",meta:t.options.meta};return w(U),U})(),I=await v(k),{maxPages:$}=t.options,O=N?B3:V3;return{pages:O(b.pages,I,$),pageParams:O(b.pageParams,_,$)}};if(s&&o.length){const b=s==="backward",_=b?n$:Ab,N={pages:o,pageParams:a},C=_(r,N);l=await x(N,C,b)}else{const b=e??o.length;do{const _=c===0?a[0]??r.initialPageParam:Ab(r,l);if(c>0&&_==null)break;l=await x(l,_),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Ab(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function n$(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Mt,wi,bi,dl,hl,_i,fl,pl,l1,r$=(l1=class{constructor(e={}){st(this,Mt);st(this,wi);st(this,bi);st(this,dl);st(this,hl);st(this,_i);st(this,fl);st(this,pl);We(this,Mt,e.queryCache||new X3),We(this,wi,e.mutationCache||new t$),We(this,bi,e.defaultOptions||{}),We(this,dl,new Map),We(this,hl,new Map),We(this,_i,0)}mount(){Qu(this,_i)._++,Z(this,_i)===1&&(We(this,fl,Yk.subscribe(async e=>{e&&(await this.resumePausedMutations(),Z(this,Mt).onFocus())})),We(this,pl,Bh.subscribe(async e=>{e&&(await this.resumePausedMutations(),Z(this,Mt).onOnline())})))}unmount(){var e,t;Qu(this,_i)._--,Z(this,_i)===0&&((e=Z(this,fl))==null||e.call(this),We(this,fl,void 0),(t=Z(this,pl))==null||t.call(this),We(this,pl,void 0))}isFetching(e){return Z(this,Mt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Z(this,wi).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Z(this,Mt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Z(this,Mt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Hg(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Z(this,Mt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=Z(this,Mt).get(r.queryHash),o=s==null?void 0:s.state.data,a=D3(t,o);if(a!==void 0)return Z(this,Mt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return On.batch(()=>Z(this,Mt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Z(this,Mt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Z(this,Mt);On.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Z(this,Mt);return On.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=On.batch(()=>Z(this,Mt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Hr).catch(Hr)}invalidateQueries(e,t={}){return On.batch(()=>(Z(this,Mt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=On.batch(()=>Z(this,Mt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Hr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Hr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Z(this,Mt).build(this,t);return n.isStaleByTime(Hg(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Hr).catch(Hr)}fetchInfiniteQuery(e){return e.behavior=Rb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Hr).catch(Hr)}ensureInfiniteQueryData(e){return e.behavior=Rb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Bh.isOnline()?Z(this,wi).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,Mt)}getMutationCache(){return Z(this,wi)}getDefaultOptions(){return Z(this,bi)}setDefaultOptions(e){We(this,bi,e)}setQueryDefaults(e,t){Z(this,dl).set(ru(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Z(this,dl).values()],n={};return t.forEach(r=>{su(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Z(this,hl).set(ru(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Z(this,hl).values()],n={};return t.forEach(r=>{su(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Z(this,bi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=my(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===gy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Z(this,bi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Z(this,Mt).clear(),Z(this,wi).clear()}},Mt=new WeakMap,wi=new WeakMap,bi=new WeakMap,dl=new WeakMap,hl=new WeakMap,_i=new WeakMap,fl=new WeakMap,pl=new WeakMap,l1),s$=h.createContext(void 0),i$=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(s$.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iu.apply(this,arguments)}var Ni;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ni||(Ni={}));const Ib="popstate";function o$(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:a,hash:l}=r.location;return Yg("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zh(s)}return l$(t,n,null,e)}function Gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function a$(){return Math.random().toString(36).substr(2,8)}function Ob(e,t){return{usr:e.state,key:e.key,idx:t}}function Yg(e,t,n,r){return n===void 0&&(n=null),iu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ll(t):t,{state:n,key:t&&t.key||r||a$()})}function zh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ll(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function l$(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=Ni.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(iu({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=Ni.Pop;let w=d(),v=w==null?null:w-u;u=w,c&&c({action:l,location:g.location,delta:v})}function m(w,v){l=Ni.Push;let x=Yg(g.location,w,v);u=d()+1;let b=Ob(x,u),_=g.createHref(x);try{a.pushState(b,"",_)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(_)}o&&c&&c({action:l,location:g.location,delta:1})}function p(w,v){l=Ni.Replace;let x=Yg(g.location,w,v);u=d();let b=Ob(x,u),_=g.createHref(x);a.replaceState(b,"",_),o&&c&&c({action:l,location:g.location,delta:0})}function y(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:zh(w);return x=x.replace(/ $/,"%20"),Gt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return l},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ib,f),c=w,()=>{s.removeEventListener(Ib,f),c=null}},createHref(w){return t(s,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(w){return a.go(w)}};return g}var Db;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Db||(Db={}));function c$(e,t,n){return n===void 0&&(n="/"),u$(e,t,n,!1)}function u$(e,t,n,r){let s=typeof t=="string"?Ll(t):t,o=vy(s.pathname||"/",n);if(o==null)return null;let a=tC(e);d$(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=_$(o);l=w$(a[c],u,r)}return l}function tC(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Gt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Li([r,c.relativePath]),d=n.concat(c);o.children&&o.children.length>0&&(Gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),tC(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:x$(u,o.index),routesMeta:d})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of nC(o.path))s(o,a,c)}),t}function nC(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=nC(r.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function d$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:y$(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const h$=/^:[\w-]+$/,f$=3,p$=2,m$=1,g$=10,v$=-2,Mb=e=>e==="*";function x$(e,t){let n=e.split("/"),r=n.length;return n.some(Mb)&&(r+=v$),t&&(r+=p$),n.filter(s=>!Mb(s)).reduce((s,o)=>s+(h$.test(o)?f$:o===""?m$:g$),r)}function y$(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function w$(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Li([o,f.pathname]),pathnameBase:k$(Li([o,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(o=Li([o,f.pathnameBase]))}return a}function Lb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=b$(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=l[f]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[f];return p&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function b$(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),eC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function _$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return eC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function j$(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Ll(e):e;return{pathname:n?n.startsWith("/")?n:S$(n,t):t,search:C$(r),hash:E$(s)}}function S$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function tm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function N$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rC(e,t){let n=N$(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sC(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Ll(e):(s=iu({},e),Gt(!s.pathname||!s.pathname.includes("?"),tm("?","pathname","search",s)),Gt(!s.pathname||!s.pathname.includes("#"),tm("#","pathname","hash",s)),Gt(!s.search||!s.search.includes("#"),tm("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=j$(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Li=e=>e.join("/").replace(/\/\/+/g,"/"),k$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),C$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,E$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function T$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const iC=["post","put","patch","delete"];new Set(iC);const P$=["get",...iC];new Set(P$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ou.apply(this,arguments)}const xy=h.createContext(null),R$=h.createContext(null),Xo=h.createContext(null),Ff=h.createContext(null),Qi=h.createContext({outlet:null,matches:[],isDataRoute:!1}),oC=h.createContext(null);function A$(e,t){let{relative:n}=t===void 0?{}:t;Ou()||Gt(!1);let{basename:r,navigator:s}=h.useContext(Xo),{hash:o,pathname:a,search:l}=cC(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Li([r,a])),s.createHref({pathname:c,search:l,hash:o})}function Ou(){return h.useContext(Ff)!=null}function $l(){return Ou()||Gt(!1),h.useContext(Ff).location}function aC(e){h.useContext(Xo).static||h.useLayoutEffect(e)}function Xi(){let{isDataRoute:e}=h.useContext(Qi);return e?W$():I$()}function I$(){Ou()||Gt(!1);let e=h.useContext(xy),{basename:t,future:n,navigator:r}=h.useContext(Xo),{matches:s}=h.useContext(Qi),{pathname:o}=$l(),a=JSON.stringify(rC(s,n.v7_relativeSplatPath)),l=h.useRef(!1);return aC(()=>{l.current=!0}),h.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=sC(u,JSON.parse(a),o,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Li([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,a,o,e])}function lC(){let{matches:e}=h.useContext(Qi),t=e[e.length-1];return t?t.params:{}}function cC(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=h.useContext(Xo),{matches:s}=h.useContext(Qi),{pathname:o}=$l(),a=JSON.stringify(rC(s,r.v7_relativeSplatPath));return h.useMemo(()=>sC(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function O$(e,t){return D$(e,t)}function D$(e,t,n,r){Ou()||Gt(!1);let{navigator:s}=h.useContext(Xo),{matches:o}=h.useContext(Qi),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=$l(),d;if(t){var f;let w=typeof t=="string"?Ll(t):t;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||Gt(!1),d=w}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=c$(e,{pathname:p}),g=U$(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Li([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Li([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return t&&g?h.createElement(Ff.Provider,{value:{location:ou({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ni.Pop}},g):g}function M$(){let e=q$(),t=T$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:s},n):null,null)}const L$=h.createElement(M$,null);class $$ extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?h.createElement(Qi.Provider,{value:this.props.routeContext},h.createElement(oC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F$(e){let{routeContext:t,match:n,children:r}=e,s=h.useContext(xy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(Qi.Provider,{value:t},r)}function U$(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Gt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=n,y=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let p,y=!1,g=null,w=null;n&&(p=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||L$,c&&(u<0&&m===0?(y=!0,w=null):u===m&&(y=!0,w=f.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,m+1)),x=()=>{let b;return p?b=g:y?b=w:f.route.Component?b=h.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,h.createElement(F$,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?h.createElement($$,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var uC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uC||{}),qh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(qh||{});function V$(e){let t=h.useContext(xy);return t||Gt(!1),t}function B$(e){let t=h.useContext(R$);return t||Gt(!1),t}function z$(e){let t=h.useContext(Qi);return t||Gt(!1),t}function dC(e){let t=z$(),n=t.matches[t.matches.length-1];return n.route.id||Gt(!1),n.route.id}function q$(){var e;let t=h.useContext(oC),n=B$(qh.UseRouteError),r=dC(qh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function W$(){let{router:e}=V$(uC.UseNavigateStable),t=dC(qh.UseNavigateStable),n=h.useRef(!1);return aC(()=>{n.current=!0}),h.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ou({fromRouteId:t},o)))},[e,t])}function K$(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function lr(e){Gt(!1)}function H$(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ni.Pop,navigator:o,static:a=!1,future:l}=e;Ou()&&Gt(!1);let c=t.replace(/^\/*/,"/"),u=h.useMemo(()=>({basename:c,navigator:o,static:a,future:ou({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof r=="string"&&(r=Ll(r));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:y="default"}=r,g=h.useMemo(()=>{let w=vy(d,c);return w==null?null:{location:{pathname:w,search:f,hash:m,state:p,key:y},navigationType:s}},[c,d,f,m,p,y,s]);return g==null?null:h.createElement(Xo.Provider,{value:u},h.createElement(Ff.Provider,{children:n,value:g}))}function G$(e){let{children:t,location:n}=e;return O$(Jg(t),n)}new Promise(()=>{});function Jg(e,t){t===void 0&&(t=[]);let n=[];return h.Children.forEach(e,(r,s)=>{if(!h.isValidElement(r))return;let o=[...t,s];if(r.type===h.Fragment){n.push.apply(n,Jg(r.props.children,o));return}r.type!==lr&&Gt(!1),!r.props.index||!r.props.children||Gt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Jg(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qg.apply(this,arguments)}function Y$(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function J$(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Q$(e,t){return e.button===0&&(!t||t==="_self")&&!J$(e)}const X$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Z$="6";try{window.__reactRouterVersion=Z$}catch{}const e5="startTransition",$b=rx[e5];function t5(e){let{basename:t,children:n,future:r,window:s}=e,o=h.useRef();o.current==null&&(o.current=o$({window:s,v5Compat:!0}));let a=o.current,[l,c]=h.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=h.useCallback(f=>{u&&$b?$b(()=>c(f)):c(f)},[c,u]);return h.useLayoutEffect(()=>a.listen(d),[a,d]),h.useEffect(()=>K$(r),[r]),h.createElement(H$,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const n5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=h.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=Y$(t,X$),{basename:p}=h.useContext(Xo),y,g=!1;if(typeof u=="string"&&r5.test(u)&&(y=u,n5))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),N=vy(_.pathname,p);_.origin===b.origin&&N!=null?u=N+_.search+_.hash:g=!0}catch{}let w=A$(u,{relative:s}),v=s5(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function x(b){r&&r(b),b.defaultPrevented||v(b)}return h.createElement("a",Qg({},m,{href:y||w,onClick:g||o?r:x,ref:n,target:c}))});var Fb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fb||(Fb={}));var Ub;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ub||(Ub={}));function s5(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:l}=t===void 0?{}:t,c=Xi(),u=$l(),d=cC(e,{relative:a});return h.useCallback(f=>{if(Q$(f,n)){f.preventDefault();let m=r!==void 0?r:zh(u)===zh(d);c(e,{replace:m,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,o,a,l])}var ws=function(){return ws=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ws.apply(this,arguments)};function Fl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function i5(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function o5(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}const a5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class yy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class l5 extends yy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Vb extends yy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bb extends yy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xg||(Xg={}));class c5{constructor(t,{headers:n={},customFetch:r,region:s=Xg.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=a5(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return i5(this,arguments,void 0,function*(n,r={}){var s;let o,a;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=r;let m={},{region:p}=r;p||(p=this.region);const y=new URL(`${this.url}/${n}`);p&&p!=="any"&&(m["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(m["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(m["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let w=d;f&&(a=new AbortController,o=setTimeout(()=>a.abort(),f),d?(w=a.signal,d.addEventListener("abort",()=>a.abort())):w=a.signal);const v=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g,signal:w}).catch(N=>{throw new l5(N)}),x=v.headers.get("x-relay-error");if(x&&x==="true")throw new Vb(v);if(!v.ok)throw new Bb(v);let b=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield v.json():b==="application/octet-stream"||b==="application/pdf"?_=yield v.blob():b==="text/event-stream"?_=v:b==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof Bb||l instanceof Vb?l.context:void 0}}finally{o&&clearTimeout(o)}})}}var u5=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},d5=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,l=null,c=null,u=o.status,d=o.statusText;if(o.ok){var f,m;if(n.method!=="HEAD"){var p;const v=await o.text();v===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=v:l=JSON.parse(v))}const g=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),w=(m=o.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");g&&w&&w.length>1&&(c=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const g=await o.text();try{a=JSON.parse(g),Array.isArray(a)&&o.status===404&&(l=[],a=null,u=200,d="OK")}catch{o.status===404&&g===""?(u=204,d="No Content"):a={message:g}}if(a&&n.isMaybeSingle&&(!(a==null||(y=a.details)===null||y===void 0)&&y.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&n.shouldThrowOnError)throw new u5(a)}return{error:a,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(o=>{var a;let l="",c="",u="";const d=o==null?void 0:o.cause;if(d){var f,m,p,y;const v=(f=d==null?void 0:d.message)!==null&&f!==void 0?f:"",x=(m=d==null?void 0:d.code)!==null&&m!==void 0?m:"";l=`${(p=o==null?void 0:o.name)!==null&&p!==void 0?p:"FetchError"}: ${o==null?void 0:o.message}`,l+=`

Caused by: ${(y=d==null?void 0:d.name)!==null&&y!==void 0?y:"Error"}: ${v}`,x&&(l+=` (${x})`),d!=null&&d.stack&&(l+=`
${d.stack}`)}else{var g;l=(g=o==null?void 0:o.stack)!==null&&g!==void 0?g:""}const w=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(u="",c="Request was aborted (timeout or manual cancellation)",w>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${w} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",c="HTTP headers exceeded server limits (typically 16KB)",w>this.urlLengthLimit&&(c+=`. Your request URL is ${w} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:l,hint:c,code:u},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},h5=class extends d5{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const zb=new RegExp("[,()]");var ga=class extends h5{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&zb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&zb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},f5=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",a),r&&c.append("Prefer",`count=${r}`),new ga({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:o,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),n||a.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);o.searchParams.set("columns",c.join(","))}}return new ga({method:s,url:o,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var o;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new ga({method:a,url:l,headers:c,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new ga({method:r,url:s,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new ga({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function au(e){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(e)}function p5(e,t){if(au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m5(e){var t=p5(e,"string");return au(t)=="symbol"?t:t+""}function g5(e,t,n){return(t=m5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function wd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qb(Object(n),!0).forEach(function(r){g5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var v5=class hC{constructor(t,{headers:n={},schema:r,fetch:s,timeout:o,urlLengthLimit:a=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=a;const l=s??globalThis.fetch;o!==void 0&&o>0?this.fetch=(c,u)=>{const d=new AbortController,f=setTimeout(()=>d.abort(),o),m=u==null?void 0:u.signal;if(m){if(m.aborted)return clearTimeout(f),l(c,u);const p=()=>{clearTimeout(f),d.abort()};return m.addEventListener("abort",p,{once:!0}),l(c,wd(wd({},u),{},{signal:d.signal})).finally(()=>{clearTimeout(f),m.removeEventListener("abort",p)})}return l(c,wd(wd({},u),{},{signal:d.signal})).finally(()=>clearTimeout(f))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new f5(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new hC(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:s=!1,count:o}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),f=r&&Object.values(n).some(d);f?(l="POST",u=n):r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([p,y])=>y!==void 0).map(([p,y])=>[p,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([p,y])=>{c.searchParams.append(p,y)})):(l="POST",u=n);const m=new Headers(this.headers);return f?m.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&m.set("Prefer",`count=${o}`),new ga({method:l,url:c,headers:m,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};class x5{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const y5="2.95.3",w5=`realtime-js/${y5}`,b5="1.0.0",fC="2.0.0",Wb=fC,Zg=1e4,_5=1e3,j5=100;var pi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(pi||(pi={}));var Xt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xt||(Xt={}));var Xr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xr||(Xr={}));var ev;(function(e){e.websocket="websocket"})(ev||(ev={}));var go;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(go||(go={}));class S5{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var s,o;const a=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(p),g=0;y.setUint8(g++,this.KINDS.userBroadcastPush),y.setUint8(g++,c.length),y.setUint8(g++,l.length),y.setUint8(g++,a.length),y.setUint8(g++,u.length),y.setUint8(g++,f.length),y.setUint8(g++,n),Array.from(c,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(l,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(a,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(f,v=>y.setUint8(g++,v.charCodeAt(0)));var w=new Uint8Array(p.byteLength+r.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(r),p.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,o,a,l,c]=r;return n({join_ref:s,ref:o,topic:a,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+o));c=c+o;const f=r.decode(t.slice(c,c+a));c=c+a;const m=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,y={type:this.BROADCAST_EVENT,event:d,payload:p};return a>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class pC{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xt||(xt={}));const Kb=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=N5(a,e,t,s),o),{}):{}},N5=(e,t,n,r)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,a=n[e];return o&&!r.includes(o)?mC(o,a):tv(a)},mC=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return T5(t,n)}switch(e){case xt.bool:return k5(t);case xt.float4:case xt.float8:case xt.int2:case xt.int4:case xt.int8:case xt.numeric:case xt.oid:return C5(t);case xt.json:case xt.jsonb:return E5(t);case xt.timestamp:return P5(t);case xt.abstime:case xt.date:case xt.daterange:case xt.int4range:case xt.int8range:case xt.money:case xt.reltime:case xt.text:case xt.time:case xt.timestamptz:case xt.timetz:case xt.tsrange:case xt.tstzrange:return tv(t);default:return tv(t)}},tv=e=>e,k5=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},C5=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},E5=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},T5=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>mC(t,l))}return e},P5=e=>typeof e=="string"?e.replace(" ","T"):e,gC=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class nm{constructor(t,n,r={},s=Zg){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Hb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Hb||(Hb={}));class Ac{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ac.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=Ac.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ac.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const o=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(o,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=o[u];if(f){const m=d.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),y=d.filter(w=>p.indexOf(w.presence_ref)<0),g=f.filter(w=>m.indexOf(w.presence_ref)<0);y.length>0&&(l[u]=y),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),m=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Gb||(Gb={}));var Ic;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ic||(Ic={}));var Ms;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ms||(Ms={}));class Fa{constructor(t,n={config:{}},r){var s,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new nm(this,Xr.join,this.params,this.timeout),this.rejoinTimer=new pC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Ac(this),this.broadcastEndpointURL=gC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Xt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ic.PRESENCE]&&this.bindings[Ic.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},m={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Ms.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Ms.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Ms.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let x=0;x<w;x++){const b=g[x],{filter:{event:_,schema:N,table:C,filter:k}}=b,I=p&&p[x];if(I&&I.event===_&&Fa.isFilterValueEqual(I.schema,N)&&Fa.isFilterValueEqual(I.table,C)&&Fa.isFilterValueEqual(I.filter,k))v.push(Object.assign(Object.assign({},b),{id:I.id}));else{this.unsubscribe(),this.state=Xt.errored,t==null||t(Ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Ms.SUBSCRIBED);return}}).receive("error",p=>{this.state=Xt.errored,t==null||t(Ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Xt.joined&&t===Ic.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new nm(this,Xr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new nm(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>j5){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,o;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Xr;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,g,w;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(p=>p.callback(m,r)):(o=this.bindings[a])===null||o===void 0||o.filter(p=>{var y,g,w,v,x,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const _=p.id,N=(y=p.filter)===null||y===void 0?void 0:y.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(x=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:g,table:w,commit_timestamp:v,type:x,errors:b}=y;m=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}p.callback(m,r)})}_isClosed(){return this.state===Xt.closed}_isJoined(){return this.state===Xt.joined}_isJoining(){return this.state===Xt.joining}_isLeaving(){return this.state===Xt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Fa.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xr.close,{},t)}_onError(t){this._on(Xr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Kb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Kb(t.columns,t.old_record)),n}}const rm=()=>{},bd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},R5=[1e3,2e3,5e3,1e4],A5=1e4,I5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class O5{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zg,this.transport=null,this.heartbeatIntervalMs=bd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rm,this.ref=0,this.reconnectTimer=null,this.vsn=Wb,this.logger=rm,this.conn=null,this.sendBuffer=[],this.serializer=new S5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ev.websocket}`,this.httpEndpoint=gC(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=x5.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return n==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pi.connecting:return go.Connecting;case pi.open:return go.Open;case pi.closing:return go.Closing;default:return go.Closed}}isConnected(){return this.connectionState()===go.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Fa(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:s,ref:o}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(_5,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},bd.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:o,ref:a}=n,l=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===pi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===pi.open||this.conn.readyState===pi.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([I5],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:w5};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Xr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new pC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,o,a,l,c,u,d,f,m,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Zg,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:bd.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:rm,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Wb,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>R5[y-1]||A5,this.vsn){case b5:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,g)=>g(JSON.stringify(y)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(y,g)=>g(JSON.parse(y));break;case fC:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var lu=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function D5(e,t,n){const r=new URL(t,e);if(n)for(const[s,o]of Object.entries(n))o!==void 0&&r.searchParams.set(s,o);return r.toString()}async function M5(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function L5(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:o,headers:a}){const l=D5(e.baseUrl,r,s),c=await M5(e.auth),u=await t(l,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...c,...a},body:o?JSON.stringify(o):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),m=f&&d?JSON.parse(d):d;if(!u.ok){const p=f?m:void 0,y=p==null?void 0:p.error;throw new lu((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:p})}return{status:u.status,headers:u.headers,data:m}}}}function _d(e){return e.join("")}var $5=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:_d(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_d(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_d(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_d(e.namespace)}`}),!0}catch(t){if(t instanceof lu&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof lu&&n.status===409)return;throw n}}};function aa(e){return e.join("")}var F5=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aa(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aa(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof lu&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof lu&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},U5=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=L5({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new $5(this.client,t),this.tableOps=new F5(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Uf=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Vf(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var jd=class extends Uf{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vC=class extends Uf{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const V5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),B5=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},nv=e=>{if(Array.isArray(e))return e.map(n=>nv(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=nv(r)}),t},z5=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function q5(e,t){if(cu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W5(e){var t=q5(e,"string");return cu(t)=="symbol"?t:t+""}function K5(e,t,n){return(t=W5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yb(Object(n),!0).forEach(function(r){K5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Jb=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},H5=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e,o=s.status||500;if(typeof s.json=="function")s.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||o+"";t(new jd(Jb(a),o,l,r))}).catch(()=>{if(r==="vectors"){const a=o+"";t(new jd(s.statusText||`HTTP ${o} error`,o,a,r))}else{const a=o+"";t(new jd(s.statusText||`HTTP ${o} error`,o,a,r))}});else{const a=o+"";t(new jd(s.statusText||`HTTP ${o} error`,o,a,r))}}else t(new vC(Jb(e),e,r))},G5=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?Me(Me({},s),n):(B5(r)?(s.headers=Me({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Me(Me({},s),n))};async function cc(e,t,n,r,s,o,a){return new Promise((l,c)=>{e(n,G5(t,r,s,o)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(a==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>H5(u,c,r,a))})}function xC(e="storage"){return{get:async(t,n,r,s)=>cc(t,"GET",n,r,s,void 0,e),post:async(t,n,r,s,o)=>cc(t,"POST",n,s,o,r,e),put:async(t,n,r,s,o)=>cc(t,"PUT",n,s,o,r,e),head:async(t,n,r,s)=>cc(t,"HEAD",n,Me(Me({},r),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,n,r,s,o)=>cc(t,"DELETE",n,s,o,r,e)}}const Y5=xC("storage"),{get:uu,post:Gr,put:rv,head:J5,remove:wy}=Y5,hr=xC("vectors");var Ul=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=V5(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Vf(n))return{data:null,error:n};throw n}}},Q5=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Vf(t))return{data:null,error:t};throw t}}};let yC;yC=Symbol.toStringTag;var X5=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[yC]="BlobDownloadBuilder",this.promise=null}asStream(){return new Q5(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Vf(t))return{data:null,error:t};throw t}}};const Z5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var eF=class extends Ul{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var s=this;return s.handleOperation(async()=>{let o;const a=Me(Me({},Qb),r);let l=Me(Me({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",s.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),c&&!o.has("metadata")&&o.append("metadata",s.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(l=Me(Me({},l),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),f=await(e=="PUT"?rv:Gr)(s.fetch,`${s.url}/object/${d}`,o,Me({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const o=s._removeEmptyFolders(e),a=s._getFinalPath(o),l=new URL(s.url+`/object/upload/sign/${a}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const u=Me({upsert:Qb.upsert},r),d=Me(Me({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:o,fullPath:(await rv(s.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const s=Me({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=await Gr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(n.url+o.url),l=a.searchParams.get("token");if(!l)throw new Uf("No token returned by API");return{signedUrl:a.toString(),path:e,token:l}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Gr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Gr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),o=await Gr(r.fetch,`${r.url}/object/sign/${s}`,Me({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const s=await Gr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(a=>Me(Me({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null}))})}download(e,t,n){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>uu(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0},n);return new X5(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>nv(await uu(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await J5(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Vf(r)&&r instanceof vC){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await wy(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const s=Me(Me(Me({},Z5),t),{},{prefix:e||""});return await Gr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=Me({},e);return await Gr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const tF="2.95.3",Du={"X-Client-Info":`storage-js/${tF}`};var nF=class extends Ul{constructor(e,t={},n,r){const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const o=s.href.replace(/\/$/,""),a=Me(Me({},Du),t);super(o,a,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await uu(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await uu(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Gr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await rv(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Gr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await wy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},rF=class extends Ul{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Me(Me({},Du),t);super(r,s,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Gr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await uu(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await wy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!z5(e))throw new Uf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new U5({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,o){const a=s[o];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},sF=class extends Ul{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Me(Me({},Du),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await hr.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await hr.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},iF=class extends Ul{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Me(Me({},Du),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},oF=class extends Ul{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Me(Me({},Du),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await hr.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},aF=class extends oF{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new lF(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},lF=class extends sF{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new cF(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},cF=class extends iF{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},uF=class extends nF{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new eF(this.url,this.headers,e,this.fetch)}get vectors(){return new aF(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rF(this.url+"/iceberg",this.headers,this.fetch)}};const wC="2.95.3",va=30*1e3,sv=3,sm=sv*va,dF="http://localhost:9999",hF="supabase.auth.token",fF={"X-Client-Info":`gotrue-js/${wC}`},iv="X-Supabase-Api-Version",bC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mF=10*60*1e3;class du extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class gF extends du{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function vF(e){return Ce(e)&&e.name==="AuthApiError"}class vo extends du{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Zs extends du{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class cr extends Zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function im(e){return Ce(e)&&e.name==="AuthSessionMissingError"}class la extends Zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sd extends Zs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nd extends Zs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xF(e){return Ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class Xb extends Zs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yF extends Zs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ov extends Zs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function om(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}class Zb extends Zs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class av extends Zs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),e_=` 	
\r=`.split(""),wF=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<e_.length;t+=1)e[e_[t].charCodeAt(0)]=-2;for(let t=0;t<Wh.length;t+=1)e[Wh[t].charCodeAt(0)]=t;return e})();function t_(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wh[r]),t.queuedBits-=6}}function _C(e,t,n){const r=wF[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function n_(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{jF(a,r,n)};for(let a=0;a<e.length;a+=1)_C(e.charCodeAt(a),s,o);return t.join("")}function bF(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _F(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}bF(r,t)}}function jF(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function el(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)_C(e.charCodeAt(s),n,r);return new Uint8Array(t)}function SF(e){const t=[];return _F(e,n=>t.push(n)),new Uint8Array(t)}function _o(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>t_(s,n,r)),t_(null,n,r),t.join("")}function NF(e){return Math.round(Date.now()/1e3)+e}function kF(){return Symbol("auth-callback")}const pn=()=>typeof window<"u"&&typeof document<"u",ao={tested:!1,writable:!1},jC=()=>{if(!pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ao.tested)return ao.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ao.tested=!0,ao.writable=!0}catch{ao.tested=!0,ao.writable=!1}return ao.writable};function CF(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const SC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),EF=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",xa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},lo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},fn=async(e,t)=>{await e.removeItem(t)};class Bf{constructor(){this.promise=new Bf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Bf.promiseConstructor=Promise;function kd(e){const t=e.split(".");if(t.length!==3)throw new av("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!pF.test(t[r]))throw new av("JWT not in base64url format");return{header:JSON.parse(n_(t[0])),payload:JSON.parse(n_(t[1])),signature:el(t[2]),raw:{header:t[0],payload:t[1]}}}async function TF(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function PF(e,t){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){r(a);return}}catch(a){if(!t(o,a)){s(a);return}}})()})}function RF(e){return("0"+e.toString(16)).substr(-2)}function AF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,RF).join("")}async function IF(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function OF(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await IF(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ca(e,t,n=!1){const r=AF();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await xa(e,`${t}-code-verifier`,s);const o=await OF(r);return[o,r===o?"plain":"s256"]}const DF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MF(e){const t=e.headers.get(iv);if(!t||!t.match(DF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function LF(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $F(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ua(e){if(!FF.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function am(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function UF(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function r_(e){return JSON.parse(JSON.stringify(e))}const fo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),VF=[502,503,504];async function s_(e){var t;if(!EF(e))throw new ov(fo(e),0);if(VF.includes(e.status))throw new ov(fo(e),e.status);let n;try{n=await e.json()}catch(o){throw new vo(fo(o),o)}let r;const s=MF(e);if(s&&s.getTime()>=bC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Zb(fo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new cr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Zb(fo(n),e.status,n.weak_password.reasons);throw new gF(fo(n),e.status||500,r)}const BF=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function De(e,t,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[iv]||(o[iv]=bC["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await zF(e,t,n+l,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function zF(e,t,n,r,s,o){const a=BF(t,r,s,o);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new ov(fo(c),0)}if(l.ok||await s_(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await s_(c)}}function zr(e){var t;let n=null;KF(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=NF(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function i_(e){const t=zr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function vi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function qF(e){return{data:e,error:null}}function WF(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=e,a=Fl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function o_(e){return e}function KF(e){return e.access_token&&e.refresh_token&&e.expires_in}const lm=["global","local","others"];class HF{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=SC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=lm[0]){if(lm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lm.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:vi})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Fl(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:WF,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:vi})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:o_});if(d.error)throw d.error;const f=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ua(t);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:vi})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ua(t);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:vi})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ua(t);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:vi})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ua(t.userId);try{const{data:n,error:r}=await De(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ua(t.userId),ua(t.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await De(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:o_});if(d.error)throw d.error;const f=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ce(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await De(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await De(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await De(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}function a_(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const da={debug:!!(globalThis&&jC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class GF extends NC{}async function YF(e,t,n){da.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),da.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){da.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{da.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw da.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new GF(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(da.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function JF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function QF(e){return parseInt(e,16)}function XF(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function ZF(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=kC(e.address),y=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${p}

${g}`;let v=`URI: ${f}
Version: ${m}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}v+=x}return`${w}
${v}`}class qt extends Error{constructor({message:t,code:n,cause:r,name:s}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Kh extends qt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function eU({error:e,options:t}){var n,r,s;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new qt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new qt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new qt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new qt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new qt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new qt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new qt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(CC(a)){if(o.rp.id!==a)return new qt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new qt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function tU({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new qt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(CC(r)){if(n.rpId!==r)return new qt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class nU{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const rU=new nU;function sU(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Fl(e,["challenge","user","excludeCredentials"]),o=el(t).buffer,a=Object.assign(Object.assign({},n),{id:el(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:el(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function iU(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Fl(e,["challenge","allowCredentials"]),s=el(t).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},l),{id:el(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function oU(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:_o(new Uint8Array(e.response.attestationObject)),clientDataJSON:_o(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function aU(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:_o(new Uint8Array(s.authenticatorData)),clientDataJSON:_o(new Uint8Array(s.clientDataJSON)),signature:_o(new Uint8Array(s.signature)),userHandle:s.userHandle?_o(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function CC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function l_(){var e,t;return!!(pn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function lU(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kh("Browser returned unexpected credential type",t)}:{data:null,error:new Kh("Empty credential response",t)}}catch(t){return{data:null,error:eU({error:t,options:e})}}}async function cU(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kh("Browser returned unexpected credential type",t)}:{data:null,error:new Kh("Empty credential response",t)}}catch(t){return{data:null,error:tU({error:t,options:e})}}}const uU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},dU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(t(a)){const l=r[o];t(l)?r[o]=Hh(l,a):r[o]=Hh(a)}else r[o]=a}return r}function hU(e,t){return Hh(uU,e,t||{})}function fU(e,t){return Hh(dU,e,t||{})}class pU{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},o){var a;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:c};const u=s??rU.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const f=r;if(f)d.name=`${d.id}:${f}`;else{const p=(await this.client.getUser()).data.user,y=((a=p==null?void 0:p.user_metadata)===null||a===void 0?void 0:a.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";d.name=`${d.id}:${y}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=hU(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:f,error:m}=await lU({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}case"request":{const d=fU(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:f,error:m}=await cU(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}}}catch(l){return Ce(l)?{data:null,error:l}:{data:null,error:new vo("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new du("rpId is required for WebAuthn authentication")};try{if(!l_())return{data:null,error:new vo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Ce(a)?{data:null,error:a}:{data:null,error:new vo("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new du("rpId is required for WebAuthn registration")};try{if(!l_())return{data:null,error:new vo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return Ce(a)?{data:null,error:a}:{data:null,error:new vo("Unexpected error in register",a)}}}}JF();const mU={url:dF,storageKey:hF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function c_(e,t,n){return await n()}const ha={};class hu{get jwks(){var t,n;return(n=(t=ha[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ha[this.storageKey]=Object.assign(Object.assign({},ha[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ha[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ha[this.storageKey]=Object.assign(Object.assign({},ha[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},mU),t);if(this.storageKey=o.storageKey,this.instanceID=(n=hu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,hu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&pn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new HF({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=SC(o.fetch),this.lock=o.lock||c_,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&pn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=YF:this.lock=c_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new pU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:jC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=a_(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=a_(this.memoryStorage)),pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wC}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(pn()&&(n=CF(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),pn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),xF(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ce(n)?this._returnResult({error:n}):this._returnResult({error:new vo("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const o=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:zr}),{data:a,error:l}=o;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(Ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,r,s;try{let o;if("email"in t){const{email:d,password:f,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await ca(this.storage,this.storageKey)),o=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},xform:zr})}else if("phone"in t){const{phone:d,password:f,options:m}=t;o=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:zr})}else throw new Sd("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return await fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:l}=t;n=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:i_})}else if("phone"in t){const{phone:o,password:a,options:l}=t;n=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:i_})}else throw new Sd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const o=new la;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,o,a,l,c,u,d,f,m;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:g,wallet:w,statement:v,options:x}=t;let b;if(pn())if(typeof w=="object")b=w;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")b=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const _=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),N=await b.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=kC(N[0]);let k=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const $=await b.request({method:"eth_chainId"});k=QF($)}const I={domain:_.host,address:C,statement:v,uri:_.href,version:"1",chainId:k,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=ZF(I),y=await b.request({method:"personal_sign",params:[XF(p),C]})}try{const{data:g,error:w}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:zr});if(w)throw w;if(!g||!g.session||!g.user){const v=new la;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(Ce(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,s,o,a,l,c,u,d,f,m,p;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:w,wallet:v,statement:x,options:b}=t;let _;if(pn())if(typeof v=="object")_=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))_=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const N=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const C=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),x?{statement:x}:null));let k;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")k=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)k=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const C=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:w,error:v}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:_o(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:zr});if(v)throw v;if(!w||!w.session||!w.user){const x=new la;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:v})}catch(w){if(Ce(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const n=await lo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new yF;const{data:o,error:a}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:zr});if(await fn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const l=new la;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ce(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:o,nonce:a}=t,l=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:zr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new la;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,o,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ca(this.storage,this.storageKey));const{error:f}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Sd("You must provide either an email or phone number.")}catch(l){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,o;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:zr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,o,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ca(this.storage,this.storageKey));const u=await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:qF});return!((o=u.data)===null||o===void 0)&&o.url&&pn()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new cr;const{error:s}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:o}=t,{error:a}=await De(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:s,options:o}=t,{data:a,error:l}=await De(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Sd("You must provide either an email or phone number and a type")}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await lo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<sm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await lo(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=am()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=UF(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:vi}):await this._useSession(async n=>{var r,s,o;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cr}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:vi})})}catch(n){if(Ce(n))return im(n)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new cr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ca(this.storage,this.storageKey));const{data:u,error:d}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:vi});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ce(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new cr;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:a}=kd(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new cr;const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!pn())throw new Nd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Xb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Xb("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!a||!u)throw new Nd("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const p=m-d;p*1e3<=va&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const y=m-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,d);const{data:g,error:w}=await this._getUser(o);if(w)throw w;const v={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:m,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await lo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o&&!im(o))return this._returnResult({error:o});const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(vF(l)&&(l.status===404||l.status===401||l.status===403)||im(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=kF(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ca(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ce(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var a,l,c,u,d;const{data:f,error:m}=o;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return pn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=t,f=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zr}),{data:m,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new la}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:p}))}catch(s){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)throw a;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await PF(async s=>(s>0&&await TF(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zr})),(s,o)=>{const a=200*Math.pow(2,s);return o&&om(o)&&Date.now()+a-r<va})}catch(r){if(this._debug(n,"error",r),Ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),pn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await lo(this.storage,this.storageKey);if(s&&this.userStorage){let a=await lo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await xa(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:am()}else if(s&&!s.user&&!s.user){const a=await lo(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await fn(this.storage,this.storageKey+"-user"),await xa(this.storage,this.storageKey,s)):s.user=am()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<sm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${sm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),om(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new cr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Bf;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new cr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),Ce(o)){const a={data:null,error:o};return om(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await xa(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=r_(s);await xa(this.storage,this.storageKey,o)}else{const s=r_(n);await xa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await fn(this.storage,this.storageKey),await fn(this.storage,this.storageKey+"-code-verifier"),await fn(this.storage,this.storageKey+"-user"),this.userStorage&&await fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&pn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),va);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/va);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${va}ms, refresh threshold is ${sv} ticks`),s<=sv&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof NC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await ca(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?this._returnResult({data:null,error:o}):await De(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await De(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?oU(t.webauthn.credential_response):aU(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:sU(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:iU(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,s,o;if(t)try{const{payload:p}=kd(t);let y=null;p.aal&&(y=p.aal);let g=y;const{data:{user:w},error:v}=await this.getUser(t);if(v)return this._returnResult({data:null,error:v});((r=(n=w==null?void 0:w.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const b=p.amr||[];return{data:{currentLevel:y,nextLevel:g,currentAuthenticationMethods:b},error:null}}catch(p){if(Ce(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:a},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=kd(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((o=(s=a.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(d="aal2");const m=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await De(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new cr})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new cr});const a=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&pn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new cr});const a=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&pn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await De(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new cr})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await De(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new cr})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+mF>s)return r;const{data:o,error:a}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});r=p.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=kd(r);n!=null&&n.allowExpired||LF(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:o,header:s,signature:a},error:null}}const d=$F(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,SF(`${l}.${c}`)))throw new av("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}}hu.nextInstanceID={};const gU=hu,vU="2.95.3";let vc="";typeof Deno<"u"?vc="deno":typeof document<"u"?vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vc="react-native":vc="node";const xU={"X-Client-Info":`supabase-js-${vc}/${vU}`},yU={headers:xU},wU={schema:"public"},bU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_U={};function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function jU(e,t){if(fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SU(e){var t=jU(e,"string");return fu(t)=="symbol"?t:t+""}function NU(e,t,n){return(t=SU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u_(Object(n),!0).forEach(function(r){NU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const kU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),CU=()=>Headers,EU=(e,t,n)=>{const r=kU(n),s=CU();return async(o,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,Lt(Lt({},a),{},{headers:u}))}};function TU(e){return e.endsWith("/")?e:e+"/"}function PU(e,t){var n,r;const{db:s,auth:o,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,m={db:Lt(Lt({},c),s),auth:Lt(Lt({},u),o),realtime:Lt(Lt({},d),a),storage:{},global:Lt(Lt(Lt({},f),l),{},{headers:Lt(Lt({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function RU(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(TU(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var AU=class extends gU{constructor(e){super(e)}},IU=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const o=RU(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,l={db:wU,realtime:_U,auth:Lt(Lt({},bU),{},{storageKey:a}),global:yU},c=PU(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=EU(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new v5(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new uF(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new c5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:u},d,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AU({url:this.authUrl.href,headers:Lt(Lt({},m),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new O5(this.realtimeUrl.href,Lt(Lt({},e),{},{params:Lt(Lt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const OU=(e,t,n)=>new IU(e,t,n);function DU(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}DU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const EC=globalThis.__APP_CONFIG__||{},MU=EC.SUPABASE_URL??"https://ntzlagzhgcldxcbvaumq.supabase.co",LU=EC.SUPABASE_ANON_KEY??"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im50emxhZ3poZ2NsZHhjYnZhdW1xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0MzYzODYsImV4cCI6MjA4NzAxMjM4Nn0.507M5qmEAy6o6voa7fh25DWBkU80Ltm_hgXdN2fZBeA",S=OU(MU,LU,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});function $U(){const[e,t]=h.useState(null),[n,r]=h.useState(!0),[s,o]=h.useState([]);h.useEffect(()=>{let f=!0;const m=async g=>{try{const{data:w,error:v}=await S.from("user_roles").select("role").eq("user_id",g);return v?(console.error("Error fetching roles:",v),[]):(w==null?void 0:w.map(x=>x.role))??[]}catch(w){return console.error("fetchRoles exception:",w),[]}},{data:{subscription:p}}=S.auth.onAuthStateChange((g,w)=>{f&&(t((w==null?void 0:w.user)??null),w!=null&&w.user?m(w.user.id).then(v=>{f&&o(v)}):o([]))});return(async()=>{try{const{data:{session:g}}=await S.auth.getSession();if(!f)return;if(t((g==null?void 0:g.user)??null),g!=null&&g.user){const w=await m(g.user.id);f&&o(w)}}catch(g){console.error("initializeAuth error:",g)}finally{f&&r(!1)}})(),()=>{f=!1,p.unsubscribe()}},[]);const a=s.includes("admin"),l=s.includes("teacher"),c=s.includes("supervisor"),u=s.includes("student");return{user:e,loading:n,roles:s,isAdmin:a,isTeacher:l,isSupervisor:c,isStudent:u,signOut:()=>S.auth.signOut()}}const TC=h.createContext(void 0);function FU({children:e}){const t=$U();return i.jsx(TC.Provider,{value:t,children:e})}function wn(){const e=h.useContext(TC);if(!e)throw new Error("useAuthContext must be used within AuthProvider");return e}const jo=[{code:"USD",name:" ",symbol:"$"},{code:"EUR",name:"",symbol:""},{code:"GBP",name:" ",symbol:""},{code:"SAR",name:" ",symbol:"."},{code:"AED",name:" ",symbol:"."},{code:"KWD",name:" ",symbol:"."},{code:"BHD",name:" ",symbol:"."},{code:"OMR",name:" ",symbol:"."},{code:"QAR",name:" ",symbol:"."},{code:"EGP",name:" ",symbol:"."},{code:"JOD",name:" ",symbol:"."},{code:"IQD",name:" ",symbol:"."},{code:"LBP",name:" ",symbol:"."},{code:"MAD",name:" ",symbol:"."},{code:"TND",name:" ",symbol:"."},{code:"DZD",name:" ",symbol:"."},{code:"LYD",name:" ",symbol:"."},{code:"SDG",name:" ",symbol:"."},{code:"YER",name:" ",symbol:"."},{code:"SYP",name:" ",symbol:"."},{code:"TRY",name:" ",symbol:""},{code:"INR",name:" ",symbol:""},{code:"PKR",name:" ",symbol:""},{code:"CNY",name:" ",symbol:""},{code:"JPY",name:" ",symbol:""},{code:"KRW",name:" ",symbol:""},{code:"MYR",name:" ",symbol:"RM"},{code:"IDR",name:" ",symbol:"Rp"},{code:"THB",name:" ",symbol:""},{code:"PHP",name:" ",symbol:""},{code:"SGD",name:" ",symbol:"S$"},{code:"HKD",name:"  ",symbol:"HK$"},{code:"AUD",name:" ",symbol:"A$"},{code:"NZD",name:" ",symbol:"NZ$"},{code:"CAD",name:" ",symbol:"C$"},{code:"CHF",name:" ",symbol:"CHF"},{code:"SEK",name:" ",symbol:"kr"},{code:"NOK",name:" ",symbol:"kr"},{code:"DKK",name:" ",symbol:"kr"},{code:"PLN",name:" ",symbol:"z"},{code:"CZK",name:" ",symbol:"K"},{code:"HUF",name:" ",symbol:"Ft"},{code:"RON",name:" ",symbol:"lei"},{code:"BGN",name:" ",symbol:""},{code:"HRK",name:" ",symbol:"kn"},{code:"RUB",name:" ",symbol:""},{code:"UAH",name:" ",symbol:""},{code:"BRL",name:" ",symbol:"R$"},{code:"MXN",name:" ",symbol:"MX$"},{code:"ARS",name:" ",symbol:"AR$"},{code:"CLP",name:" ",symbol:"CL$"},{code:"COP",name:" ",symbol:"CO$"},{code:"ZAR",name:"  ",symbol:"R"},{code:"NGN",name:" ",symbol:""},{code:"KES",name:" ",symbol:"KSh"},{code:"GHS",name:" ",symbol:""}],PC=h.createContext({currency:jo[0],exchangeRate:1,convert:e=>e,format:e=>`$${e}`,formatRaw:e=>`$${e}`,loading:!0}),ei=()=>h.useContext(PC);function UU({children:e}){const[t,n]=h.useState({activeCurrency:"USD",exchangeRate:1}),[r,s]=h.useState(!0);h.useEffect(()=>{S.from("site_settings").select("value").eq("key","currency_settings").maybeSingle().then(({data:d})=>{if(d!=null&&d.value&&typeof d.value=="object"){const f=d.value;n({activeCurrency:f.activeCurrency||"USD",exchangeRate:f.exchangeRate||1})}s(!1)})},[]);const o=jo.find(d=>d.code===t.activeCurrency)||jo[0],a=t.exchangeRate,l=d=>t.activeCurrency==="USD"?d:Math.round(d*a*100)/100,c=d=>`${l(d)} ${o.symbol}`,u=d=>`${d} ${o.symbol}`;return i.jsx(PC.Provider,{value:{currency:o,exchangeRate:a,convert:l,format:c,formatRaw:u,loading:r},children:e})}const by=Ef("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"gradient-primary text-primary-foreground shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300","hero-outline":"border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-all duration-300",accent:"bg-accent text-accent-foreground hover:bg-accent/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=h.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const a=r?ND:"button";return i.jsx(a,{className:ve(by({variant:t,size:n,className:e})),ref:o,...s})});te.displayName="Button";const VU="BCQ1GFDpp8iuw0nkFjTLH6wuirLPihTq8GS2vPulzZI4dZd3QCgTTkhuKoCBUdbBwmJEsouwBjKX857hiqKhUHA";function BU(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let o=0;o<r.length;++o)s[o]=r.charCodeAt(o);return s}function RC(){const{user:e}=wn(),[t,n]=h.useState(typeof Notification<"u"?Notification.permission:"default"),[r,s]=h.useState(!1);h.useEffect(()=>{!e||!("serviceWorker"in navigator)||!("PushManager"in window)||navigator.serviceWorker.register("/sw.js").then(async l=>{const u=await l.pushManager.getSubscription();u&&(s(!0),await a(u))})},[e]);const o=async()=>{if(e)try{const l=await Notification.requestPermission();if(n(l),l!=="granted")return;const u=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:BU(VU)});await a(u),s(!0)}catch(l){console.error("Push subscription failed:",l)}},a=async l=>{if(!e)return;const c=l.toJSON(),u=c.endpoint,d=c.keys.p256dh,f=c.keys.auth,{error:m}=await S.from("push_subscriptions").upsert({user_id:e.id,endpoint:u,p256dh:d,auth:f},{onConflict:"endpoint"});m&&console.error("Failed to save push subscription:",m)};return{permission:t,isSubscribed:r,subscribe:o}}var cm=0;function zf(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??d_()),document.body.insertAdjacentElement("beforeend",e[1]??d_()),cm++,()=>{cm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),cm--}},[])}function d_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var um="focusScope.autoFocusOnMount",dm="focusScope.autoFocusOnUnmount",h_={bubbles:!1,cancelable:!0},zU="FocusScope",Mu=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=h.useState(null),u=tr(s),d=tr(o),f=h.useRef(null),m=He(t,g=>c(g)),p=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let g=function(b){if(p.paused||!l)return;const _=b.target;l.contains(_)?f.current=_:li(f.current,{select:!0})},w=function(b){if(p.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||li(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&li(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(v);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[r,l,p.paused]),h.useEffect(()=>{if(l){p_.add(p);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(um,h_);l.addEventListener(um,u),l.dispatchEvent(v),v.defaultPrevented||(qU(YU(AC(l)),{select:!0}),document.activeElement===g&&li(l))}return()=>{l.removeEventListener(um,u),setTimeout(()=>{const v=new CustomEvent(dm,h_);l.addEventListener(dm,d),l.dispatchEvent(v),v.defaultPrevented||li(g??document.body,{select:!0}),l.removeEventListener(dm,d),p_.remove(p)},0)}}},[l,u,d,p]);const y=h.useCallback(g=>{if(!n&&!r||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const x=g.currentTarget,[b,_]=WU(x);b&&_?!g.shiftKey&&v===_?(g.preventDefault(),n&&li(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&li(_,{select:!0})):v===x&&g.preventDefault()}},[n,r,p.paused]);return i.jsx(we.div,{tabIndex:-1,...a,ref:m,onKeyDown:y})});Mu.displayName=zU;function qU(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(li(r,{select:t}),document.activeElement!==n)return}function WU(e){const t=AC(e),n=f_(t,e),r=f_(t.reverse(),e);return[n,r]}function AC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function f_(e,t){for(const n of e)if(!KU(n,{upTo:t}))return n}function KU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function HU(e){return e instanceof HTMLInputElement&&"select"in e}function li(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&HU(e)&&t&&e.select()}}var p_=GU();function GU(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=m_(e,t),e.unshift(t)},remove(t){var n;e=m_(e,t),(n=e[0])==null||n.resume()}}}function m_(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function YU(e){return e.filter(t=>t.tagName!=="A")}var JU=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fa=new WeakMap,Cd=new WeakMap,Ed={},hm=0,IC=function(e){return e&&(e.host||IC(e.parentNode))},QU=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=IC(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},XU=function(e,t,n,r){var s=QU(t,Array.isArray(e)?e:[e]);Ed[n]||(Ed[n]=new WeakMap);var o=Ed[n],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(r),y=p!==null&&p!=="false",g=(fa.get(m)||0)+1,w=(o.get(m)||0)+1;fa.set(m,g),o.set(m,w),a.push(m),g===1&&y&&Cd.set(m,!0),w===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return d(t),l.clear(),hm++,function(){a.forEach(function(f){var m=fa.get(f)-1,p=o.get(f)-1;fa.set(f,m),o.set(f,p),m||(Cd.has(f)||f.removeAttribute(r),Cd.delete(f)),p||f.removeAttribute(n)}),hm--,hm||(fa=new WeakMap,fa=new WeakMap,Cd=new WeakMap,Ed={})}},qf=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=JU(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),XU(r,s,n,"aria-hidden")):function(){return null}},rh="right-scroll-bar-position",sh="width-before-scroll-bar",ZU="with-scroll-bars-hidden",eV="--removed-body-scroll-bar-size";function fm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function tV(e,t){var n=h.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var nV=typeof window<"u"?h.useLayoutEffect:h.useEffect,g_=new WeakMap;function rV(e,t){var n=tV(null,function(r){return e.forEach(function(s){return fm(s,r)})});return nV(function(){var r=g_.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(l){o.has(l)||fm(l,null)}),o.forEach(function(l){s.has(l)||fm(l,a)})}g_.set(n,e)},[e]),n}function sV(e){return e}function iV(e,t){t===void 0&&(t=sV);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var d=a;a=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return s}function oV(e){e===void 0&&(e={});var t=iV(null);return t.options=ws({async:!0,ssr:!1},e),t}var OC=function(e){var t=e.sideCar,n=Fl(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,ws({},n))};OC.isSideCarExport=!0;function aV(e,t){return e.useMedium(t),OC}var DC=oV(),pm=function(){},Wf=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:pm,onWheelCapture:pm,onTouchMoveCapture:pm}),s=r[0],o=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,y=e.noIsolation,g=e.inert,w=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=Fl(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,C=rV([n,t]),k=ws(ws({},_),s);return h.createElement(h.Fragment,null,d&&h.createElement(N,{sideCar:DC,removeScrollBar:u,shards:f,noRelative:p,noIsolation:y,inert:g,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:b}),a?h.cloneElement(h.Children.only(l),ws(ws({},k),{ref:C})):h.createElement(x,ws({},k,{className:c,ref:C}),l))});Wf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Wf.classNames={fullWidth:sh,zeroRight:rh};var lV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=lV();return t&&e.setAttribute("nonce",t),e}function uV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function dV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var hV=function(){var e=0,t=null;return{add:function(n){e==0&&(t=cV())&&(uV(t,n),dV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},fV=function(){var e=hV();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},MC=function(){var e=fV(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},pV={left:0,top:0,right:0,gap:0},mm=function(e){return parseInt(e||"",10)||0},mV=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[mm(n),mm(r),mm(s)]},gV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return pV;var t=mV(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},vV=MC(),tl="data-scroll-locked",xV=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(ZU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(tl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(rh," .").concat(rh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(sh," .").concat(sh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(tl,`] {
    `).concat(eV,": ").concat(l,`px;
  }
`)},v_=function(){var e=parseInt(document.body.getAttribute(tl)||"0",10);return isFinite(e)?e:0},yV=function(){h.useEffect(function(){return document.body.setAttribute(tl,(v_()+1).toString()),function(){var e=v_()-1;e<=0?document.body.removeAttribute(tl):document.body.setAttribute(tl,e.toString())}},[])},wV=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;yV();var o=h.useMemo(function(){return gV(s)},[s]);return h.createElement(vV,{styles:xV(o,!t,s,n?"":"!important")})},lv=!1;if(typeof window<"u")try{var Td=Object.defineProperty({},"passive",{get:function(){return lv=!0,!0}});window.addEventListener("test",Td,Td),window.removeEventListener("test",Td,Td)}catch{lv=!1}var pa=lv?{passive:!1}:!1,bV=function(e){return e.tagName==="TEXTAREA"},LC=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!bV(e)&&n[t]==="visible")},_V=function(e){return LC(e,"overflowY")},jV=function(e){return LC(e,"overflowX")},x_=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=$C(e,r);if(s){var o=FC(e,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SV=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},NV=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},$C=function(e,t){return e==="v"?_V(t):jV(t)},FC=function(e,t){return e==="v"?SV(t):NV(t)},kV=function(e,t){return e==="h"&&t==="rtl"?-1:1},CV=function(e,t,n,r,s){var o=kV(e,window.getComputedStyle(t).direction),a=o*r,l=n.target,c=t.contains(l),u=!1,d=a>0,f=0,m=0;do{if(!l)break;var p=FC(e,l),y=p[0],g=p[1],w=p[2],v=g-w-o*y;(y||v)&&$C(e,l)&&(f+=v,m+=y);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},Pd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},y_=function(e){return[e.deltaX,e.deltaY]},w_=function(e){return e&&"current"in e?e.current:e},EV=function(e,t){return e[0]===t[0]&&e[1]===t[1]},TV=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},PV=0,ma=[];function RV(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),s=h.useState(PV++)[0],o=h.useState(MC)[0],a=h.useRef(e);h.useEffect(function(){a.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=o5([e.lockRef.current],(e.shards||[]).map(w_),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=Pd(g),x=n.current,b="deltaX"in g?g.deltaX:x[0]-v[0],_="deltaY"in g?g.deltaY:x[1]-v[1],N,C=g.target,k=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&C.type==="range")return!1;var I=x_(k,C);if(!I)return!0;if(I?N=k:(N=k==="v"?"h":"v",I=x_(k,C)),!I)return!1;if(!r.current&&"changedTouches"in g&&(b||_)&&(r.current=N),!N)return!0;var $=r.current||N;return CV($,w,g,$==="h"?b:_,!0)},[]),c=h.useCallback(function(g){var w=g;if(!(!ma.length||ma[ma.length-1]!==o)){var v="deltaY"in w?y_(w):Pd(w),x=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&EV(N.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(a.current.shards||[]).map(w_).filter(Boolean).filter(function(N){return N.contains(w.target)}),_=b.length>0?l(w,b[0]):!a.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),u=h.useCallback(function(g,w,v,x){var b={name:g,delta:w,target:v,should:x,shadowParent:AV(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),d=h.useCallback(function(g){n.current=Pd(g),r.current=void 0},[]),f=h.useCallback(function(g){u(g.type,y_(g),g.target,l(g,e.lockRef.current))},[]),m=h.useCallback(function(g){u(g.type,Pd(g),g.target,l(g,e.lockRef.current))},[]);h.useEffect(function(){return ma.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,pa),document.addEventListener("touchmove",c,pa),document.addEventListener("touchstart",d,pa),function(){ma=ma.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,pa),document.removeEventListener("touchmove",c,pa),document.removeEventListener("touchstart",d,pa)}},[]);var p=e.removeScrollBar,y=e.inert;return h.createElement(h.Fragment,null,y?h.createElement(o,{styles:TV(s)}):null,p?h.createElement(wV,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function AV(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const IV=aV(DC,RV);var Lu=h.forwardRef(function(e,t){return h.createElement(Wf,ws({},e,{ref:t,sideCar:IV}))});Lu.classNames=Wf.classNames;var Kf="Popover",[UC,LH]=yn(Kf,[Ji]),$u=Ji(),[OV,Zi]=UC(Kf),VC=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!1}=e,l=$u(t),c=h.useRef(null),[u,d]=h.useState(!1),[f,m]=xr({prop:r,defaultProp:s??!1,onChange:o,caller:Kf});return i.jsx(fy,{...l,children:i.jsx(OV,{scope:t,contentId:nn(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:h.useCallback(()=>d(!0),[]),onCustomAnchorRemove:h.useCallback(()=>d(!1),[]),modal:a,children:n})})};VC.displayName=Kf;var BC="PopoverAnchor",DV=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Zi(BC,n),o=$u(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return h.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx(Iu,{...o,...r,ref:t})});DV.displayName=BC;var zC="PopoverTrigger",qC=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Zi(zC,n),o=$u(n),a=He(t,s.triggerRef),l=i.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":YC(s.open),...r,ref:a,onClick:de(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Iu,{asChild:!0,...o,children:l})});qC.displayName=zC;var _y="PopoverPortal",[MV,LV]=UC(_y,{forceMount:void 0}),WC=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=Zi(_y,t);return i.jsx(MV,{scope:t,forceMount:n,children:i.jsx(Vn,{present:n||o.open,children:i.jsx(Il,{asChild:!0,container:s,children:r})})})};WC.displayName=_y;var kl="PopoverContent",KC=h.forwardRef((e,t)=>{const n=LV(kl,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,o=Zi(kl,e.__scopePopover);return i.jsx(Vn,{present:r||o.open,children:o.modal?i.jsx(FV,{...s,ref:t}):i.jsx(UV,{...s,ref:t})})});KC.displayName=kl;var $V=Vi("PopoverContent.RemoveScroll"),FV=h.forwardRef((e,t)=>{const n=Zi(kl,e.__scopePopover),r=h.useRef(null),s=He(t,r),o=h.useRef(!1);return h.useEffect(()=>{const a=r.current;if(a)return qf(a)},[]),i.jsx(Lu,{as:$V,allowPinchZoom:!0,children:i.jsx(HC,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),o.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:de(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:de(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),UV=h.forwardRef((e,t)=>{const n=Zi(kl,e.__scopePopover),r=h.useRef(!1),s=h.useRef(!1);return i.jsx(HC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),HC=h.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,m=Zi(kl,n),p=$u(n);return zf(),i.jsx(Mu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:i.jsx(If,{"data-state":YC(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),GC="PopoverClose",VV=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Zi(GC,n);return i.jsx(we.button,{type:"button",...r,ref:t,onClick:de(e.onClick,()=>s.onOpenChange(!1))})});VV.displayName=GC;var BV="PopoverArrow",zV=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=$u(n);return i.jsx(Of,{...s,...r,ref:t})});zV.displayName=BV;function YC(e){return e?"open":"closed"}var qV=VC,WV=qC,KV=WC,JC=KC;const cv=qV,uv=WV,Gh=h.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>i.jsx(KV,{children:i.jsx(JC,{ref:s,align:t,sideOffset:n,className:ve("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Gh.displayName=JC.displayName;function HV(e){const t=e.metadata||{};return e.type==="message"&&t.conversation_id?`/messages?conversation=${t.conversation_id}`:e.type==="booking"?"/schedule":"/"}function GV(){const{user:e}=wn(),{permission:t,isSubscribed:n,subscribe:r}=RC(),[s,o]=h.useState([]),[a,l]=h.useState(!1),c=Xi(),u=h.useCallback(()=>{try{const p=new AudioContext,y=p.createOscillator(),g=p.createGain();y.connect(g),g.connect(p.destination),y.frequency.value=800,y.type="sine",g.gain.value=.3,y.start(),g.gain.exponentialRampToValueAtTime(.001,p.currentTime+.5),y.stop(p.currentTime+.5)}catch{}},[]);h.useEffect(()=>{if(!e)return;(async()=>{const{data:y}=await S.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(30);y&&o(y)})()},[e]),h.useEffect(()=>{if(!e)return;const p=S.channel(`user-notifications-${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},y=>{const g=y.new;o(w=>[g,...w].slice(0,30)),u()}).subscribe();return()=>{S.removeChannel(p)}},[e,u]);const d=s.filter(p=>!p.is_read).length,f=async()=>{e&&(o(p=>p.map(y=>({...y,is_read:!0}))),await S.from("notifications").update({is_read:!0}).eq("user_id",e.id).eq("is_read",!1))},m=async p=>{p.is_read||(o(g=>g.map(w=>w.id===p.id?{...w,is_read:!0}:w)),await S.from("notifications").update({is_read:!0}).eq("id",p.id)),l(!1);const y=HV(p);c(y)};return e?i.jsxs(cv,{open:a,onOpenChange:l,children:[i.jsx(uv,{asChild:!0,children:i.jsxs(te,{variant:"ghost",size:"icon",className:"relative",children:[i.jsx(Mo,{className:"h-5 w-5"}),d>0&&i.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-destructive text-destructive-foreground text-[10px] font-bold rounded-full h-4 w-4 flex items-center justify-center",children:d>9?"9+":d})]})}),i.jsxs(Gh,{className:"w-80 p-0",align:"end",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx("h3",{className:"font-semibold text-sm",children:""}),d>0&&i.jsx("button",{onClick:f,className:"text-xs text-primary hover:underline",children:"  "})]}),i.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[!n&&t!=="denied"&&i.jsx("button",{onClick:r,className:"w-full p-3 text-xs text-center bg-primary/10 text-primary hover:bg-primary/20 transition-colors border-b border-border",children:"     "}),s.length===0?i.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"  "}):s.map(p=>i.jsx("button",{onClick:()=>m(p),className:`w-full text-start p-3 border-b border-border last:border-0 hover:bg-muted/50 transition-colors ${p.is_read?"":"bg-primary/5"}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:`mt-1 h-2 w-2 rounded-full shrink-0 ${p.is_read?"bg-transparent":"bg-primary"}`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium",children:p.title}),i.jsx("p",{className:"text-xs text-muted-foreground truncate",children:p.body}),i.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:new Date(p.created_at).toLocaleString("ar")})]})]})},p.id))]})]})]}):null}function YV(){const{user:e,isAdmin:t,isTeacher:n,isSupervisor:r}=wn(),[s,o]=h.useState(""),[a,l]=h.useState(" ");h.useEffect(()=>{const u=()=>{S.from("site_settings").select("key, value").in("key",["site_logo","site_name","site_favicon"]).then(({data:f})=>{if(f){for(const m of f)if(m.key==="site_logo"&&typeof m.value=="string"&&m.value&&o(m.value),m.key==="site_name"&&typeof m.value=="string"&&m.value&&(l(m.value),document.title=m.value),m.key==="site_favicon"&&typeof m.value=="string"&&m.value){const p=document.querySelector("link[rel~='icon']")||document.createElement("link");p.rel="icon",p.href=m.value,document.head.appendChild(p)}}})};u();const d=S.channel("site-settings-header").on("postgres_changes",{event:"*",schema:"public",table:"site_settings"},()=>u()).subscribe();return()=>{S.removeChannel(d)}},[]);const c=t?"/admin":n?"/teacher/dashboard":r?"/admin":null;return i.jsx("header",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-md border-b border-border",children:i.jsxs("div",{className:"container flex items-center justify-between h-14",children:[i.jsx(Ft,{to:"/",className:"flex items-center gap-2",children:s&&i.jsx("img",{src:s,alt:" ",className:"h-8 object-contain"})}),i.jsx("div",{className:"flex items-center gap-2",children:e?i.jsxs(i.Fragment,{children:[c&&i.jsx(Ft,{to:c,children:i.jsx(te,{variant:"ghost",size:"icon",children:i.jsx(rk,{className:"h-5 w-5"})})}),i.jsx(GV,{}),i.jsx(Ft,{to:"/favorites",children:i.jsx(te,{variant:"ghost",size:"icon",children:i.jsx(Zx,{className:"h-5 w-5"})})}),i.jsx(Ft,{to:"/profile",children:i.jsx(te,{variant:"ghost",size:"icon",children:i.jsx(er,{className:"h-5 w-5"})})})]}):i.jsx(Ft,{to:"/auth",children:i.jsx(te,{variant:"hero",size:"sm",children:" "})})})]})})}function JV(){const{user:e}=wn(),[t,n]=h.useState(0);return h.useEffect(()=>{if(!e)return;const r=async()=>{const{data:o}=await S.from("conversations").select("id").or(`student_id.eq.${e.id},teacher_id.eq.${e.id}`);if(!o||o.length===0){n(0);return}const a=o.map(c=>c.id),{count:l}=await S.from("messages").select("*",{count:"exact",head:!0}).in("conversation_id",a).neq("sender_id",e.id).eq("is_read",!1);n(l??0)};r();const s=S.channel("unread-counter").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},()=>r()).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>r()).subscribe();return()=>{S.removeChannel(s)}},[e]),t}function b_({count:e}){return e<=0?null:i.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:e>99?"99+":e})}function QV(){const{user:e,isTeacher:t,isAdmin:n,isSupervisor:r}=wn(),s=$l(),o=JV(),a=c=>s.pathname===c,l=c=>`flex flex-col items-center gap-1 text-xs transition-colors ${a(c)?"text-primary font-bold":"text-muted-foreground"}`;return e?n||r?null:t?i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card border-t border-border px-4 py-2 shadow-elevated",children:i.jsxs("div",{className:"flex justify-around",children:[i.jsxs(Ft,{to:"/",className:l("/"),children:[i.jsx(Mh,{className:"h-5 w-5"}),i.jsx("span",{children:""})]}),i.jsxs(Ft,{to:"/teacher/dashboard",className:l("/teacher/dashboard"),children:[i.jsx(rk,{className:"h-5 w-5"}),i.jsx("span",{children:" "})]}),i.jsxs(Ft,{to:"/messages",className:l("/messages"),children:[i.jsxs("div",{className:"relative",children:[i.jsx(_l,{className:"h-5 w-5"}),i.jsx(b_,{count:o})]}),i.jsx("span",{children:""})]}),i.jsxs(Ft,{to:"/schedule",className:l("/schedule"),children:[i.jsx(Mi,{className:"h-5 w-5"}),i.jsx("span",{children:""})]})]})}):i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card border-t border-border px-4 py-2 shadow-elevated",children:i.jsxs("div",{className:"flex justify-around",children:[i.jsxs(Ft,{to:"/",className:l("/"),children:[i.jsx(Mh,{className:"h-5 w-5"}),i.jsx("span",{children:""})]}),i.jsxs(Ft,{to:"/lessons",className:l("/lessons"),children:[i.jsx(Bs,{className:"h-5 w-5"}),i.jsx("span",{children:""})]}),i.jsxs(Ft,{to:"/schedule",className:l("/schedule"),children:[i.jsx(Mi,{className:"h-5 w-5"}),i.jsx("span",{children:""})]}),i.jsxs(Ft,{to:"/messages",className:l("/messages"),children:[i.jsxs("div",{className:"relative",children:[i.jsx(_l,{className:"h-5 w-5"}),i.jsx(b_,{count:o})]}),i.jsx("span",{children:""})]})]})}):i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card border-t border-border px-4 py-2 shadow-elevated",children:i.jsx("div",{className:"flex justify-center",children:i.jsxs(Ft,{to:"/auth",className:l("/auth"),children:[i.jsx(ak,{className:"h-5 w-5"}),i.jsx("span",{children:" "})]})})})}function XV(){const{user:e}=wn(),{permission:t,isSubscribed:n,subscribe:r}=RC(),[s,o]=h.useState(!1);if(!e||n||t==="denied"||s||!("serviceWorker"in navigator)||!("PushManager"in window))return null;const a=async()=>{await r()};return i.jsxs("div",{className:"bg-primary/10 border-b border-primary/20 px-4 py-2.5 flex items-center justify-between gap-3",children:[i.jsxs("button",{onClick:a,className:"flex items-center gap-2 flex-1 text-start",children:[i.jsx(Mo,{className:"h-4 w-4 text-primary shrink-0"}),i.jsx("p",{className:"text-xs text-foreground/80",children:"        ."})]}),i.jsx("button",{onClick:()=>o(!0),className:"text-muted-foreground hover:text-foreground shrink-0",children:i.jsx(Tf,{className:"h-4 w-4"})})]})}function ZV(){const{user:e}=wn();h.useEffect(()=>{if(!e)return;const t=async()=>{const{data:r}=await S.from("site_settings").select("value").eq("key","onesignal_settings").maybeSingle(),s=r==null?void 0:r.value;if(!(s!=null&&s.enabled)||!(s!=null&&s.app_id))return;const o=window.median;if(o!=null&&o.onesignal)try{typeof o.onesignal.requestPermission=="function"&&(o.onesignal.requestPermission({fallbackToSettings:!0}),console.log("OneSignal requestPermission called")),typeof o.onesignal.optIn=="function"&&(o.onesignal.optIn(),console.log("OneSignal optIn called")),typeof o.onesignal.login=="function"?(o.onesignal.login(e.id),console.log("OneSignal login called with user ID:",e.id)):o.onesignal.externalUserId&&(o.onesignal.externalUserId.set({externalId:e.id}),console.log("OneSignal externalUserId.set called:",e.id)),typeof o.onesignal.info=="function"&&o.onesignal.info().then(a=>{console.log("OneSignal info:",JSON.stringify(a)),a&&!a.subscribed&&typeof o.onesignal.optIn=="function"&&(o.onesignal.optIn(),console.log("OneSignal re-optIn after check"))}).catch(()=>{})}catch(a){console.warn("OneSignal bridge error:",a)}};window.median_onesignal_info=r=>{console.log("OneSignal info callback:",JSON.stringify(r))};const n=setTimeout(t,1500);return()=>{clearTimeout(n),delete window.median_onesignal_info}},[e]),h.useEffect(()=>{if(e)return;const t=window.median;if(t!=null&&t.onesignal)try{typeof t.onesignal.logout=="function"&&(t.onesignal.logout(),console.log("OneSignal logout called"))}catch{}},[e])}function gm(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255,s=Math.max(t,n,r),o=Math.min(t,n,r);let a=0,l=0;const c=(s+o)/2;if(s!==o){const u=s-o;switch(l=c>.5?u/(2-s-o):u/(s+o),s){case t:a=((n-r)/u+(n<r?6:0))/6;break;case n:a=((r-t)/u+2)/6;break;case r:a=((t-n)/u+4)/6;break}}return`${Math.round(a*360)} ${Math.round(l*100)}% ${Math.round(c*100)}%`}function eB(){const[e,t]=h.useState(!1);return h.useEffect(()=>{const n=s=>{const o=document.documentElement;if(s.primary_color){const a=gm(s.primary_color);o.style.setProperty("--primary",a),o.style.setProperty("--ring",a),o.style.setProperty("--sidebar-primary",a),o.style.setProperty("--sidebar-ring",a)}if(s.secondary_color){const a=gm(s.secondary_color);o.style.setProperty("--secondary",a),o.style.setProperty("--accent",a)}if(s.background_color){const a=gm(s.background_color);o.style.setProperty("--background",a),o.style.setProperty("--sidebar-background",a)}s.body_font_size&&o.style.setProperty("--theme-body-font-size",`${s.body_font_size}px`),s.body_font_color&&o.style.setProperty("--theme-body-font-color",s.body_font_color),s.heading_font_size&&o.style.setProperty("--theme-heading-font-size",`${s.heading_font_size}px`),s.heading_font_color&&o.style.setProperty("--theme-heading-font-color",s.heading_font_color)};S.from("site_settings").select("value").eq("key","theme_settings").maybeSingle().then(({data:s})=>{s!=null&&s.value&&typeof s.value=="object"&&n(s.value),t(!0)});const r=S.channel("theme-settings-rt").on("postgres_changes",{event:"*",schema:"public",table:"site_settings",filter:"key=eq.theme_settings"},s=>{var a;const o=(a=s.new)==null?void 0:a.value;o&&typeof o=="object"&&n(o)}).subscribe();return()=>{S.removeChannel(r)}},[]),e}function Dn({children:e}){return ZV(),eB(),i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(YV,{}),i.jsx(XV,{}),i.jsx("main",{className:"flex-1 pb-20",children:e}),i.jsx(QV,{})]})}function tB(){const[e,t]=h.useState("    "),[n,r]=h.useState("     "),[s,o]=h.useState(""),a=()=>{S.from("site_settings").select("key, value").in("key",["home_banner_title","home_banner_description","home_banner_image"]).then(({data:l})=>{l==null||l.forEach(c=>{c.key==="home_banner_title"&&typeof c.value=="string"&&t(c.value),c.key==="home_banner_description"&&typeof c.value=="string"&&r(c.value),c.key==="home_banner_image"&&typeof c.value=="string"&&o(c.value)})})};return h.useEffect(()=>{a();const l=S.channel("banner-settings-realtime").on("postgres_changes",{event:"*",schema:"public",table:"site_settings"},()=>a()).subscribe();return()=>{S.removeChannel(l)}},[]),i.jsxs("div",{className:"relative overflow-hidden rounded-xl mx-4 mt-4 h-40",children:[s?i.jsx("img",{src:s,alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-xl"}):null,i.jsxs("div",{className:`relative h-full rounded-xl p-8 text-foreground flex flex-col justify-center ${s?"bg-black/40":"gradient-hero"}`,children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:e}),i.jsx("p",{className:"text-foreground/70",children:n})]})]})}const jy=h.createContext({});function Sy(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}const QC=typeof window<"u",XC=QC?h.useLayoutEffect:h.useEffect,Hf=h.createContext(null);function Ny(e,t){e.indexOf(t)===-1&&e.push(t)}function Yh(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Es=(e,t,n)=>n>t?t:n<e?e:n;let Gf=()=>{},Cl=()=>{};const Qs={},ZC=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function eE(e){return typeof e=="object"&&e!==null}const tE=e=>/^0[^.\s]+$/u.test(e);function ky(e){let t;return()=>(t===void 0&&(t=e()),t)}const Rr=e=>e,nB=(e,t)=>n=>t(e(n)),Fu=(...e)=>e.reduce(nB),pu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Cy{constructor(){this.subscriptions=[]}add(t){return Ny(this.subscriptions,t),()=>Yh(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ar=e=>e*1e3,Tr=e=>e/1e3;function nE(e,t){return t?e*(1e3/t):0}const rE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,rB=1e-7,sB=12;function iB(e,t,n,r,s){let o,a,l=0;do a=t+(n-t)/2,o=rE(a,r,s)-e,o>0?n=a:t=a;while(Math.abs(o)>rB&&++l<sB);return a}function Uu(e,t,n,r){if(e===t&&n===r)return Rr;const s=o=>iB(o,0,1,e,n);return o=>o===0||o===1?o:rE(s(o),t,r)}const sE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iE=e=>t=>1-e(1-t),oE=Uu(.33,1.53,.69,.99),Ey=iE(oE),aE=sE(Ey),lE=e=>(e*=2)<1?.5*Ey(e):.5*(2-Math.pow(2,-10*(e-1))),Ty=e=>1-Math.sin(Math.acos(e)),cE=iE(Ty),uE=sE(Ty),oB=Uu(.42,0,1,1),aB=Uu(0,0,.58,1),dE=Uu(.42,0,.58,1),lB=e=>Array.isArray(e)&&typeof e[0]!="number",hE=e=>Array.isArray(e)&&typeof e[0]=="number",__={linear:Rr,easeIn:oB,easeInOut:dE,easeOut:aB,circIn:Ty,circInOut:uE,circOut:cE,backIn:Ey,backInOut:aE,backOut:oE,anticipate:lE},cB=e=>typeof e=="string",j_=e=>{if(hE(e)){Cl(e.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,n,r,s]=e;return Uu(t,n,r,s)}else if(cB(e))return Cl(__[e]!==void 0,`Invalid easing type '${e}'`,"invalid-easing-type"),__[e];return e},Rd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],S_={value:null,addProjectionMetrics:null};function uB(e,t){let n=new Set,r=new Set,s=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(f){a.has(f)&&(d.schedule(f),e()),c++,f(l)}const d={schedule:(f,m=!1,p=!1)=>{const g=p&&s?n:r;return m&&a.add(f),g.has(f)||g.add(f),f},cancel:f=>{r.delete(f),a.delete(f)},process:f=>{if(l=f,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),t&&S_.value&&S_.value.frameloop[t].push(c),c=0,n.clear(),s=!1,o&&(o=!1,d.process(f))}};return d}const dB=40;function fE(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Rd.reduce((b,_)=>(b[_]=uB(o,t?_:void 0),b),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:m,render:p,postRender:y}=a,g=()=>{const b=Qs.useManualTiming?s.timestamp:performance.now();n=!1,Qs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,dB),1)),s.timestamp=b,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),f.process(s),m.process(s),p.process(s),y.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(g))},w=()=>{n=!0,r=!0,s.isProcessing||e(g)};return{schedule:Rd.reduce((b,_)=>{const N=a[_];return b[_]=(C,k=!1,I=!1)=>(n||w(),N.schedule(C,k,I)),b},{}),cancel:b=>{for(let _=0;_<Rd.length;_++)a[Rd[_]].cancel(b)},state:s,steps:a}}const{schedule:wt,cancel:qi,state:gn,steps:vm}=fE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rr,!0);let ih;function hB(){ih=void 0}const Mn={now:()=>(ih===void 0&&Mn.set(gn.isProcessing||Qs.useManualTiming?gn.timestamp:performance.now()),ih),set:e=>{ih=e,queueMicrotask(hB)}},pE=e=>t=>typeof t=="string"&&t.startsWith(e),mE=pE("--"),fB=pE("var(--"),Py=e=>fB(e)?pB.test(e.split("/*")[0].trim()):!1,pB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function N_(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Vl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},mu={...Vl,transform:e=>Es(0,1,e)},Ad={...Vl,default:1},Oc=e=>Math.round(e*1e5)/1e5,Ry=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mB(e){return e==null}const gB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ay=(e,t)=>n=>!!(typeof n=="string"&&gB.test(n)&&n.startsWith(e)||t&&!mB(n)&&Object.prototype.hasOwnProperty.call(n,t)),gE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,o,a,l]=r.match(Ry);return{[e]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},vB=e=>Es(0,255,e),xm={...Vl,transform:e=>Math.round(vB(e))},So={test:Ay("rgb","red"),parse:gE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+xm.transform(e)+", "+xm.transform(t)+", "+xm.transform(n)+", "+Oc(mu.transform(r))+")"};function xB(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const dv={test:Ay("#"),parse:xB,transform:So.transform},Vu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ci=Vu("deg"),ks=Vu("%"),Se=Vu("px"),yB=Vu("vh"),wB=Vu("vw"),k_={...ks,parse:e=>ks.parse(e)/100,transform:e=>ks.transform(e*100)},Ua={test:Ay("hsl","hue"),parse:gE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ks.transform(Oc(t))+", "+ks.transform(Oc(n))+", "+Oc(mu.transform(r))+")"},Wt={test:e=>So.test(e)||dv.test(e)||Ua.test(e),parse:e=>So.test(e)?So.parse(e):Ua.test(e)?Ua.parse(e):dv.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?So.transform(e):Ua.transform(e),getAnimatableNone:e=>{const t=Wt.parse(e);return t.alpha=0,Wt.transform(t)}},bB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _B(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Ry))==null?void 0:t.length)||0)+(((n=e.match(bB))==null?void 0:n.length)||0)>0}const vE="number",xE="color",jB="var",SB="var(",C_="${}",NB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const l=t.replace(NB,c=>(Wt.test(c)?(r.color.push(o),s.push(xE),n.push(Wt.parse(c))):c.startsWith(SB)?(r.var.push(o),s.push(jB),n.push(c)):(r.number.push(o),s.push(vE),n.push(parseFloat(c))),++o,C_)).split(C_);return{values:n,split:l,indexes:r,types:s}}function yE(e){return gu(e).values}function wE(e){const{split:t,types:n}=gu(e),r=t.length;return s=>{let o="";for(let a=0;a<r;a++)if(o+=t[a],s[a]!==void 0){const l=n[a];l===vE?o+=Oc(s[a]):l===xE?o+=Wt.transform(s[a]):o+=s[a]}return o}}const kB=e=>typeof e=="number"?0:Wt.test(e)?Wt.getAnimatableNone(e):e;function CB(e){const t=yE(e);return wE(e)(t.map(kB))}const Wi={test:_B,parse:yE,createTransformer:wE,getAnimatableNone:CB};function ym(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function EB({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,o=0,a=0;if(!t)s=o=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=ym(c,l,e+1/3),o=ym(c,l,e),a=ym(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Jh(e,t){return n=>n>0?t:e}const At=(e,t,n)=>e+(t-e)*n,wm=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},TB=[dv,So,Ua],PB=e=>TB.find(t=>t.test(e));function E_(e){const t=PB(e);if(Gf(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let n=t.parse(e);return t===Ua&&(n=EB(n)),n}const T_=(e,t)=>{const n=E_(e),r=E_(t);if(!n||!r)return Jh(e,t);const s={...n};return o=>(s.red=wm(n.red,r.red,o),s.green=wm(n.green,r.green,o),s.blue=wm(n.blue,r.blue,o),s.alpha=At(n.alpha,r.alpha,o),So.transform(s))},hv=new Set(["none","hidden"]);function RB(e,t){return hv.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function AB(e,t){return n=>At(e,t,n)}function Iy(e){return typeof e=="number"?AB:typeof e=="string"?Py(e)?Jh:Wt.test(e)?T_:DB:Array.isArray(e)?bE:typeof e=="object"?Wt.test(e)?T_:IB:Jh}function bE(e,t){const n=[...e],r=n.length,s=e.map((o,a)=>Iy(o)(o,t[a]));return o=>{for(let a=0;a<r;a++)n[a]=s[a](o);return n}}function IB(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Iy(e[s])(e[s],t[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function OB(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=e.indexes[o][r[o]],l=e.values[a]??0;n[s]=l,r[o]++}return n}const DB=(e,t)=>{const n=Wi.createTransformer(t),r=gu(e),s=gu(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?hv.has(e)&&!s.values.length||hv.has(t)&&!r.values.length?RB(e,t):Fu(bE(OB(r,s),s.values),n):(Gf(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),Jh(e,t))};function _E(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?At(e,t,n):Iy(e)(e,t)}const MB=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>wt.update(t,n),stop:()=>qi(t),now:()=>gn.isProcessing?gn.timestamp:Mn.now()}},jE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let o=0;o<s;o++)r+=Math.round(e(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qh=2e4;function Oy(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Qh;)t+=n,r=e.next(t);return t>=Qh?1/0:t}function LB(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(Oy(r),Qh);return{type:"keyframes",ease:o=>r.next(s*o).value/t,duration:Tr(s)}}const $B=5;function SE(e,t,n){const r=Math.max(t-$B,0);return nE(n-e(r),t-r)}const Pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bm=.001;function FB({duration:e=Pt.duration,bounce:t=Pt.bounce,velocity:n=Pt.velocity,mass:r=Pt.mass}){let s,o;Gf(e<=Ar(Pt.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=Es(Pt.minDamping,Pt.maxDamping,a),e=Es(Pt.minDuration,Pt.maxDuration,Tr(e)),a<1?(s=u=>{const d=u*a,f=d*e,m=d-n,p=fv(u,a),y=Math.exp(-f);return bm-m/p*y},o=u=>{const f=u*a*e,m=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*e,y=Math.exp(-f),g=fv(Math.pow(u,2),a);return(-s(u)+bm>0?-1:1)*((m-p)*y)/g}):(s=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-bm+d*f},o=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const l=5/e,c=VB(s,o,l);if(e=Ar(e),isNaN(c))return{stiffness:Pt.stiffness,damping:Pt.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const UB=12;function VB(e,t,n){let r=n;for(let s=1;s<UB;s++)r=r-e(r)/t(r);return r}function fv(e,t){return e*Math.sqrt(1-t*t)}const BB=["duration","bounce"],zB=["stiffness","damping","mass"];function P_(e,t){return t.some(n=>e[n]!==void 0)}function qB(e){let t={velocity:Pt.velocity,stiffness:Pt.stiffness,damping:Pt.damping,mass:Pt.mass,isResolvedFromDuration:!1,...e};if(!P_(e,zB)&&P_(e,BB))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Es(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Pt.mass,stiffness:s,damping:o}}else{const n=FB(e);t={...t,...n,mass:Pt.mass},t.isResolvedFromDuration=!0}return t}function Xh(e=Pt.visualDuration,t=Pt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:u,mass:d,duration:f,velocity:m,isResolvedFromDuration:p}=qB({...n,velocity:-Tr(n.velocity||0)}),y=m||0,g=u/(2*Math.sqrt(c*d)),w=a-o,v=Tr(Math.sqrt(c/d)),x=Math.abs(w)<5;r||(r=x?Pt.restSpeed.granular:Pt.restSpeed.default),s||(s=x?Pt.restDelta.granular:Pt.restDelta.default);let b;if(g<1){const N=fv(v,g);b=C=>{const k=Math.exp(-g*v*C);return a-k*((y+g*v*w)/N*Math.sin(N*C)+w*Math.cos(N*C))}}else if(g===1)b=N=>a-Math.exp(-v*N)*(w+(y+v*w)*N);else{const N=v*Math.sqrt(g*g-1);b=C=>{const k=Math.exp(-g*v*C),I=Math.min(N*C,300);return a-k*((y+g*v*w)*Math.sinh(I)+N*w*Math.cosh(I))/N}}const _={calculatedDuration:p&&f||null,next:N=>{const C=b(N);if(p)l.done=N>=f;else{let k=N===0?y:0;g<1&&(k=N===0?Ar(y):SE(b,N,C));const I=Math.abs(k)<=r,$=Math.abs(a-C)<=s;l.done=I&&$}return l.value=l.done?a:C,l},toString:()=>{const N=Math.min(Oy(_),Qh),C=jE(k=>_.next(N*k).value,N,30);return N+"ms "+C},toTransition:()=>{}};return _}Xh.applyToOptions=e=>{const t=LB(e,100,Xh);return e.ease=t.ease,e.duration=Ar(t.duration),e.type="keyframes",e};function pv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],m={done:!1,value:f},p=I=>l!==void 0&&I<l||c!==void 0&&I>c,y=I=>l===void 0?c:c===void 0||Math.abs(l-I)<Math.abs(c-I)?l:c;let g=n*t;const w=f+g,v=a===void 0?w:a(w);v!==w&&(g=v-f);const x=I=>-g*Math.exp(-I/r),b=I=>v+x(I),_=I=>{const $=x(I),O=b(I);m.done=Math.abs($)<=u,m.value=m.done?v:O};let N,C;const k=I=>{p(m.value)&&(N=I,C=Xh({keyframes:[m.value,y(m.value)],velocity:SE(b,I,m.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:I=>{let $=!1;return!C&&N===void 0&&($=!0,_(I),k(I)),N!==void 0&&I>=N?C.next(I-N):(!$&&_(I),m)}}}function WB(e,t,n){const r=[],s=n||Qs.mix||_E,o=e.length-1;for(let a=0;a<o;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Rr:t;l=Fu(c,l)}r.push(l)}return r}function KB(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const o=e.length;if(Cl(o===t.length,"Both input and output ranges must be the same length","range-length"),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=WB(t,r,s),c=l.length,u=d=>{if(a&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const m=pu(e[f],e[f+1],d);return l[f](m)};return n?d=>u(Es(e[0],e[o-1],d)):u}function HB(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=pu(0,t,r);e.push(At(n,1,s))}}function GB(e){const t=[0];return HB(t,e.length-1),t}function YB(e,t){return e.map(n=>n*t)}function JB(e,t){return e.map(()=>t||dE).splice(0,e.length-1)}function Dc({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=lB(r)?r.map(j_):j_(r),o={done:!1,value:t[0]},a=YB(n&&n.length===t.length?n:GB(t),e),l=KB(a,t,{ease:Array.isArray(s)?s:JB(t,s)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}const QB=e=>e!==null;function Dy(e,{repeat:t,repeatType:n="loop"},r,s=1){const o=e.filter(QB),l=s<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const XB={decay:pv,inertia:pv,tween:Dc,keyframes:Dc,spring:Xh};function NE(e){typeof e.type=="string"&&(e.type=XB[e.type])}class My{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const ZB=e=>e/100;class Ly extends My{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Mn.now()&&this.tick(Mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;NE(t);const{type:n=Dc,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=t;let{keyframes:l}=t;const c=n||Dc;c!==Dc&&typeof l[0]!="number"&&(this.mixKeyframes=Fu(ZB,_E(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=Oy(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:m,repeatDelay:p,type:y,onUpdate:g,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,_=r;if(f){const I=Math.min(this.currentTime,s)/l;let $=Math.floor(I),O=I%1;!O&&I>=1&&(O=1),O===1&&$--,$=Math.min($,f+1),!!($%2)&&(m==="reverse"?(O=1-O,p&&(O-=p/l)):m==="mirror"&&(_=a)),b=Es(0,1,O)*l}const N=x?{done:!1,value:d[0]}:_.next(b);o&&(N.value=o(N.value));let{done:C}=N;!x&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return k&&y!==pv&&(N.value=Dy(d,this.options,w,this.speed)),g&&g(N.value),k&&this.finish(),N}then(t,n){return this.finished.then(t,n)}get duration(){return Tr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Tr(t)}get time(){return Tr(this.currentTime)}set time(t){var n;t=Ar(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Mn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Tr(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:t=MB,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function ez(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const No=e=>e*180/Math.PI,mv=e=>{const t=No(Math.atan2(e[1],e[0]));return gv(t)},tz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:mv,rotateZ:mv,skewX:e=>No(Math.atan(e[1])),skewY:e=>No(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},gv=e=>(e=e%360,e<0&&(e+=360),e),R_=mv,A_=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),I_=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),nz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:A_,scaleY:I_,scale:e=>(A_(e)+I_(e))/2,rotateX:e=>gv(No(Math.atan2(e[6],e[5]))),rotateY:e=>gv(No(Math.atan2(-e[2],e[0]))),rotateZ:R_,rotate:R_,skewX:e=>No(Math.atan(e[4])),skewY:e=>No(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function vv(e){return e.includes("scale")?1:0}function xv(e,t){if(!e||e==="none")return vv(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=nz,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tz,s=l}if(!s)return vv(t);const o=r[t],a=s[1].split(",").map(sz);return typeof o=="function"?o(a):a[o]}const rz=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return xv(n,t)};function sz(e){return parseFloat(e.trim())}const Bl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zl=new Set(Bl),O_=e=>e===Vl||e===Se,iz=new Set(["x","y","z"]),oz=Bl.filter(e=>!iz.has(e));function az(e){const t=[];return oz.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const ki={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>xv(t,"x"),y:(e,{transform:t})=>xv(t,"y")};ki.translateX=ki.x;ki.translateY=ki.y;const Lo=new Set;let yv=!1,wv=!1,bv=!1;function kE(){if(wv){const e=Array.from(Lo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=az(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,a])=>{var l;(l=r.getValue(o))==null||l.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}wv=!1,yv=!1,Lo.forEach(e=>e.complete(bv)),Lo.clear()}function CE(){Lo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(wv=!0)})}function lz(){bv=!0,CE(),kE(),bv=!1}class $y{constructor(t,n,r,s,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Lo.add(this),yv||(yv=!0,wt.read(CE),wt.resolveKeyframes(kE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const o=s==null?void 0:s.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&o===void 0&&s.set(t[0])}ez(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Lo.delete(this)}cancel(){this.state==="scheduled"&&(Lo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cz=e=>e.startsWith("--");function uz(e,t,n){cz(t)?e.style.setProperty(t,n):e.style[t]=n}const dz=ky(()=>window.ScrollTimeline!==void 0),hz={};function fz(e,t){const n=ky(e);return()=>hz[t]??n()}const EE=fz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xc=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,D_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xc([0,.65,.55,1]),circOut:xc([.55,0,1,.45]),backIn:xc([.31,.01,.66,-.59]),backOut:xc([.33,1.53,.69,.99])};function TE(e,t){if(e)return typeof e=="function"?EE()?jE(e,t):"ease-out":hE(e)?xc(e):Array.isArray(e)?e.map(n=>TE(n,t)||D_.easeOut):D_[e]}function pz(e,t,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const f=TE(l,s);Array.isArray(f)&&(d.easing=f);const m={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function PE(e){return typeof e=="function"&&"applyToOptions"in e}function mz({type:e,...t}){return PE(e)&&EE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class RE extends My{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=t,Cl(typeof t.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const u=mz(t);this.animation=pz(n,r,s,u,o),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=Dy(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):uz(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const t=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Tr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Tr(t)}get time(){return Tr(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ar(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&dz()?(this.animation.timeline=t,Rr):n(this)}}const AE={anticipate:lE,backInOut:aE,circInOut:uE};function gz(e){return e in AE}function vz(e){typeof e.ease=="string"&&gz(e.ease)&&(e.ease=AE[e.ease])}const _m=10;class xz extends RE{constructor(t){vz(t),NE(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new Ly({...a,autoplay:!1}),c=Math.max(_m,Mn.now()-this.startTime),u=Es(0,_m,c-_m);n.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const M_=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Wi.test(e)||e==="0")&&!e.startsWith("url("));function yz(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function wz(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],a=M_(s,t),l=M_(o,t);return Gf(a===l,`You are trying to animate ${t} from "${s}" to "${o}". "${a?o:s}" is not an animatable value.`,"value-not-animatable"),!a||!l?!1:yz(e)||(n==="spring"||PE(n))&&r}function _v(e){e.duration=0,e.type="keyframes"}const bz=new Set(["opacity","clipPath","filter","transform"]),_z=ky(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function jz(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return _z()&&n&&bz.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}const Sz=40;class Nz extends My{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...f}){var y;super(),this.stop=()=>{var g,w;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Mn.now();const m={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:a,name:c,motionValue:u,element:d,...f},p=(d==null?void 0:d.KeyframeResolver)||$y;this.keyframeResolver=new p(l,(g,w,v)=>this.onKeyframesResolved(g,w,m,!v),c,u,d),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,r,s){var w,v;this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Mn.now(),wz(t,o,a,l)||((Qs.instantAnimations||!c)&&(d==null||d(Dy(t,r,n))),t[0]=t[t.length-1],_v(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Sz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!u&&jz(m),y=(v=(w=m.motionValue)==null?void 0:w.owner)==null?void 0:v.current,g=p?new xz({...m,element:y}):new Ly(m);g.finished.then(()=>{this.notifyFinished()}).catch(Rr),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),lz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function IE(e,t,n,r=0,s=1){const o=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,l=(a-1)*r;return typeof n=="function"?n(o,a):s===1?o*r:l-o*r}const kz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Cz(e){const t=kz.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}const Ez=4;function OE(e,t,n=1){Cl(n<=Ez,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,s]=Cz(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const a=o.trim();return ZC(a)?parseFloat(a):a}return Py(s)?OE(s,t,n+1):s}const Tz={type:"spring",stiffness:500,damping:25,restSpeed:10},Pz=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Rz={type:"keyframes",duration:.8},Az={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Iz=(e,{keyframes:t})=>t.length>2?Rz:zl.has(e)?e.startsWith("scale")?Pz(t[1]):Tz:Az,Oz=e=>e!==null;function Dz(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(Oz),o=t&&n!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}function DE(e,t){if(e!=null&&e.inherit&&t){const{inherit:n,...r}=e;return{...t,...r}}return e}function Fy(e,t){const n=(e==null?void 0:e[t])??(e==null?void 0:e.default)??e;return n!==e?DE(n,e):n}function Mz({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Uy=(e,t,n,r={},s,o)=>a=>{const l=Fy(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ar(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:o?void 0:s};Mz(l)||Object.assign(d,Iz(e,d)),d.duration&&(d.duration=Ar(d.duration)),d.repeatDelay&&(d.repeatDelay=Ar(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(_v(d),d.delay===0&&(f=!0)),(Qs.instantAnimations||Qs.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(f=!0,_v(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,f&&!o&&t.get()!==void 0){const m=Dz(d.keyframes,l);if(m!==void 0){wt.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new Ly(d):new Nz(d)};function L_(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Vy(e,t,n,r){if(typeof t=="function"){const[s,o]=L_(r);t=t(n!==void 0?n:e.custom,s,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,o]=L_(r);t=t(n!==void 0?n:e.custom,s,o)}return t}function nl(e,t,n){const r=e.getProps();return Vy(r,t,n!==void 0?n:r.custom,e)}const ME=new Set(["width","height","top","left","right","bottom",...Bl]),$_=30,Lz=e=>!isNaN(parseFloat(e));class $z{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const s=Mn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Lz(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Cy);const r=this.events[t].add(n);return t==="change"?()=>{r(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>$_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$_);return nE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function El(e,t){return new $z(e,t)}const jv=e=>Array.isArray(e);function Fz(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,El(n))}function Uz(e){return jv(e)?e[e.length-1]||0:e}function Vz(e,t){const n=nl(e,t);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const a in o){const l=Uz(o[a]);Fz(e,a,l)}}const Tn=e=>!!(e&&e.getVelocity);function Bz(e){return!!(Tn(e)&&e.add)}function Sv(e,t){const n=e.getValue("willChange");if(Bz(n))return n.add(t);if(!n&&Qs.WillChange){const r=new Qs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function By(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const zz="framerAppearId",LE="data-"+By(zz);function $E(e){return e.props[LE]}function qz({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function FE(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o,transitionEnd:a,...l}=t;const c=e.getDefaultTransition();o=o?DE(o,c):c;const u=o==null?void 0:o.reduceMotion;r&&(o=r);const d=[],f=s&&e.animationState&&e.animationState.getState()[s];for(const m in l){const p=e.getValue(m,e.latestValues[m]??null),y=l[m];if(y===void 0||f&&qz(f,m))continue;const g={delay:n,...Fy(o||{},m)},w=p.get();if(w!==void 0&&!p.isAnimating&&!Array.isArray(y)&&y===w&&!g.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const _=$E(e);if(_){const N=window.MotionHandoffAnimation(_,m,wt);N!==null&&(g.startTime=N,v=!0)}}Sv(e,m);const x=u??e.shouldReduceMotion;p.start(Uy(m,p,y,x&&ME.has(m)?{type:!1}:g,e,v));const b=p.animation;b&&d.push(b)}if(a){const m=()=>wt.update(()=>{a&&Vz(e,a)});d.length?Promise.all(d).then(m):m()}return d}function Nv(e,t,n={}){var c;const r=nl(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(FE(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=s;return Wz(e,t,u,d,f,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function Wz(e,t,n=0,r=0,s=0,o=1,a){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(Nv(c,t,{...a,delay:n+(typeof r=="function"?0:r)+IE(e.variantChildren,c,r,s,o)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function Kz(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(o=>Nv(e,o,n));r=Promise.all(s)}else if(typeof t=="string")r=Nv(e,t,n);else{const s=typeof t=="function"?nl(e,t,n.custom):t;r=Promise.all(FE(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const Hz={test:e=>e==="auto",parse:e=>e},UE=e=>t=>t.test(e),VE=[Vl,Se,ks,ci,wB,yB,Hz],F_=e=>VE.find(UE(e));function Gz(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||tE(e):!0}const Yz=new Set(["brightness","contrast","saturate","opacity"]);function Jz(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ry)||[];if(!r)return e;const s=n.replace(r,"");let o=Yz.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+s+")"}const Qz=/\b([a-z-]*)\(.*?\)/gu,kv={...Wi,getAnimatableNone:e=>{const t=e.match(Qz);return t?t.map(Jz).join(" "):e}},U_={...Vl,transform:Math.round},Xz={rotate:ci,rotateX:ci,rotateY:ci,rotateZ:ci,scale:Ad,scaleX:Ad,scaleY:Ad,scaleZ:Ad,skew:ci,skewX:ci,skewY:ci,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:mu,originX:k_,originY:k_,originZ:Se},zy={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,top:Se,right:Se,bottom:Se,left:Se,inset:Se,insetBlock:Se,insetBlockStart:Se,insetBlockEnd:Se,insetInline:Se,insetInlineStart:Se,insetInlineEnd:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,paddingBlock:Se,paddingBlockStart:Se,paddingBlockEnd:Se,paddingInline:Se,paddingInlineStart:Se,paddingInlineEnd:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,marginBlock:Se,marginBlockStart:Se,marginBlockEnd:Se,marginInline:Se,marginInlineStart:Se,marginInlineEnd:Se,fontSize:Se,backgroundPositionX:Se,backgroundPositionY:Se,...Xz,zIndex:U_,fillOpacity:mu,strokeOpacity:mu,numOctaves:U_},Zz={...zy,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:kv,WebkitFilter:kv},BE=e=>Zz[e];function zE(e,t){let n=BE(e);return n!==kv&&(n=Wi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const e6=new Set(["auto","none","0"]);function t6(e,t,n){let r=0,s;for(;r<e.length&&!s;){const o=e[r];typeof o=="string"&&!e6.has(o)&&gu(o).values.length&&(s=e[r]),r++}if(s&&n)for(const o of t)e[o]=zE(n,s)}class n6 extends $y{constructor(t,n,r,s,o){super(t,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),Py(f))){const m=OE(f,n.current);m!==void 0&&(t[d]=m),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!ME.has(r)||t.length!==2)return;const[s,o]=t,a=F_(s),l=F_(o),c=N_(s),u=N_(o);if(c!==u&&ki[r]){this.needsMeasurement=!0;return}if(a!==l)if(O_(a)&&O_(l))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else ki[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||Gz(t[s]))&&r.push(s);r.length&&t6(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ki[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=ki[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const r6=new Set(["opacity","clipPath","filter","transform"]);function qE(e,t,n){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e).filter(r=>r!=null)}const WE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Cv(e){return eE(e)&&"offsetHeight"in e}const{schedule:qy,cancel:$H}=fE(queueMicrotask,!1),qr={x:!1,y:!1};function KE(){return qr.x||qr.y}function s6(e){return e==="x"||e==="y"?qr[e]?null:(qr[e]=!0,()=>{qr[e]=!1}):qr.x||qr.y?null:(qr.x=qr.y=!0,()=>{qr.x=qr.y=!1})}function HE(e,t){const n=qE(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function i6(e){return!(e.pointerType==="touch"||KE())}function o6(e,t,n={}){const[r,s,o]=HE(e,n);return r.forEach(a=>{let l=!1,c=!1,u;const d=()=>{a.removeEventListener("pointerleave",y)},f=w=>{u&&(u(w),u=void 0),d()},m=w=>{l=!1,window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),c&&(c=!1,f(w))},p=()=>{l=!0,window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",m,s)},y=w=>{if(w.pointerType!=="touch"){if(l){c=!0;return}f(w)}},g=w=>{if(!i6(w))return;c=!1;const v=t(a,w);typeof v=="function"&&(u=v,a.addEventListener("pointerleave",y,s))};a.addEventListener("pointerenter",g,s),a.addEventListener("pointerdown",p,s)}),o}const GE=(e,t)=>t?e===t?!0:GE(e,t.parentElement):!1,Wy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,a6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function l6(e){return a6.has(e.tagName)||e.isContentEditable===!0}const c6=new Set(["INPUT","SELECT","TEXTAREA"]);function u6(e){return c6.has(e.tagName)||e.isContentEditable===!0}const oh=new WeakSet;function V_(e){return t=>{t.key==="Enter"&&e(t)}}function jm(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const d6=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=V_(()=>{if(oh.has(n))return;jm(n,"down");const s=V_(()=>{jm(n,"up")}),o=()=>jm(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function B_(e){return Wy(e)&&!KE()}const z_=new WeakSet;function h6(e,t,n={}){const[r,s,o]=HE(e,n),a=l=>{const c=l.currentTarget;if(!B_(l)||z_.has(l))return;oh.add(c),n.stopPropagation&&z_.add(l);const u=t(c,l),d=(p,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),oh.has(c)&&oh.delete(c),B_(p)&&typeof u=="function"&&u(p,{success:y})},f=p=>{d(p,c===window||c===document||n.useGlobalTarget||GE(c,p.target))},m=p=>{d(p,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",m,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),Cv(l)&&(l.addEventListener("focus",u=>d6(u,s)),!l6(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function Ky(e){return eE(e)&&"ownerSVGElement"in e}const ah=new WeakMap;let ui;const YE=(e,t,n)=>(r,s)=>s&&s[0]?s[0][e+"Size"]:Ky(r)&&"getBBox"in r?r.getBBox()[t]:r[n],f6=YE("inline","width","offsetWidth"),p6=YE("block","height","offsetHeight");function m6({target:e,borderBoxSize:t}){var n;(n=ah.get(e))==null||n.forEach(r=>{r(e,{get width(){return f6(e,t)},get height(){return p6(e,t)}})})}function g6(e){e.forEach(m6)}function v6(){typeof ResizeObserver>"u"||(ui=new ResizeObserver(g6))}function x6(e,t){ui||v6();const n=qE(e);return n.forEach(r=>{let s=ah.get(r);s||(s=new Set,ah.set(r,s)),s.add(t),ui==null||ui.observe(r)}),()=>{n.forEach(r=>{const s=ah.get(r);s==null||s.delete(t),s!=null&&s.size||ui==null||ui.unobserve(r)})}}const lh=new Set;let Va;function y6(){Va=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};lh.forEach(t=>t(e))},window.addEventListener("resize",Va)}function w6(e){return lh.add(e),Va||y6(),()=>{lh.delete(e),!lh.size&&typeof Va=="function"&&(window.removeEventListener("resize",Va),Va=void 0)}}function q_(e,t){return typeof e=="function"?w6(e):x6(e,t)}function b6(e){return Ky(e)&&e.tagName==="svg"}const _6=[...VE,Wt,Wi],j6=e=>_6.find(UE(e)),W_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ba=()=>({x:W_(),y:W_()}),K_=()=>({min:0,max:0}),Zt=()=>({x:K_(),y:K_()}),S6=new WeakMap;function Yf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function vu(e){return typeof e=="string"||Array.isArray(e)}const Hy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gy=["initial",...Hy];function Jf(e){return Yf(e.animate)||Gy.some(t=>vu(e[t]))}function JE(e){return!!(Jf(e)||e.variants)}function N6(e,t,n){for(const r in t){const s=t[r],o=n[r];if(Tn(s))e.addValue(r,s);else if(Tn(o))e.addValue(r,El(s,{owner:e}));else if(o!==s)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,El(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ev={current:null},QE={current:!1},k6=typeof window<"u";function C6(){if(QE.current=!0,!!k6)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ev.current=e.matches;e.addEventListener("change",t),t()}else Ev.current=!1}const H_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Zh={};function XE(e){Zh=e}function E6(){return Zh}class T6{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=$y,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Mn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,wt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Jf(n),this.isVariantNode=JE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const y=m[p];u[p]!==void 0&&Tn(y)&&y.set(u[p])}}mount(t){var n,r;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=t,S6.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(QE.current||C6(),this.shouldReduceMotion=Ev.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),qi(this.notifyUpdate),qi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),n.accelerate&&r6.has(t)&&this.current instanceof HTMLElement){const{factory:a,keyframes:l,times:c,ease:u,duration:d}=n.accelerate,f=new RE({element:this.current,name:t,keyframes:l,times:c,ease:u,duration:Ar(d)}),m=a(f);this.valueSubscriptions.set(t,()=>{m(),f.cancel()});return}const r=zl.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&wt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zh){const n=Zh[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Zt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<H_.length;r++){const s=H_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,a=t[o];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=N6(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=El(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(ZC(r)||tE(r))?r=parseFloat(r):!j6(r)&&Wi.test(n)&&(r=zE(t,n)),this.setBaseTarget(t,Tn(r)?r.get():r)),Tn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Vy(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Tn(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Cy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){qy.render(this.render)}}class ZE extends T6{constructor(){super(...arguments),this.KeyframeResolver=n6}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Tn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class eo{constructor(t){this.isMounted=!1,this.node=t}update(){}}function eT({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function P6({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function R6(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Sm(e){return e===void 0||e===1}function Tv({scale:e,scaleX:t,scaleY:n}){return!Sm(e)||!Sm(t)||!Sm(n)}function po(e){return Tv(e)||tT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function tT(e){return G_(e.x)||G_(e.y)}function G_(e){return e&&e!=="0%"}function ef(e,t,n){const r=e-n,s=t*r;return n+s}function Y_(e,t,n,r,s){return s!==void 0&&(e=ef(e,s,r)),ef(e,n,r)+t}function Pv(e,t=0,n=1,r,s){e.min=Y_(e.min,t,n,r,s),e.max=Y_(e.max,t,n,r,s)}function nT(e,{x:t,y:n}){Pv(e.x,t.translate,t.scale,t.originPoint),Pv(e.y,n.translate,n.scale,n.originPoint)}const J_=.999999999999,Q_=1.0000000000001;function A6(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let o,a;for(let l=0;l<s;l++){o=n[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&qa(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,nT(e,a)),r&&po(o.latestValues)&&qa(e,o.latestValues))}t.x<Q_&&t.x>J_&&(t.x=1),t.y<Q_&&t.y>J_&&(t.y=1)}function za(e,t){e.min=e.min+t,e.max=e.max+t}function X_(e,t,n,r,s=.5){const o=At(e.min,e.max,s);Pv(e,t,n,o,r)}function qa(e,t){X_(e.x,t.x,t.scaleX,t.scale,t.originX),X_(e.y,t.y,t.scaleY,t.scale,t.originY)}function rT(e,t){return eT(R6(e.getBoundingClientRect(),t))}function I6(e,t,n){const r=rT(e,n),{scroll:s}=t;return s&&(za(r.x,s.offset.x),za(r.y,s.offset.y)),r}const O6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D6=Bl.length;function M6(e,t,n){let r="",s=!0;for(let o=0;o<D6;o++){const a=Bl[o],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(a.startsWith("scale")?1:0);else{const u=parseFloat(l);c=a.startsWith("scale")?u===1:u===0}if(!c||n){const u=WE(l,zy[a]);if(!c){s=!1;const d=O6[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Yy(e,t,n){const{style:r,vars:s,transformOrigin:o}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(zl.has(c)){a=!0;continue}else if(mE(c)){s[c]=u;continue}else{const d=WE(u,zy[c]);c.startsWith("origin")?(l=!0,o[c]=d):r[c]=d}}if(t.transform||(a||n?r.transform=M6(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${u} ${d}`}}function sT(e,{style:t,vars:n},r,s){const o=e.style;let a;for(a in t)o[a]=t[a];s==null||s.applyProjectionStyles(o,r);for(a in n)o.setProperty(a,n[a])}function Z_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const uc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Se.test(e))e=parseFloat(e);else return e;const n=Z_(e,t.target.x),r=Z_(e,t.target.y);return`${n}% ${r}%`}},L6={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Wi.parse(e);if(s.length>5)return r;const o=Wi.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=At(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}},Rv={borderRadius:{...uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uc,borderTopRightRadius:uc,borderBottomLeftRadius:uc,borderBottomRightRadius:uc,boxShadow:L6};function iT(e,{layout:t,layoutId:n}){return zl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Rv[e]||e==="opacity")}function Jy(e,t,n){var a;const r=e.style,s=t==null?void 0:t.style,o={};if(!r)return o;for(const l in r)(Tn(r[l])||s&&Tn(s[l])||iT(l,e)||((a=n==null?void 0:n.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function $6(e){return window.getComputedStyle(e)}class F6 extends ZE{constructor(){super(...arguments),this.type="html",this.renderInstance=sT}readValueFromInstance(t,n){var r;if(zl.has(n))return(r=this.projection)!=null&&r.isProjecting?vv(n):rz(t,n);{const s=$6(t),o=(mE(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return rT(t,n)}build(t,n,r){Yy(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Jy(t,n,r)}}const U6={offset:"stroke-dashoffset",array:"stroke-dasharray"},V6={offset:"strokeDashoffset",array:"strokeDasharray"};function B6(e,t,n=1,r=0,s=!0){e.pathLength=1;const o=s?U6:V6;e[o.offset]=`${-r}`,e[o.array]=`${t} ${n}`}const z6=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function oT(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:a=0,...l},c,u,d){if(Yy(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m}=e;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox);for(const p of z6)f[p]!==void 0&&(m[p]=f[p],delete f[p]);t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&B6(f,s,o,a,!1)}const aT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),lT=e=>typeof e=="string"&&e.toLowerCase()==="svg";function q6(e,t,n,r){sT(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(aT.has(s)?s:By(s),t.attrs[s])}function cT(e,t,n){const r=Jy(e,t,n);for(const s in e)if(Tn(e[s])||Tn(t[s])){const o=Bl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=e[s]}return r}class W6 extends ZE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Zt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(zl.has(n)){const r=BE(n);return r&&r.default||0}return n=aT.has(n)?n:By(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return cT(t,n,r)}build(t,n,r){oT(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){q6(t,n,r,s)}mount(t){this.isSVGTag=lT(t.tagName),super.mount(t)}}const K6=Gy.length;function uT(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?uT(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<K6;n++){const r=Gy[n],s=e.props[r];(vu(s)||s===!1)&&(t[r]=s)}return t}function dT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const H6=[...Hy].reverse(),G6=Hy.length;function Y6(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Kz(e,n,r)))}function J6(e){let t=Y6(e),n=ej(),r=!0;const s=c=>(u,d)=>{var m;const f=nl(e,d,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:p,transitionEnd:y,...g}=f;u={...u,...g,...y}}return u};function o(c){t=c(e)}function a(c){const{props:u}=e,d=uT(e.parent)||{},f=[],m=new Set;let p={},y=1/0;for(let w=0;w<G6;w++){const v=H6[w],x=n[v],b=u[v]!==void 0?u[v]:d[v],_=vu(b),N=v===c?x.isActive:null;N===!1&&(y=w);let C=b===d[v]&&b!==u[v]&&_;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...p},!x.isActive&&N===null||!b&&!x.prevProp||Yf(b)||typeof b=="boolean")continue;if(v==="exit"&&x.isActive&&N!==!0){x.prevResolvedValues&&(p={...p,...x.prevResolvedValues});continue}const k=Q6(x.prevProp,b);let I=k||v===c&&x.isActive&&!C&&_||w>y&&_,$=!1;const O=Array.isArray(b)?b:[b];let U=O.reduce(s(v),{});N===!1&&(U={});const{prevResolvedValues:P={}}=x,K={...P,...U},D=R=>{I=!0,m.has(R)&&($=!0,m.delete(R)),x.needsAnimating[R]=!0;const M=e.getValue(R);M&&(M.liveStyle=!1)};for(const R in K){const M=U[R],L=P[R];if(p.hasOwnProperty(R))continue;let X=!1;jv(M)&&jv(L)?X=!dT(M,L):X=M!==L,X?M!=null?D(R):m.add(R):M!==void 0&&m.has(R)?D(R):x.protectedKeys[R]=!0}x.prevProp=b,x.prevResolvedValues=U,x.isActive&&(p={...p,...U}),r&&e.blockInitialAnimation&&(I=!1);const F=C&&k;I&&(!F||$)&&f.push(...O.map(R=>{const M={type:v};if(typeof R=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:L}=e,X=nl(L,R);if(L.enteringChildren&&X){const{delayChildren:le}=X.transition||{};M.delay=IE(L.enteringChildren,e,le)}}return{animation:R,options:M}}))}if(m.size){const w={};if(typeof u.initial!="boolean"){const v=nl(e,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(w.transition=v.transition)}m.forEach(v=>{const x=e.getBaseTarget(v),b=e.getValue(v);b&&(b.liveStyle=!0),w[v]=x??null}),f.push({animation:w})}let g=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(f):Promise.resolve()}function l(c,u){var f;if(n[c].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=a(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=ej()}}}function Q6(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dT(t,e):!1}function co(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ej(){return{animate:co(!0),whileInView:co(),whileHover:co(),whileTap:co(),whileDrag:co(),whileFocus:co(),exit:co()}}function tj(e,t){e.min=t.min,e.max=t.max}function Br(e,t){tj(e.x,t.x),tj(e.y,t.y)}function nj(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const hT=1e-4,X6=1-hT,Z6=1+hT,fT=.01,e8=0-fT,t8=0+fT;function Ln(e){return e.max-e.min}function n8(e,t,n){return Math.abs(e-t)<=n}function rj(e,t,n,r=.5){e.origin=r,e.originPoint=At(t.min,t.max,e.origin),e.scale=Ln(n)/Ln(t),e.translate=At(n.min,n.max,e.origin)-e.originPoint,(e.scale>=X6&&e.scale<=Z6||isNaN(e.scale))&&(e.scale=1),(e.translate>=e8&&e.translate<=t8||isNaN(e.translate))&&(e.translate=0)}function Mc(e,t,n,r){rj(e.x,t.x,n.x,r?r.originX:void 0),rj(e.y,t.y,n.y,r?r.originY:void 0)}function sj(e,t,n){e.min=n.min+t.min,e.max=e.min+Ln(t)}function r8(e,t,n){sj(e.x,t.x,n.x),sj(e.y,t.y,n.y)}function ij(e,t,n){e.min=t.min-n.min,e.max=e.min+Ln(t)}function tf(e,t,n){ij(e.x,t.x,n.x),ij(e.y,t.y,n.y)}function oj(e,t,n,r,s){return e-=t,e=ef(e,1/n,r),s!==void 0&&(e=ef(e,1/s,r)),e}function s8(e,t=0,n=1,r=.5,s,o=e,a=e){if(ks.test(t)&&(t=parseFloat(t),t=At(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=At(o.min,o.max,r);e===o&&(l-=t),e.min=oj(e.min,t,n,l,s),e.max=oj(e.max,t,n,l,s)}function aj(e,t,[n,r,s],o,a){s8(e,t[n],t[r],t[s],t.scale,o,a)}const i8=["x","scaleX","originX"],o8=["y","scaleY","originY"];function lj(e,t,n,r){aj(e.x,t,i8,n?n.x:void 0,r?r.x:void 0),aj(e.y,t,o8,n?n.y:void 0,r?r.y:void 0)}function cj(e){return e.translate===0&&e.scale===1}function pT(e){return cj(e.x)&&cj(e.y)}function uj(e,t){return e.min===t.min&&e.max===t.max}function a8(e,t){return uj(e.x,t.x)&&uj(e.y,t.y)}function dj(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function mT(e,t){return dj(e.x,t.x)&&dj(e.y,t.y)}function hj(e){return Ln(e.x)/Ln(e.y)}function fj(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function ms(e){return[e("x"),e("y")]}function l8(e,t,n){let r="";const s=e.x.translate/t.x,o=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||o||a)&&(r=`translate3d(${s}px, ${o}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:m,skewX:p,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const gT=["TopLeft","TopRight","BottomLeft","BottomRight"],c8=gT.length,pj=e=>typeof e=="string"?parseFloat(e):e,mj=e=>typeof e=="number"||Se.test(e);function u8(e,t,n,r,s,o){s?(e.opacity=At(0,n.opacity??1,d8(r)),e.opacityExit=At(t.opacity??1,0,h8(r))):o&&(e.opacity=At(t.opacity??1,n.opacity??1,r));for(let a=0;a<c8;a++){const l=`border${gT[a]}Radius`;let c=gj(t,l),u=gj(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||mj(c)===mj(u)?(e[l]=Math.max(At(pj(c),pj(u),r),0),(ks.test(u)||ks.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=At(t.rotate||0,n.rotate||0,r))}function gj(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const d8=vT(0,.5,cE),h8=vT(.5,.95,Rr);function vT(e,t,n){return r=>r<e?0:r>t?1:n(pu(e,t,r))}function f8(e,t,n){const r=Tn(e)?e:El(e);return r.start(Uy("",r,t,n)),r.animation}function xu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const p8=(e,t)=>e.depth-t.depth;class m8{constructor(){this.children=[],this.isDirty=!1}add(t){Ny(this.children,t),this.isDirty=!0}remove(t){Yh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(p8),this.isDirty=!1,this.children.forEach(t)}}function g8(e,t){const n=Mn.now(),r=({timestamp:s})=>{const o=s-n;o>=t&&(qi(r),e(o-t))};return wt.setup(r,!0),()=>qi(r)}function ch(e){return Tn(e)?e.get():e}class v8{constructor(){this.members=[]}add(t){Ny(this.members,t);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===t||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&Yh(this.members,r)}t.scheduleRender()}remove(t){if(Yh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s],a=o.instance;if(o.isPresent!==!1&&(!a||a.isConnected!==!1)){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender();const s=r.options.layoutDependency,o=t.options.layoutDependency;if(!(s!==void 0&&o!==void 0&&s===o)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:l}=t.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const uh={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Nm=["","X","Y","Z"],x8=1e3;let y8=0;function km(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function xT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=$E(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",wt,!(s||o))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&xT(r)}function yT({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=y8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_8),this.nodes.forEach(k8),this.nodes.forEach(C8),this.nodes.forEach(j8)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new m8)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Cy),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Ky(a)&&!b6(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,f=0;const m=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{f=window.innerWidth}),e(a,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=g8(m,250),uh.hasAnimatedSinceResize&&(uh.hasAnimatedSinceResize=!1,this.nodes.forEach(yj)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||A8,{onLayoutAnimationStart:g,onLayoutAnimationComplete:w}=u.getProps(),v=!this.targetLayout||!mT(this.targetLayout,p),x=!f&&m;if(this.options.layoutRoot||this.resumeFrom||x||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...Fy(y,"layout"),onPlay:g,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,x)}else f||yj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(E8),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(N8),this.nodes.forEach(w8),this.nodes.forEach(b8)):this.nodes.forEach(xj),this.clearAllSnapshots();const l=Mn.now();gn.delta=Es(0,1e3/60,l-gn.timestamp),gn.timestamp=l,gn.isProcessing=!0,vm.update.process(gn),vm.preRender.process(gn),vm.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(S8),this.sharedNodes.forEach(T8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ln(this.snapshot.measuredBox.x)&&!Ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!pT(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||po(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),I8(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Zt();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(O8))){const{scroll:d}=this.root;d&&(za(l.x,d.offset.x),za(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=Zt();if(Br(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:m}=d;d!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Br(l,a),za(l.x,f.offset.x),za(l.y,f.offset.y))}return l}applyTransform(a,l=!1){const c=Zt();Br(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&qa(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),po(d.latestValues)&&qa(c,d.latestValues)}return po(this.latestValues)&&qa(c,this.latestValues),c}removeTransform(a){const l=Zt();Br(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!po(u.latestValues))continue;Tv(u.latestValues)&&u.updateSnapshot();const d=Zt(),f=u.measurePageBox();Br(d,f),lj(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return po(this.latestValues)&&lj(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!this.layout||!(d||f))return;this.resolvedRelativeTargetAt=gn.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Zt(),this.targetWithTransforms=Zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Br(this.target,this.layout.layoutBox),nT(this.target,this.targetDelta)):Br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Tv(this.parent.latestValues)||tT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Zt(),this.relativeTargetOrigin=Zt(),tf(this.relativeTargetOrigin,l,c),Br(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Br(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;A6(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Zt());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nj(this.prevProjectionDelta.x,this.projectionDelta.x),nj(this.prevProjectionDelta.y,this.projectionDelta.y)),Mc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!fj(this.projectionDelta.x,this.prevProjectionDelta.x)||!fj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ba(),this.projectionDelta=Ba(),this.projectionDeltaWithTransform=Ba()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Ba();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Zt(),p=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,w=this.getStack(),v=!w||w.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(R8));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const N=_/1e3;wj(f.x,a.x,N),wj(f.y,a.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P8(this.relativeTarget,this.relativeTargetOrigin,m,N),b&&a8(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Zt()),Br(b,this.relativeTarget)),g&&(this.animationValues=d,u8(d,u,this.latestValues,N,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{uh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=El(0)),this.currentAnimation=f8(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(x8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&wT(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Zt();const f=Ln(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const m=Ln(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}Br(l,c),qa(l,d),Mc(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new v8),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&km("z",a,u,this.animationValues);for(let d=0;d<Nm.length;d++)km(`rotate${Nm[d]}`,a,u,this.animationValues),km(`skew${Nm[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=ch(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=ch(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!po(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=l8(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),a.transform=f;const{x:m,y:p}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in Rv){if(d[y]===void 0)continue;const{correct:g,applyTo:w,isCSSVariable:v}=Rv[y],x=f==="none"?d[y]:g(d[y],u);if(w){const b=w.length;for(let _=0;_<b;_++)a[w[_]]=x}else v?this.options.visualElement.renderState.vars[y]=x:a[y]=x}this.options.layoutId&&(a.pointerEvents=u===this?ch(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(vj),this.root.sharedNodes.clear()}}}function w8(e){e.updateLayout()}function b8(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:o}=e.options,a=t.source!==e.layout.source;o==="size"?ms(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],p=Ln(m);m.min=r[f].min,m.max=m.min+p}):wT(o,t.layoutBox,r)&&ms(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],p=Ln(r[f]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+p)});const l=Ba();Mc(l,r,t.layoutBox);const c=Ba();a?Mc(c,e.applyTransform(s,!0),t.measuredBox):Mc(c,r,t.layoutBox);const u=!pT(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:p}=f;if(m&&p){const y=Zt();tf(y,t.layoutBox,m.layoutBox);const g=Zt();tf(g,r,p.layoutBox),mT(y,g)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=y,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function _8(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function j8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function S8(e){e.clearSnapshot()}function vj(e){e.clearMeasurements()}function xj(e){e.isLayoutDirty=!1}function N8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function yj(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function k8(e){e.resolveTargetDelta()}function C8(e){e.calcProjection()}function E8(e){e.resetSkewAndRotation()}function T8(e){e.removeLeadSnapshot()}function wj(e,t,n){e.translate=At(t.translate,0,n),e.scale=At(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bj(e,t,n,r){e.min=At(t.min,n.min,r),e.max=At(t.max,n.max,r)}function P8(e,t,n,r){bj(e.x,t.x,n.x,r),bj(e.y,t.y,n.y,r)}function R8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const A8={duration:.45,ease:[.4,0,.1,1]},_j=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),jj=_j("applewebkit/")&&!_j("chrome/")?Math.round:Rr;function Sj(e){e.min=jj(e.min),e.max=jj(e.max)}function I8(e){Sj(e.x),Sj(e.y)}function wT(e,t,n){return e==="position"||e==="preserve-aspect"&&!n8(hj(t),hj(n),.2)}function O8(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const D8=yT({attachResizeListener:(e,t)=>xu(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Cm={current:void 0},bT=yT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Cm.current){const e=new D8({});e.mount(window),e.setOptions({layoutScroll:!0}),Cm.current=e}return Cm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qy=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Nj(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function M8(...e){return t=>{let n=!1;const r=e.map(s=>{const o=Nj(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():Nj(e[s],null)}}}}function L8(...e){return h.useCallback(M8(...e),e)}class $8 extends h.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,s=Cv(r)&&r.offsetWidth||0,o=Cv(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left,a.bottom=o-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function F8({children:e,isPresent:t,anchorX:n,anchorY:r,root:s,pop:o}){var m;const a=h.useId(),l=h.useRef(null),c=h.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=h.useContext(Qy),d=((m=e.props)==null?void 0:m.ref)??(e==null?void 0:e.ref),f=L8(l,d);return h.useInsertionEffect(()=>{const{width:p,height:y,top:g,left:w,right:v,bottom:x}=c.current;if(t||o===!1||!l.current||!p||!y)return;const b=n==="left"?`left: ${w}`:`right: ${v}`,_=r==="bottom"?`bottom: ${x}`:`top: ${g}`;l.current.dataset.motionPopId=a;const N=document.createElement("style");u&&(N.nonce=u);const C=s??document.head;return C.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${y}px !important;
            ${b}px !important;
            ${_}px !important;
          }
        `),()=>{C.contains(N)&&C.removeChild(N)}},[t]),i.jsx($8,{isPresent:t,childRef:l,sizeRef:c,pop:o,children:o===!1?e:h.cloneElement(e,{ref:f})})}const U8=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:a,anchorX:l,anchorY:c,root:u})=>{const d=Sy(V8),f=h.useId();let m=!0,p=h.useMemo(()=>(m=!1,{id:f,initial:t,isPresent:n,custom:s,onExitComplete:y=>{d.set(y,!0);for(const g of d.values())if(!g)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return o&&m&&(p={...p}),h.useMemo(()=>{d.forEach((y,g)=>d.set(g,!1))},[n]),h.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),e=i.jsx(F8,{pop:a==="popLayout",isPresent:n,anchorX:l,anchorY:c,root:u,children:e}),i.jsx(Hf.Provider,{value:p,children:e})};function V8(){return new Map}function _T(e=!0){const t=h.useContext(Hf);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,o=h.useId();h.useEffect(()=>{if(e)return s(o)},[e]);const a=h.useCallback(()=>e&&r&&r(o),[o,r,e]);return!n&&r?[!1,a]:[!0]}const Id=e=>e.key||"";function kj(e){const t=[];return h.Children.forEach(e,n=>{h.isValidElement(n)&&t.push(n)}),t}const B8=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,f]=_T(a),m=h.useMemo(()=>kj(e),[e]),p=a&&!d?[]:m.map(Id),y=h.useRef(!0),g=h.useRef(m),w=Sy(()=>new Map),v=h.useRef(new Set),[x,b]=h.useState(m),[_,N]=h.useState(m);XC(()=>{y.current=!1,g.current=m;for(let I=0;I<_.length;I++){const $=Id(_[I]);p.includes($)?(w.delete($),v.current.delete($)):w.get($)!==!0&&w.set($,!1)}},[_,p.length,p.join("-")]);const C=[];if(m!==x){let I=[...m];for(let $=0;$<_.length;$++){const O=_[$],U=Id(O);p.includes(U)||(I.splice($,0,O),C.push(O))}return o==="wait"&&C.length&&(I=C),N(kj(I)),b(m),null}const{forceRender:k}=h.useContext(jy);return i.jsx(i.Fragment,{children:_.map(I=>{const $=Id(I),O=a&&!d?!1:m===_||p.includes($),U=()=>{if(v.current.has($))return;if(v.current.add($),w.has($))w.set($,!0);else return;let P=!0;w.forEach(K=>{K||(P=!1)}),P&&(k==null||k(),N(g.current),a&&(f==null||f()),r&&r())};return i.jsx(U8,{isPresent:O,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:o,root:u,onExitComplete:O?void 0:U,anchorX:l,anchorY:c,children:I},$)})})},jT=h.createContext({strict:!1}),Cj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Ej=!1;function z8(){if(Ej)return;const e={};for(const t in Cj)e[t]={isEnabled:n=>Cj[t].some(r=>!!n[r])};XE(e),Ej=!0}function ST(){return z8(),E6()}function q8(e){const t=ST();for(const n in e)t[n]={...t[n],...e[n]};XE(t)}const W8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function nf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||W8.has(e)}let NT=e=>!nf(e);function K8(e){typeof e=="function"&&(NT=t=>t.startsWith("on")?!nf(t):e(t))}try{K8(require("@emotion/is-prop-valid").default)}catch{}function H8(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(NT(s)||n===!0&&nf(s)||!t&&!nf(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Qf=h.createContext({});function G8(e,t){if(Jf(e)){const{initial:n,animate:r}=e;return{initial:n===!1||vu(n)?n:void 0,animate:vu(r)?r:void 0}}return e.inherit!==!1?t:{}}function Y8(e){const{initial:t,animate:n}=G8(e,h.useContext(Qf));return h.useMemo(()=>({initial:t,animate:n}),[Tj(t),Tj(n)])}function Tj(e){return Array.isArray(e)?e.join(" "):e}const Xy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kT(e,t,n){for(const r in t)!Tn(t[r])&&!iT(r,n)&&(e[r]=t[r])}function J8({transformTemplate:e},t){return h.useMemo(()=>{const n=Xy();return Yy(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Q8(e,t){const n=e.style||{},r={};return kT(r,n,e),Object.assign(r,J8(e,t)),r}function X8(e,t){const n={},r=Q8(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const CT=()=>({...Xy(),attrs:{}});function Z8(e,t,n,r){const s=h.useMemo(()=>{const o=CT();return oT(o,t,lT(r),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};kT(o,e.style,e),s.style={...o,...s.style}}return s}const eq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zy(e){return typeof e!="string"||e.includes("-")?!1:!!(eq.indexOf(e)>-1||/[A-Z]/u.test(e))}function tq(e,t,n,{latestValues:r},s,o=!1,a){const c=(a??Zy(e)?Z8:X8)(t,r,s,e),u=H8(t,typeof e=="string",o),d=e!==h.Fragment?{...u,...c,ref:n}:{},{children:f}=t,m=h.useMemo(()=>Tn(f)?f.get():f,[f]);return h.createElement(e,{...d,children:m})}function nq({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:rq(n,r,s,e),renderState:t()}}function rq(e,t,n,r){const s={},o=r(e,{});for(const m in o)s[m]=ch(o[m]);let{initial:a,animate:l}=e;const c=Jf(e),u=JE(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?l:a;if(f&&typeof f!="boolean"&&!Yf(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const y=Vy(e,m[p]);if(y){const{transitionEnd:g,transition:w,...v}=y;for(const x in v){let b=v[x];if(Array.isArray(b)){const _=d?b.length-1:0;b=b[_]}b!==null&&(s[x]=b)}for(const x in g)s[x]=g[x]}}}return s}const ET=e=>(t,n)=>{const r=h.useContext(Qf),s=h.useContext(Hf),o=()=>nq(e,t,r,s);return n?o():Sy(o)},sq=ET({scrapeMotionValuesFromProps:Jy,createRenderState:Xy}),iq=ET({scrapeMotionValuesFromProps:cT,createRenderState:CT}),oq=Symbol.for("motionComponentSymbol");function aq(e,t,n){const r=h.useRef(n);h.useInsertionEffect(()=>{r.current=n});const s=h.useRef(null);return h.useCallback(o=>{var l;o&&((l=e.onMount)==null||l.call(e,o)),t&&(o?t.mount(o):t.unmount());const a=r.current;if(typeof a=="function")if(o){const c=a(o);typeof c=="function"&&(s.current=c)}else s.current?(s.current(),s.current=null):a(o);else a&&(a.current=o)},[t])}const TT=h.createContext({});function ya(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function lq(e,t,n,r,s,o){var b,_;const{visualElement:a}=h.useContext(Qf),l=h.useContext(jT),c=h.useContext(Hf),u=h.useContext(Qy),d=u.reducedMotion,f=u.skipAnimations,m=h.useRef(null),p=h.useRef(!1);r=r||l.renderer,!m.current&&r&&(m.current=r(e,{visualState:t,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,skipAnimations:f,isSVG:o}),p.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));const y=m.current,g=h.useContext(TT);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&cq(m.current,n,s,g);const w=h.useRef(!1);h.useInsertionEffect(()=>{y&&w.current&&y.update(n,c)});const v=n[LE],x=h.useRef(!!v&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,v))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,v)));return XC(()=>{p.current=!0,y&&(w.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),x.current&&y.animationState&&y.animationState.animateChanges())}),h.useEffect(()=>{y&&(!x.current&&y.animationState&&y.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,v)}),x.current=!1),y.enteringChildren=void 0)}),y}function cq(e,t,n,r){const{layoutId:s,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:PT(e.parent)),e.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!a||l&&ya(l),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function PT(e){if(e)return e.options.allowProjection!==!1?e.projection:PT(e.parent)}function Em(e,{forwardMotionProps:t=!1,type:n}={},r,s){r&&q8(r);const o=n?n==="svg":Zy(e),a=o?iq:sq;function l(u,d){let f;const m={...h.useContext(Qy),...u,layoutId:uq(u)},{isStatic:p}=m,y=Y8(u),g=a(u,p);if(!p&&QC){dq();const w=hq(m);f=w.MeasureLayout,y.visualElement=lq(e,g,m,s,w.ProjectionNode,o)}return i.jsxs(Qf.Provider,{value:y,children:[f&&y.visualElement?i.jsx(f,{visualElement:y.visualElement,...m}):null,tq(e,u,aq(g,y.visualElement,d),g,p,t,o)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=h.forwardRef(l);return c[oq]=e,c}function uq({layoutId:e}){const t=h.useContext(jy).id;return t&&e!==void 0?t+"-"+e:e}function dq(e,t){h.useContext(jT).strict}function hq(e){const t=ST(),{drag:n,layout:r}=t;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function fq(e,t){if(typeof Proxy>"u")return Em;const n=new Map,r=(o,a)=>Em(o,a,e,t),s=(o,a)=>r(o,a);return new Proxy(s,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,Em(a,void 0,e,t)),n.get(a))})}const pq=(e,t)=>t.isSVG??Zy(e)?new W6(t):new F6(t,{allowProjection:e!==h.Fragment});class mq extends eo{constructor(t){super(t),t.animationState||(t.animationState=J6(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Yf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let gq=0;class vq extends eo{constructor(){super(...arguments),this.id=gq++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const xq={animation:{Feature:mq},exit:{Feature:vq}};function Bu(e){return{point:{x:e.pageX,y:e.pageY}}}const yq=e=>t=>Wy(t)&&e(t,Bu(t));function Lc(e,t,n,r){return xu(e,t,yq(n),r)}const RT=({current:e})=>e?e.ownerDocument.defaultView:null,Pj=(e,t)=>Math.abs(e-t);function wq(e,t){const n=Pj(e.x,t.x),r=Pj(e.y,t.y);return Math.sqrt(n**2+r**2)}const Rj=new Set(["auto","scroll"]);class AT{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Pm(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,g=wq(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!g)return;const{point:w}=p,{timestamp:v}=gn;this.history.push({...w,timestamp:v});const{onStart:x,onMove:b}=this.handlers;y||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,y)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Tm(y,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(p,y)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:v}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Pm(p.type==="pointercancel"?this.lastMoveEventInfo:Tm(y,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,x),w&&w(p,x)},!Wy(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const c=Bu(t),u=Tm(c,this.transformPagePoint),{point:d}=u,{timestamp:f}=gn;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=n;m&&m(t,Pm(u,this.history)),this.removeListeners=Fu(Lc(this.contextWindow,"pointermove",this.handlePointerMove),Lc(this.contextWindow,"pointerup",this.handlePointerUp),Lc(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(Rj.has(r.overflowX)||Rj.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:s.x-n.x,y:s.y-n.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,s),wt.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),qi(this.updatePoint)}}function Tm(e,t){return t?{point:t(e.point)}:e}function Aj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pm({point:e},t){return{point:e,delta:Aj(e,IT(t)),offset:Aj(e,bq(t)),velocity:_q(t,.1)}}function bq(e){return e[0]}function IT(e){return e[e.length-1]}function _q(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=IT(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Ar(t)));)n--;if(!r)return{x:0,y:0};r===e[0]&&e.length>2&&s.timestamp-r.timestamp>Ar(t)*2&&(r=e[1]);const o=Tr(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function jq(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?At(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?At(n,e,r.max):Math.min(e,n)),e}function Ij(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Sq(e,{top:t,left:n,bottom:r,right:s}){return{x:Ij(e.x,n,s),y:Ij(e.y,t,r)}}function Oj(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Nq(e,t){return{x:Oj(e.x,t.x),y:Oj(e.y,t.y)}}function kq(e,t){let n=.5;const r=Ln(e),s=Ln(t);return s>r?n=pu(t.min,t.max-r,e.min):r>s&&(n=pu(e.min,e.max-s,t.min)),Es(0,1,n)}function Cq(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Av=.35;function Eq(e=Av){return e===!1?e=0:e===!0&&(e=Av),{x:Dj(e,"left","right"),y:Dj(e,"top","bottom")}}function Dj(e,t,n){return{min:Mj(e,t),max:Mj(e,n)}}function Mj(e,t){return typeof e=="number"?e:e[t]||0}const Tq=new WeakMap;class Pq{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Zt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=f=>{n&&this.snapToCursor(Bu(f).point),this.stopAnimation()},a=(f,m)=>{const{drag:p,dragPropagation:y,onDragStart:g}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=s6(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ms(v=>{let x=this.getAxisMotionValue(v).get()||0;if(ks.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const _=b.layout.layoutBox[v];_&&(x=Ln(_)*(parseFloat(x)/100))}}this.originPoint[v]=x}),g&&wt.update(()=>g(f,m),!1,!0),Sv(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:g,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=m;if(y&&this.currentDirection===null){this.currentDirection=Aq(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),w&&wt.update(()=>w(f,m),!1,!0)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:f}=this.getProps();(f||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new AT(t,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:RT(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&wt.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Od(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=jq(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;t&&ya(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Sq(r.layoutBox,t):this.constraints=!1,this.elastic=Eq(n),s!==this.constraints&&!ya(t)&&r&&this.constraints&&!this.hasMutatedConstraints&&ms(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Cq(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ya(t))return!1;const r=t.current;Cl(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=I6(r,s.root,this.visualElement.getTransformPagePoint());let a=Nq(s.layout.layoutBox,o);if(n){const l=n(P6(a));this.hasMutatedConstraints=!!l,l&&(a=eT(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=ms(d=>{if(!Od(d,n,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Sv(this.visualElement,t),r.start(Uy(t,r,0,n,this.visualElement,!1))}stopAnimation(){ms(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ms(n=>{const{drag:r}=this.getProps();if(!Od(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n],c=o.get()||0;o.set(t[n]-At(a,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ya(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ms(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=kq({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),ms(a=>{if(!Od(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(At(c,u,s[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Tq.set(this.visualElement,this);const t=this.visualElement.current,n=Lc(t,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps(),m=u.target,p=m!==t&&u6(m);d&&f&&!p&&this.start(u)});let r;const s=()=>{const{dragConstraints:u}=this.getProps();ya(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=Rq(t,u.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,a=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),wt.read(s);const l=xu(window,"resize",()=>this.scalePositionWithinConstraints()),c=o.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ms(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),c&&c(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=Av,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Lj(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function Rq(e,t,n){const r=q_(e,Lj(n)),s=q_(t,Lj(n));return()=>{r(),s()}}function Od(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Aq(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Iq extends eo{constructor(t){super(t),this.removeGroupControls=Rr,this.removeListeners=Rr,this.controls=new Pq(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rr}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Rm=e=>(t,n)=>{e&&wt.update(()=>e(t,n),!1,!0)};class Oq extends eo{constructor(){super(...arguments),this.removePointerDownListener=Rr}onPointerDown(t){this.session=new AT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Rm(t),onStart:Rm(n),onMove:Rm(r),onEnd:(o,a)=>{delete this.session,s&&wt.postRender(()=>s(o,a))}}}mount(){this.removePointerDownListener=Lc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Am=!1;class Dq extends h.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=t;o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),Am&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),uh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,t.layoutDependency!==n&&a.setOptions({...a.options,layoutDependency:n}),Am=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==o?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||wt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),qy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;Am=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function OT(e){const[t,n]=_T(),r=h.useContext(jy);return i.jsx(Dq,{...e,layoutGroup:r,switchLayoutGroup:h.useContext(TT),isPresent:t,safeToRemove:n})}const Mq={pan:{Feature:Oq},drag:{Feature:Iq,ProjectionNode:bT,MeasureLayout:OT}};function $j(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&wt.postRender(()=>o(t,Bu(t)))}class Lq extends eo{mount(){const{current:t}=this.node;t&&(this.unmount=o6(t,(n,r)=>($j(this.node,r,"Start"),s=>$j(this.node,s,"End"))))}unmount(){}}class $q extends eo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fu(xu(this.node.current,"focus",()=>this.onFocus()),xu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Fj(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&wt.postRender(()=>o(t,Bu(t)))}class Fq extends eo{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=h6(t,(s,o)=>(Fj(this.node,o,"Start"),(a,{success:l})=>Fj(this.node,a,l?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const Iv=new WeakMap,Im=new WeakMap,Uq=e=>{const t=Iv.get(e.target);t&&t(e)},Vq=e=>{e.forEach(Uq)};function Bq({root:e,...t}){const n=e||document;Im.has(n)||Im.set(n,{});const r=Im.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Vq,{root:e,...t})),r[s]}function zq(e,t,n){const r=Bq(t);return Iv.set(e,n),r.observe(e),()=>{Iv.delete(e),r.unobserve(e)}}const qq={some:0,all:1};class Wq extends eo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:qq[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=u?d:f;m&&m(c)};return zq(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Kq(t,n))&&this.startObserver()}unmount(){}}function Kq({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Hq={inView:{Feature:Wq},tap:{Feature:Fq},focus:{Feature:$q},hover:{Feature:Lq}},Gq={layout:{ProjectionNode:bT,MeasureLayout:OT}},Yq={...xq,...Hq,...Mq,...Gq},Xf=fq(Yq,pq),Jq=[{id:"tutoring",title:" ",description:"     ",icon:Bs,path:"/lessons/tutoring",gradient:"gradient-primary"},{id:"bag_review",title:" ",description:"   ",icon:gM,path:"/lessons/bag-review",gradient:"gradient-secondary"},{id:"group",title:" ",description:"    ",icon:ns,path:"/lessons/group",gradient:"gradient-primary"},{id:"skills",title:" ",description:"   ",icon:RM,path:"/lessons/skills",gradient:"gradient-hero"}];function Qq(){const{user:e}=wn(),t=Xi(),[n,r]=h.useState({tutoring:!0,bag_review:!0,group:!0,skills:!0});h.useEffect(()=>{S.from("site_settings").select("value").eq("key","lesson_types_visibility").maybeSingle().then(({data:a})=>{a&&typeof a.value=="object"&&a.value!==null&&r(l=>({...l,...a.value}))})},[]);const s=a=>{if(!e){Q.info("      "),t("/auth");return}t(a)},o=Jq.filter(a=>n[a.id]!==!1);return o.length===0?null:i.jsxs("section",{className:"px-4 mt-8",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:o.map((a,l)=>i.jsx(Xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},children:i.jsxs("button",{onClick:()=>s(a.path),className:`block w-full text-right ${a.gradient} rounded-xl p-6 text-foreground hover:scale-[1.02] transition-transform shadow-elevated`,children:[i.jsx(a.icon,{className:"h-8 w-8 mb-3"}),i.jsx("h3",{className:"font-bold text-lg",children:a.title}),i.jsx("p",{className:"text-sm text-foreground/70 mt-1",children:a.description})]})},a.id))})]})}const Xq=[{title:" 20%   ",description:"  "},{title:" 5 ",description:" 15%   "},{title:" ",description:"    "},{title:" ",description:"    "}];function Zq(){const[e,t]=h.useState(Xq),n=()=>{S.from("site_settings").select("value").eq("key","offers").single().then(({data:r})=>{r&&Array.isArray(r.value)&&r.value.length>0&&t(r.value)})};return h.useEffect(()=>{n();const r=S.channel("offers-realtime").on("postgres_changes",{event:"*",schema:"public",table:"site_settings"},()=>n()).subscribe();return()=>{S.removeChannel(r)}},[]),e.length===0?null:i.jsxs("section",{className:"px-4 mt-8 mb-8",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map((r,s)=>i.jsxs(Xf.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:s*.1},className:"bg-card rounded-xl border border-border shadow-sm hover:shadow-elevated transition-shadow cursor-pointer overflow-hidden",children:[r.image_url&&i.jsx("img",{src:r.image_url,alt:r.title,className:"w-full h-24 object-cover"}),i.jsxs("div",{className:"p-4",children:[!r.image_url&&i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsx("div",{className:"h-8 w-8 rounded-lg bg-secondary/10 flex items-center justify-center",children:i.jsx(AM,{className:"h-4 w-4 text-secondary"})})}),i.jsx("h3",{className:"font-semibold text-sm",children:r.title}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]})]},s))})]})}function e9(){const[e,t]=h.useState([]),[n,r]=h.useState(0),s=()=>{S.from("site_settings").select("value").eq("key","promo_banners").single().then(({data:o})=>{o&&Array.isArray(o.value)&&o.value.length>0&&t(o.value)})};return h.useEffect(()=>{s();const o=S.channel("promo-banners-realtime").on("postgres_changes",{event:"*",schema:"public",table:"site_settings"},()=>s()).subscribe();return()=>{S.removeChannel(o)}},[]),h.useEffect(()=>{if(e.length<=1)return;const o=setInterval(()=>{r(a=>(a+1)%e.length)},4e3);return()=>clearInterval(o)},[e.length]),e.length===0?null:i.jsx("section",{className:"px-4 mt-6",children:i.jsxs("div",{className:"relative overflow-hidden rounded-xl h-32",children:[i.jsx(B8,{mode:"wait",children:i.jsx(Xf.div,{initial:{opacity:0,x:60},animate:{opacity:1,x:0},exit:{opacity:0,x:-60},transition:{duration:.3},className:"absolute inset-0",children:e[n].image_url?i.jsxs("div",{className:"relative h-full w-full",children:[i.jsx("img",{src:e[n].image_url,alt:e[n].title,className:"w-full h-full object-cover rounded-xl"}),i.jsxs("div",{className:"absolute inset-0 bg-black/30 rounded-xl flex flex-col justify-center p-5",children:[i.jsx("h3",{className:"text-white font-bold text-lg",children:e[n].title}),e[n].description&&i.jsx("p",{className:"text-white/80 text-sm mt-1",children:e[n].description})]})]}):i.jsxs("div",{className:"h-full gradient-secondary rounded-xl flex flex-col justify-center p-5 text-foreground",children:[i.jsx("h3",{className:"font-bold text-lg",children:e[n].title}),e[n].description&&i.jsx("p",{className:"text-foreground/70 text-sm mt-1",children:e[n].description})]})},n)}),e.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>r(o=>(o-1+e.length)%e.length),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 text-white rounded-full p-1 z-10",children:i.jsx(vM,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>r(o=>(o+1)%e.length),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 text-white rounded-full p-1 z-10",children:i.jsx(ZN,{className:"h-4 w-4"})}),i.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5 z-10",children:e.map((o,a)=>i.jsx("button",{onClick:()=>r(a),className:`w-2 h-2 rounded-full transition-all ${a===n?"bg-white w-5":"bg-white/40"}`},a))})]})]})})}const t9=["announcements","promo_banners","lesson_types","offers"],n9={announcements:tB,promo_banners:e9,lesson_types:Qq,offers:Zq},r9=()=>{const[e,t]=h.useState(!1),[n,r]=h.useState(!0),[s,o]=h.useState(t9),{isAdmin:a}=wn();return h.useEffect(()=>{const l=()=>{Promise.all([S.from("site_settings").select("value").eq("key","maintenance_mode").single(),S.from("site_settings").select("value").eq("key","homepage_sections_order").single()]).then(([u,d])=>{u.data&&u.data.value===!0?t(!0):t(!1),d.data&&Array.isArray(d.data.value)&&d.data.value.length>0&&o(d.data.value),r(!1)})};l();const c=S.channel("homepage-realtime").on("postgres_changes",{event:"*",schema:"public",table:"site_settings"},()=>l()).on("postgres_changes",{event:"*",schema:"public",table:"announcements"},()=>{}).subscribe();return()=>{S.removeChannel(c)}},[]),n?i.jsx(Dn,{children:i.jsx("div",{className:"p-8 text-center text-muted-foreground",children:" ..."})}):e&&!a?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"h-20 w-20 mx-auto rounded-full bg-muted flex items-center justify-center",children:i.jsx(Lh,{className:"h-10 w-10 text-muted-foreground"})}),i.jsx("h1",{className:"text-2xl font-bold",children:"  "}),i.jsx("p",{className:"text-muted-foreground",children:"      "})]})}):i.jsxs(Dn,{children:[e&&a&&i.jsxs("div",{className:"bg-destructive/10 text-destructive text-xs text-center p-2 flex items-center justify-center gap-1",children:[i.jsx(Lh,{className:"h-3 w-3"}),"    -    "]}),s.map(l=>{const c=n9[l];return c?i.jsx(c,{},l):null})]})},s9=()=>{const e=$l();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),i.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},he=h.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));he.displayName="Input";var i9="Label",DT=h.forwardRef((e,t)=>i.jsx(we.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));DT.displayName=i9;var MT=DT;const o9=Ef("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),re=h.forwardRef(({className:e,...t},n)=>i.jsx(MT,{ref:n,className:ve(o9(),e),...t}));re.displayName=MT.displayName;var a9="Separator",Uj="horizontal",l9=["horizontal","vertical"],LT=h.forwardRef((e,t)=>{const{decorative:n,orientation:r=Uj,...s}=e,o=c9(r)?r:Uj,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(we.div,{"data-orientation":o,...l,...s,ref:t})});LT.displayName=a9;function c9(e){return l9.includes(e)}var $T=LT;const rl=h.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>i.jsx($T,{ref:s,decorative:n,orientation:t,className:ve("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));rl.displayName=$T.displayName;function u9(){const[e,t]=h.useState(!0),[n,r]=h.useState(""),[s,o]=h.useState(""),[a,l]=h.useState(""),[c,u]=h.useState(!1),[d,f]=h.useState(""),m=Xi();h.useEffect(()=>{S.from("site_settings").select("value").eq("key","site_logo").single().then(({data:y})=>{y&&typeof y.value=="string"&&y.value&&f(y.value)})},[]);const p=async y=>{if(y.preventDefault(),u(!0),e){const{error:g}=await S.auth.signInWithPassword({email:n,password:s});g?Q.error(g.message):(Q.success("   "),m("/"))}else{const{error:g}=await S.auth.signUp({email:n,password:s,options:{data:{full_name:a},emailRedirectTo:window.location.origin}});g?Q.error(g.message):Q.success("  !    ")}u(!1)};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 gradient-hero opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm"}),i.jsxs("div",{className:"w-full max-w-md relative z-10",children:[i.jsxs("div",{className:"text-center mb-8",children:[d?i.jsx("img",{src:d,alt:" ",className:"h-16 mx-auto mb-4 object-contain"}):i.jsx("div",{className:"h-16 w-16 mx-auto mb-4 rounded-2xl gradient-hero flex items-center justify-center shadow-elevated",children:i.jsx("span",{className:"text-2xl font-bold text-foreground",children:""})}),i.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e?" ":" "}),i.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:e?"  ":"     "})]}),i.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-elevated border border-border",children:[i.jsxs("div",{className:"flex gap-2 mb-6 bg-muted rounded-xl p-1",children:[i.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${e?"bg-card shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"}`,children:" "}),i.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${e?"text-muted-foreground hover:text-foreground":"bg-card shadow-sm text-foreground"}`,children:" "})]}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[!e&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{htmlFor:"name",children:" "}),i.jsx(he,{id:"name",value:a,onChange:y=>l(y.target.value),placeholder:" ",required:!e,dir:"rtl",className:"h-11"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{htmlFor:"email",children:" "}),i.jsx(he,{id:"email",type:"email",value:n,onChange:y=>r(y.target.value),placeholder:"example@email.com",required:!0,dir:"ltr",className:"h-11"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{htmlFor:"password",children:" "}),i.jsx(he,{id:"password",type:"password",value:s,onChange:y=>o(y.target.value),placeholder:"",required:!0,minLength:6,dir:"ltr",className:"h-11"})]}),i.jsx(te,{type:"submit",className:"w-full h-11 text-base",variant:"hero",disabled:c,children:c?" ...":e?" ":" "})]}),i.jsxs("div",{className:"flex items-center gap-3 my-4",children:[i.jsx(rl,{className:"flex-1"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:""}),i.jsx(rl,{className:"flex-1"})]}),i.jsx("div",{className:"space-y-2",children:i.jsxs(te,{type:"button",variant:"outline",className:"w-full h-11 gap-2",onClick:async()=>{const{error:y}=await S.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});y&&Q.error("      Google")},children:[i.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[i.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),i.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),i.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),i.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"  Google"]})})]}),i.jsx("p",{className:"text-center text-xs text-muted-foreground mt-6",children:"       "})]})]})}function Vj(e,[t,n]){return Math.min(n,Math.max(t,e))}var d9=h.createContext(void 0);function ql(e){const t=h.useContext(d9);return e||t||"ltr"}function e0(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var h9=[" ","Enter","ArrowUp","ArrowDown"],f9=[" ","Enter"],qo="Select",[Zf,ep,p9]=Pu(qo),[Wl,UH]=yn(qo,[p9,Ji]),tp=Ji(),[m9,to]=Wl(qo),[g9,v9]=Wl(qo),FT=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:p,form:y}=e,g=tp(t),[w,v]=h.useState(null),[x,b]=h.useState(null),[_,N]=h.useState(!1),C=ql(u),[k,I]=xr({prop:r,defaultProp:s??!1,onChange:o,caller:qo}),[$,O]=xr({prop:a,defaultProp:l,onChange:c,caller:qo}),U=h.useRef(null),P=w?y||!!w.closest("form"):!0,[K,D]=h.useState(new Set),F=Array.from(K).map(W=>W.props.value).join(";");return i.jsx(fy,{...g,children:i.jsxs(m9,{required:p,scope:t,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:N,contentId:nn(),value:$,onValueChange:O,open:k,onOpenChange:I,dir:C,triggerPointerDownPosRef:U,disabled:m,children:[i.jsx(Zf.Provider,{scope:t,children:i.jsx(g9,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(W=>{D(R=>new Set(R).add(W))},[]),onNativeOptionRemove:h.useCallback(W=>{D(R=>{const M=new Set(R);return M.delete(W),M})},[]),children:n})}),P?i.jsxs(c2,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:$,onChange:W=>O(W.target.value),disabled:m,form:y,children:[$===void 0?i.jsx("option",{value:""}):null,Array.from(K)]},F):null]})})};FT.displayName=qo;var UT="SelectTrigger",VT=h.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=tp(n),a=to(UT,n),l=a.disabled||r,c=He(t,a.onTriggerChange),u=ep(n),d=h.useRef("touch"),[f,m,p]=d2(g=>{const w=u().filter(b=>!b.disabled),v=w.find(b=>b.value===a.value),x=h2(w,g,v);x!==void 0&&a.onValueChange(x.value)}),y=g=>{l||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return i.jsx(Iu,{asChild:!0,...o,children:i.jsx(we.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":u2(a.value)?"":void 0,...s,ref:c,onClick:de(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:de(s.onPointerDown,g=>{d.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:de(s.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(w&&g.key===" ")&&h9.includes(g.key)&&(y(),g.preventDefault())})})})});VT.displayName=UT;var BT="SelectValue",zT=h.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=e,c=to(BT,n),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,f=He(t,c.onValueNodeChange);return ln(()=>{u(d)},[u,d]),i.jsx(we.span,{...l,ref:f,style:{pointerEvents:"none"},children:u2(c.value)?i.jsx(i.Fragment,{children:a}):o})});zT.displayName=BT;var x9="SelectIcon",qT=h.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(we.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});qT.displayName=x9;var y9="SelectPortal",WT=e=>i.jsx(Il,{asChild:!0,...e});WT.displayName=y9;var Wo="SelectContent",KT=h.forwardRef((e,t)=>{const n=to(Wo,e.__scopeSelect),[r,s]=h.useState();if(ln(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Jo.createPortal(i.jsx(HT,{scope:e.__scopeSelect,children:i.jsx(Zf.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(GT,{...e,ref:t})});KT.displayName=Wo;var Wr=10,[HT,no]=Wl(Wo),w9="SelectContentImpl",b9=Vi("SelectContent.RemoveScroll"),GT=h.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:w,...v}=e,x=to(Wo,n),[b,_]=h.useState(null),[N,C]=h.useState(null),k=He(t,A=>_(A)),[I,$]=h.useState(null),[O,U]=h.useState(null),P=ep(n),[K,D]=h.useState(!1),F=h.useRef(!1);h.useEffect(()=>{if(b)return qf(b)},[b]),zf();const W=h.useCallback(A=>{const[Y,...ee]=P().map(ke=>ke.ref.current),[H]=ee.slice(-1),ge=document.activeElement;for(const ke of A)if(ke===ge||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===Y&&N&&(N.scrollTop=0),ke===H&&N&&(N.scrollTop=N.scrollHeight),ke==null||ke.focus(),document.activeElement!==ge))return},[P,N]),R=h.useCallback(()=>W([I,b]),[W,I,b]);h.useEffect(()=>{K&&R()},[K,R]);const{onOpenChange:M,triggerPointerDownPosRef:L}=x;h.useEffect(()=>{if(b){let A={x:0,y:0};const Y=H=>{var ge,ke;A={x:Math.abs(Math.round(H.pageX)-(((ge=L.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(H.pageY)-(((ke=L.current)==null?void 0:ke.y)??0))}},ee=H=>{A.x<=10&&A.y<=10?H.preventDefault():b.contains(H.target)||M(!1),document.removeEventListener("pointermove",Y),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",ee,{capture:!0})}}},[b,M,L]),h.useEffect(()=>{const A=()=>M(!1);return window.addEventListener("blur",A),window.addEventListener("resize",A),()=>{window.removeEventListener("blur",A),window.removeEventListener("resize",A)}},[M]);const[X,le]=d2(A=>{const Y=P().filter(ge=>!ge.disabled),ee=Y.find(ge=>ge.ref.current===document.activeElement),H=h2(Y,A,ee);H&&setTimeout(()=>H.ref.current.focus())}),E=h.useCallback((A,Y,ee)=>{const H=!F.current&&!ee;(x.value!==void 0&&x.value===Y||H)&&($(A),H&&(F.current=!0))},[x.value]),V=h.useCallback(()=>b==null?void 0:b.focus(),[b]),q=h.useCallback((A,Y,ee)=>{const H=!F.current&&!ee;(x.value!==void 0&&x.value===Y||H)&&U(A)},[x.value]),J=r==="popper"?Ov:YT,oe=J===Ov?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:w}:{};return i.jsx(HT,{scope:n,content:b,viewport:N,onViewportChange:C,itemRefCallback:E,selectedItem:I,onItemLeave:V,itemTextRefCallback:q,focusSelectedItem:R,selectedItemText:O,position:r,isPositioned:K,searchRef:X,children:i.jsx(Lu,{as:b9,allowPinchZoom:!0,children:i.jsx(Mu,{asChild:!0,trapped:x.open,onMountAutoFocus:A=>{A.preventDefault()},onUnmountAutoFocus:de(s,A=>{var Y;(Y=x.trigger)==null||Y.focus({preventScroll:!0}),A.preventDefault()}),children:i.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:A=>A.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(J,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:A=>A.preventDefault(),...v,...oe,onPlaced:()=>D(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:de(v.onKeyDown,A=>{const Y=A.ctrlKey||A.altKey||A.metaKey;if(A.key==="Tab"&&A.preventDefault(),!Y&&A.key.length===1&&le(A.key),["ArrowUp","ArrowDown","Home","End"].includes(A.key)){let H=P().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(A.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(A.key)){const ge=A.target,ke=H.indexOf(ge);H=H.slice(ke+1)}setTimeout(()=>W(H)),A.preventDefault()}})})})})})})});GT.displayName=w9;var _9="SelectItemAlignedPosition",YT=h.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=to(Wo,n),a=no(Wo,n),[l,c]=h.useState(null),[u,d]=h.useState(null),f=He(t,k=>d(k)),m=ep(n),p=h.useRef(!1),y=h.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=a,b=h.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&g&&w&&v){const k=o.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),$=o.valueNode.getBoundingClientRect(),O=v.getBoundingClientRect();if(o.dir!=="rtl"){const ge=O.left-I.left,ke=$.left-ge,ye=k.left-ke,Ae=k.width+ye,Ge=Math.max(Ae,I.width),bt=window.innerWidth-Wr,Ke=Vj(ke,[Wr,Math.max(Wr,bt-Ge)]);l.style.minWidth=Ae+"px",l.style.left=Ke+"px"}else{const ge=I.right-O.right,ke=window.innerWidth-$.right-ge,ye=window.innerWidth-k.right-ke,Ae=k.width+ye,Ge=Math.max(Ae,I.width),bt=window.innerWidth-Wr,Ke=Vj(ke,[Wr,Math.max(Wr,bt-Ge)]);l.style.minWidth=Ae+"px",l.style.right=Ke+"px"}const U=m(),P=window.innerHeight-Wr*2,K=g.scrollHeight,D=window.getComputedStyle(u),F=parseInt(D.borderTopWidth,10),W=parseInt(D.paddingTop,10),R=parseInt(D.borderBottomWidth,10),M=parseInt(D.paddingBottom,10),L=F+W+K+M+R,X=Math.min(w.offsetHeight*5,L),le=window.getComputedStyle(g),E=parseInt(le.paddingTop,10),V=parseInt(le.paddingBottom,10),q=k.top+k.height/2-Wr,J=P-q,oe=w.offsetHeight/2,A=w.offsetTop+oe,Y=F+W+A,ee=L-Y;if(Y<=q){const ge=U.length>0&&w===U[U.length-1].ref.current;l.style.bottom="0px";const ke=u.clientHeight-g.offsetTop-g.offsetHeight,ye=Math.max(J,oe+(ge?V:0)+ke+R),Ae=Y+ye;l.style.height=Ae+"px"}else{const ge=U.length>0&&w===U[0].ref.current;l.style.top="0px";const ye=Math.max(q,F+g.offsetTop+(ge?E:0)+oe)+ee;l.style.height=ye+"px",g.scrollTop=Y-q+g.offsetTop}l.style.margin=`${Wr}px 0`,l.style.minHeight=X+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,o.trigger,o.valueNode,l,u,g,w,v,o.dir,r]);ln(()=>b(),[b]);const[_,N]=h.useState();ln(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const C=h.useCallback(k=>{k&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return i.jsx(S9,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(we.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});YT.displayName=_9;var j9="SelectPopperPosition",Ov=h.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Wr,...o}=e,a=tp(n);return i.jsx(If,{...a,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ov.displayName=j9;var[S9,t0]=Wl(Wo,{}),Dv="SelectViewport",JT=h.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=no(Dv,n),a=t0(Dv,n),l=He(t,o.onViewportChange),c=h.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Zf.Slot,{scope:n,children:i.jsx(we.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:de(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const y=window.innerHeight-Wr*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),v=Math.max(g,w);if(v<y){const x=v+p,b=Math.min(y,x),_=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});JT.displayName=Dv;var QT="SelectGroup",[N9,k9]=Wl(QT),C9=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=nn();return i.jsx(N9,{scope:n,id:s,children:i.jsx(we.div,{role:"group","aria-labelledby":s,...r,ref:t})})});C9.displayName=QT;var XT="SelectLabel",ZT=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=k9(XT,n);return i.jsx(we.div,{id:s.id,...r,ref:t})});ZT.displayName=XT;var rf="SelectItem",[E9,e2]=Wl(rf),t2=h.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=e,l=to(rf,n),c=no(rf,n),u=l.value===r,[d,f]=h.useState(o??""),[m,p]=h.useState(!1),y=He(t,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,r,s)}),g=nn(),w=h.useRef("touch"),v=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(E9,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:h.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(Zf.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(we.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:de(a.onFocus,()=>p(!0)),onBlur:de(a.onBlur,()=>p(!1)),onClick:de(a.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:de(a.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:de(a.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:de(a.onPointerMove,x=>{var b;w.current=x.pointerType,s?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(a.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:de(a.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(f9.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});t2.displayName=rf;var yc="SelectItemText",n2=h.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,a=to(yc,n),l=no(yc,n),c=e2(yc,n),u=v9(yc,n),[d,f]=h.useState(null),m=He(t,v=>f(v),c.onItemTextChange,v=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,v,c.value,c.disabled)}),p=d==null?void 0:d.textContent,y=h.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return ln(()=>(g(y),()=>w(y)),[g,w,y]),i.jsxs(i.Fragment,{children:[i.jsx(we.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Jo.createPortal(o.children,a.valueNode):null]})});n2.displayName=yc;var r2="SelectItemIndicator",s2=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return e2(r2,n).isSelected?i.jsx(we.span,{"aria-hidden":!0,...r,ref:t}):null});s2.displayName=r2;var Mv="SelectScrollUpButton",i2=h.forwardRef((e,t)=>{const n=no(Mv,e.__scopeSelect),r=t0(Mv,e.__scopeSelect),[s,o]=h.useState(!1),a=He(t,r.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(a2,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});i2.displayName=Mv;var Lv="SelectScrollDownButton",o2=h.forwardRef((e,t)=>{const n=no(Lv,e.__scopeSelect),r=t0(Lv,e.__scopeSelect),[s,o]=h.useState(!1),a=He(t,r.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(a2,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});o2.displayName=Lv;var a2=h.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=no("SelectScrollButton",n),a=h.useRef(null),l=ep(n),c=h.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),ln(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(we.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:de(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:de(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:de(s.onPointerLeave,()=>{c()})})}),T9="SelectSeparator",l2=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(we.div,{"aria-hidden":!0,...r,ref:t})});l2.displayName=T9;var $v="SelectArrow",P9=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=tp(n),o=to($v,n),a=no($v,n);return o.open&&a.position==="popper"?i.jsx(Of,{...s,...r,ref:t}):null});P9.displayName=$v;var R9="SelectBubbleInput",c2=h.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=h.useRef(null),o=He(r,s),a=e0(t);return h.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[a,t]),i.jsx(we.select,{...n,style:{...TN,...n.style},ref:o,defaultValue:t})});c2.displayName=R9;function u2(e){return e===""||e===void 0}function d2(e){const t=tr(e),n=h.useRef(""),r=h.useRef(0),s=h.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=h.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function h2(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=A9(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function A9(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var I9=FT,f2=VT,O9=zT,D9=qT,M9=WT,p2=KT,L9=JT,m2=ZT,g2=t2,$9=n2,F9=s2,v2=i2,x2=o2,y2=l2;const gt=I9,vt=O9,ht=h.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(f2,{ref:r,className:ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(D9,{asChild:!0,children:i.jsx($s,{className:"h-4 w-4 opacity-50"})})]}));ht.displayName=f2.displayName;const w2=h.forwardRef(({className:e,...t},n)=>i.jsx(v2,{ref:n,className:ve("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(xM,{className:"h-4 w-4"})}));w2.displayName=v2.displayName;const b2=h.forwardRef(({className:e,...t},n)=>i.jsx(x2,{ref:n,className:ve("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx($s,{className:"h-4 w-4"})}));b2.displayName=x2.displayName;const ft=h.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(M9,{children:i.jsxs(p2,{ref:s,className:ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(w2,{}),i.jsx(L9,{className:ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(b2,{})]})}));ft.displayName=p2.displayName;const U9=h.forwardRef(({className:e,...t},n)=>i.jsx(m2,{ref:n,className:ve("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));U9.displayName=m2.displayName;const Le=h.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(g2,{ref:r,className:ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(F9,{children:i.jsx(XN,{className:"h-4 w-4"})})}),i.jsx($9,{children:t})]}));Le.displayName=g2.displayName;const V9=h.forwardRef(({className:e,...t},n)=>i.jsx(y2,{ref:n,className:ve("-mx-1 my-1 h-px bg-muted",e),...t}));V9.displayName=y2.displayName;function B9(){const{type:e}=lC(),{format:t}=ei(),{user:n,loading:r}=wn(),s=Xi();h.useEffect(()=>{!r&&!n&&s("/auth")},[n,r,s]);const[o,a]=h.useState([]),[l,c]=h.useState([]),[u,d]=h.useState([]),[f,m]=h.useState([]),[p,y]=h.useState(""),[g,w]=h.useState(""),[v,x]=h.useState(""),[b,_]=h.useState(""),[N,C]=h.useState(""),[k,I]=h.useState([]),$=e==="tutoring",O=e==="bag-review",U=e==="skills",P=e==="group",K=$?" ":O?" ":P?" ":" ",D=$?"tutoring":O?"bag_review":P?"group":"skills";return h.useEffect(()=>{n&&S.from("profiles").select("curriculum_id, grade_level_id").eq("user_id",n.id).single().then(({data:F})=>{if(F){const W=F;W.curriculum_id&&!U&&(y(W.curriculum_id),W.grade_level_id&&w(W.grade_level_id))}})},[n,U]),h.useEffect(()=>{n&&(U?S.from("skills_categories").select("*").then(({data:F})=>m(F??[])):S.from("curricula").select("*").then(({data:F})=>a(F??[])))},[U,P,n]),h.useEffect(()=>{p&&S.from("grade_levels").select("*").eq("curriculum_id",p).then(({data:F})=>c(F??[]))},[p]),h.useEffect(()=>{g&&($||P)&&S.from("subjects").select("*").eq("grade_level_id",g).then(({data:F})=>d(F??[]))},[g,$,P]),h.useEffect(()=>{(U?b:O?p&&g:p&&g&&v)&&(async()=>{let R=S.from("lessons").select("id, title, teacher_id, duration_minutes, price").eq("lesson_type",D).eq("is_active",!0);$||P?(p&&(R=R.eq("curriculum_id",p)),g&&(R=R.eq("grade_level_id",g)),v&&(R=R.eq("subject_id",v))):O?(p&&(R=R.eq("curriculum_id",p)),g&&(R=R.eq("grade_level_id",g))):U&&b&&(R=R.eq("skill_category_id",b));const{data:M}=await R;if(!M||M.length===0){I([]);return}const L=[...new Set(M.map(q=>q.teacher_id))],{data:X}=await S.from("profiles").select("user_id, full_name").in("user_id",L),{data:le}=await S.from("reviews").select("teacher_id, rating"),E=new Map(X==null?void 0:X.map(q=>[q.user_id,q.full_name])),V=new Map;le==null||le.forEach(q=>{const J=V.get(q.teacher_id)??[];J.push(q.rating),V.set(q.teacher_id,J)}),I(M.map(q=>({...q,teacher_name:E.get(q.teacher_id)??"",avg_rating:V.has(q.teacher_id)?V.get(q.teacher_id).reduce((J,oe)=>J+oe,0)/V.get(q.teacher_id).length:0})))})()},[p,g,v,b,D]),r?i.jsx(Dn,{children:i.jsx("div",{className:"p-8 text-center text-muted-foreground",children:" ..."})}):n?i.jsx(Dn,{children:i.jsxs("div",{className:"px-4 py-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:K}),i.jsx("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3 mb-6",children:U?i.jsxs(i.Fragment,{children:[i.jsxs(gt,{value:b,onValueChange:_,children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:f.map(F=>i.jsx(Le,{value:F.id,children:F.name},F.id))})]}),i.jsxs(gt,{value:N,onValueChange:C,children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:Array.from({length:14},(F,W)=>W+5).map(F=>i.jsxs(Le,{value:String(F),children:[F," "]},F))})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(gt,{value:p,onValueChange:F=>{y(F),w(""),x("")},children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:""})}),i.jsx(ft,{children:o.map(F=>i.jsx(Le,{value:F.id,children:F.name},F.id))})]}),i.jsxs(gt,{value:g,onValueChange:F=>{w(F),x("")},children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:l.map(F=>i.jsx(Le,{value:F.id,children:F.name},F.id))})]}),($||P)&&i.jsxs(gt,{value:v,onValueChange:x,children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:""})}),i.jsx(ft,{children:u.map(F=>i.jsx(Le,{value:F.id,children:F.name},F.id))})]})]})}),i.jsxs("div",{className:"space-y-3",children:[k.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"   "}),k.map((F,W)=>i.jsx(Xf.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:W*.05},children:i.jsxs(Ft,{to:`/lesson/${F.id}`,className:"block bg-card rounded-xl p-4 border border-border hover:shadow-elevated transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:F.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:F.teacher_name})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-1 text-warning",children:[i.jsx(Qa,{className:"h-4 w-4 fill-current"}),i.jsx("span",{className:"text-sm font-medium",children:F.avg_rating>0?F.avg_rating.toFixed(1):""})]}),i.jsx(Zx,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-destructive"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[i.jsxs("span",{children:[F.duration_minutes," "]}),i.jsx("span",{children:t(F.price)})]})]})},F.id))]})]})}):null}var Om="rovingFocusGroup.onEntryFocus",z9={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[Fv,_2,q9]=Pu(zu),[W9,Kl]=yn(zu,[q9]),[K9,H9]=W9(zu),j2=h.forwardRef((e,t)=>i.jsx(Fv.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Fv.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(G9,{...e,ref:t})})}));j2.displayName=zu;var G9=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=h.useRef(null),p=He(t,m),y=ql(o),[g,w]=xr({prop:a,defaultProp:l??null,onChange:c,caller:zu}),[v,x]=h.useState(!1),b=tr(u),_=_2(n),N=h.useRef(!1),[C,k]=h.useState(0);return h.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(Om,b),()=>I.removeEventListener(Om,b)},[b]),i.jsx(K9,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:g,onItemFocus:h.useCallback(I=>w(I),[w]),onItemShiftTab:h.useCallback(()=>x(!0),[]),onFocusableItemAdd:h.useCallback(()=>k(I=>I+1),[]),onFocusableItemRemove:h.useCallback(()=>k(I=>I-1),[]),children:i.jsx(we.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:de(e.onMouseDown,()=>{N.current=!0}),onFocus:de(e.onFocus,I=>{const $=!N.current;if(I.target===I.currentTarget&&$&&!v){const O=new CustomEvent(Om,z9);if(I.currentTarget.dispatchEvent(O),!O.defaultPrevented){const U=_().filter(W=>W.focusable),P=U.find(W=>W.active),K=U.find(W=>W.id===g),F=[P,K,...U].filter(Boolean).map(W=>W.ref.current);k2(F,d)}}N.current=!1}),onBlur:de(e.onBlur,()=>x(!1))})})}),S2="RovingFocusGroupItem",N2=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:a,...l}=e,c=nn(),u=o||c,d=H9(S2,n),f=d.currentTabStopId===u,m=_2(n),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:g}=d;return h.useEffect(()=>{if(r)return p(),()=>y()},[r,p,y]),i.jsx(Fv.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:de(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:de(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:de(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=Q9(w,d.orientation,d.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const _=b.indexOf(w.currentTarget);b=d.loop?X9(b,_+1):b.slice(_+1)}setTimeout(()=>k2(b))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:g!=null}):a})})});N2.displayName=S2;var Y9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function J9(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Q9(e,t,n){const r=J9(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Y9[r]}function k2(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function X9(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var n0=j2,r0=N2,np="Tabs",[Z9,VH]=yn(np,[Kl]),C2=Kl(),[eW,s0]=Z9(np),E2=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=ql(l),[f,m]=xr({prop:r,onChange:s,defaultProp:o??"",caller:np});return i.jsx(eW,{scope:n,baseId:nn(),value:f,onValueChange:m,orientation:a,dir:d,activationMode:c,children:i.jsx(we.div,{dir:d,"data-orientation":a,...u,ref:t})})});E2.displayName=np;var T2="TabsList",P2=h.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=s0(T2,n),a=C2(n);return i.jsx(n0,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(we.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});P2.displayName=T2;var R2="TabsTrigger",A2=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,a=s0(R2,n),l=C2(n),c=D2(a.baseId,r),u=M2(a.baseId,r),d=r===a.value;return i.jsx(r0,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(we.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:de(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:de(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:de(e.onFocus,()=>{const f=a.activationMode!=="manual";!d&&!s&&f&&a.onValueChange(r)})})})});A2.displayName=R2;var I2="TabsContent",O2=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=e,l=s0(I2,n),c=D2(l.baseId,r),u=M2(l.baseId,r),d=r===l.value,f=h.useRef(d);return h.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Vn,{present:s||d,children:({present:m})=>i.jsx(we.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&o})})});O2.displayName=I2;function D2(e,t){return`${e}-trigger-${t}`}function M2(e,t){return`${e}-content-${t}`}var tW=E2,L2=P2,$2=A2,F2=O2;const Tl=tW,Hl=h.forwardRef(({className:e,...t},n)=>i.jsx(L2,{ref:n,className:ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Hl.displayName=L2.displayName;const Ut=h.forwardRef(({className:e,...t},n)=>i.jsx($2,{ref:n,className:ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ut.displayName=$2.displayName;const it=h.forwardRef(({className:e,...t},n)=>i.jsx(F2,{ref:n,className:ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));it.displayName=F2.displayName;var rp="Dialog",[U2,V2]=yn(rp),[nW,os]=U2(rp),B2=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=h.useRef(null),c=h.useRef(null),[u,d]=xr({prop:r,defaultProp:s??!1,onChange:o,caller:rp});return i.jsx(nW,{scope:t,triggerRef:l,contentRef:c,contentId:nn(),titleId:nn(),descriptionId:nn(),open:u,onOpenChange:d,onOpenToggle:h.useCallback(()=>d(f=>!f),[d]),modal:a,children:n})};B2.displayName=rp;var z2="DialogTrigger",q2=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=os(z2,n),o=He(t,s.triggerRef);return i.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":a0(s.open),...r,ref:o,onClick:de(e.onClick,s.onOpenToggle)})});q2.displayName=z2;var i0="DialogPortal",[rW,W2]=U2(i0,{forceMount:void 0}),K2=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=os(i0,t);return i.jsx(rW,{scope:t,forceMount:n,children:h.Children.map(r,a=>i.jsx(Vn,{present:n||o.open,children:i.jsx(Il,{asChild:!0,container:s,children:a})}))})};K2.displayName=i0;var sf="DialogOverlay",H2=h.forwardRef((e,t)=>{const n=W2(sf,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=os(sf,e.__scopeDialog);return o.modal?i.jsx(Vn,{present:r||o.open,children:i.jsx(iW,{...s,ref:t})}):null});H2.displayName=sf;var sW=Vi("DialogOverlay.RemoveScroll"),iW=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=os(sf,n);return i.jsx(Lu,{as:sW,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(we.div,{"data-state":a0(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ko="DialogContent",G2=h.forwardRef((e,t)=>{const n=W2(Ko,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=os(Ko,e.__scopeDialog);return i.jsx(Vn,{present:r||o.open,children:o.modal?i.jsx(oW,{...s,ref:t}):i.jsx(aW,{...s,ref:t})})});G2.displayName=Ko;var oW=h.forwardRef((e,t)=>{const n=os(Ko,e.__scopeDialog),r=h.useRef(null),s=He(t,n.contentRef,r);return h.useEffect(()=>{const o=r.current;if(o)return qf(o)},[]),i.jsx(Y2,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:de(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:de(e.onFocusOutside,o=>o.preventDefault())})}),aW=h.forwardRef((e,t)=>{const n=os(Ko,e.__scopeDialog),r=h.useRef(!1),s=h.useRef(!1);return i.jsx(Y2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Y2=h.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=os(Ko,n),c=h.useRef(null),u=He(t,c);return zf(),i.jsxs(i.Fragment,{children:[i.jsx(Mu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Qo,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":a0(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(cW,{titleId:l.titleId}),i.jsx(dW,{contentRef:c,descriptionId:l.descriptionId})]})]})}),o0="DialogTitle",J2=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=os(o0,n);return i.jsx(we.h2,{id:s.titleId,...r,ref:t})});J2.displayName=o0;var Q2="DialogDescription",X2=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=os(Q2,n);return i.jsx(we.p,{id:s.descriptionId,...r,ref:t})});X2.displayName=Q2;var Z2="DialogClose",eP=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=os(Z2,n);return i.jsx(we.button,{type:"button",...r,ref:t,onClick:de(e.onClick,()=>s.onOpenChange(!1))})});eP.displayName=Z2;function a0(e){return e?"open":"closed"}var tP="DialogTitleWarning",[lW,nP]=jD(tP,{contentName:Ko,titleName:o0,docsSlug:"dialog"}),cW=({titleId:e})=>{const t=nP(tP),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},uW="DialogDescriptionWarning",dW=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nP(uW).contentName}}.`;return h.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},l0=B2,rP=q2,c0=K2,sp=H2,ip=G2,u0=J2,d0=X2,h0=eP;const yr=l0,f0=rP,hW=c0,sP=h.forwardRef(({className:e,...t},n)=>i.jsx(sp,{ref:n,className:ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));sP.displayName=sp.displayName;const nr=h.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(hW,{children:[i.jsx(sP,{}),i.jsxs(ip,{ref:r,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(h0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(Tf,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));nr.displayName=ip.displayName;const Mr=({className:e,...t})=>i.jsx("div",{className:ve("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Mr.displayName="DialogHeader";const Lr=h.forwardRef(({className:e,...t},n)=>i.jsx(u0,{ref:n,className:ve("text-lg font-semibold leading-none tracking-tight",e),...t}));Lr.displayName=u0.displayName;const fW=h.forwardRef(({className:e,...t},n)=>i.jsx(d0,{ref:n,className:ve("text-sm text-muted-foreground",e),...t}));fW.displayName=d0.displayName;var p0="Radio",[pW,iP]=yn(p0),[mW,gW]=pW(p0),oP=h.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:o,disabled:a,value:l="on",onCheck:c,form:u,...d}=e,[f,m]=h.useState(null),p=He(t,w=>m(w)),y=h.useRef(!1),g=f?u||!!f.closest("form"):!0;return i.jsxs(mW,{scope:n,checked:s,disabled:a,children:[i.jsx(we.button,{type:"button",role:"radio","aria-checked":s,"data-state":uP(s),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:de(e.onClick,w=>{s||c==null||c(),g&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),g&&i.jsx(cP,{control:f,bubbles:!y.current,name:r,value:l,checked:s,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});oP.displayName=p0;var aP="RadioIndicator",lP=h.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,o=gW(aP,n);return i.jsx(Vn,{present:r||o.checked,children:i.jsx(we.span,{"data-state":uP(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t})})});lP.displayName=aP;var vW="RadioBubbleInput",cP=h.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const a=h.useRef(null),l=He(a,o),c=e0(n),u=uy(t);return h.useEffect(()=>{const d=a.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&p){const y=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(y)}},[c,n,r]),i.jsx(we.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});cP.displayName=vW;function uP(e){return e?"checked":"unchecked"}var xW=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],op="RadioGroup",[yW,BH]=yn(op,[Kl,iP]),dP=Kl(),hP=iP(),[wW,bW]=yW(op),fP=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:o,required:a=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...m}=e,p=dP(n),y=ql(u),[g,w]=xr({prop:o,defaultProp:s??null,onChange:f,caller:op});return i.jsx(wW,{scope:n,name:r,required:a,disabled:l,value:g,onValueChange:w,children:i.jsx(n0,{asChild:!0,...p,orientation:c,dir:y,loop:d,children:i.jsx(we.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:y,...m,ref:t})})})});fP.displayName=op;var pP="RadioGroupItem",mP=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,o=bW(pP,n),a=o.disabled||r,l=dP(n),c=hP(n),u=h.useRef(null),d=He(t,u),f=o.value===s.value,m=h.useRef(!1);return h.useEffect(()=>{const p=g=>{xW.includes(g.key)&&(m.current=!0)},y=()=>m.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",y)}},[]),i.jsx(r0,{asChild:!0,...l,focusable:!a,active:f,children:i.jsx(oP,{disabled:a,required:o.required,checked:f,...c,...s,name:o.name,ref:d,onCheck:()=>o.onValueChange(s.value),onKeyDown:de(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:de(s.onFocus,()=>{var p;m.current&&((p=u.current)==null||p.click())})})})});mP.displayName=pP;var _W="RadioGroupIndicator",gP=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=hP(n);return i.jsx(lP,{...s,...r,ref:t})});gP.displayName=_W;var vP=fP,xP=mP,jW=gP;const of=h.forwardRef(({className:e,...t},n)=>i.jsx(vP,{className:ve("grid gap-2",e),...t,ref:n}));of.displayName=vP.displayName;const ko=h.forwardRef(({className:e,...t},n)=>i.jsx(xP,{ref:n,className:ve("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(jW,{className:"flex items-center justify-center",children:i.jsx(ek,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ko.displayName=xP.displayName;const fr=h.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));fr.displayName="Textarea";async function sl(e,t,n,r){const s=await n.arrayBuffer(),o=new Uint8Array(s),{error:a}=await S.storage.from(e).upload(t,o,{contentType:n.type||"application/octet-stream",upsert:(r==null?void 0:r.upsert)??!1});if(a)throw a;const{data:{publicUrl:l}}=S.storage.from(e).getPublicUrl(t);return{publicUrl:l}}/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"})(Gn||(Gn={}));var $i;(function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"})($i||($i={}));var Bj;(function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"})(Bj||(Bj={}));var Kt=function(){return Kt=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Kt.apply(this,arguments)};function yP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function zj(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var yu="data-react-paypal-script-id",Co={DATA_CLIENT_TOKEN:"dataClientToken",DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource",DATA_USER_ID_TOKEN:"dataUserIdToken"},SW="Failed to load the PayPal JS SDK script.",wP="paypal",NW="usePayPalScriptReducer must be used within a PayPalScriptProvider";function kW(e){return e===void 0&&(e=wP),window[e]}function CW(e){for(var t="",n=0;n<e.length;n++){var r=e[n].charCodeAt(0)*n;e[n+1]&&(r+=e[n+1].charCodeAt(0)*(n-1)),t+=String.fromCharCode(97+Math.abs(r)%26)}return t}function EW(e){var t=e.reactComponentName,n=e.sdkComponentKey,r=e.sdkRequestedComponents,s=r===void 0?"":r,o=e.sdkDataNamespace,a=o===void 0?wP:o,l=n.charAt(0).toUpperCase().concat(n.substring(1)),c="Unable to render <".concat(t," /> because window.").concat(a,".").concat(l," is undefined."),u=typeof s=="string"?s:s.join(",");if(!u.includes(n)){var d=[u,n].filter(Boolean).join();c+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(d,"'}}>`.")}return c}function bP(e){var t=e,n=yu;t[n];var r=yP(t,[n+""]);return"react-paypal-js-".concat(CW(JSON.stringify(r)))}function TW(e){var t=self.document.querySelector("script[".concat(yu,'="').concat(e,'"]'));t!=null&&t.parentNode&&t.parentNode.removeChild(t)}function PW(e,t){var n,r;switch(t.type){case $i.LOADING_STATUS:return typeof t.value=="object"?Kt(Kt({},e),{loadingStatus:t.value.state,loadingStatusErrorMessage:t.value.message}):Kt(Kt({},e),{loadingStatus:t.value});case $i.RESET_OPTIONS:return TW(e.options[yu]),Kt(Kt({},e),{loadingStatus:Gn.PENDING,options:Kt(Kt((n={},n[Co.DATA_SDK_INTEGRATION_SOURCE]=Co.DATA_LIBRARY_VALUE,n),t.value),(r={},r[yu]="".concat(bP(t.value)),r))});case $i.SET_BRAINTREE_INSTANCE:return Kt(Kt({},e),{braintreePayPalCheckoutInstance:t.value});default:return e}}var _P=h.createContext(null);function RW(e){if(typeof(e==null?void 0:e.dispatch)=="function"&&e.dispatch.length!==0)return e;throw new Error(NW)}function AW(){var e=RW(h.useContext(_P)),t=Kt(Kt({},e),{isInitial:e.loadingStatus===Gn.INITIAL,isPending:e.loadingStatus===Gn.PENDING,isResolved:e.loadingStatus===Gn.RESOLVED,isRejected:e.loadingStatus===Gn.REJECTED});return[t,e.dispatch]}h.createContext({});function IW(e){var t=h.useRef(new Proxy({},{get:function(n,r,s){return typeof n[r]=="function"?function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n[r].apply(n,o)}:Reflect.get(n,r,s)}}));return t.current=Object.assign(t.current,e),t.current}var wu=function(e){var t,n=e.className,r=n===void 0?"":n,s=e.disabled,o=s===void 0?!1:s,a=e.children,l=e.forceReRender,c=l===void 0?[]:l,u=yP(e,["className","disabled","children","forceReRender"]),d=o?{opacity:.38}:{},f="".concat(r," ").concat(o?"paypal-buttons-disabled":"").trim(),m=h.useRef(null),p=h.useRef(null),y=IW(u),g=AW()[0],w=g.isResolved,v=g.options,x=h.useState(null),b=x[0],_=x[1],N=h.useState(!0),C=N[0],k=N[1],I=h.useState(null),$=I[1];function O(){p.current!==null&&p.current.close().catch(function(){})}return!((t=p.current)===null||t===void 0)&&t.updateProps&&p.current.updateProps({message:u.message}),h.useEffect(function(){if(w===!1)return O;var U=kW(v.dataNamespace);if(U===void 0||U.Buttons===void 0)return $(function(){throw new Error(EW({reactComponentName:wu.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:v.components,sdkDataNamespace:v[Co.DATA_NAMESPACE]}))}),O;var P=function(K,D){_(D),typeof u.onInit=="function"&&u.onInit(K,D)};try{p.current=U.Buttons(Kt(Kt({},y),{onInit:P}))}catch(K){return $(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(K))})}return p.current.isEligible()===!1?(k(!1),O):(m.current&&p.current.render(m.current).catch(function(K){m.current===null||m.current.children.length===0||$(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(K))})}),O)},zj(zj([w],c,!0),[u.fundingSource],!1)),h.useEffect(function(){b!==null&&(o===!0?b.disable().catch(function(){}):b.enable().catch(function(){}))},[o,b]),ie.createElement(ie.Fragment,null,C?ie.createElement("div",{ref:m,style:d,className:f}):a)};wu.displayName="PayPalButtons";function OW(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function DW(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(n===null)return null;var r=jP(e,t),s=n.cloneNode();if(delete s.dataset.uidAuto,Object.keys(s.dataset).length!==Object.keys(r.dataset).length)return null;var o=!0;return Object.keys(s.dataset).forEach(function(a){s.dataset[a]!==r.dataset[a]&&(o=!1)}),o?n:null}function MW(e){var t=e.url,n=e.attributes,r=e.onSuccess,s=e.onError,o=jP(t,n);o.onerror=s,o.onload=r,document.head.insertBefore(o,document.head.firstElementChild)}function LW(e){var t=e.sdkBaseUrl,n=e.environment,r=OW(e,["sdkBaseUrl","environment"]),s=t||UW(n),o=r,a=Object.keys(o).filter(function(u){return typeof o[u]<"u"&&o[u]!==null&&o[u]!==""}).reduce(function(u,d){var f=o[d].toString();return d=$W(d),d.substring(0,4)==="data"||d==="crossorigin"?u.attributes[d]=f:u.queryParams[d]=f,u},{queryParams:{},attributes:{}}),l=a.queryParams,c=a.attributes;return l["merchant-id"]&&l["merchant-id"].indexOf(",")!==-1&&(c["data-merchant-id"]=l["merchant-id"],l["merchant-id"]="*"),{url:"".concat(s,"?").concat(FW(l)),attributes:c}}function $W(e){var t=function(n,r){return(r?"-":"")+n.toLowerCase()};return e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,t)}function FW(e){var t="";return Object.keys(e).forEach(function(n){t.length!==0&&(t+="&"),t+=n+"="+e[n]}),t}function UW(e){return e==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function jP(e,t){t===void 0&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach(function(r){n.setAttribute(r,t[r]),r==="data-csp-nonce"&&n.setAttribute("nonce",t["data-csp-nonce"])}),n}function VW(e,t){if(t===void 0&&(t=Promise),SP(e,t),typeof document>"u")return t.resolve(null);var n=LW(e),r=n.url,s=n.attributes,o=s["data-namespace"]||"paypal",a=qj(o);return s["data-js-sdk-library"]||(s["data-js-sdk-library"]="paypal-js"),DW(r,s)&&a?t.resolve(a):BW({url:r,attributes:s},t).then(function(){var l=qj(o);if(l)return l;throw new Error("The window.".concat(o," global variable is not available."))})}function BW(e,t){t===void 0&&(t=Promise),SP(e,t);var n=e.url,r=e.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new t(function(s,o){if(typeof document>"u")return s();MW({url:n,attributes:r,onSuccess:function(){return s()},onError:function(){var a=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return o(a)}})})}function qj(e){return window[e]}function SP(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");var n=e.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Uv=function(e){var t,n=e.options,r=n===void 0?{clientId:"test"}:n,s=e.children,o=e.deferLoading,a=o===void 0?!1:o,l=h.useReducer(PW,{options:Kt(Kt({},r),(t={},t[Co.DATA_JS_SDK_LIBRARY]=Co.DATA_LIBRARY_VALUE,t[Co.DATA_SDK_INTEGRATION_SOURCE]=Co.DATA_LIBRARY_VALUE,t[yu]="".concat(bP(r)),t)),loadingStatus:a?Gn.INITIAL:Gn.PENDING}),c=l[0],u=l[1];return h.useEffect(function(){if(a===!1&&c.loadingStatus===Gn.INITIAL)return u({type:$i.LOADING_STATUS,value:Gn.PENDING});if(c.loadingStatus===Gn.PENDING){var d=!0;return VW(c.options).then(function(){d&&u({type:$i.LOADING_STATUS,value:Gn.RESOLVED})}).catch(function(f){console.error("".concat(SW," ").concat(f)),d&&u({type:$i.LOADING_STATUS,value:{state:Gn.REJECTED,message:String(f)}})}),function(){d=!1}}},[c.options,a,c.loadingStatus]),ie.createElement(_P.Provider,{value:Kt(Kt({},c),{dispatch:u})},s)};function Wj(){}h.createContext({cardFieldsForm:null,fields:{},registerField:Wj,unregisterField:Wj});function zW(){const{id:e}=lC(),{user:t}=wn(),n=Xi(),{format:r}=ei(),[s,o]=h.useState(null),[a,l]=h.useState(null),[c,u]=h.useState([]),[d,f]=h.useState(0),[m,p]=h.useState([]),[y,g]=h.useState([]),[w,v]=h.useState(""),[x,b]=h.useState(null),[_,N]=h.useState(5),[C,k]=h.useState(""),[I,$]=h.useState(!1),[O,U]=h.useState(!1),[P,K]=h.useState(null),[D,F]=h.useState("full"),R=s?((E,V)=>{if(!E||E<=5)return null;let q=2;E>=11&&E<=20?q=4:E>=21&&E<=50&&(q=6);const J=Math.ceil(E/q),oe=Math.ceil(V/q*100)/100;return{numInstallments:q,sessionsPerInstallment:J,amountPerInstallment:oe}})(s.total_sessions,s.price):null,M=s?D==="full"||!R?s.price:R.amountPerInstallment:0;s&&(D==="full"||!R?s.total_sessions:R.sessionsPerInstallment),h.useEffect(()=>{e&&(S.from("lessons").select("*").eq("id",e).single().then(({data:E})=>{o(E),E&&(S.from("profiles").select("*").eq("user_id",E.teacher_id).single().then(({data:V})=>l(V)),E.lesson_type==="group"&&(S.from("bookings").select("id",{count:"exact",head:!0}).eq("lesson_id",e).in("status",["pending","accepted","scheduled"]).then(({count:V})=>f(V??0)),S.from("group_session_schedules").select("*").eq("lesson_id",e).order("session_number").then(({data:V})=>p(V??[]))))}),S.from("reviews").select("*").eq("lesson_id",e).then(async({data:E})=>{if(E&&E.length>0){const V=[...new Set(E.map(A=>A.student_id))],{data:q}=await S.from("profiles").select("user_id, full_name").in("user_id",V),J={};q==null||q.forEach(A=>{J[A.user_id]=A.full_name});const oe=E.map(A=>({...A,reviewer_name:J[A.student_id]||""}));g(oe)}else g([])}),t&&S.from("bookings").select("*").eq("lesson_id",e).eq("student_id",t.id).then(({data:E})=>u(E??[])),S.from("site_settings").select("value").eq("key","payment_methods").single().then(({data:E})=>{if(E!=null&&E.value){const V=E.value;K(V),v(q=>{var J,oe;return q||((J=V.paypal)!=null&&J.enabled?"paypal":(oe=V.bank_transfer)!=null&&oe.enabled?"bank_transfer":"")})}}))},[e,t]);const L=async E=>{if(!t||!s)return;U(!0);const V=s.lesson_type==="group"&&D==="installment"&&R,q=s.lesson_type==="group"?"scheduled":"accepted",{data:J,error:oe}=await S.from("bookings").insert({student_id:t.id,lesson_id:s.id,teacher_id:s.teacher_id,amount:M,payment_method:"paypal",status:q,...V?{is_installment:!0,total_installments:R.numInstallments,paid_sessions:R.sessionsPerInstallment}:{}}).select().single();if(oe||!J){Q.error("   "),U(!1);return}await S.from("invoices").insert({booking_id:J.id,student_id:t.id,teacher_id:s.teacher_id,lesson_id:s.id,amount:M,payment_method:"paypal",status:"paid"}),V&&await S.from("course_installments").insert({booking_id:J.id,installment_number:1,amount:R.amountPerInstallment,sessions_unlocked:R.sessionsPerInstallment,status:"paid",paid_at:new Date().toISOString()}),await S.from("conversations").insert({student_id:t.id,teacher_id:s.teacher_id,booking_id:J.id});const A=V?`    !   ${R.sessionsPerInstallment}    ${s.total_sessions}`:s.lesson_type==="group"?"  !     ":"  !        ";Q.success(A),$(!1);const{data:Y}=await S.from("bookings").select("*").eq("lesson_id",e).eq("student_id",t.id);u(Y??[]),s.lesson_type==="group"&&S.from("bookings").select("id",{count:"exact",head:!0}).eq("lesson_id",e).in("status",["pending","accepted","scheduled"]).then(({count:ee})=>f(ee??0)),U(!1)},X=async()=>{var oe;if(!t||!s){Q.error("   "),n("/auth");return}if(w==="bank_transfer"&&!x){Q.error("       ");return}U(!0);let E=null;if(w==="bank_transfer"&&x)try{try{await((oe=navigator.mediaDevices)==null?void 0:oe.getUserMedia({video:!0}))}catch{}console.log("Starting receipt upload:",x.name,x.type,x.size);const A=`${t.id}/${Date.now()}-${x.name.replace(/[^a-zA-Z0-9._-]/g,"_")}`,{publicUrl:Y}=await sl("uploads",A,x);E=Y,console.log("Receipt uploaded successfully:",E)}catch(A){console.error("Receipt upload error:",(A==null?void 0:A.message)||A),Q.error("   : "+((A==null?void 0:A.message)||"  ")),U(!1);return}const V=s.lesson_type==="group"&&D==="installment"&&R,{data:q,error:J}=await S.from("bookings").insert({student_id:t.id,lesson_id:s.id,teacher_id:s.teacher_id,amount:M,payment_method:w,payment_receipt_url:E,status:"pending",...V?{is_installment:!0,total_installments:R.numInstallments,paid_sessions:0}:{}}).select().single();if(J||!q)Q.error("   ");else{await S.from("invoices").insert({booking_id:q.id,student_id:t.id,teacher_id:s.teacher_id,lesson_id:s.id,amount:M,payment_method:w,payment_receipt_url:E}),V&&await S.from("course_installments").insert({booking_id:q.id,installment_number:1,amount:R.amountPerInstallment,sessions_unlocked:R.sessionsPerInstallment,status:"pending"}),Q.success("   !     "),$(!1);const{data:A}=await S.from("bookings").select("*").eq("lesson_id",e).eq("student_id",t.id);u(A??[])}U(!1)},le=async()=>{if(!t||!s)return;const E=c.find(q=>q.status==="completed");if(!E){Q.error("      ");return}const{error:V}=await S.from("reviews").insert({booking_id:E.id,student_id:t.id,teacher_id:s.teacher_id,lesson_id:s.id,rating:_,comment:C});if(V)Q.error(" ");else{Q.success(" !"),k("");const{data:q}=await S.from("reviews").select("*").eq("lesson_id",e);if(q){const J=[...new Set(q.map(Y=>Y.student_id))],{data:oe}=await S.from("profiles").select("user_id, full_name").in("user_id",J),A={};oe==null||oe.forEach(Y=>{A[Y.user_id]=Y.full_name}),g(q.map(Y=>({...Y,reviewer_name:A[Y.student_id]||""})))}}};return s?i.jsx(Dn,{children:i.jsxs("div",{className:"pb-4",dir:"rtl",children:[s.image_url?i.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-48 object-cover"}):i.jsx("div",{className:"w-full h-48 gradient-hero"}),i.jsx("div",{className:"px-4 -mt-4 relative",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border shadow-elevated",children:[i.jsx("h1",{className:"text-xl font-bold",children:s.title}),i.jsxs(Tl,{defaultValue:"about",className:"mt-4",children:[i.jsxs(Hl,{className:"w-full",children:[i.jsx(Ut,{value:"about",className:"flex-1",children:" "}),i.jsx(Ut,{value:"sessions",className:"flex-1",children:""}),i.jsx(Ut,{value:"reviews",className:"flex-1",children:""})]}),i.jsxs(it,{value:"about",className:"space-y-4 mt-4 text-right",children:[s.lesson_type==="group"&&i.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 space-y-3",children:[i.jsxs("h3",{className:"font-semibold text-primary flex items-center gap-2 flex-row-reverse",children:[i.jsx(ns,{className:"h-4 w-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-row-reverse",children:[i.jsx(ns,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{children:[" : ",s.expected_students," "]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-row-reverse",children:[i.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{children:[": ",d," "]})]}),s.course_start_date&&i.jsxs("div",{className:"flex items-center gap-2 flex-row-reverse",children:[i.jsx(Di,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{children:[" : ",new Date(s.course_start_date).toLocaleDateString("ar")]})]}),s.total_sessions&&i.jsxs("div",{className:"flex items-center gap-2 flex-row-reverse",children:[i.jsx(_M,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{children:[" : ",s.total_sessions]})]})]}),s.course_topic_type&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:[" : ",s.course_topic_type]}),m.length>0&&i.jsxs("div",{className:"mt-2",children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:" :"}),i.jsx("div",{className:"space-y-1",children:m.filter(E=>E.scheduled_at).map(E=>i.jsxs("div",{className:"flex items-center gap-2 text-xs bg-background rounded p-2 flex-row-reverse",children:[i.jsx(Di,{className:"h-3 w-3 text-muted-foreground"}),i.jsxs("span",{children:[" ",E.session_number,": ",new Date(E.scheduled_at).toLocaleString("ar")]})]},E.id))})]})]}),s.min_age&&s.max_age&&i.jsxs("div",{className:"flex items-center gap-2 text-sm flex-row-reverse",children:[i.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{children:[" : ",s.min_age," - ",s.max_age," "]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm flex-row-reverse",children:[i.jsx(Xx,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{children:[" : ",s.duration_minutes," "]})]}),s.description&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-1",children:" "}),i.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm flex-row-reverse",children:[i.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{children:[": ",(a==null?void 0:a.full_name)??"..."]})]}),(a==null?void 0:a.bio)&&i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.bio})]}),s.notes&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-1",children:""}),i.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]}),s.is_online&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary/5 rounded-lg text-sm text-primary flex-row-reverse",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{children:"    "})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[i.jsx("span",{className:"text-xl font-bold text-primary",children:r(s.price)}),(()=>{var q,J,oe,A;const E=c.find(Y=>!["completed","cancelled"].includes(Y.status)),V=c.length>0&&c.every(Y=>["completed","cancelled"].includes(Y.status));return E?i.jsxs("div",{className:"text-sm text-muted-foreground bg-muted px-3 py-2 rounded-lg text-center",children:["     ",s.lesson_type==="group"?"":""]}):i.jsxs(yr,{open:I,onOpenChange:$,children:[i.jsx(f0,{asChild:!0,children:i.jsx(te,{variant:"hero",children:V?" ":" "})}),i.jsxs(nr,{className:"max-h-[90vh] overflow-y-auto",children:[i.jsx(Mr,{children:i.jsx(Lr,{children:s.lesson_type==="group"?" ":" "})}),i.jsxs("div",{className:"space-y-4",children:[s.lesson_type==="group"&&R&&i.jsxs("div",{className:"space-y-3",children:[i.jsx(re,{className:"text-xs font-semibold",children:" "}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${D==="full"?"border-primary bg-primary/5":"border-border hover:border-primary/40"}`,onClick:()=>F("full"),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`h-4 w-4 rounded-full border-2 flex items-center justify-center ${D==="full"?"border-primary":"border-muted-foreground"}`,children:D==="full"&&i.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})}),i.jsx("span",{className:"font-medium text-sm",children:" "})]}),i.jsx("span",{className:"font-bold text-primary",children:r(s.price)})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1 mr-6",children:["      (",s.total_sessions," )"]})]}),i.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${D==="installment"?"border-primary bg-primary/5":"border-border hover:border-primary/40"}`,onClick:()=>F("installment"),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`h-4 w-4 rounded-full border-2 flex items-center justify-center ${D==="installment"?"border-primary":"border-muted-foreground"}`,children:D==="installment"&&i.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})}),i.jsxs("span",{className:"font-medium text-sm",children:["  (",R.numInstallments," )"]})]}),i.jsx("span",{className:"font-bold text-primary",children:r(R.amountPerInstallment)})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1 mr-6",children:[" ",r(R.amountPerInstallment),"     ",R.sessionsPerInstallment," "]}),i.jsx("div",{className:"mt-2 mr-6 p-2 bg-muted/50 rounded text-xs space-y-1",children:Array.from({length:R.numInstallments}).map((Y,ee)=>{const H=ee*R.sessionsPerInstallment+1,ge=Math.min((ee+1)*R.sessionsPerInstallment,s.total_sessions);return i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:[" ",ee+1,":  ",H," - ",ge]}),i.jsx("span",{className:"font-medium",children:r(R.amountPerInstallment)})]},ee)})})]})]})]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[" : ",i.jsx("strong",{children:r(M)}),D==="installment"&&R&&i.jsxs("span",{className:"text-xs text-primary mr-2",children:["(   ",R.numInstallments,")"]})]}),i.jsxs(of,{value:w,onValueChange:v,children:[((q=P==null?void 0:P.paypal)==null?void 0:q.enabled)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{value:"paypal",id:"paypal"}),i.jsxs(re,{htmlFor:"paypal",className:"flex items-center gap-2",children:[" ",i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("img",{src:"https://cdn-icons-png.flaticon.com/32/349/349221.png",alt:"Visa",className:"h-5"}),i.jsx("img",{src:"https://cdn-icons-png.flaticon.com/32/349/349228.png",alt:"Mastercard",className:"h-5"})]})]})]}),((J=P==null?void 0:P.bank_transfer)==null?void 0:J.enabled)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{value:"bank_transfer",id:"bank"}),i.jsx(re,{htmlFor:"bank",children:" "})]})]}),w==="paypal"&&((oe=P==null?void 0:P.paypal)==null?void 0:oe.client_id)&&i.jsxs("div",{className:"space-y-3 paypal-card-only",children:[i.jsx("style",{children:`
                              .paypal-card-only .paypal-powered-by,
                              .paypal-card-only [data-funding-source] .paypal-powered-by,
                              .paypal-card-only .powered-by-paypal,
                              .paypal-card-only [class*="powered"],
                              .paypal-card-only [class*="Powered"] {
                                display: none !important;
                              }
                              .paypal-card-only iframe[title*="address"],
                              .paypal-card-only [data-field="postal"],
                              .paypal-card-only [data-field="name"],
                              .paypal-card-only [data-field="billingAddress"] {
                                display: none !important;
                              }
                            `}),i.jsx(Uv,{options:{clientId:P.paypal.client_id,currency:"USD",intent:"capture",components:"buttons",dataNamespace:"paypal_sdk"},children:i.jsx(wu,{fundingSource:"card",style:{layout:"vertical",shape:"rect",label:"pay",color:"black",tagline:!1},disabled:O,createOrder:(Y,ee)=>ee.order.create({intent:"CAPTURE",purchase_units:[{amount:{value:String(M),currency_code:"USD"},description:s.title}],application_context:{shipping_preference:"NO_SHIPPING"}}),onApprove:async(Y,ee)=>{var H;try{const ge=await((H=ee.order)==null?void 0:H.capture());(ge==null?void 0:ge.status)==="COMPLETED"?await L(ge):Q.error("   ")}catch(ge){console.error("PayPal approve error:",ge),Q.error("    ")}},onError:Y=>{console.error("PayPal button error:",Y),Q.error("   PayPal")}})},`paypal-${P.paypal.sandbox?"sandbox":"live"}-${P.paypal.client_id.slice(-6)}`),P.paypal.sandbox&&i.jsx("p",{className:"text-[10px] text-center text-warning bg-warning/10 rounded p-1",children:"   (Sandbox)"})]}),w==="paypal"&&!((A=P==null?void 0:P.paypal)!=null&&A.client_id)&&i.jsx("div",{className:"p-3 rounded-lg bg-muted text-sm text-muted-foreground text-center",children:"   PayPal    "}),w==="bank_transfer"&&(P==null?void 0:P.bank_transfer)&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-muted text-sm space-y-2",children:[P.bank_transfer.bank_logo_url&&i.jsx("img",{src:P.bank_transfer.bank_logo_url,alt:" ",className:"h-10 w-auto object-contain"}),i.jsx("p",{className:"font-medium",children:" :"}),P.bank_transfer.account_number&&i.jsxs("p",{children:[" : ",i.jsx("span",{dir:"ltr",className:"font-mono",children:P.bank_transfer.account_number})]}),P.bank_transfer.account_holder&&i.jsxs("p",{children:["  : ",P.bank_transfer.account_holder]}),P.bank_transfer.branch&&i.jsxs("p",{children:[": ",P.bank_transfer.branch]})]}),i.jsxs("div",{children:[i.jsx(re,{htmlFor:"receiptFileInput",children:"  "}),i.jsx("input",{type:"file",id:"receiptFileInput",accept:"image/*",className:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",onClick:Y=>Y.stopPropagation(),onChange:Y=>{var H;Y.stopPropagation();const ee=((H=Y.target.files)==null?void 0:H[0])??null;b(ee),ee&&console.log("Receipt file selected:",ee.name,ee.type,ee.size)}}),x&&i.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["  : ",x.name]})]})]}),w==="bank_transfer"&&i.jsx(te,{onClick:X,disabled:O,className:"w-full",variant:"hero",children:O?" ...":" "})]})]})]})})()]})]}),i.jsx(it,{value:"sessions",className:"mt-4",children:c.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"   "}):i.jsx("div",{className:"space-y-3",children:c.map(E=>i.jsxs("div",{className:"p-3 rounded-lg border border-border",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:E.status==="pending"?" ":E.status==="accepted"?"":E.status==="scheduled"?"":E.status==="completed"?"":""}),E.scheduled_at&&i.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(E.scheduled_at).toLocaleString("ar")})]}),E.zoom_join_url&&E.status==="scheduled"&&i.jsx("a",{href:E.zoom_join_url,target:"_blank",rel:"noopener noreferrer",children:i.jsxs(te,{size:"sm",variant:"hero",className:"mt-2 w-full",children:[i.jsx(Ss,{className:"h-4 w-4 ml-2"})," "]})})]},E.id))})}),i.jsxs(it,{value:"reviews",className:"mt-4",children:[i.jsx("div",{className:"space-y-3 mb-6",children:y.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"   "}):y.map(E=>i.jsxs("div",{className:"p-3 rounded-lg border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("div",{className:"flex gap-0.5",children:Array.from({length:5}).map((V,q)=>i.jsx(Qa,{className:`h-3 w-3 ${q<E.rating?"text-warning fill-current":"text-muted"}`},q))}),i.jsx("span",{className:"text-xs text-muted-foreground",children:E.reviewer_name})]}),E.comment&&i.jsx("p",{className:"text-sm text-muted-foreground",children:E.comment})]},E.id))}),t&&c.some(E=>E.status==="completed")&&i.jsxs("div",{className:"border-t border-border pt-4 space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:" "}),i.jsx("div",{className:"flex gap-1",children:Array.from({length:5}).map((E,V)=>i.jsx("button",{onClick:()=>N(V+1),children:i.jsx(Qa,{className:`h-6 w-6 ${V<_?"text-warning fill-current":"text-muted"}`})},V))}),i.jsx(fr,{placeholder:" ...",value:C,onChange:E=>k(E.target.value)}),i.jsx(te,{onClick:le,variant:"hero",size:"sm",children:" "})]})]})]})]})})]})}):i.jsx(Dn,{children:i.jsx("div",{className:"p-8 text-center text-muted-foreground",children:" ..."})})}function Kj({src:e,title:t,onClose:n}){const r=h.useRef(null),s=h.useRef(null),[o,a]=h.useState(!1),[l,c]=h.useState(!1),[u,d]=h.useState(0),[f,m]=h.useState(0),[p,y]=h.useState(0),[g,w]=h.useState(!1),[v,x]=h.useState(!0),[b,_]=h.useState(1),[N,C]=h.useState(!1),k=h.useRef(),I=[.5,.75,1,1.25,1.5,2];h.useEffect(()=>{const F=r.current;if(!F)return;const W=()=>{y(F.currentTime),d(F.duration?F.currentTime/F.duration*100:0)},R=()=>m(F.duration),M=()=>a(!1);return F.addEventListener("timeupdate",W),F.addEventListener("loadedmetadata",R),F.addEventListener("ended",M),()=>{F.removeEventListener("timeupdate",W),F.removeEventListener("loadedmetadata",R),F.removeEventListener("ended",M)}},[]);const $=()=>{const F=r.current;F&&(F.paused?(F.play(),a(!0)):(F.pause(),a(!1)))},O=F=>{const W=r.current;if(!W)return;const R=F.currentTarget.getBoundingClientRect(),M=(F.clientX-R.left)/R.width;W.currentTime=M*W.duration},U=()=>{const F=s.current;F&&(document.fullscreenElement?(document.exitFullscreen(),w(!1)):(F.requestFullscreen(),w(!0)))},P=F=>{r.current&&(r.current.playbackRate=F),_(F),C(!1)},K=F=>{const W=Math.floor(F/60),R=Math.floor(F%60);return`${W}:${R.toString().padStart(2,"0")}`},D=()=>{x(!0),k.current&&clearTimeout(k.current),o&&(k.current=setTimeout(()=>x(!1),3e3))};return i.jsxs("div",{ref:s,className:"relative bg-black rounded-xl overflow-hidden group",onMouseMove:D,onMouseLeave:()=>o&&x(!1),onContextMenu:F=>F.preventDefault(),children:[i.jsx("video",{ref:r,src:e,className:"w-full aspect-video cursor-pointer",onClick:$,controlsList:"nodownload",disablePictureInPicture:!0,playsInline:!0}),t&&v&&i.jsx("div",{className:"absolute top-0 left-0 right-0 p-3 bg-gradient-to-b from-black/60 to-transparent",children:i.jsx("p",{className:"text-white text-sm font-medium truncate",children:t})}),!o&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:$,children:i.jsx("div",{className:"bg-primary/90 rounded-full p-4 shadow-lg",children:i.jsx(ub,{className:"h-8 w-8 text-primary-foreground fill-current"})})}),i.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3 transition-opacity duration-300 ${v?"opacity-100":"opacity-0"}`,children:[i.jsx("div",{className:"w-full h-1.5 bg-white/30 rounded-full cursor-pointer mb-3 group/progress",onClick:O,children:i.jsx("div",{className:"h-full bg-primary rounded-full relative transition-all",style:{width:`${u}%`},children:i.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-primary rounded-full opacity-0 group-hover/progress:opacity-100 transition-opacity"})})}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:$,className:"text-white hover:text-primary transition-colors",children:o?i.jsx(NM,{className:"h-5 w-5"}):i.jsx(ub,{className:"h-5 w-5 fill-current"})}),i.jsx("button",{onClick:()=>{c(!l),r.current&&(r.current.muted=!l)},className:"text-white hover:text-primary transition-colors",children:l?i.jsx(DM,{className:"h-5 w-5"}):i.jsx(OM,{className:"h-5 w-5"})}),i.jsxs("span",{className:"text-white text-xs font-mono",children:[K(p)," / ",K(f)]})]}),i.jsxs("div",{className:"flex items-center gap-2 relative",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>C(!N),className:"text-white hover:text-primary transition-colors flex items-center gap-1",children:[i.jsx(th,{className:"h-4 w-4"}),i.jsxs("span",{className:"text-xs",children:[b,"x"]})]}),N&&i.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-card border border-border rounded-lg shadow-xl p-1 min-w-[80px]",children:I.map(F=>i.jsxs("button",{onClick:()=>P(F),className:`w-full text-center text-sm px-3 py-1.5 rounded hover:bg-muted transition-colors ${b===F?"text-primary font-semibold":"text-foreground"}`,children:[F,"x"]},F))})]}),i.jsx("button",{onClick:U,className:"text-white hover:text-primary transition-colors",children:g?i.jsx(SM,{className:"h-5 w-5"}):i.jsx(jM,{className:"h-5 w-5"})})]})]})]})]})}function qW(){var pt,z,pe,Fe,be,Ze,ut,Je,nt,Dt,Rn,Ie,_t,cn,zn;const{user:e,isTeacher:t}=wn();Xi();const{format:n}=ei(),[r,s]=h.useState([]),[o,a]=h.useState(null),[l,c]=h.useState([]),[u,d]=h.useState(""),f=h.useRef(null),[m,p]=h.useState(null),[y,g]=h.useState(null),[w,v]=h.useState(null),[x,b]=h.useState(null),[_,N]=h.useState(null),[C,k]=h.useState([]),[I,$]=h.useState(0),[O,U]=h.useState(!1),[P,K]=h.useState(null),[D,F]=h.useState(null),[W,R]=h.useState(""),[M,L]=h.useState(null),[X,le]=h.useState(!1),[E,V]=h.useState(null);h.useEffect(()=>{if(!e)return;const ae=async()=>{const{data:G}=await S.from("bookings").select("*, lessons(title, duration_minutes, lesson_type, total_sessions, expected_students, teacher_id, is_active)").or(`student_id.eq.${e.id},teacher_id.eq.${e.id}`).order("scheduled_at",{ascending:!0}),Ne=G??[],et=[...new Set(Ne.filter(Ue=>Ue.student_id===e.id).map(Ue=>Ue.teacher_id))];let at={};if(et.length>0){const{data:Ue}=await S.from("profiles").select("user_id, full_name").in("user_id",et);Ue==null||Ue.forEach(kt=>{at[kt.user_id]=kt.full_name})}const qe=[...new Set(Ne.filter(Ue=>{var kt;return((kt=Ue.lessons)==null?void 0:kt.lesson_type)==="group"}).map(Ue=>Ue.lesson_id))];let dt={};if(qe.length>0)for(const Ue of qe){const{data:kt}=await S.from("group_session_schedules").select("status").eq("lesson_id",Ue),Oe=kt??[];dt[Ue]={total:Oe.length,completed:Oe.filter(tt=>tt.status==="completed").length}}let un={};if(qe.length>0)for(const Ue of qe){const{data:kt}=await S.from("group_session_schedules").select("zoom_join_url, status").eq("lesson_id",Ue).eq("status","active").limit(1);un[Ue]=kt&&kt.length>0&&kt[0].zoom_join_url||null}let rn={};if(qe.length>0)for(const Ue of qe){const{count:kt}=await S.from("bookings").select("id",{count:"exact",head:!0}).eq("lesson_id",Ue).in("status",["scheduled","accepted","completed"]);rn[Ue]=kt??0}s(Ne.map(Ue=>({...Ue,teacher_name:at[Ue.teacher_id]||"",session_counts:dt[Ue.lesson_id],enrolled_count:rn[Ue.lesson_id]||0,active_session_join_url:un[Ue.lesson_id]||null})))};ae();const _e=S.channel("schedule-realtime").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>ae()).on("postgres_changes",{event:"*",schema:"public",table:"group_session_schedules"},()=>{_&&S.from("group_session_schedules").select("*").eq("lesson_id",_.lesson_id).order("session_number").then(({data:G})=>k(G??[])),ae()}).subscribe();return()=>{S.removeChannel(_e)}},[e]),h.useEffect(()=>{S.from("site_settings").select("value").eq("key","payment_methods").single().then(({data:ae})=>{if(ae!=null&&ae.value){const _e=ae.value;F(_e),R(G=>{var Ne,et;return G||((Ne=_e.paypal)!=null&&Ne.enabled?"paypal":(et=_e.bank_transfer)!=null&&et.enabled?"bank_transfer":"")})}})},[]);const q=(ae,_e)=>{if(!ae||ae<=5)return null;let G=2;ae>=11&&ae<=20?G=4:ae>=21&&ae<=50&&(G=6);const Ne=Math.ceil(ae/G),et=Math.ceil(_e/G*100)/100;return{numInstallments:G,sessionsPerInstallment:Ne,amountPerInstallment:et}},J=async ae=>{var dt;const{data:_e}=await S.from("lessons").select("is_active").eq("id",ae.lesson_id).single();if(!(_e!=null&&_e.is_active)){Q.error("      ");return}K(ae);const{data:G}=await S.from("course_installments").select("*").eq("booking_id",ae.id).order("installment_number"),et=(G??[]).length+2,{data:at}=await S.from("lessons").select("price, total_sessions").eq("id",ae.lesson_id).single();if(!at){Q.error("    ");return}const qe=q(at.total_sessions,at.price);if(!qe){Q.error("    ");return}V({installmentNumber:et,amount:qe.amountPerInstallment,sessionsToUnlock:qe.sessionsPerInstallment,totalInstallments:qe.numInstallments,lessonTitle:(dt=ae.lessons)==null?void 0:dt.title}),L(null),U(!0)},oe=async ae=>{if(!(!e||!P||!E)){le(!0);try{const{error:_e}=await S.from("course_installments").insert({booking_id:P.id,installment_number:E.installmentNumber,amount:E.amount,sessions_unlocked:E.sessionsToUnlock,status:"paid",paid_at:new Date().toISOString()});if(_e)throw console.error("Installment insert error:",_e),_e;const G=(P.paid_sessions||0)+E.sessionsToUnlock,{error:Ne}=await S.from("bookings").update({paid_sessions:G}).eq("id",P.id);if(Ne)throw console.error("Booking update error:",Ne),Ne;const{error:et}=await S.from("invoices").insert({booking_id:P.id,student_id:e.id,teacher_id:P.teacher_id,lesson_id:P.lesson_id,amount:E.amount,payment_method:"paypal",status:"paid"});if(et)throw console.error("Invoice insert error:",et),et;s(at=>at.map(qe=>qe.id===P.id?{...qe,paid_sessions:G}:qe)),Q.success(`   ${E.installmentNumber} !   ${E.sessionsToUnlock}  `),U(!1),(_==null?void 0:_.id)===P.id&&N({..._,paid_sessions:G})}catch(_e){console.error("PayPal installment error:",_e),Q.error("   : "+((_e==null?void 0:_e.message)||""))}finally{le(!1)}}},A=async()=>{if(!(!e||!P||!E)){if(!M){Q.error("     ");return}le(!0);try{const ae=`${e.id}/${Date.now()}-${M.name}`,{publicUrl:_e}=await sl("uploads",ae,M),{error:G}=await S.from("course_installments").insert({booking_id:P.id,installment_number:E.installmentNumber,amount:E.amount,sessions_unlocked:E.sessionsToUnlock,status:"pending"});if(G)throw console.error("Installment insert error:",G),G;const{error:Ne}=await S.from("invoices").insert({booking_id:P.id,student_id:e.id,teacher_id:P.teacher_id,lesson_id:P.lesson_id,amount:E.amount,payment_method:"bank_transfer",payment_receipt_url:_e});if(Ne)throw console.error("Invoice insert error:",Ne),Ne;Q.success("    !     "),U(!1)}catch(ae){console.error("Bank transfer error:",ae),Q.error("   : "+((ae==null?void 0:ae.message)||""))}finally{le(!1)}}},Y=async(ae,_e)=>{const G=document.createElement("input");G.type="file",G.accept="video/*",G.onchange=async Ne=>{var at;const et=(at=Ne.target.files)==null?void 0:at[0];if(et){if(et.size>500*1024*1024){Q.error("    (  500 )");return}g(ae);try{const qe=et.name.split(".").pop(),dt=`${_e}/${ae}.${qe}`,{error:un}=await S.storage.from("recordings").upload(dt,et,{upsert:!0});if(un)throw un;const{data:rn}=S.storage.from("recordings").getPublicUrl(dt);await S.from("bookings").update({recording_url:rn.publicUrl}).eq("id",ae),s(Ue=>Ue.map(kt=>kt.id===ae?{...kt,recording_url:rn.publicUrl}:kt)),Q.success("   ")}catch{Q.error("   ")}finally{g(null)}}},G.click()},ee=async ae=>{N(ae);const{data:_e}=await S.from("group_session_schedules").select("*").eq("lesson_id",ae.lesson_id).order("session_number");k(_e??[]);const{count:G}=await S.from("bookings").select("id",{count:"exact",head:!0}).eq("lesson_id",ae.lesson_id).in("status",["scheduled","accepted","completed"]);$(G??0)},H=async ae=>{if(!e)return;N(null),a(ae.id);const{data:_e}=await S.from("conversations").select("id").eq("booking_id",ae.id).maybeSingle();if(_e)p(_e.id),ge(_e.id);else{const{data:G,error:Ne}=await S.from("conversations").insert({student_id:ae.student_id,teacher_id:ae.teacher_id,booking_id:ae.id}).select("id").single();if(Ne){Q.error("   ");return}p(G.id),c([])}},ge=async ae=>{const{data:_e}=await S.from("messages").select("*").eq("conversation_id",ae).order("created_at");c(_e??[])};h.useEffect(()=>{if(!m)return;const ae=S.channel(`schedule-msgs-${m}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${m}`},_e=>c(G=>[...G,_e.new])).subscribe();return()=>{S.removeChannel(ae)}},[m]),h.useEffect(()=>{var ae;(ae=f.current)==null||ae.scrollIntoView({behavior:"smooth"})},[l]);const ke=async()=>{!u.trim()||!m||!e||(await S.from("messages").insert({conversation_id:m,sender_id:e.id,content:u.trim()}),d(""))},ye=r.find(ae=>ae.id===o),Ae=(ye==null?void 0:ye.status)==="completed",Ge=ae=>({pending:" ",accepted:"",scheduled:"",completed:"",cancelled:""})[ae]??ae,bt=ae=>({pending:"bg-warning/10 text-warning",accepted:"bg-primary/10 text-primary",scheduled:"bg-accent/10 text-accent",completed:"bg-success/10 text-success",cancelled:"bg-destructive/10 text-destructive"})[ae]??"",Ke=ae=>{var _e;return((_e=ae.lessons)==null?void 0:_e.lesson_type)==="group"};if(x)return i.jsx(Dn,{children:i.jsxs("div",{className:"px-4 py-6 max-w-3xl mx-auto",children:[i.jsxs("button",{onClick:()=>b(null),className:"text-sm text-primary flex items-center gap-1 mb-4",children:[i.jsx(bo,{className:"h-4 w-4"}),""]}),i.jsxs("h2",{className:"text-lg font-bold mb-4",children:[x.title||` ${x.session_number}`," - "]}),i.jsx(Kj,{src:x.recording_url,title:x.title||` ${x.session_number}`})]})});if(w)return i.jsx(Dn,{children:i.jsxs("div",{className:"px-4 py-6 max-w-3xl mx-auto",children:[i.jsxs("button",{onClick:()=>v(null),className:"text-sm text-primary flex items-center gap-1 mb-4",children:[i.jsx(bo,{className:"h-4 w-4"})," "]}),i.jsx("h2",{className:"text-lg font-bold mb-4",children:((pt=w.lessons)==null?void 0:pt.title)??" "}),i.jsx(Kj,{src:w.recording_url,title:(z=w.lessons)==null?void 0:z.title})]})});if(_){const _e=_.is_installment?_.paid_sessions??0:((pe=_.lessons)==null?void 0:pe.total_sessions)||999;return i.jsx(Dn,{children:i.jsxs("div",{className:"px-4 py-6",children:[i.jsxs("button",{onClick:()=>N(null),className:"text-sm text-primary flex items-center gap-1 mb-4",children:[i.jsx(bo,{className:"h-4 w-4"})," "]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border mb-4",children:[i.jsx("h2",{className:"text-lg font-bold",children:(Fe=_.lessons)==null?void 0:Fe.title}),i.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground flex-wrap",children:[_.teacher_name&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(er,{className:"h-3 w-3"}),": ",_.teacher_name]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ns,{className:"h-3 w-3"}),I," "]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Di,{className:"h-3 w-3"}),(be=_.lessons)==null?void 0:be.total_sessions," "]})]}),_.is_installment&&_e<(((Ze=_.lessons)==null?void 0:Ze.total_sessions)||0)&&_.status!=="completed"&&((ut=_.lessons)==null?void 0:ut.is_active)!==!1&&i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-warning/10 border border-warning/20 text-sm space-y-2",children:[i.jsx("p",{className:"font-semibold text-warning mb-1",children:"    "}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[" : ",_e,"  ",(Je=_.lessons)==null?void 0:Je.total_sessions]}),i.jsxs(te,{size:"sm",variant:"hero",className:"w-full",onClick:()=>J(_),children:[i.jsx(tk,{className:"h-4 w-4 ml-2"}),"  "]})]})]}),i.jsx("h3",{className:"font-semibold mb-3",children:" "}),i.jsx("div",{className:"space-y-3",children:C.filter(G=>G.scheduled_at).map(G=>{var at;const Ne=G.status||"pending",et=G.session_number<=_e;return i.jsxs("div",{className:`bg-card rounded-xl p-4 border ${et?"border-border":"border-destructive/30 opacity-60"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm",children:G.title||` ${G.session_number}`}),i.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(G.scheduled_at).toLocaleString("ar")})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${Ne==="completed"?"bg-success/10 text-success":Ne==="active"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:Ne==="completed"?"":Ne==="active"?"":" "})]}),!et&&((at=_.lessons)==null?void 0:at.is_active)!==!1&&_.status!=="completed"&&i.jsx("p",{className:"text-xs text-destructive mb-2",children:"       "}),et&&Ne==="active"&&G.zoom_join_url&&i.jsx("a",{href:G.zoom_join_url,target:"_blank",rel:"noopener noreferrer",children:i.jsxs(te,{size:"sm",variant:"hero",className:"w-full mb-2",children:[i.jsx(Ss,{className:"h-4 w-4 ml-2"})," "]})}),et&&Ne==="completed"&&G.recording_url&&i.jsxs(te,{size:"sm",variant:"outline",className:"w-full text-primary border-primary/30 hover:bg-primary/10",onClick:()=>b(G),children:[i.jsx(Og,{className:"h-4 w-4 ml-2"}),"  "]})]},G.id)})}),i.jsxs(te,{size:"sm",variant:"outline",className:"w-full mt-4",onClick:()=>H(_),children:[i.jsx(_l,{className:"h-4 w-4 ml-2"})," "]}),i.jsx(yr,{open:O,onOpenChange:U,children:i.jsxs(nr,{className:"max-h-[90vh] overflow-y-auto",children:[i.jsx(Mr,{children:i.jsx(Lr,{children:"  "})}),E&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20 text-sm space-y-1",children:[i.jsx("p",{className:"font-semibold",children:E.lessonTitle}),i.jsxs("p",{children:[" ",E.installmentNumber,"  ",E.totalInstallments]}),i.jsxs("p",{children:[" : ",i.jsx("strong",{className:"text-primary",children:n(E.amount)})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["  ",E.sessionsToUnlock,"  "]})]}),i.jsxs(of,{value:W,onValueChange:R,children:[((nt=D==null?void 0:D.paypal)==null?void 0:nt.enabled)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{value:"paypal",id:"cv-inst-paypal"}),i.jsxs(re,{htmlFor:"cv-inst-paypal",className:"flex items-center gap-2",children:[" ",i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("img",{src:"https://cdn-icons-png.flaticon.com/32/349/349221.png",alt:"Visa",className:"h-5"}),i.jsx("img",{src:"https://cdn-icons-png.flaticon.com/32/349/349228.png",alt:"Mastercard",className:"h-5"})]})]})]}),((Dt=D==null?void 0:D.bank_transfer)==null?void 0:Dt.enabled)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{value:"bank_transfer",id:"cv-inst-bank"}),i.jsx(re,{htmlFor:"cv-inst-bank",children:" "})]})]}),W==="paypal"&&((Rn=D==null?void 0:D.paypal)==null?void 0:Rn.client_id)&&i.jsxs("div",{className:"space-y-3 paypal-card-only",children:[i.jsx("style",{children:".paypal-card-only .paypal-powered-by { display: none !important; }"}),i.jsx(Uv,{options:{clientId:D.paypal.client_id,currency:"USD",intent:"capture",components:"buttons",dataNamespace:"paypal_cv_inst_sdk"},children:i.jsx(wu,{fundingSource:"card",style:{layout:"vertical",shape:"rect",label:"pay",color:"black",tagline:!1},disabled:X,createOrder:(G,Ne)=>Ne.order.create({intent:"CAPTURE",purchase_units:[{amount:{value:String(E.amount),currency_code:"USD"},description:`${E.lessonTitle} -  ${E.installmentNumber}`}],application_context:{shipping_preference:"NO_SHIPPING"}}),onApprove:async(G,Ne)=>{var et;try{const at=await((et=Ne.order)==null?void 0:et.capture());(at==null?void 0:at.status)==="COMPLETED"?await oe(at):Q.error("   ")}catch{Q.error("    ")}},onError:()=>Q.error("   PayPal")})},`cv-inst-paypal-${D.paypal.sandbox?"sandbox":"live"}-${D.paypal.client_id.slice(-6)}`)]}),W==="bank_transfer"&&(D==null?void 0:D.bank_transfer)&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-muted text-sm space-y-2",children:[D.bank_transfer.bank_logo_url&&i.jsx("img",{src:D.bank_transfer.bank_logo_url,alt:" ",className:"h-10 w-auto object-contain"}),i.jsx("p",{className:"font-medium",children:" :"}),D.bank_transfer.account_number&&i.jsxs("p",{children:[" : ",i.jsx("span",{dir:"ltr",className:"font-mono",children:D.bank_transfer.account_number})]}),D.bank_transfer.account_holder&&i.jsxs("p",{children:["  : ",D.bank_transfer.account_holder]}),D.bank_transfer.branch&&i.jsxs("p",{children:[": ",D.bank_transfer.branch]})]}),i.jsxs("div",{children:[i.jsx(re,{children:"  "}),i.jsx("input",{type:"file",accept:"image/*",className:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",onClick:G=>G.stopPropagation(),onChange:G=>{var Ne;G.stopPropagation(),L(((Ne=G.target.files)==null?void 0:Ne[0])??null)}})]}),i.jsx(te,{onClick:A,disabled:X,className:"w-full",variant:"hero",children:X?" ...":" "})]})]})]})})]})})}return o&&m!==null?i.jsx(Dn,{children:i.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)]",children:[i.jsxs("div",{className:"p-3 border-b border-border flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>{a(null),p(null),c([])},className:"text-sm text-primary flex items-center gap-1",children:[i.jsx(bo,{className:"h-4 w-4"}),""]}),i.jsxs("span",{className:"font-semibold text-sm flex-1",children:[": ",((Ie=ye==null?void 0:ye.lessons)==null?void 0:Ie.title)??""]}),Ae&&i.jsx("span",{className:"text-xs bg-muted text-muted-foreground px-2 py-1 rounded-full",children:" "})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[l.length===0&&i.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"   "}),l.map(ae=>i.jsx("div",{className:`flex ${ae.sender_id===(e==null?void 0:e.id)?"justify-start":"justify-end"}`,children:i.jsx("div",{className:`max-w-[75%] rounded-xl px-3 py-2 text-sm ${ae.sender_id===(e==null?void 0:e.id)?"bg-primary text-primary-foreground":"bg-muted"}`,children:ae.content})},ae.id)),i.jsx("div",{ref:f})]}),!Ae&&i.jsxs("div",{className:"p-3 border-t border-border flex gap-2",children:[i.jsx(he,{value:u,onChange:ae=>d(ae.target.value),placeholder:" ...",onKeyDown:ae=>ae.key==="Enter"&&ke()}),i.jsx(te,{onClick:ke,size:"icon",variant:"hero",children:i.jsx(ty,{className:"h-4 w-4"})})]})]})}):i.jsxs(Dn,{children:[i.jsxs("div",{className:"px-4 py-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),i.jsxs(Tl,{defaultValue:"scheduled",dir:"rtl",children:[i.jsxs(Hl,{className:"w-full grid grid-cols-4 mb-4",children:[i.jsx(Ut,{value:"scheduled",children:""}),i.jsx(Ut,{value:"accepted",children:""}),i.jsx(Ut,{value:"pending",children:" "}),i.jsx(Ut,{value:"completed",children:""})]}),["scheduled","accepted","pending","completed"].map(ae=>{const _e=r.filter(G=>G.status===ae);return i.jsx(it,{value:ae,children:_e.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-12",children:"  "}):i.jsx("div",{className:"space-y-3",children:_e.map(G=>{var Ne,et;return i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${Ke(G)?"bg-secondary/10 text-secondary border border-secondary/20":"bg-primary/10 text-primary border border-primary/20"}`,children:Ke(G)?" ":" "}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${bt(G.status)}`,children:Ge(G.status)})]}),i.jsx("h3",{className:"font-semibold",children:((Ne=G.lessons)==null?void 0:Ne.title)??""}),G.student_id===(e==null?void 0:e.id)&&G.teacher_name&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[i.jsx(er,{className:"h-4 w-4"}),i.jsxs("span",{children:[": ",G.teacher_name]})]}),Ke(G)&&i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Di,{className:"h-3 w-3"}),G.session_counts?`${G.session_counts.completed}/${G.session_counts.total}  `:`${(et=G.lessons)==null?void 0:et.total_sessions} `]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ns,{className:"h-3 w-3"}),G.enrolled_count," "]})]}),G.scheduled_at&&!Ke(G)&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[i.jsx(Xx,{className:"h-4 w-4"}),i.jsx("span",{children:new Date(G.scheduled_at).toLocaleString("ar")})]}),Ke(G)&&G.student_id===(e==null?void 0:e.id)&&i.jsxs(te,{size:"sm",variant:"outline",className:"w-full mt-2 text-primary border-primary/30 hover:bg-primary/10",onClick:()=>ee(G),children:[i.jsx(Di,{className:"h-4 w-4 ml-2"}),"  "]}),Ke(G)&&G.student_id===(e==null?void 0:e.id)&&(G.status==="scheduled"||G.status==="accepted")&&G.active_session_join_url&&i.jsx("a",{href:G.active_session_join_url,target:"_blank",rel:"noopener noreferrer",children:i.jsxs(te,{size:"sm",variant:"hero",className:"w-full mt-2",children:[i.jsx(Ss,{className:"h-4 w-4 ml-2"}),"  ()"]})}),!Ke(G)&&G.status==="scheduled"&&G.teacher_id===(e==null?void 0:e.id)&&t&&i.jsxs(te,{size:"sm",variant:"outline",className:"w-full mb-2 mt-2 text-success border-success/30 hover:bg-success/10",onClick:async()=>{const{error:at}=await S.from("bookings").update({status:"completed",zoom_join_url:null,zoom_start_url:null,zoom_meeting_id:null}).eq("id",G.id);at?Q.error("   "):(Q.success("   "),s(qe=>qe.map(dt=>dt.id===G.id?{...dt,status:"completed",zoom_join_url:null,zoom_start_url:null,zoom_meeting_id:null}:dt)))},children:[i.jsx(Hn,{className:"h-4 w-4 ml-2"})," "]}),!Ke(G)&&G.status==="scheduled"&&(G.zoom_join_url||G.zoom_start_url)&&i.jsx("a",{href:G.teacher_id===(e==null?void 0:e.id)?G.zoom_start_url??G.zoom_join_url:G.zoom_join_url,target:"_blank",rel:"noopener noreferrer",children:i.jsxs(te,{size:"sm",variant:"hero",className:"w-full mb-2",children:[i.jsx(Ss,{className:"h-4 w-4 ml-2"}),G.teacher_id===(e==null?void 0:e.id)?"  ()":"   "]})}),!Ke(G)&&G.status==="completed"&&G.teacher_id===(e==null?void 0:e.id)&&t&&!G.recording_url&&i.jsx(te,{size:"sm",variant:"outline",className:"w-full mb-2 text-primary border-primary/30 hover:bg-primary/10",onClick:()=>Y(G.id,G.teacher_id),disabled:y===G.id,children:y===G.id?i.jsxs(i.Fragment,{children:[i.jsx(Lg,{className:"h-4 w-4 ml-2 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ok,{className:"h-4 w-4 ml-2"}),"  "]})}),!Ke(G)&&G.status==="completed"&&G.teacher_id===(e==null?void 0:e.id)&&t&&G.recording_url&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-success mb-2",children:[i.jsx(Hn,{className:"h-4 w-4"}),i.jsx("span",{children:"  "})]}),!Ke(G)&&G.status==="completed"&&G.student_id===(e==null?void 0:e.id)&&G.recording_url&&i.jsxs(te,{size:"sm",variant:"outline",className:"w-full mb-2 text-primary border-primary/30 hover:bg-primary/10",onClick:()=>v(G),children:[i.jsx(Og,{className:"h-4 w-4 ml-2"}),"  "]}),!Ke(G)&&G.student_id===(e==null?void 0:e.id)&&(G.status==="accepted"||G.status==="scheduled"||G.status==="completed")&&i.jsxs(te,{size:"sm",variant:"outline",className:"w-full",onClick:()=>H(G),children:[i.jsx(_l,{className:"h-4 w-4 ml-2"}),G.status==="completed"?" ":" "]})]},G.id)})})},ae)})]})]}),i.jsx(yr,{open:O,onOpenChange:U,children:i.jsxs(nr,{className:"max-h-[90vh] overflow-y-auto",children:[i.jsx(Mr,{children:i.jsx(Lr,{children:"  "})}),E&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20 text-sm space-y-1",children:[i.jsx("p",{className:"font-semibold",children:E.lessonTitle}),i.jsxs("p",{children:[" ",E.installmentNumber,"  ",E.totalInstallments]}),i.jsxs("p",{children:[" : ",i.jsx("strong",{className:"text-primary",children:n(E.amount)})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["  ",E.sessionsToUnlock,"  "]})]}),i.jsxs(of,{value:W,onValueChange:R,children:[((_t=D==null?void 0:D.paypal)==null?void 0:_t.enabled)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{value:"paypal",id:"inst-paypal"}),i.jsxs(re,{htmlFor:"inst-paypal",className:"flex items-center gap-2",children:[" ",i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("img",{src:"https://cdn-icons-png.flaticon.com/32/349/349221.png",alt:"Visa",className:"h-5"}),i.jsx("img",{src:"https://cdn-icons-png.flaticon.com/32/349/349228.png",alt:"Mastercard",className:"h-5"})]})]})]}),((cn=D==null?void 0:D.bank_transfer)==null?void 0:cn.enabled)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{value:"bank_transfer",id:"inst-bank"}),i.jsx(re,{htmlFor:"inst-bank",children:" "})]})]}),W==="paypal"&&((zn=D==null?void 0:D.paypal)==null?void 0:zn.client_id)&&i.jsxs("div",{className:"space-y-3 paypal-card-only",children:[i.jsx("style",{children:`
                    .paypal-card-only .paypal-powered-by,
                    .paypal-card-only [data-funding-source] .paypal-powered-by { display: none !important; }
                  `}),i.jsx(Uv,{options:{clientId:D.paypal.client_id,currency:"USD",intent:"capture",components:"buttons",dataNamespace:"paypal_inst_sdk"},children:i.jsx(wu,{fundingSource:"card",style:{layout:"vertical",shape:"rect",label:"pay",color:"black",tagline:!1},disabled:X,createOrder:(ae,_e)=>_e.order.create({intent:"CAPTURE",purchase_units:[{amount:{value:String(E.amount),currency_code:"USD"},description:`${E.lessonTitle} -  ${E.installmentNumber}`}],application_context:{shipping_preference:"NO_SHIPPING"}}),onApprove:async(ae,_e)=>{var G;try{const Ne=await((G=_e.order)==null?void 0:G.capture());(Ne==null?void 0:Ne.status)==="COMPLETED"?await oe(Ne):Q.error("   ")}catch{Q.error("    ")}},onError:()=>Q.error("   PayPal")})},`inst-paypal-${D.paypal.sandbox?"sandbox":"live"}-${D.paypal.client_id.slice(-6)}`)]}),W==="bank_transfer"&&(D==null?void 0:D.bank_transfer)&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-muted text-sm space-y-2",children:[D.bank_transfer.bank_logo_url&&i.jsx("img",{src:D.bank_transfer.bank_logo_url,alt:" ",className:"h-10 w-auto object-contain"}),i.jsx("p",{className:"font-medium",children:" :"}),D.bank_transfer.account_number&&i.jsxs("p",{children:[" : ",i.jsx("span",{dir:"ltr",className:"font-mono",children:D.bank_transfer.account_number})]}),D.bank_transfer.account_holder&&i.jsxs("p",{children:["  : ",D.bank_transfer.account_holder]}),D.bank_transfer.branch&&i.jsxs("p",{children:[": ",D.bank_transfer.branch]})]}),i.jsxs("div",{children:[i.jsx(re,{children:"  "}),i.jsx("input",{type:"file",accept:"image/*",className:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",onClick:ae=>ae.stopPropagation(),onChange:ae=>{var _e;ae.stopPropagation(),L(((_e=ae.target.files)==null?void 0:_e[0])??null)}})]}),i.jsx(te,{onClick:A,disabled:X,className:"w-full",variant:"hero",children:X?" ...":" "})]})]})]})})]})}const WW=Ef("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function il({className:e,variant:t,...n}){return i.jsx("div",{className:ve(WW({variant:t}),e),...n})}function KW(){var U;const{user:e}=wn(),[t,n]=h.useState([]),[r,s]=h.useState(null),[o,a]=h.useState([]),[l,c]=h.useState(""),[u,d]=h.useState(null),[f,m]=h.useState(null),[p,y]=h.useState(!1),[g,w]=h.useState(null),v=h.useRef(null),x=h.useRef(null);h.useEffect(()=>{if(!e)return;const P=async()=>{const{data:D}=await S.from("conversations").select("*, bookings:booking_id(status, lessons:lesson_id(title))").or(`student_id.eq.${e.id},teacher_id.eq.${e.id}`);if(!D||D.length===0){n([]);return}const F=[...new Set(D.flatMap(q=>[q.student_id,q.teacher_id]))],W=D.map(q=>q.id),[{data:R},{data:M},{data:L}]=await Promise.all([S.from("profiles").select("user_id, full_name").in("user_id",F),S.from("messages").select("conversation_id").in("conversation_id",W).neq("sender_id",e.id).eq("is_read",!1),S.from("messages").select("conversation_id, created_at").in("conversation_id",W).order("created_at",{ascending:!1})]),X=new Map((R==null?void 0:R.map(q=>[q.user_id,q.full_name]))??[]),le=new Map;M==null||M.forEach(q=>le.set(q.conversation_id,(le.get(q.conversation_id)??0)+1));const E=new Map;L==null||L.forEach(q=>{E.has(q.conversation_id)||E.set(q.conversation_id,q.created_at)});const V=D.map(q=>{var J,oe;return{...q,student_name:X.get(q.student_id)??"",teacher_name:X.get(q.teacher_id)??"",lesson_title:((oe=(J=q.bookings)==null?void 0:J.lessons)==null?void 0:oe.title)??null,unread_count:le.get(q.id)??0,last_activity:E.get(q.id)??q.created_at}});V.sort((q,J)=>new Date(J.last_activity).getTime()-new Date(q.last_activity).getTime()),n(V)};P();const K=S.channel("messages-page-realtime").on("postgres_changes",{event:"*",schema:"public",table:"conversations"},()=>P()).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},()=>P()).subscribe();return()=>{S.removeChannel(K)}},[e]),h.useEffect(()=>{if(!r||!e)return;S.from("messages").select("*").eq("conversation_id",r).order("created_at").then(({data:K})=>{if(a(K??[]),K&&K.length>0){const D=K.filter(F=>F.sender_id!==e.id&&!F.is_read).map(F=>F.id);D.length>0&&S.from("messages").update({is_read:!0}).in("id",D).then(()=>{n(F=>F.map(W=>W.id===r?{...W,unread_count:0}:W))})}});const P=S.channel(`messages-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${r}`},K=>{const D=K.new;a(F=>[...F,D]),D.sender_id!==e.id&&!D.is_read&&S.from("messages").update({is_read:!0}).eq("id",D.id).then()}).subscribe();return()=>{S.removeChannel(P)}},[r,e]),h.useEffect(()=>{var P;(P=v.current)==null||P.scrollIntoView({behavior:"smooth"})},[o]);const b=P=>{var D;const K=(D=P.target.files)==null?void 0:D[0];if(K){if(!K.type.startsWith("image/")){Zd({title:"   ",variant:"destructive"});return}if(K.size>5*1024*1024){Zd({title:"      5 ",variant:"destructive"});return}d(K),m(URL.createObjectURL(K))}},_=()=>{d(null),m(null),x.current&&(x.current.value="")},N=async()=>{if(!(!l.trim()&&!u||!r||!e)){y(!0);try{let P=null;if(u){const K=u.name.split(".").pop()||"jpg",D=`chat/${r}/${Date.now()}.${K}`,{publicUrl:F}=await sl("uploads",D,u,{upsert:!1});P=F}await S.from("messages").insert({conversation_id:r,sender_id:e.id,content:l.trim()||(P?" ":""),image_url:P}),c(""),_()}catch(P){Zd({title:"  ",description:P.message,variant:"destructive"})}finally{y(!1)}}},C=P=>e?P.student_id===e.id?P.teacher_name??"":P.student_name??"":"",k=P=>{var D;return((D=P.bookings)==null?void 0:D.status)==="completed"?"completed":"active"},I=t.find(P=>P.id===r),$=(U=I==null?void 0:I.bookings)==null?void 0:U.status,O=e&&(I==null?void 0:I.student_id)===e.id&&$==="completed";return i.jsxs(Dn,{children:[i.jsxs("div",{className:"flex h-[calc(100vh-8rem)]",children:[i.jsx("div",{className:`${r?"hidden md:block":"block"} w-full md:w-80 border-l border-border`,children:i.jsxs("div",{className:"p-4",children:[i.jsx("h1",{className:"text-xl font-bold mb-4",children:""}),t.length===0?i.jsx("p",{className:"text-sm text-muted-foreground",children:"  "}):i.jsx("div",{className:"space-y-2",children:t.map(P=>i.jsxs("button",{onClick:()=>s(P.id),className:`w-full text-right p-3 rounded-lg transition-colors ${r===P.id?"bg-primary/10 text-primary":"hover:bg-muted"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[P.unread_count>0&&i.jsx("span",{className:"bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:P.unread_count>99?"99+":P.unread_count}),i.jsx(il,{variant:k(P)==="active"?"default":"secondary",className:"text-[10px]",children:k(P)==="active"?"":""})]}),i.jsx("p",{className:"font-medium text-sm",children:C(P)})]}),P.lesson_title&&i.jsx("p",{className:"text-xs text-muted-foreground text-right",children:P.lesson_title})]},P.id))})]})}),i.jsx("div",{className:`${r?"flex":"hidden md:flex"} flex-col flex-1`,children:r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-3 border-b border-border flex items-center",children:[i.jsx("button",{onClick:()=>s(null),className:"md:hidden text-sm text-primary ml-3",children:" "}),i.jsx("span",{className:"font-semibold text-sm flex-1",children:C(t.find(P=>P.id===r))}),O&&i.jsx("span",{className:"text-xs bg-muted text-muted-foreground px-2 py-1 rounded-full",children:" "})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[o.map(P=>i.jsx("div",{className:`flex ${P.sender_id===(e==null?void 0:e.id)?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:`max-w-[75%] rounded-xl px-3 py-2 text-sm ${P.sender_id===(e==null?void 0:e.id)?"bg-primary text-primary-foreground":"bg-muted"}`,children:[P.image_url&&i.jsx("img",{src:P.image_url,alt:" ",className:"rounded-lg max-w-full max-h-48 object-cover mb-1 cursor-pointer",onClick:()=>w(P.image_url)}),P.content&&!(P.image_url&&P.content===" ")&&i.jsx("span",{children:P.content})]})},P.id)),i.jsx("div",{ref:v})]}),!O&&i.jsxs("div",{className:"p-3 border-t border-border",children:[f&&i.jsxs("div",{className:"relative inline-block mb-2",children:[i.jsx("img",{src:f,alt:"",className:"h-20 rounded-lg object-cover"}),i.jsx("button",{onClick:_,className:"absolute -top-2 -right-2 bg-destructive text-destructive-foreground rounded-full p-0.5",children:i.jsx(Tf,{className:"h-3 w-3"})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{ref:x,type:"file",accept:"image/*",className:"hidden",onChange:b}),i.jsx(te,{type:"button",size:"icon",variant:"outline",onClick:()=>{var P;return(P=x.current)==null?void 0:P.click()},disabled:p,children:i.jsx(ey,{className:"h-4 w-4"})}),i.jsx(he,{value:l,onChange:P=>c(P.target.value),placeholder:" ...",onKeyDown:P=>P.key==="Enter"&&!p&&N(),disabled:p}),i.jsx(te,{onClick:N,size:"icon",variant:"hero",disabled:p,children:i.jsx(ty,{className:"h-4 w-4"})})]})]})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:" "})})]}),i.jsx(yr,{open:!!g,onOpenChange:()=>w(null),children:i.jsx(nr,{className:"max-w-[90vw] max-h-[90vh] p-2",children:g&&i.jsx("img",{src:g,alt:"",className:"w-full h-full object-contain rounded-lg"})})})]})}var ap="Collapsible",[HW,NP]=yn(ap),[GW,m0]=HW(ap),kP=h.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:o,onOpenChange:a,...l}=e,[c,u]=xr({prop:r,defaultProp:s??!1,onChange:a,caller:ap});return i.jsx(GW,{scope:n,disabled:o,contentId:nn(),open:c,onOpenToggle:h.useCallback(()=>u(d=>!d),[u]),children:i.jsx(we.div,{"data-state":v0(c),"data-disabled":o?"":void 0,...l,ref:t})})});kP.displayName=ap;var CP="CollapsibleTrigger",EP=h.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=m0(CP,n);return i.jsx(we.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":v0(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:de(e.onClick,s.onOpenToggle)})});EP.displayName=CP;var g0="CollapsibleContent",TP=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=m0(g0,e.__scopeCollapsible);return i.jsx(Vn,{present:n||s.open,children:({present:o})=>i.jsx(YW,{...r,ref:t,present:o})})});TP.displayName=g0;var YW=h.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...o}=e,a=m0(g0,n),[l,c]=h.useState(r),u=h.useRef(null),d=He(t,u),f=h.useRef(0),m=f.current,p=h.useRef(0),y=p.current,g=a.open||l,w=h.useRef(g),v=h.useRef(void 0);return h.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),ln(()=>{const x=u.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();f.current=b.height,p.current=b.width,w.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),c(r)}},[a.open,r]),i.jsx(we.div,{"data-state":v0(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g,...o,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:g&&s})});function v0(e){return e?"open":"closed"}var JW=kP,QW=EP,XW=TP,as="Accordion",ZW=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[x0,e7,t7]=Pu(as),[lp,zH]=yn(as,[t7,NP]),y0=NP(),PP=ie.forwardRef((e,t)=>{const{type:n,...r}=e,s=r,o=r;return i.jsx(x0.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?i.jsx(i7,{...o,ref:t}):i.jsx(s7,{...s,ref:t})})});PP.displayName=as;var[RP,n7]=lp(as),[AP,r7]=lp(as,{collapsible:!1}),s7=ie.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:o=!1,...a}=e,[l,c]=xr({prop:n,defaultProp:r??"",onChange:s,caller:as});return i.jsx(RP,{scope:e.__scopeAccordion,value:ie.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:ie.useCallback(()=>o&&c(""),[o,c]),children:i.jsx(AP,{scope:e.__scopeAccordion,collapsible:o,children:i.jsx(IP,{...a,ref:t})})})}),i7=ie.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=e,[a,l]=xr({prop:n,defaultProp:r??[],onChange:s,caller:as}),c=ie.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=ie.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return i.jsx(RP,{scope:e.__scopeAccordion,value:a,onItemOpen:c,onItemClose:u,children:i.jsx(AP,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(IP,{...o,ref:t})})})}),[o7,cp]=lp(as),IP=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:o="vertical",...a}=e,l=ie.useRef(null),c=He(l,t),u=e7(n),f=ql(s)==="ltr",m=de(e.onKeyDown,p=>{var I;if(!ZW.includes(p.key))return;const y=p.target,g=u().filter($=>{var O;return!((O=$.ref.current)!=null&&O.disabled)}),w=g.findIndex($=>$.ref.current===y),v=g.length;if(w===-1)return;p.preventDefault();let x=w;const b=0,_=v-1,N=()=>{x=w+1,x>_&&(x=b)},C=()=>{x=w-1,x<b&&(x=_)};switch(p.key){case"Home":x=b;break;case"End":x=_;break;case"ArrowRight":o==="horizontal"&&(f?N():C());break;case"ArrowDown":o==="vertical"&&N();break;case"ArrowLeft":o==="horizontal"&&(f?C():N());break;case"ArrowUp":o==="vertical"&&C();break}const k=x%v;(I=g[k].ref.current)==null||I.focus()});return i.jsx(o7,{scope:n,disabled:r,direction:s,orientation:o,children:i.jsx(x0.Slot,{scope:n,children:i.jsx(we.div,{...a,"data-orientation":o,ref:c,onKeyDown:r?void 0:m})})})}),af="AccordionItem",[a7,w0]=lp(af),OP=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...s}=e,o=cp(af,n),a=n7(af,n),l=y0(n),c=nn(),u=r&&a.value.includes(r)||!1,d=o.disabled||e.disabled;return i.jsx(a7,{scope:n,open:u,disabled:d,triggerId:c,children:i.jsx(JW,{"data-orientation":o.orientation,"data-state":UP(u),...l,...s,ref:t,disabled:d,open:u,onOpenChange:f=>{f?a.onItemOpen(r):a.onItemClose(r)}})})});OP.displayName=af;var DP="AccordionHeader",MP=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=cp(as,n),o=w0(DP,n);return i.jsx(we.h3,{"data-orientation":s.orientation,"data-state":UP(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:t})});MP.displayName=DP;var Vv="AccordionTrigger",LP=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=cp(as,n),o=w0(Vv,n),a=r7(Vv,n),l=y0(n);return i.jsx(x0.ItemSlot,{scope:n,children:i.jsx(QW,{"aria-disabled":o.open&&!a.collapsible||void 0,"data-orientation":s.orientation,id:o.triggerId,...l,...r,ref:t})})});LP.displayName=Vv;var $P="AccordionContent",FP=ie.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=cp(as,n),o=w0($P,n),a=y0(n);return i.jsx(XW,{role:"region","aria-labelledby":o.triggerId,"data-orientation":s.orientation,...a,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});FP.displayName=$P;function UP(e){return e?"open":"closed"}var l7=PP,c7=OP,u7=MP,VP=LP,BP=FP;const d7=l7,zP=h.forwardRef(({className:e,...t},n)=>i.jsx(c7,{ref:n,className:ve("border-b",e),...t}));zP.displayName="AccordionItem";const qP=h.forwardRef(({className:e,children:t,...n},r)=>i.jsx(u7,{className:"flex",children:i.jsxs(VP,{ref:r,className:ve("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx($s,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));qP.displayName=VP.displayName;const WP=h.forwardRef(({className:e,children:t,...n},r)=>i.jsx(BP,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:ve("pb-4 pt-0",e),children:t})}));WP.displayName=BP.displayName;const h7=[{q:"  ",a:"         ."},{q:" ",a:"   PayPal      ."},{q:"  ",a:"      ."},{q:"  ",a:"         ."}];function f7(){const{user:e,isStudent:t,signOut:n}=wn(),[r,s]=h.useState(null),[o,a]=h.useState(""),[l,c]=h.useState(""),[u,d]=h.useState(!1),[f,m]=h.useState(""),[p,y]=h.useState(!1),[g,w]=h.useState([]),[v,x]=h.useState([]),[b,_]=h.useState(""),[N,C]=h.useState(""),[k,I]=h.useState({email:"",phone:"",whatsapp:""});h.useEffect(()=>{const{data:{subscription:U}}=S.auth.onAuthStateChange(P=>{P==="PASSWORD_RECOVERY"&&y(!0)});return()=>U.unsubscribe()},[]),h.useEffect(()=>{e&&S.from("profiles").select("*").eq("user_id",e.id).single().then(({data:U})=>{s(U),a((U==null?void 0:U.full_name)??""),c((U==null?void 0:U.phone)??""),_((U==null?void 0:U.curriculum_id)??""),C((U==null?void 0:U.grade_level_id)??"")})},[e]),h.useEffect(()=>{t&&S.from("curricula").select("*").then(({data:U})=>w(U??[]))},[t]),h.useEffect(()=>{S.from("site_settings").select("value").eq("key","contact_info").single().then(({data:U})=>{if(U&&typeof U.value=="object"&&U.value!==null){const P=U.value;I({email:P.email||"",phone:P.phone||"",whatsapp:P.whatsapp||""})}})},[]),h.useEffect(()=>{b?S.from("grade_levels").select("*").eq("curriculum_id",b).then(({data:U})=>x(U??[])):x([])},[b]);const $=async()=>{if(!e)return;d(!0);const U={full_name:o,phone:l};t&&(U.curriculum_id=b||null,U.grade_level_id=N||null);const{error:P}=await S.from("profiles").update(U).eq("user_id",e.id);P?Q.error(" "):Q.success(" "),d(!1)};return e?i.jsx(Dn,{children:i.jsxs("div",{className:"px-4 py-6 max-w-lg mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:" "}),p&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-primary space-y-4 mb-4",children:[i.jsx("h2",{className:"font-bold",children:"   "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:"  "}),i.jsx(he,{type:"password",value:f,onChange:U=>m(U.target.value),placeholder:"   ",dir:"ltr"})]}),i.jsx(te,{variant:"hero",className:"w-full",disabled:f.length<6,onClick:async()=>{const{error:U}=await S.auth.updateUser({password:f});U?Q.error("     "):(Q.success("    "),y(!1),m(""))},children:"  "})]}),i.jsxs(Tl,{defaultValue:"personal",className:"w-full",dir:"rtl",children:[i.jsxs(Hl,{className:"w-full flex flex-col h-auto gap-1 mb-4 p-2",children:[i.jsxs(Ut,{value:"personal",className:"w-full justify-start gap-2 px-3 py-2.5",children:[i.jsx(er,{className:"h-4 w-4"}),i.jsx("span",{children:" "})]}),t&&i.jsxs(Ut,{value:"study",className:"w-full justify-start gap-2 px-3 py-2.5",children:[i.jsx(Mg,{className:"h-4 w-4"}),i.jsx("span",{children:" "})]}),i.jsxs(Ut,{value:"faq",className:"w-full justify-start gap-2 px-3 py-2.5",children:[i.jsx(yM,{className:"h-4 w-4"}),i.jsx("span",{children:" "})]}),i.jsxs(Ut,{value:"contact",className:"w-full justify-start gap-2 px-3 py-2.5",children:[i.jsx(_l,{className:"h-4 w-4"}),i.jsx("span",{children:" "})]})]}),i.jsx(it,{value:"personal",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:" "}),i.jsx(he,{value:o,onChange:U=>a(U.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:" "}),i.jsx(he,{value:l,onChange:U=>c(U.target.value),dir:"ltr"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:" "}),i.jsx(he,{value:e.email??"",disabled:!0,dir:"ltr"})]}),i.jsx(te,{onClick:$,disabled:u,variant:"hero",className:"w-full",children:u?" ...":" "}),i.jsx(te,{type:"button",variant:"outline",className:"w-full",onClick:async()=>{if(!(e!=null&&e.email))return;const{error:U}=await S.auth.resetPasswordForEmail(e.email,{redirectTo:window.location.origin+"/profile"});U?Q.error("   "):Q.success("        ")},children:"  "})]})}),t&&i.jsx(it,{value:"study",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsx("h2",{className:"font-bold",children:" "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:" "}),i.jsxs(gt,{value:b,onValueChange:U=>{_(U),C("")},children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:g.map(U=>i.jsx(Le,{value:U.id,children:U.name},U.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:" "}),i.jsxs(gt,{value:N,onValueChange:C,disabled:!b,children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:v.map(U=>i.jsx(Le,{value:U.id,children:U.name},U.id))})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"          "}),i.jsx(te,{onClick:$,disabled:u,variant:"hero",className:"w-full",children:u?" ...":" "})]})}),i.jsx(it,{value:"faq",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[i.jsx("h2",{className:"font-bold mb-3",children:" "}),i.jsx(d7,{type:"single",collapsible:!0,children:h7.map((U,P)=>i.jsxs(zP,{value:`faq-${P}`,children:[i.jsx(qP,{className:"text-sm text-right",children:U.q}),i.jsx(WP,{className:"text-sm text-muted-foreground",children:U.a})]},P))})]})}),i.jsx(it,{value:"contact",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsx("h2",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"     :"}),i.jsxs("div",{className:"space-y-3",children:[k.email&&i.jsxs("a",{href:`mailto:${k.email}`,className:"flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:" "}),i.jsx("p",{className:"text-xs text-muted-foreground",dir:"ltr",children:k.email})]})]}),k.phone&&i.jsxs("a",{href:`tel:${k.phone}`,className:"flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground",dir:"ltr",children:k.phone})]})]}),k.whatsapp&&i.jsxs("a",{href:`https://wa.me/${k.whatsapp.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground",dir:"ltr",children:k.whatsapp})]})]}),!k.email&&!k.phone&&!k.whatsapp&&i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"     "})]})]})})]}),i.jsxs("button",{type:"button",onClick:()=>{S.auth.signOut({scope:"local"}).then(()=>{window.location.href="/"}).catch(()=>{window.location.href="/"})},className:"w-full mt-6 bg-destructive text-destructive-foreground rounded-lg py-3 font-medium flex items-center justify-center gap-2",children:[i.jsx(sk,{className:"h-4 w-4"})," "]})]})}):null}function p7(){const{user:e}=wn(),{format:t}=ei(),[n,r]=h.useState([]),s=()=>{e&&S.from("favorites").select("*, lessons(*)").eq("user_id",e.id).then(({data:a})=>r(a??[]))};h.useEffect(()=>{if(s(),!e)return;const a=S.channel("favorites-realtime").on("postgres_changes",{event:"*",schema:"public",table:"favorites",filter:`user_id=eq.${e.id}`},()=>s()).subscribe();return()=>{S.removeChannel(a)}},[e]);const o=async a=>{await S.from("favorites").delete().eq("id",a),r(l=>l.filter(c=>c.id!==a))};return i.jsx(Dn,{children:i.jsxs("div",{className:"px-4 py-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),n.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-12",children:"   "}):i.jsx("div",{className:"space-y-3",children:n.map(a=>{var l,c;return i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border flex items-center justify-between",children:[i.jsxs(Ft,{to:`/lesson/${a.lesson_id}`,className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:(l=a.lessons)==null?void 0:l.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:t((c=a.lessons)==null?void 0:c.price)})]}),i.jsx("button",{onClick:()=>o(a.id),children:i.jsx(Zx,{className:"h-5 w-5 text-destructive fill-current"})})]},a.id)})})]})})}async function dh(e,t,n,r,s){var f,m;if(t<new Date)return"     ";const o=new Date(t.getTime()+n*6e4),{data:a}=await S.from("bookings").select("id, scheduled_at, lessons(duration_minutes, title)").eq("teacher_id",e).in("status",["scheduled","accepted"]).not("scheduled_at","is",null),{data:l}=await S.from("lessons").select("id, duration_minutes, title").eq("teacher_id",e).eq("lesson_type","group").eq("is_active",!0);let c=[];if(l&&l.length>0){const p=l.map(g=>g.id),{data:y}=await S.from("group_session_schedules").select("id, lesson_id, scheduled_at, session_number, title").in("lesson_id",p).in("status",["pending","active"]).not("scheduled_at","is",null);c=y??[]}const u=[];for(const p of a??[]){if(r&&p.id===r)continue;const y=new Date(p.scheduled_at),g=((f=p.lessons)==null?void 0:f.duration_minutes)||60,w=new Date(y.getTime()+g*6e4);u.push({start:y,end:w,label:((m=p.lessons)==null?void 0:m.title)||" "})}const d=new Map((l==null?void 0:l.map(p=>[p.id,p]))??[]);for(const p of c){if(s&&p.id===s)continue;const y=new Date(p.scheduled_at),g=d.get(p.lesson_id),w=(g==null?void 0:g.duration_minutes)||60,v=new Date(y.getTime()+w*6e4);u.push({start:y,end:v,label:p.title||(g==null?void 0:g.title)||" "})}for(const p of u)if(t<p.end&&o>p.start){const y=p.start.toLocaleString("ar");return`   "${p.label}" (${y})`}return null}var KP="AlertDialog",[m7,qH]=yn(KP,[V2]),ti=V2(),HP=e=>{const{__scopeAlertDialog:t,...n}=e,r=ti(t);return i.jsx(l0,{...r,...n,modal:!0})};HP.displayName=KP;var g7="AlertDialogTrigger",GP=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ti(n);return i.jsx(rP,{...s,...r,ref:t})});GP.displayName=g7;var v7="AlertDialogPortal",YP=e=>{const{__scopeAlertDialog:t,...n}=e,r=ti(t);return i.jsx(c0,{...r,...n})};YP.displayName=v7;var x7="AlertDialogOverlay",JP=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ti(n);return i.jsx(sp,{...s,...r,ref:t})});JP.displayName=x7;var ol="AlertDialogContent",[y7,w7]=m7(ol),b7=NN("AlertDialogContent"),QP=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=ti(n),a=h.useRef(null),l=He(t,a),c=h.useRef(null);return i.jsx(lW,{contentName:ol,titleName:XP,docsSlug:"alert-dialog",children:i.jsx(y7,{scope:n,cancelRef:c,children:i.jsxs(ip,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:de(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(b7,{children:r}),i.jsx(j7,{contentRef:a})]})})})});QP.displayName=ol;var XP="AlertDialogTitle",ZP=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ti(n);return i.jsx(u0,{...s,...r,ref:t})});ZP.displayName=XP;var eR="AlertDialogDescription",tR=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ti(n);return i.jsx(d0,{...s,...r,ref:t})});tR.displayName=eR;var _7="AlertDialogAction",nR=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ti(n);return i.jsx(h0,{...s,...r,ref:t})});nR.displayName=_7;var rR="AlertDialogCancel",sR=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=w7(rR,n),o=ti(n),a=He(t,s);return i.jsx(h0,{...o,...r,ref:a})});sR.displayName=rR;var j7=({contentRef:e})=>{const t=`\`${ol}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ol}\` by passing a \`${eR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ol}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},S7=HP,N7=GP,k7=YP,iR=JP,oR=QP,aR=nR,lR=sR,cR=ZP,uR=tR;const Hj=S7,Gj=N7,C7=k7,dR=h.forwardRef(({className:e,...t},n)=>i.jsx(iR,{className:ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));dR.displayName=iR.displayName;const Bv=h.forwardRef(({className:e,...t},n)=>i.jsxs(C7,{children:[i.jsx(dR,{}),i.jsx(oR,{ref:n,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Bv.displayName=oR.displayName;const zv=({className:e,...t})=>i.jsx("div",{className:ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});zv.displayName="AlertDialogHeader";const qv=({className:e,...t})=>i.jsx("div",{className:ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qv.displayName="AlertDialogFooter";const Wv=h.forwardRef(({className:e,...t},n)=>i.jsx(cR,{ref:n,className:ve("text-lg font-semibold",e),...t}));Wv.displayName=cR.displayName;const Kv=h.forwardRef(({className:e,...t},n)=>i.jsx(uR,{ref:n,className:ve("text-sm text-muted-foreground",e),...t}));Kv.displayName=uR.displayName;const Hv=h.forwardRef(({className:e,...t},n)=>i.jsx(aR,{ref:n,className:ve(by(),e),...t}));Hv.displayName=aR.displayName;const Gv=h.forwardRef(({className:e,...t},n)=>i.jsx(lR,{ref:n,className:ve(by({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Gv.displayName=lR.displayName;const Yj={title:"",description:"",curriculum_id:"",grade_level_id:"",subject_id:"",duration_minutes:60,price:0,min_age:0,max_age:0,notes:"",expected_students:3,total_sessions:5,course_start_date:"",course_topic_type:"",session_dates:[]};function E7({userId:e,onCoursesChange:t}){const{format:n}=ei(),[r,s]=h.useState([]),[o,a]=h.useState({}),[l,c]=h.useState([]),[u,d]=h.useState([]),[f,m]=h.useState([]),[p,y]=h.useState({...Yj}),[g,w]=h.useState(!1),[v,x]=h.useState(null),[b,_]=h.useState(!1),[N,C]=h.useState([]),[k,I]=h.useState(null),[$,O]=h.useState([]),[U,P]=h.useState(0),[K,D]=h.useState(null),[F,W]=h.useState(null),[R,M]=h.useState(null),[L,X]=h.useState(""),[le,E]=h.useState("");h.useEffect(()=>{V(),S.from("curricula").select("*").then(({data:z})=>c(z??[]))},[e]),h.useEffect(()=>{p.curriculum_id&&S.from("grade_levels").select("*").eq("curriculum_id",p.curriculum_id).then(({data:z})=>d(z??[]))},[p.curriculum_id]),h.useEffect(()=>{p.grade_level_id&&S.from("subjects").select("*").eq("grade_level_id",p.grade_level_id).then(({data:z})=>m(z??[]))},[p.grade_level_id]);const V=async()=>{const{data:z}=await S.from("lessons").select("*").eq("teacher_id",e).eq("lesson_type","group").order("created_at",{ascending:!1});if(s(z??[]),z&&z.length>0){const pe={};await Promise.all(z.map(async Fe=>{const{count:be}=await S.from("bookings").select("id",{count:"exact",head:!0}).eq("lesson_id",Fe.id).in("status",["pending","accepted","scheduled"]);pe[Fe.id]=be??0})),a(pe)}},q=async()=>{if(p.total_sessions<5){Q.error("     5  ");return}const z=p.session_dates.filter(Je=>Je.trim()!=="");if(z.length<5){Q.error("  5      ");return}const Fe=z.map(Je=>new Date(Je)).sort((Je,nt)=>Je.getTime()-nt.getTime())[0].toISOString();for(let Je=0;Je<z.length;Je++){const nt=new Date(z[Je]),Dt=await dh(e,nt,p.duration_minutes);if(Dt){Q.error(` ${Je+1}: ${Dt}`);return}}const{data:be,error:Ze}=await S.from("lessons").insert({teacher_id:e,title:p.title,description:p.description,lesson_type:"group",curriculum_id:p.curriculum_id||null,grade_level_id:p.grade_level_id||null,subject_id:p.subject_id||null,duration_minutes:p.duration_minutes,price:p.price,min_age:p.min_age||null,max_age:p.max_age||null,notes:p.notes,expected_students:p.expected_students,total_sessions:p.total_sessions,course_start_date:Fe,course_topic_type:p.course_topic_type}).select().single();if(Ze||!be){Q.error("   ");return}const ut=p.session_dates.map((Je,nt)=>({lesson_id:be.id,session_number:nt+1,scheduled_at:Je?new Date(Je).toISOString():null}));await S.from("group_session_schedules").insert(ut),Q.success("   "),w(!1),y({...Yj}),V(),t==null||t()},J=async z=>{await S.from("group_session_schedules").delete().eq("lesson_id",z);const{error:pe}=await S.from("lessons").delete().eq("id",z);pe?Q.error("    -      "):(Q.success("  "),V(),t==null||t())},oe=async z=>{x({...z,curriculum_id:z.curriculum_id||"",grade_level_id:z.grade_level_id||"",subject_id:z.subject_id||"",course_start_date:z.course_start_date?new Date(z.course_start_date).toISOString().slice(0,16):""}),z.curriculum_id&&S.from("grade_levels").select("*").eq("curriculum_id",z.curriculum_id).then(({data:ut})=>d(ut??[])),z.grade_level_id&&S.from("subjects").select("*").eq("grade_level_id",z.grade_level_id).then(({data:ut})=>m(ut??[]));const{data:pe}=await S.from("group_session_schedules").select("*").eq("lesson_id",z.id).order("session_number"),Fe=z.total_sessions||5,be=pe??[],Ze=[];for(let ut=0;ut<Fe;ut++){const Je=be.find(nt=>nt.session_number===ut+1);Ze.push({id:Je==null?void 0:Je.id,session_number:ut+1,scheduled_at:Je!=null&&Je.scheduled_at?new Date(Je.scheduled_at).toISOString().slice(0,16):""})}C(Ze),_(!0)},A=async()=>{if(!v)return;for(const be of N)if(be.scheduled_at){const Ze=new Date(be.scheduled_at),ut=await dh(e,Ze,v.duration_minutes||60,void 0,be.id);if(ut){Q.error(` ${be.session_number}: ${ut}`);return}}const z=N.filter(be=>be.scheduled_at).map(be=>new Date(be.scheduled_at)),pe=z.length>0?z.sort((be,Ze)=>be.getTime()-Ze.getTime())[0].toISOString():v.course_start_date?new Date(v.course_start_date).toISOString():null,{error:Fe}=await S.from("lessons").update({title:v.title,description:v.description,curriculum_id:v.curriculum_id||null,grade_level_id:v.grade_level_id||null,subject_id:v.subject_id||null,duration_minutes:v.duration_minutes,price:v.price,min_age:v.min_age||null,max_age:v.max_age||null,notes:v.notes,is_active:v.is_active,expected_students:v.expected_students,total_sessions:v.total_sessions,course_start_date:pe,course_topic_type:v.course_topic_type}).eq("id",v.id);if(Fe){Q.error("   ");return}for(const be of N)be.id?await S.from("group_session_schedules").update({scheduled_at:be.scheduled_at?new Date(be.scheduled_at).toISOString():null}).eq("id",be.id):be.scheduled_at&&await S.from("group_session_schedules").insert({lesson_id:v.id,session_number:be.session_number,scheduled_at:new Date(be.scheduled_at).toISOString()});Q.success("   "),_(!1),x(null),V(),t==null||t()},Y=async z=>{I(z);const{data:pe}=await S.from("group_session_schedules").select("*").eq("lesson_id",z.id).order("session_number");O(pe??[]);const{count:Fe}=await S.from("bookings").select("id",{count:"exact",head:!0}).eq("lesson_id",z.id).in("status",["pending","accepted","scheduled"]);P(Fe??0)},ee=async z=>{W(z.id);try{const{data:pe,error:Fe}=await S.functions.invoke("create-zoom-meeting",{body:{topic:`${k==null?void 0:k.title} -  ${z.session_number}`,duration:(k==null?void 0:k.duration_minutes)||60,start_time:z.scheduled_at||new Date().toISOString()}});if(Fe||!(pe!=null&&pe.join_url)){Q.error("    -    ");return}const be={status:"active",zoom_meeting_id:String(pe.id),zoom_join_url:pe.join_url,zoom_start_url:pe.start_url};await S.from("group_session_schedules").update(be).eq("id",z.id),Q.success("     "),Y(k)}catch{Q.error("   ")}finally{W(null)}},H=async z=>{await S.from("group_session_schedules").update({status:"completed",zoom_join_url:null,zoom_start_url:null,zoom_meeting_id:null}).eq("id",z.id),Q.success("  ");const{data:pe}=await S.from("group_session_schedules").select("status").eq("lesson_id",k.id),Fe=pe&&pe.length>0&&pe.every(be=>be.status==="completed");if(Fe){await S.from("lessons").update({is_active:!1}).eq("id",k.id);const{data:be}=await S.from("bookings").select("id").eq("lesson_id",k.id).in("status",["pending","accepted","scheduled"]);if(be&&be.length>0)for(const Ze of be)await S.from("bookings").update({status:"completed",zoom_join_url:null,zoom_start_url:null,zoom_meeting_id:null}).eq("id",Ze.id);Q.success("   !      "),I({...k,is_active:!1})}Y(Fe?{...k,is_active:!1}:k)},ge=async z=>{await S.from("group_session_schedules").delete().eq("id",z.id),Q.success("  "),Y(k)},ke=async z=>{const pe=document.createElement("input");pe.type="file",pe.accept="video/*",pe.onchange=async Fe=>{var Ze;const be=(Ze=Fe.target.files)==null?void 0:Ze[0];if(be){if(be.size>500*1024*1024){Q.error("    (  500 )");return}D(z.id);try{const ut=be.name.split(".").pop(),Je=`${e}/${k.id}_session_${z.session_number}.${ut}`,{error:nt}=await S.storage.from("recordings").upload(Je,be,{upsert:!0});if(nt)throw nt;const{data:Dt}=S.storage.from("recordings").getPublicUrl(Je);await S.from("group_session_schedules").update({recording_url:Dt.publicUrl}).eq("id",z.id),Q.success("   "),Y(k)}catch{Q.error("   ")}finally{D(null)}}},pe.click()},ye=async z=>{if(L){const Fe=new Date(L),be=(k==null?void 0:k.duration_minutes)||60,Ze=await dh(e,Fe,be,void 0,z.id);if(Ze){Q.error(Ze);return}}const pe={scheduled_at:L?new Date(L).toISOString():null,title:le.trim()||null};await S.from("group_session_schedules").update(pe).eq("id",z.id),Q.success("  "),M(null),X(""),E(""),Y(k)},Ae=z=>({pending:" ",active:"",completed:""})[z]??z,Ge=z=>({pending:"bg-muted text-muted-foreground",active:"bg-primary/10 text-primary",completed:"bg-green-100 text-green-700"})[z]??"",bt=$.filter(z=>z.status==="completed").length;$.filter(z=>z.status==="active").length;const Ke=$.filter(z=>z.scheduled_at).length;if(k)return i.jsxs("div",{dir:"rtl",children:[i.jsxs("button",{onClick:()=>{I(null),V()},className:"text-sm text-primary flex items-center gap-1 mb-4",children:[i.jsx(bo,{className:"h-4 w-4"})," "]}),i.jsx("h2",{className:"text-lg font-bold mb-1",children:k.title}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[i.jsxs("div",{className:"bg-primary/5 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-primary",children:U}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-green-700",children:bt}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]}),i.jsxs("div",{className:"bg-muted rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold",children:Ke}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]})]}),i.jsx("div",{className:"space-y-3",children:$.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"     "}):$.map(z=>i.jsx("div",{className:"bg-card rounded-xl p-4 border border-border",children:R===z.id?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"  ()"}),i.jsx(he,{placeholder:` ${z.session_number}`,value:le,onChange:pe=>E(pe.target.value),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{type:"datetime-local",value:L,onChange:pe=>X(pe.target.value),className:"mt-1"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{size:"sm",onClick:()=>ye(z),className:"flex-1",children:""}),i.jsx(te,{size:"sm",variant:"outline",onClick:()=>{M(null),E("")},className:"flex-1",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-sm",children:z.title||` ${z.session_number}`}),z.scheduled_at?i.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(z.scheduled_at).toLocaleString("ar")}):i.jsx("p",{className:"text-xs text-orange-500",children:"   "})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${Ge(z.status)}`,children:Ae(z.status)}),z.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx(te,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>{M(z.id),X(z.scheduled_at?new Date(z.scheduled_at).toISOString().slice(0,16):""),E(z.title||"")},children:i.jsx(Ug,{className:"h-3.5 w-3.5"})}),i.jsxs(Hj,{children:[i.jsx(Gj,{asChild:!0,children:i.jsx(te,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive hover:text-destructive",children:i.jsx(Ds,{className:"h-3.5 w-3.5"})})}),i.jsxs(Bv,{children:[i.jsxs(zv,{children:[i.jsx(Wv,{children:" "}),i.jsxs(Kv,{children:["      ",z.session_number,""]})]}),i.jsxs(qv,{children:[i.jsx(Gv,{children:""}),i.jsx(Hv,{onClick:()=>ge(z),children:""})]})]})]})]})]})]}),z.status==="pending"&&z.scheduled_at&&i.jsx(te,{size:"sm",variant:"hero",className:"w-full mb-2",disabled:F===z.id,onClick:()=>ee(z),children:F===z.id?i.jsxs(i.Fragment,{children:[i.jsx(Lg,{className:"h-4 w-4 ml-2 animate-spin"}),"  ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Og,{className:"h-4 w-4 ml-2"}),"  (  )"]})}),z.status==="pending"&&!z.scheduled_at&&i.jsxs(te,{size:"sm",variant:"outline",className:"w-full",onClick:()=>{M(z.id),X("")},children:[i.jsx(Di,{className:"h-4 w-4 ml-2"}),"  "]}),z.status==="active"&&i.jsxs(i.Fragment,{children:[z.zoom_start_url&&i.jsx("a",{href:z.zoom_start_url,target:"_blank",rel:"noopener noreferrer",children:i.jsxs(te,{size:"sm",variant:"hero",className:"w-full mb-2",children:[i.jsx(Ss,{className:"h-4 w-4 ml-2"}),"  ()"]})}),z.zoom_join_url&&i.jsxs("div",{className:"bg-muted rounded-lg p-2 mb-2",children:[i.jsx("p",{className:"text-[10px] text-muted-foreground mb-1",children:"  :"}),i.jsx("p",{className:"text-xs break-all font-mono",children:z.zoom_join_url})]}),i.jsxs(te,{size:"sm",variant:"outline",className:"w-full mb-2 text-green-700 border-green-300 hover:bg-green-50",onClick:()=>H(z),children:[i.jsx(Hn,{className:"h-4 w-4 ml-2"})," "]})]}),z.status==="completed"&&i.jsx("div",{className:"space-y-2",children:z.recording_url?i.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700 bg-green-50 rounded-lg p-2",children:[i.jsx(Hn,{className:"h-4 w-4"}),i.jsx("span",{children:"  "})]}):i.jsx(te,{size:"sm",variant:"outline",className:"w-full text-primary border-primary/30 hover:bg-primary/10",onClick:()=>ke(z),disabled:K===z.id,children:K===z.id?i.jsxs(i.Fragment,{children:[i.jsx(Lg,{className:"h-4 w-4 ml-2 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ok,{className:"h-4 w-4 ml-2"}),"  "]})})})]})},z.id))})]});function pt({form:z,setForm:pe,isEdit:Fe,curricula:be,gradeLevels:Ze,setGradeLevels:ut,subjects:Je,setSubjects:nt,editSessionDates:Dt,setEditSessionDates:Rn}){return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsx(he,{value:z.title,onChange:Ie=>pe({...z,title:Ie.target.value})})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsx(fr,{value:z.description||"",onChange:Ie=>pe({...z,description:Ie.target.value})})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:z.curriculum_id,onValueChange:Ie=>{pe({...z,curriculum_id:Ie,grade_level_id:"",subject_id:""}),S.from("grade_levels").select("*").eq("curriculum_id",Ie).then(({data:_t})=>ut(_t??[]))},children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:be.map(Ie=>i.jsx(Le,{value:Ie.id,children:Ie.name},Ie.id))})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:z.grade_level_id,onValueChange:Ie=>{pe({...z,grade_level_id:Ie,subject_id:""}),S.from("subjects").select("*").eq("grade_level_id",Ie).then(({data:_t})=>nt(_t??[]))},children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:Ze.map(Ie=>i.jsx(Le,{value:Ie.id,children:Ie.name},Ie.id))})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:z.subject_id,onValueChange:Ie=>pe({...z,subject_id:Ie}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:Je.map(Ie=>i.jsx(Le,{value:Ie.id,children:Ie.name},Ie.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(re,{children:" ()"}),i.jsx(he,{type:"number",value:z.duration_minutes,onChange:Ie=>pe({...z,duration_minutes:parseInt(Ie.target.value)||60})})]}),i.jsxs("div",{children:[i.jsx(re,{children:" ($)"}),i.jsx(he,{type:"number",value:z.price,onChange:Ie=>pe({...z,price:parseFloat(Ie.target.value)||0})})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsx(fr,{value:z.notes||"",onChange:Ie=>pe({...z,notes:Ie.target.value})})]}),i.jsxs("div",{className:"border border-primary/20 rounded-lg p-3 space-y-3 bg-primary/5",children:[i.jsx("h4",{className:"font-semibold text-sm text-primary",children:"  "}),i.jsxs("div",{children:[i.jsx(re,{children:"  "}),i.jsxs(gt,{value:String(z.expected_students||3),onValueChange:Ie=>pe({...z,expected_students:parseInt(Ie)}),children:[i.jsx(ht,{children:i.jsx(vt,{})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"3",children:"3 "}),i.jsx(Le,{value:"7",children:"7 "})]})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsxs(gt,{value:z.course_topic_type||"",onValueChange:Ie=>pe({...z,course_topic_type:Ie}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:"  "})}),i.jsxs(ft,{children:[i.jsx(Le,{value:" ",children:"   "}),i.jsx(Le,{value:" ",children:" "})]})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:"   (5  )"}),i.jsx(he,{type:"number",min:5,value:z.total_sessions||5,onChange:Ie=>{const _t=Math.max(5,parseInt(Ie.target.value)||5);if(Fe)pe({...z,total_sessions:_t}),Rn==null||Rn(cn=>{const zn=[...cn];for(;zn.length<_t;)zn.push({session_number:zn.length+1,scheduled_at:""});return zn.slice(0,_t)});else{const cn=[...z.session_dates||[]];for(;cn.length<_t;)cn.push("");pe({...z,total_sessions:_t,session_dates:cn.slice(0,_t)})}}})]}),Fe&&z&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(re,{children:""}),i.jsx("input",{type:"checkbox",checked:z.is_active,onChange:Ie=>pe({...z,is_active:Ie.target.checked})})]})]})]})}return i.jsxs("div",{dir:"rtl",children:[i.jsxs(yr,{open:g,onOpenChange:w,children:[i.jsx(f0,{asChild:!0,children:i.jsxs(te,{variant:"hero",className:"mb-4 w-full",children:[i.jsx(fi,{className:"h-4 w-4 ml-2"}),"   "]})}),i.jsxs(nr,{className:"max-h-[80vh] overflow-y-auto",children:[i.jsx(Mr,{children:i.jsx(Lr,{children:"  "})}),i.jsx(pt,{form:p,setForm:y,curricula:l,gradeLevels:u,setGradeLevels:d,subjects:f,setSubjects:m}),i.jsxs("div",{className:"space-y-2 mt-2",children:[i.jsx(re,{children:"  ( 5   )"}),i.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:Array.from({length:p.total_sessions}).map((z,pe)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-xs text-muted-foreground min-w-[50px]",children:[" ",pe+1]}),i.jsx(he,{type:"datetime-local",dir:"ltr",value:p.session_dates[pe]||"",onChange:Fe=>{const be=[...p.session_dates];for(;be.length<=pe;)be.push("");be[pe]=Fe.target.value,y({...p,session_dates:be})},className:"text-xs"})]},pe))}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"*        "})]}),i.jsx(te,{onClick:q,variant:"hero",className:"w-full mt-2",children:" "})]})]}),i.jsx(yr,{open:b,onOpenChange:_,children:i.jsxs(nr,{className:"max-h-[80vh] overflow-y-auto",children:[i.jsx(Mr,{children:i.jsx(Lr,{children:"  "})}),v&&i.jsxs(i.Fragment,{children:[i.jsx(pt,{form:v,setForm:x,isEdit:!0,curricula:l,gradeLevels:u,setGradeLevels:d,subjects:f,setSubjects:m,editSessionDates:N,setEditSessionDates:C}),i.jsxs("div",{className:"space-y-2 mt-2",children:[i.jsx(re,{children:" "}),i.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:N.map((z,pe)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-xs text-muted-foreground min-w-[50px]",children:[" ",z.session_number]}),i.jsx(he,{type:"datetime-local",dir:"ltr",value:z.scheduled_at,onChange:Fe=>{const be=[...N];be[pe]={...be[pe],scheduled_at:Fe.target.value},C(be)},className:"text-xs"})]},pe))})]}),i.jsx(te,{onClick:A,variant:"hero",className:"w-full mt-2",children:" "})]})]})}),i.jsx("div",{className:"space-y-3",children:r.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-12",children:"   "}):r.map(z=>i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:z.title}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[z.duration_minutes,"   ",n(z.price)]}),i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ns,{className:"h-3 w-3"}),z.expected_students," "]}),i.jsxs("span",{className:"flex items-center gap-1 text-primary font-medium",children:[i.jsx(ns,{className:"h-3 w-3"}),o[z.id]??0," "]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Di,{className:"h-3 w-3"}),z.total_sessions," "]}),z.course_start_date&&i.jsxs("span",{children:[": ",new Date(z.course_start_date).toLocaleDateString("ar")]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(te,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>oe(z),children:i.jsx(Ug,{className:"h-4 w-4"})}),i.jsxs(Hj,{children:[i.jsx(Gj,{asChild:!0,children:i.jsx(te,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive hover:text-destructive",children:i.jsx(Ds,{className:"h-4 w-4"})})}),i.jsxs(Bv,{children:[i.jsxs(zv,{children:[i.jsx(Wv,{children:" "}),i.jsxs(Kv,{children:['      "',z.title,'"     .']})]}),i.jsxs(qv,{children:[i.jsx(Gv,{children:""}),i.jsx(Hv,{onClick:()=>J(z.id),children:""})]})]})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z.is_active?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:z.is_active?"":" "})]})]}),i.jsxs(te,{size:"sm",variant:"outline",className:"w-full mt-3 text-primary border-primary/30 hover:bg-primary/10",onClick:()=>Y(z),children:[i.jsx(Di,{className:"h-4 w-4 ml-2"}),"  "]})]},z.id))})]})}function T7(){const{user:e}=wn(),{format:t,convert:n,exchangeRate:r,currency:s}=ei(),[o,a]=h.useState(""),[l,c]=h.useState(" "),[u,d]=h.useState(null),[f,m]=h.useState([]),[p,y]=h.useState([]),[g,w]=h.useState(0),[v,x]=h.useState(0),[b,_]=h.useState([]),[N,C]=h.useState(20),[k,I]=h.useState([]),[$,O]=h.useState([]),[U,P]=h.useState([]),[K,D]=h.useState([]),[F,W]=h.useState([]),[R,M]=h.useState({title:"",description:"",lesson_type:"tutoring",curriculum_id:"",grade_level_id:"",subject_id:"",skill_category_id:"",duration_minutes:60,price:0,min_age:0,max_age:0,notes:"",expected_students:3,total_sessions:5,course_start_date:"",course_topic_type:"",session_dates:[]}),[L,X]=h.useState(!1),[le,E]=h.useState(!1),[V,q]=h.useState(null),[J,oe]=h.useState(""),[A,Y]=h.useState(!1),[ee,H]=h.useState(null),[ge,ke]=h.useState(""),[ye,Ae]=h.useState(""),[Ge,bt]=h.useState([]),[Ke,pt]=h.useState(null),[z,pe]=h.useState([]),[Fe,be]=h.useState(""),Ze=h.useRef(null),[ut,Je]=h.useState(0),[nt,Dt]=h.useState("lessons"),[Rn,Ie]=h.useState(new Set(["lessons"])),[_t,cn]=h.useState(0),[zn,ae]=h.useState(0);h.useEffect(()=>{if(!e)return;S.from("profiles").select("*").eq("user_id",e.id).single().then(({data:ue})=>{d(ue),oe((ue==null?void 0:ue.bio)||"")}),rn(),Ue(),qe(),dt(),S.from("curricula").select("*").then(({data:ue})=>O(ue??[])),S.from("skills_categories").select("*").then(({data:ue})=>W(ue??[])),un(),Ne(),G();const T=S.channel("teacher-dash-realtime").on("postgres_changes",{event:"*",schema:"public",table:"bookings",filter:`teacher_id=eq.${e.id}`},()=>{Ue(),qe()}).on("postgres_changes",{event:"*",schema:"public",table:"lessons",filter:`teacher_id=eq.${e.id}`},()=>rn()).on("postgres_changes",{event:"*",schema:"public",table:"withdrawal_requests",filter:`teacher_id=eq.${e.id}`},()=>{un(),qe()}).on("postgres_changes",{event:"*",schema:"public",table:"conversations",filter:`teacher_id=eq.${e.id}`},()=>Ne()).subscribe();return()=>{S.removeChannel(T)}},[e]),h.useEffect(()=>{S.from("site_settings").select("key, value").in("key",["site_logo","site_name"]).then(({data:T})=>{T&&T.forEach(ue=>{ue.key==="site_logo"&&typeof ue.value=="string"&&ue.value&&a(ue.value),ue.key==="site_name"&&typeof ue.value=="string"&&ue.value&&c(ue.value)})})},[]);const _e=T=>{Dt(T),Ie(ue=>new Set(ue).add(T))},G=async()=>{if(!e)return;const{data:T}=await S.from("conversations").select("id").eq("teacher_id",e.id);if(!T||T.length===0){Je(0);return}const ue=T.map(Be=>Be.id),{count:Ee}=await S.from("messages").select("*",{count:"exact",head:!0}).in("conversation_id",ue).neq("sender_id",e.id).eq("is_read",!1);Je(Ee??0)};h.useEffect(()=>{if(!e)return;const T=S.channel("teacher-unread-dash").on("postgres_changes",{event:"*",schema:"public",table:"messages"},()=>G()).subscribe();return()=>{S.removeChannel(T)}},[e]);const Ne=async()=>{if(!e)return;const{data:T}=await S.from("conversations").select("*, bookings:booking_id(id, status, lessons(title))").eq("teacher_id",e.id).order("created_at",{ascending:!1}),ue=T??[],Ee=[...new Set(ue.map(Pe=>Pe.student_id))];let Be={};if(Ee.length>0){const{data:Pe}=await S.from("profiles").select("user_id, full_name").in("user_id",Ee);Pe==null||Pe.forEach(Ct=>{Be[Ct.user_id]=Ct.full_name})}const Te=ue.map(Pe=>Pe.id);let Qe={};if(Te.length>0){const{data:Pe}=await S.from("messages").select("conversation_id").in("conversation_id",Te).neq("sender_id",e.id).eq("is_read",!1);Pe==null||Pe.forEach(Ct=>{Qe[Ct.conversation_id]=(Qe[Ct.conversation_id]??0)+1})}bt(ue.map(Pe=>({...Pe,student_name:Be[Pe.student_id]||"",unread_count:Qe[Pe.id]??0})))},et=async T=>{pt(T);const{data:ue}=await S.from("messages").select("*").eq("conversation_id",T).order("created_at");if(pe(ue??[]),ue&&e){const Ee=ue.filter(Be=>Be.sender_id!==e.id&&!Be.is_read).map(Be=>Be.id);Ee.length>0&&(await S.from("messages").update({is_read:!0}).in("id",Ee),G(),bt(Be=>Be.map(Te=>Te.id===T?{...Te,unread_count:0}:Te)))}},at=async()=>{!Fe.trim()||!Ke||!e||(await S.from("messages").insert({conversation_id:Ke,sender_id:e.id,content:Fe.trim()}),be(""))};h.useEffect(()=>{if(!Ke)return;const T=S.channel(`teacher-msgs-${Ke}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${Ke}`},ue=>pe(Ee=>[...Ee,ue.new])).subscribe();return()=>{S.removeChannel(T)}},[Ke]),h.useEffect(()=>{var T;(T=Ze.current)==null||T.scrollIntoView({behavior:"smooth"})},[z]);const qe=async()=>{if(!e)return;const{data:T}=await S.from("accounting_records").select("*, bookings:booking_id(scheduled_at, lessons:lesson_id(title, lesson_type, course_start_date, total_sessions))").eq("teacher_id",e.id).order("created_at",{ascending:!1}),ue=T??[];_(ue);const Ee=ue.reduce((Qe,Pe)=>Qe+Number(Pe.teacher_share),0);w(Ee);const{data:Be}=await S.from("withdrawal_requests").select("amount").eq("teacher_id",e.id).eq("status","approved"),Te=(Be??[]).reduce((Qe,Pe)=>Qe+Number(Pe.amount),0);x(Ee-Te)},dt=async()=>{const{data:T}=await S.from("site_settings").select("value").eq("key","commission_rate").maybeSingle();T!=null&&T.value&&typeof T.value=="number"&&C(T.value)},un=async()=>{if(!e)return;const{data:T}=await S.from("withdrawal_requests").select("*").eq("teacher_id",e.id).order("created_at",{ascending:!1});I(T??[]),ae((T??[]).filter(ue=>ue.status==="pending").length)},rn=async()=>{if(!e)return;const{data:T}=await S.from("lessons").select("*").eq("teacher_id",e.id);m(T??[])},Ue=async()=>{if(!e)return;const{data:T,error:ue}=await S.from("bookings").select("*, lessons(title)").eq("teacher_id",e.id).in("status",["accepted","scheduled","completed","cancelled"]).order("created_at",{ascending:!1});if(ue){Q.error("   : "+ue.message);return}const Ee=[...new Set((T??[]).map(Pe=>Pe.student_id))];let Be={};if(Ee.length>0){const{data:Pe}=await S.from("profiles").select("user_id, full_name").in("user_id",Ee);Pe==null||Pe.forEach(Ct=>{Be[Ct.user_id]=Ct.full_name})}const Te=(T??[]).map(Pe=>({...Pe,student_name:Be[Pe.student_id]||" "}));y(Te),cn(Te.filter(Pe=>Pe.status==="accepted").length);const Qe=Te.filter(Pe=>Pe.status==="completed");w(Qe.reduce((Pe,Ct)=>Pe+Number(Ct.amount),0))};h.useEffect(()=>{R.curriculum_id&&S.from("grade_levels").select("*").eq("curriculum_id",R.curriculum_id).then(({data:T})=>P(T??[]))},[R.curriculum_id]),h.useEffect(()=>{R.grade_level_id&&S.from("subjects").select("*").eq("grade_level_id",R.grade_level_id).then(({data:T})=>D(T??[]))},[R.grade_level_id]);const kt=async()=>{if(!e)return;if(R.lesson_type==="group"){if(R.total_sessions<5){Q.error("     5  ");return}if(R.session_dates.filter(Qe=>Qe.trim()!=="").length<5){Q.error("  5      ");return}}const T=R.session_dates.filter(Te=>Te.trim()!==""),ue=T.length>0?T.map(Te=>new Date(Te)).sort((Te,Qe)=>Te.getTime()-Qe.getTime())[0].toISOString():null,{data:Ee,error:Be}=await S.from("lessons").insert({teacher_id:e.id,title:R.title,description:R.description,lesson_type:R.lesson_type,curriculum_id:R.curriculum_id||null,grade_level_id:R.grade_level_id||null,subject_id:R.subject_id||null,skill_category_id:R.skill_category_id||null,duration_minutes:R.duration_minutes,price:R.price,min_age:R.min_age||null,max_age:R.max_age||null,notes:R.notes,expected_students:R.lesson_type==="group"?R.expected_students:null,total_sessions:R.lesson_type==="group"?R.total_sessions:null,course_start_date:R.lesson_type==="group"?ue:null,course_topic_type:R.lesson_type==="group"?R.course_topic_type:null}).select().single();if(Be||!Ee)Q.error("   ");else{if(R.lesson_type==="group"){const Te=R.session_dates.map((Qe,Pe)=>({lesson_id:Ee.id,session_number:Pe+1,scheduled_at:Qe?new Date(Qe).toISOString():null}));await S.from("group_session_schedules").insert(Te)}Q.success("  "),X(!1),M({title:"",description:"",lesson_type:"tutoring",curriculum_id:"",grade_level_id:"",subject_id:"",skill_category_id:"",duration_minutes:60,price:0,min_age:0,max_age:0,notes:"",expected_students:3,total_sessions:5,course_start_date:"",course_topic_type:"",session_dates:[]}),rn()}},Oe=T=>{q({...T,curriculum_id:T.curriculum_id||"",grade_level_id:T.grade_level_id||"",subject_id:T.subject_id||"",skill_category_id:T.skill_category_id||""}),T.curriculum_id&&S.from("grade_levels").select("*").eq("curriculum_id",T.curriculum_id).then(({data:ue})=>P(ue??[])),T.grade_level_id&&S.from("subjects").select("*").eq("grade_level_id",T.grade_level_id).then(({data:ue})=>D(ue??[])),E(!0)},tt=async()=>{if(!V)return;const{error:T}=await S.from("lessons").update({title:V.title,description:V.description,lesson_type:V.lesson_type,curriculum_id:V.curriculum_id||null,grade_level_id:V.grade_level_id||null,subject_id:V.subject_id||null,skill_category_id:V.skill_category_id||null,duration_minutes:V.duration_minutes,price:V.price,min_age:V.min_age||null,max_age:V.max_age||null,notes:V.notes,is_active:V.is_active,expected_students:V.lesson_type==="group"&&V.expected_students||null,total_sessions:V.lesson_type==="group"&&V.total_sessions||null,course_start_date:V.lesson_type==="group"&&V.course_start_date?new Date(V.course_start_date).toISOString():null,course_topic_type:V.lesson_type==="group"&&V.course_topic_type||null}).eq("id",V.id);T?Q.error("   "):(Q.success("  "),E(!1),q(null),rn())},ot=async T=>{H(T)},bn=async()=>{var _r,ls;if(!ee||!ge)return;const T=p.find(ir=>ir.id===ee);if(!T)return;const ue=new Date(ge),Ee=((_r=T.lessons)==null?void 0:_r.duration_minutes)||60,Be=await dh(T.teacher_id,ue,Ee,ee);if(Be){Q.error(Be);return}const{data:Te,error:Qe}=await S.functions.invoke("create-zoom-meeting",{body:{topic:((ls=T.lessons)==null?void 0:ls.title)??"",duration:Ee,start_time:ue.toISOString()}}),Pe={status:"scheduled",scheduled_at:ue.toISOString()};Te&&!Qe&&(Pe.zoom_meeting_id=String(Te.id),Pe.zoom_join_url=Te.join_url,Pe.zoom_start_url=Te.start_url);const{error:Ct}=await S.from("bookings").update(Pe).eq("id",ee);Ct?Q.error("   "):(Q.success("     "),H(null),ke(""),Ue())},Yt=async()=>{if(!e||!ye)return;const T=parseFloat(ye),ue=n(v);if(T>ue){Q.error("      ");return}const Ee=r>0?T/r:T,{error:Be}=await S.from("withdrawal_requests").insert({teacher_id:e.id,amount:Math.round(Ee*100)/100});if(Be)Q.error("");else{Q.success("   "),Ae("");const{data:Te}=await S.from("withdrawal_requests").select("*").eq("teacher_id",e.id).order("created_at",{ascending:!1});I(Te??[]),ae((Te??[]).filter(Qe=>Qe.status==="pending").length),qe()}},sr=({count:T})=>T<=0?null:i.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:T>99?"99+":T});return i.jsx(Dn,{children:i.jsxs("div",{className:"px-4 py-6 dashboard-large-text",children:[i.jsxs("div",{className:"bg-card rounded-xl p-3 border border-border flex items-center justify-between mb-4",children:[i.jsx(Ft,{to:"/",className:"flex items-center gap-2",children:o?i.jsx("img",{src:o,alt:" ",className:"h-8 object-contain"}):i.jsx("span",{className:"text-xl font-bold text-primary",children:l})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ft,{to:"/",children:i.jsx(te,{variant:"ghost",size:"icon","aria-label":" ",children:i.jsx(Mh,{className:"h-5 w-5"})})}),i.jsx(Ft,{to:"/profile",children:i.jsx(te,{variant:"ghost",size:"icon","aria-label":" ",children:i.jsx(er,{className:"h-5 w-5"})})})]})]}),i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"  "}),i.jsxs(Tl,{defaultValue:"lessons",value:nt,onValueChange:_e,children:[i.jsxs(Hl,{className:"w-full flex-wrap h-auto",children:[i.jsx(Ut,{value:"profile",className:"flex-1",children:""}),i.jsx(Ut,{value:"lessons",className:"flex-1",children:""}),i.jsx(Ut,{value:"courses",className:"flex-1",children:""}),i.jsxs(Ut,{value:"bookings",className:"flex-1 relative overflow-visible",children:["",!Rn.has("bookings")&&_t>0&&i.jsx(sr,{count:_t})]}),i.jsxs(Ut,{value:"messages",className:"flex-1 relative overflow-visible",children:["",!Rn.has("messages")&&ut>0&&i.jsx(sr,{count:ut})]}),i.jsx(Ut,{value:"earnings",className:"flex-1",children:""})]}),i.jsxs(it,{value:"profile",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:":"})," ",u==null?void 0:u.full_name]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:":"})," ",(u==null?void 0:u.phone)??" "]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:":"})," ",e==null?void 0:e.email]})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx(re,{className:"font-semibold",children:"  ()"}),i.jsx(fr,{placeholder:"     ...",value:J,onChange:T=>oe(T.target.value),rows:4}),i.jsx(te,{variant:"hero",className:"w-full",disabled:A,onClick:async()=>{if(!e)return;Y(!0);const{error:T}=await S.from("profiles").update({bio:J}).eq("user_id",e.id);T?Q.error("   "):Q.success("   "),Y(!1)},children:A?" ...":" "})]})]}),i.jsxs(it,{value:"lessons",className:"mt-4",children:[i.jsxs(yr,{open:L,onOpenChange:X,children:[i.jsx(f0,{asChild:!0,children:i.jsxs(te,{variant:"hero",className:"mb-4 w-full",children:[i.jsx(fi,{className:"h-4 w-4 ml-2"}),"  "]})}),i.jsxs(nr,{className:"max-h-[80vh] overflow-y-auto",children:[i.jsx(Mr,{children:i.jsx(Lr,{children:" "})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsx(he,{value:R.title,onChange:T=>M({...R,title:T.target.value})})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsx(fr,{value:R.description,onChange:T=>M({...R,description:T.target.value})})]}),i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsxs(gt,{value:R.lesson_type,onValueChange:T=>M({...R,lesson_type:T}),children:[i.jsx(ht,{children:i.jsx(vt,{})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"tutoring",children:" "}),i.jsx(Le,{value:"bag_review",children:" "}),i.jsx(Le,{value:"skills",children:" "})]})]})]}),(R.lesson_type==="tutoring"||R.lesson_type==="bag_review")&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:R.curriculum_id,onValueChange:T=>M({...R,curriculum_id:T,grade_level_id:"",subject_id:""}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:$.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:R.grade_level_id,onValueChange:T=>M({...R,grade_level_id:T,subject_id:""}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:U.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]}),R.lesson_type==="tutoring"&&i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:R.subject_id,onValueChange:T=>M({...R,subject_id:T}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:K.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]})]}),R.lesson_type==="skills"&&i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsxs(gt,{value:R.skill_category_id,onValueChange:T=>M({...R,skill_category_id:T}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:""})}),i.jsx(ft,{children:F.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(re,{children:" ()"}),i.jsx(he,{type:"number",value:R.duration_minutes,onChange:T=>M({...R,duration_minutes:parseInt(T.target.value)||60})})]}),i.jsxs("div",{children:[i.jsx(re,{children:" ($)"}),i.jsx(he,{type:"number",value:R.price,onChange:T=>M({...R,price:parseFloat(T.target.value)||0})})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsx(fr,{value:R.notes,onChange:T=>M({...R,notes:T.target.value})})]}),i.jsx(te,{onClick:kt,variant:"hero",className:"w-full",children:" "})]})]})]}),i.jsx("div",{className:"space-y-3",children:f.filter(T=>T.lesson_type!=="group").map(T=>i.jsx("div",{className:"bg-card rounded-xl p-4 border border-border",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:T.title}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.duration_minutes,"   ",t(T.price)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(te,{size:"sm",variant:"ghost",onClick:()=>Oe(T),children:i.jsx(Ug,{className:"h-4 w-4"})}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${T.is_active?"bg-success/10 text-success":"bg-muted text-muted-foreground"}`,children:T.is_active?"":" "})]})]})},T.id))}),i.jsx(yr,{open:le,onOpenChange:E,children:i.jsxs(nr,{className:"max-h-[80vh] overflow-y-auto",children:[i.jsx(Mr,{children:i.jsx(Lr,{children:" "})}),V&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsx(he,{value:V.title,onChange:T=>q({...V,title:T.target.value})})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsx(fr,{value:V.description||"",onChange:T=>q({...V,description:T.target.value})})]}),i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsxs(gt,{value:V.lesson_type,onValueChange:T=>q({...V,lesson_type:T}),children:[i.jsx(ht,{children:i.jsx(vt,{})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"tutoring",children:" "}),i.jsx(Le,{value:"bag_review",children:" "}),i.jsx(Le,{value:"skills",children:" "})]})]})]}),(V.lesson_type==="tutoring"||V.lesson_type==="bag_review")&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:V.curriculum_id,onValueChange:T=>{q({...V,curriculum_id:T,grade_level_id:"",subject_id:""}),S.from("grade_levels").select("*").eq("curriculum_id",T).then(({data:ue})=>P(ue??[]))},children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:$.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:V.grade_level_id,onValueChange:T=>{q({...V,grade_level_id:T,subject_id:""}),S.from("subjects").select("*").eq("grade_level_id",T).then(({data:ue})=>D(ue??[]))},children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:U.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]}),V.lesson_type==="tutoring"&&i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsxs(gt,{value:V.subject_id,onValueChange:T=>q({...V,subject_id:T}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:" "})}),i.jsx(ft,{children:K.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]})]}),V.lesson_type==="skills"&&i.jsxs("div",{children:[i.jsx(re,{children:" "}),i.jsxs(gt,{value:V.skill_category_id,onValueChange:T=>q({...V,skill_category_id:T}),children:[i.jsx(ht,{children:i.jsx(vt,{placeholder:""})}),i.jsx(ft,{children:F.map(T=>i.jsx(Le,{value:T.id,children:T.name},T.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(re,{children:" ()"}),i.jsx(he,{type:"number",value:V.duration_minutes,onChange:T=>q({...V,duration_minutes:parseInt(T.target.value)||60})})]}),i.jsxs("div",{children:[i.jsx(re,{children:" ($)"}),i.jsx(he,{type:"number",value:V.price,onChange:T=>q({...V,price:parseFloat(T.target.value)||0})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(re,{children:""}),i.jsx("input",{type:"checkbox",checked:V.is_active,onChange:T=>q({...V,is_active:T.target.checked})})]}),i.jsxs("div",{children:[i.jsx(re,{children:""}),i.jsx(fr,{value:V.notes||"",onChange:T=>q({...V,notes:T.target.value})})]}),i.jsx(te,{onClick:tt,variant:"hero",className:"w-full",children:" "})]})]})})]}),i.jsx(it,{value:"courses",className:"mt-4",children:e&&i.jsx(E7,{userId:e.id,onCoursesChange:rn})}),i.jsx(it,{value:"bookings",className:"mt-4 space-y-3",children:p.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-12",children:"    "}):p.map(T=>{var ue,Ee,Be,Te;return i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm",children:(ue=T.lessons)==null?void 0:ue.title}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[": ",T.student_name]})]}),i.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary",children:T.status==="accepted"?" -  ":T.status==="scheduled"?"":T.status==="completed"?"":T.status==="cancelled"?"":T.status})]}),T.status==="accepted"&&((Ee=T.lessons)==null?void 0:Ee.lesson_type)!=="group"&&i.jsxs(te,{size:"sm",variant:"hero",onClick:()=>ot(T.id),className:"w-full",children:[i.jsx(Hn,{className:"h-4 w-4 ml-1"})," "]}),T.status==="accepted"&&((Be=T.lessons)==null?void 0:Be.lesson_type)==="group"&&i.jsxs("div",{className:"bg-primary/5 rounded-lg p-2 text-xs text-primary text-center mt-2",children:[i.jsx(ns,{className:"h-3 w-3 inline ml-1"}),"  -      "]}),ee===T.id&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsx(re,{children:"  "}),i.jsx(he,{type:"datetime-local",value:ge,onChange:Qe=>ke(Qe.target.value),dir:"ltr"}),i.jsx(te,{onClick:bn,size:"sm",className:"w-full",children:" "})]}),T.scheduled_at&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[": ",new Date(T.scheduled_at).toLocaleString("ar")]}),((Te=T.lessons)==null?void 0:Te.lesson_type)!=="group"&&(T.status==="accepted"||T.status==="scheduled")&&!T.zoom_start_url&&i.jsx(te,{size:"sm",variant:"hero",className:"w-full mt-2",onClick:async()=>{var Qe,Pe;try{const{data:Ct,error:_r}=await S.functions.invoke("create-zoom-meeting",{body:{topic:`${((Qe=T.lessons)==null?void 0:Qe.title)||" "} - ${new Date(T.scheduled_at||Date.now()).toLocaleString("ar")}`,duration:((Pe=T.lessons)==null?void 0:Pe.duration_minutes)||60,start_time:T.scheduled_at||new Date().toISOString()}});if(_r||!(Ct!=null&&Ct.join_url)){Q.error("    -   ");return}const ls={status:T.status==="accepted"?"scheduled":T.status,zoom_meeting_id:String(Ct.id),zoom_join_url:Ct.join_url,zoom_start_url:Ct.start_url},{error:ir}=await S.from("bookings").update(ls).eq("id",T.id);if(ir){Q.error("   ");return}y(Ps=>Ps.map(cs=>cs.id===T.id?{...cs,...ls}:cs)),Q.success("     ")}catch{Q.error("    ")}},children:"  ()"}),T.zoom_start_url&&T.status==="scheduled"&&i.jsx("a",{href:T.zoom_start_url,target:"_blank",rel:"noopener noreferrer",children:i.jsx(te,{size:"sm",variant:"accent",className:"w-full mt-2",children:"  ()"})}),T.status==="scheduled"&&i.jsxs(te,{size:"sm",variant:"outline",className:"w-full mt-2 text-success border-success/30 hover:bg-success/10",onClick:async()=>{const{error:Qe}=await S.from("bookings").update({status:"completed",zoom_join_url:null,zoom_start_url:null,zoom_meeting_id:null}).eq("id",T.id);if(Qe)Q.error("   ");else{const Pe=Number(T.amount),Ct=Math.round(Pe*N)/100,_r=Pe-Ct;await S.from("accounting_records").insert({booking_id:T.id,lesson_id:T.lesson_id,teacher_id:T.teacher_id,student_id:T.student_id,total_amount:Pe,commission_rate:N,platform_share:Ct,teacher_share:_r}),Q.success("    "),Ue(),qe()}},children:[i.jsx(Hn,{className:"h-4 w-4 ml-1"})," "]})]},T.id)})}),i.jsx(it,{value:"messages",className:"mt-4",children:Ke?i.jsxs("div",{className:"flex flex-col h-[60vh] bg-card rounded-xl border border-border overflow-hidden",children:[i.jsxs("div",{className:"p-3 border-b border-border flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>{pt(null),pe([])},className:"text-sm text-primary flex items-center gap-1",children:[i.jsx(bo,{className:"h-4 w-4"}),""]}),i.jsx("span",{className:"font-semibold text-sm flex-1",children:(()=>{var ue,Ee;const T=Ge.find(Be=>Be.id===Ke);return`${T==null?void 0:T.student_name} - ${((Ee=(ue=T==null?void 0:T.bookings)==null?void 0:ue.lessons)==null?void 0:Ee.title)??""}`})()})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[z.length===0&&i.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"   "}),z.map(T=>i.jsx("div",{className:`flex ${T.sender_id===(e==null?void 0:e.id)?"justify-start":"justify-end"}`,children:i.jsx("div",{className:`max-w-[75%] rounded-xl px-3 py-2 text-sm ${T.sender_id===(e==null?void 0:e.id)?"bg-primary text-primary-foreground":"bg-muted"}`,children:T.content})},T.id)),i.jsx("div",{ref:Ze})]}),i.jsxs("div",{className:"p-3 border-t border-border flex gap-2",children:[i.jsx(he,{value:Fe,onChange:T=>be(T.target.value),placeholder:" ...",onKeyDown:T=>T.key==="Enter"&&at()}),i.jsx(te,{onClick:at,size:"icon",variant:"hero",children:i.jsx(ty,{className:"h-4 w-4"})})]})]}):i.jsx("div",{className:"space-y-3",children:Ge.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-12",children:"    "}):Ge.map(T=>{var ue,Ee;return i.jsx("button",{onClick:()=>et(T.id),className:"w-full text-right bg-card rounded-xl p-4 border border-border hover:bg-muted/50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[T.unread_count>0&&i.jsx("span",{className:"bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:T.unread_count>99?"99+":T.unread_count}),i.jsx(_l,{className:"h-5 w-5 text-muted-foreground"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:T.student_name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:((Ee=(ue=T.bookings)==null?void 0:ue.lessons)==null?void 0:Ee.title)??""})]})]})},T.id)})})}),i.jsxs(it,{value:"earnings",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xl font-bold text-success",children:t(v)}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"  "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xl font-bold",children:t(g)}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]})]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-2 text-xs text-muted-foreground text-center",children:["  : ",N,"%        "]}),i.jsx(he,{type:"number",placeholder:`  ${s.symbol}`,value:ye,onChange:T=>Ae(T.target.value)}),i.jsxs(te,{onClick:Yt,variant:"hero",className:"w-full",children:[i.jsx(gc,{className:"h-4 w-4 ml-1"})," "]})]}),b.length>0&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:" "}),i.jsx("div",{className:"space-y-2",children:b.slice(0,15).map(T=>{var Be;const ue=(Be=T.bookings)==null?void 0:Be.lessons,Ee=T.bookings;return i.jsxs("div",{className:"border border-border rounded-lg p-3 text-xs space-y-1",children:[ue&&i.jsxs("div",{className:"font-semibold text-foreground",children:[ue.title,i.jsxs("span",{className:"text-muted-foreground font-normal mr-2",children:["(",ue.lesson_type==="group"?"":ue.lesson_type==="tutoring"?" ":ue.lesson_type==="skills"?"":" ",")"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:Ee!=null&&Ee.scheduled_at?`: ${new Date(Ee.scheduled_at).toLocaleDateString("ar")}`:ue!=null&&ue.course_start_date?` : ${new Date(ue.course_start_date).toLocaleDateString("ar")}`:new Date(T.created_at).toLocaleDateString("ar")}),i.jsxs("span",{className:"font-medium",children:[": ",t(T.total_amount)]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-muted-foreground",children:[" (",T.commission_rate,"%): ",t(T.platform_share)]}),i.jsxs("span",{className:"font-bold text-success",children:[": ",t(T.teacher_share)]})]})]},T.id)})})]}),k.length>0&&i.jsxs("details",{className:"bg-card rounded-xl border border-border",children:[i.jsx("summary",{className:"p-4 font-semibold cursor-pointer select-none flex items-center justify-between",children:i.jsxs("span",{children:["   (",k.length,")"]})}),i.jsx("div",{className:"px-4 pb-4 space-y-2",children:k.map(T=>{const ue=b.filter(Ee=>new Date(Ee.created_at)<=new Date(T.created_at)).slice(0,3);return i.jsxs("div",{className:"p-3 rounded-lg border border-border space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:t(T.amount)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[" : ",new Date(T.created_at).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric"})]}),T.updated_at&&T.status!=="pending"&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:[" : ",new Date(T.updated_at).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric"})]})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${T.status==="approved"?"bg-success/10 text-success":T.status==="rejected"?"bg-destructive/10 text-destructive":"bg-warning/10 text-warning"}`,children:T.status==="pending"?" ":T.status==="approved"?"":""})]}),ue.length>0&&i.jsxs("div",{className:"bg-muted/30 rounded-lg p-2 space-y-1",children:[i.jsx("p",{className:"text-[10px] text-muted-foreground font-semibold",children:" :"}),ue.map(Ee=>{var Qe;const Be=(Qe=Ee.bookings)==null?void 0:Qe.lessons,Te=Ee.bookings;return i.jsxs("div",{className:"text-[11px] flex justify-between",children:[i.jsx("span",{children:(Be==null?void 0:Be.title)||""}),i.jsx("span",{className:"text-muted-foreground",children:Te!=null&&Te.scheduled_at?new Date(Te.scheduled_at).toLocaleDateString("ar"):Be!=null&&Be.course_start_date?new Date(Be.course_start_date).toLocaleDateString("ar"):new Date(Ee.created_at).toLocaleDateString("ar")})]},Ee.id)})]}),T.status==="approved"&&T.receipt_url&&i.jsx("a",{href:T.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary underline flex items-center gap-1",children:"  "})]},T.id)})})]})]})]})]})})}var Yv=["Enter"," "],P7=["ArrowDown","PageUp","Home"],hR=["ArrowUp","PageDown","End"],R7=[...P7,...hR],A7={ltr:[...Yv,"ArrowRight"],rtl:[...Yv,"ArrowLeft"]},I7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qu="Menu",[bu,O7,D7]=Pu(qu),[Zo,fR]=yn(qu,[D7,Ji,Kl]),up=Ji(),pR=Kl(),[M7,ea]=Zo(qu),[L7,Wu]=Zo(qu),mR=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=e,l=up(t),[c,u]=h.useState(null),d=h.useRef(!1),f=tr(o),m=ql(s);return h.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),i.jsx(fy,{...l,children:i.jsx(M7,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(L7,{scope:t,onClose:h.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:a,children:r})})})};mR.displayName=qu;var $7="MenuAnchor",b0=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=up(n);return i.jsx(Iu,{...s,...r,ref:t})});b0.displayName=$7;var _0="MenuPortal",[F7,gR]=Zo(_0,{forceMount:void 0}),vR=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=ea(_0,t);return i.jsx(F7,{scope:t,forceMount:n,children:i.jsx(Vn,{present:n||o.open,children:i.jsx(Il,{asChild:!0,container:s,children:r})})})};vR.displayName=_0;var Ir="MenuContent",[U7,j0]=Zo(Ir),xR=h.forwardRef((e,t)=>{const n=gR(Ir,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=ea(Ir,e.__scopeMenu),a=Wu(Ir,e.__scopeMenu);return i.jsx(bu.Provider,{scope:e.__scopeMenu,children:i.jsx(Vn,{present:r||o.open,children:i.jsx(bu.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(V7,{...s,ref:t}):i.jsx(B7,{...s,ref:t})})})})}),V7=h.forwardRef((e,t)=>{const n=ea(Ir,e.__scopeMenu),r=h.useRef(null),s=He(t,r);return h.useEffect(()=>{const o=r.current;if(o)return qf(o)},[]),i.jsx(S0,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:de(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),B7=h.forwardRef((e,t)=>{const n=ea(Ir,e.__scopeMenu);return i.jsx(S0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),z7=Vi("MenuContent.ScrollLock"),S0=h.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:y,...g}=e,w=ea(Ir,n),v=Wu(Ir,n),x=up(n),b=pR(n),_=O7(n),[N,C]=h.useState(null),k=h.useRef(null),I=He(t,k,w.onContentChange),$=h.useRef(0),O=h.useRef(""),U=h.useRef(0),P=h.useRef(null),K=h.useRef("right"),D=h.useRef(0),F=y?Lu:h.Fragment,W=y?{as:z7,allowPinchZoom:!0}:void 0,R=L=>{var A,Y;const X=O.current+L,le=_().filter(ee=>!ee.disabled),E=document.activeElement,V=(A=le.find(ee=>ee.ref.current===E))==null?void 0:A.textValue,q=le.map(ee=>ee.textValue),J=tK(q,X,V),oe=(Y=le.find(ee=>ee.textValue===J))==null?void 0:Y.ref.current;(function ee(H){O.current=H,window.clearTimeout($.current),H!==""&&($.current=window.setTimeout(()=>ee(""),1e3))})(X),oe&&setTimeout(()=>oe.focus())};h.useEffect(()=>()=>window.clearTimeout($.current),[]),zf();const M=h.useCallback(L=>{var le,E;return K.current===((le=P.current)==null?void 0:le.side)&&rK(L,(E=P.current)==null?void 0:E.area)},[]);return i.jsx(U7,{scope:n,searchRef:O,onItemEnter:h.useCallback(L=>{M(L)&&L.preventDefault()},[M]),onItemLeave:h.useCallback(L=>{var X;M(L)||((X=k.current)==null||X.focus(),C(null))},[M]),onTriggerLeave:h.useCallback(L=>{M(L)&&L.preventDefault()},[M]),pointerGraceTimerRef:U,onPointerGraceIntentChange:h.useCallback(L=>{P.current=L},[]),children:i.jsx(F,{...W,children:i.jsx(Mu,{asChild:!0,trapped:s,onMountAutoFocus:de(o,L=>{var X;L.preventDefault(),(X=k.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:i.jsx(n0,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:C,onEntryFocus:de(c,L=>{v.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(If,{role:"menu","aria-orientation":"vertical","data-state":OR(w.open),"data-radix-menu-content":"",dir:v.dir,...x,...g,ref:I,style:{outline:"none",...g.style},onKeyDown:de(g.onKeyDown,L=>{const le=L.target.closest("[data-radix-menu-content]")===L.currentTarget,E=L.ctrlKey||L.altKey||L.metaKey,V=L.key.length===1;le&&(L.key==="Tab"&&L.preventDefault(),!E&&V&&R(L.key));const q=k.current;if(L.target!==q||!R7.includes(L.key))return;L.preventDefault();const oe=_().filter(A=>!A.disabled).map(A=>A.ref.current);hR.includes(L.key)&&oe.reverse(),Z7(oe)}),onBlur:de(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout($.current),O.current="")}),onPointerMove:de(e.onPointerMove,_u(L=>{const X=L.target,le=D.current!==L.clientX;if(L.currentTarget.contains(X)&&le){const E=L.clientX>D.current?"right":"left";K.current=E,D.current=L.clientX}}))})})})})})})});xR.displayName=Ir;var q7="MenuGroup",N0=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(we.div,{role:"group",...r,ref:t})});N0.displayName=q7;var W7="MenuLabel",yR=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});yR.displayName=W7;var lf="MenuItem",Jj="menu.itemSelect",dp=h.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=h.useRef(null),a=Wu(lf,e.__scopeMenu),l=j0(lf,e.__scopeMenu),c=He(t,o),u=h.useRef(!1),d=()=>{const f=o.current;if(!n&&f){const m=new CustomEvent(Jj,{bubbles:!0,cancelable:!0});f.addEventListener(Jj,p=>r==null?void 0:r(p),{once:!0}),Gx(f,m),m.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx(wR,{...s,ref:c,disabled:n,onClick:de(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:de(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:de(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||Yv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});dp.displayName=lf;var wR=h.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,a=j0(lf,n),l=pR(n),c=h.useRef(null),u=He(t,c),[d,f]=h.useState(!1),[m,p]=h.useState("");return h.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[o.children]),i.jsx(bu.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(r0,{asChild:!0,...l,focusable:!r,children:i.jsx(we.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:de(e.onPointerMove,_u(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:de(e.onPointerLeave,_u(y=>a.onItemLeave(y))),onFocus:de(e.onFocus,()=>f(!0)),onBlur:de(e.onBlur,()=>f(!1))})})})}),K7="MenuCheckboxItem",bR=h.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return i.jsx(kR,{scope:e.__scopeMenu,checked:n,children:i.jsx(dp,{role:"menuitemcheckbox","aria-checked":cf(n)?"mixed":n,...s,ref:t,"data-state":C0(n),onSelect:de(s.onSelect,()=>r==null?void 0:r(cf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});bR.displayName=K7;var _R="MenuRadioGroup",[H7,G7]=Zo(_R,{value:void 0,onValueChange:()=>{}}),jR=h.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=tr(r);return i.jsx(H7,{scope:e.__scopeMenu,value:n,onValueChange:o,children:i.jsx(N0,{...s,ref:t})})});jR.displayName=_R;var SR="MenuRadioItem",NR=h.forwardRef((e,t)=>{const{value:n,...r}=e,s=G7(SR,e.__scopeMenu),o=n===s.value;return i.jsx(kR,{scope:e.__scopeMenu,checked:o,children:i.jsx(dp,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":C0(o),onSelect:de(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});NR.displayName=SR;var k0="MenuItemIndicator",[kR,Y7]=Zo(k0,{checked:!1}),CR=h.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=Y7(k0,n);return i.jsx(Vn,{present:r||cf(o.checked)||o.checked===!0,children:i.jsx(we.span,{...s,ref:t,"data-state":C0(o.checked)})})});CR.displayName=k0;var J7="MenuSeparator",ER=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});ER.displayName=J7;var Q7="MenuArrow",TR=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=up(n);return i.jsx(Of,{...s,...r,ref:t})});TR.displayName=Q7;var X7="MenuSub",[WH,PR]=Zo(X7),wc="MenuSubTrigger",RR=h.forwardRef((e,t)=>{const n=ea(wc,e.__scopeMenu),r=Wu(wc,e.__scopeMenu),s=PR(wc,e.__scopeMenu),o=j0(wc,e.__scopeMenu),a=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},d=h.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return h.useEffect(()=>d,[d]),h.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(b0,{asChild:!0,...u,children:i.jsx(wR,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":OR(n.open),...e,ref:Gs(t,s.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:de(e.onPointerMove,_u(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:de(e.onPointerLeave,_u(f=>{var p,y;d();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(y=n.content)==null?void 0:y.dataset.side,w=g==="right",v=w?-5:5,x=m[w?"left":"right"],b=m[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:de(e.onKeyDown,f=>{var p;const m=o.searchRef.current!=="";e.disabled||m&&f.key===" "||A7[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});RR.displayName=wc;var AR="MenuSubContent",IR=h.forwardRef((e,t)=>{const n=gR(Ir,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=ea(Ir,e.__scopeMenu),a=Wu(Ir,e.__scopeMenu),l=PR(AR,e.__scopeMenu),c=h.useRef(null),u=He(t,c);return i.jsx(bu.Provider,{scope:e.__scopeMenu,children:i.jsx(Vn,{present:r||o.open,children:i.jsx(bu.Slot,{scope:e.__scopeMenu,children:i.jsx(S0,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:de(e.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:de(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:de(e.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),m=I7[a.dir].includes(d.key);f&&m&&(o.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});IR.displayName=AR;function OR(e){return e?"open":"closed"}function cf(e){return e==="indeterminate"}function C0(e){return cf(e)?"indeterminate":e?"checked":"unchecked"}function Z7(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function eK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function tK(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=eK(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function nK(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o],c=t[a],u=l.x,d=l.y,f=c.x,m=c.y;d>r!=m>r&&n<(f-u)*(r-d)/(m-d)+u&&(s=!s)}return s}function rK(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return nK(n,t)}function _u(e){return t=>t.pointerType==="mouse"?e(t):void 0}var sK=mR,iK=b0,oK=vR,aK=xR,lK=N0,cK=yR,uK=dp,dK=bR,hK=jR,fK=NR,pK=CR,mK=ER,gK=TR,vK=RR,xK=IR,hp="DropdownMenu",[yK,KH]=yn(hp,[fR]),Bn=fR(),[wK,DR]=yK(hp),MR=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=e,c=Bn(t),u=h.useRef(null),[d,f]=xr({prop:s,defaultProp:o??!1,onChange:a,caller:hp});return i.jsx(wK,{scope:t,triggerId:nn(),triggerRef:u,contentId:nn(),open:d,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(m=>!m),[f]),modal:l,children:i.jsx(sK,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};MR.displayName=hp;var LR="DropdownMenuTrigger",$R=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=DR(LR,n),a=Bn(n);return i.jsx(iK,{asChild:!0,...a,children:i.jsx(we.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Gs(t,o.triggerRef),onPointerDown:de(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:de(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$R.displayName=LR;var bK="DropdownMenuPortal",FR=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Bn(t);return i.jsx(oK,{...r,...n})};FR.displayName=bK;var UR="DropdownMenuContent",VR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=DR(UR,n),o=Bn(n),a=h.useRef(!1);return i.jsx(aK,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:de(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:de(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VR.displayName=UR;var _K="DropdownMenuGroup",jK=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(lK,{...s,...r,ref:t})});jK.displayName=_K;var SK="DropdownMenuLabel",BR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(cK,{...s,...r,ref:t})});BR.displayName=SK;var NK="DropdownMenuItem",zR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(uK,{...s,...r,ref:t})});zR.displayName=NK;var kK="DropdownMenuCheckboxItem",qR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(dK,{...s,...r,ref:t})});qR.displayName=kK;var CK="DropdownMenuRadioGroup",EK=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(hK,{...s,...r,ref:t})});EK.displayName=CK;var TK="DropdownMenuRadioItem",WR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(fK,{...s,...r,ref:t})});WR.displayName=TK;var PK="DropdownMenuItemIndicator",KR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(pK,{...s,...r,ref:t})});KR.displayName=PK;var RK="DropdownMenuSeparator",HR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(mK,{...s,...r,ref:t})});HR.displayName=RK;var AK="DropdownMenuArrow",IK=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(gK,{...s,...r,ref:t})});IK.displayName=AK;var OK="DropdownMenuSubTrigger",GR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(vK,{...s,...r,ref:t})});GR.displayName=OK;var DK="DropdownMenuSubContent",YR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Bn(n);return i.jsx(xK,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});YR.displayName=DK;var MK=MR,LK=$R,$K=FR,JR=VR,QR=BR,XR=zR,ZR=qR,eA=WR,tA=KR,nA=HR,rA=GR,sA=YR;const Dd=MK,Md=LK,FK=h.forwardRef(({className:e,inset:t,children:n,...r},s)=>i.jsxs(rA,{ref:s,className:ve("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(ZN,{className:"ml-auto h-4 w-4"})]}));FK.displayName=rA.displayName;const UK=h.forwardRef(({className:e,...t},n)=>i.jsx(sA,{ref:n,className:ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));UK.displayName=sA.displayName;const bc=h.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx($K,{children:i.jsx(JR,{ref:r,sideOffset:t,className:ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));bc.displayName=JR.displayName;const Qt=h.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(XR,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));Qt.displayName=XR.displayName;const VK=h.forwardRef(({className:e,children:t,checked:n,...r},s)=>i.jsxs(ZR,{ref:s,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(tA,{children:i.jsx(XN,{className:"h-4 w-4"})})}),t]}));VK.displayName=ZR.displayName;const BK=h.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(eA,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(tA,{children:i.jsx(ek,{className:"h-2 w-2 fill-current"})})}),t]}));BK.displayName=eA.displayName;const zK=h.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(QR,{ref:r,className:ve("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));zK.displayName=QR.displayName;const qK=h.forwardRef(({className:e,...t},n)=>i.jsx(nA,{ref:n,className:ve("-mx-1 my-1 h-px bg-muted",e),...t}));qK.displayName=nA.displayName;var Qj=1,WK=.9,KK=.8,HK=.17,Dm=.1,Mm=.999,GK=.9999,YK=.99,JK=/[\\\/_+.#"@\[\(\{&]/,QK=/[\\\/_+.#"@\[\(\{&]/g,XK=/[\s-]/,iA=/[\s-]/g;function Jv(e,t,n,r,s,o,a){if(o===t.length)return s===e.length?Qj:YK;var l=`${s},${o}`;if(a[l]!==void 0)return a[l];for(var c=r.charAt(o),u=n.indexOf(c,s),d=0,f,m,p,y;u>=0;)f=Jv(e,t,n,r,u+1,o+1,a),f>d&&(u===s?f*=Qj:JK.test(e.charAt(u-1))?(f*=KK,p=e.slice(s,u-1).match(QK),p&&s>0&&(f*=Math.pow(Mm,p.length))):XK.test(e.charAt(u-1))?(f*=WK,y=e.slice(s,u-1).match(iA),y&&s>0&&(f*=Math.pow(Mm,y.length))):(f*=HK,s>0&&(f*=Math.pow(Mm,u-s))),e.charAt(u)!==t.charAt(o)&&(f*=GK)),(f<Dm&&n.charAt(u-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(u-1)!==r.charAt(o))&&(m=Jv(e,t,n,r,u+1,o+2,a),m*Dm>f&&(f=m*Dm)),f>d&&(d=f),u=n.indexOf(c,u+1);return a[l]=d,d}function Xj(e){return e.toLowerCase().replace(iA," ")}function ZK(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Jv(e,t,Xj(e),Xj(t),0,0,{})}var dc='[cmdk-group=""]',Lm='[cmdk-group-items=""]',eH='[cmdk-group-heading=""]',oA='[cmdk-item=""]',Zj=`${oA}:not([aria-disabled="true"])`,Qv="cmdk-item-select",wa="data-value",tH=(e,t,n)=>ZK(e,t,n),aA=h.createContext(void 0),Ku=()=>h.useContext(aA),lA=h.createContext(void 0),E0=()=>h.useContext(lA),cA=h.createContext(void 0),uA=h.forwardRef((e,t)=>{let n=ba(()=>{var E,V;return{search:"",value:(V=(E=e.value)!=null?E:e.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=ba(()=>new Set),s=ba(()=>new Map),o=ba(()=>new Map),a=ba(()=>new Set),l=dA(e),{label:c,children:u,value:d,onValueChange:f,filter:m,shouldFilter:p,loop:y,disablePointerSelection:g=!1,vimBindings:w=!0,...v}=e,x=nn(),b=nn(),_=nn(),N=h.useRef(null),C=hH();Ho(()=>{if(d!==void 0){let E=d.trim();n.current.value=E,k.emit()}},[d]),Ho(()=>{C(6,K)},[]);let k=h.useMemo(()=>({subscribe:E=>(a.current.add(E),()=>a.current.delete(E)),snapshot:()=>n.current,setState:(E,V,q)=>{var J,oe,A,Y;if(!Object.is(n.current[E],V)){if(n.current[E]=V,E==="search")P(),O(),C(1,U);else if(E==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ee=document.getElementById(_);ee?ee.focus():(J=document.getElementById(x))==null||J.focus()}if(C(7,()=>{var ee;n.current.selectedItemId=(ee=D())==null?void 0:ee.id,k.emit()}),q||C(5,K),((oe=l.current)==null?void 0:oe.value)!==void 0){let ee=V??"";(Y=(A=l.current).onValueChange)==null||Y.call(A,ee);return}}k.emit()}},emit:()=>{a.current.forEach(E=>E())}}),[]),I=h.useMemo(()=>({value:(E,V,q)=>{var J;V!==((J=o.current.get(E))==null?void 0:J.value)&&(o.current.set(E,{value:V,keywords:q}),n.current.filtered.items.set(E,$(V,q)),C(2,()=>{O(),k.emit()}))},item:(E,V)=>(r.current.add(E),V&&(s.current.has(V)?s.current.get(V).add(E):s.current.set(V,new Set([E]))),C(3,()=>{P(),O(),n.current.value||U(),k.emit()}),()=>{o.current.delete(E),r.current.delete(E),n.current.filtered.items.delete(E);let q=D();C(4,()=>{P(),(q==null?void 0:q.getAttribute("id"))===E&&U(),k.emit()})}),group:E=>(s.current.has(E)||s.current.set(E,new Set),()=>{o.current.delete(E),s.current.delete(E)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:x,inputId:_,labelId:b,listInnerRef:N}),[]);function $(E,V){var q,J;let oe=(J=(q=l.current)==null?void 0:q.filter)!=null?J:tH;return E?oe(E,n.current.search,V):0}function O(){if(!n.current.search||l.current.shouldFilter===!1)return;let E=n.current.filtered.items,V=[];n.current.filtered.groups.forEach(J=>{let oe=s.current.get(J),A=0;oe.forEach(Y=>{let ee=E.get(Y);A=Math.max(ee,A)}),V.push([J,A])});let q=N.current;F().sort((J,oe)=>{var A,Y;let ee=J.getAttribute("id"),H=oe.getAttribute("id");return((A=E.get(H))!=null?A:0)-((Y=E.get(ee))!=null?Y:0)}).forEach(J=>{let oe=J.closest(Lm);oe?oe.appendChild(J.parentElement===oe?J:J.closest(`${Lm} > *`)):q.appendChild(J.parentElement===q?J:J.closest(`${Lm} > *`))}),V.sort((J,oe)=>oe[1]-J[1]).forEach(J=>{var oe;let A=(oe=N.current)==null?void 0:oe.querySelector(`${dc}[${wa}="${encodeURIComponent(J[0])}"]`);A==null||A.parentElement.appendChild(A)})}function U(){let E=F().find(q=>q.getAttribute("aria-disabled")!=="true"),V=E==null?void 0:E.getAttribute(wa);k.setState("value",V||void 0)}function P(){var E,V,q,J;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let oe=0;for(let A of r.current){let Y=(V=(E=o.current.get(A))==null?void 0:E.value)!=null?V:"",ee=(J=(q=o.current.get(A))==null?void 0:q.keywords)!=null?J:[],H=$(Y,ee);n.current.filtered.items.set(A,H),H>0&&oe++}for(let[A,Y]of s.current)for(let ee of Y)if(n.current.filtered.items.get(ee)>0){n.current.filtered.groups.add(A);break}n.current.filtered.count=oe}function K(){var E,V,q;let J=D();J&&(((E=J.parentElement)==null?void 0:E.firstChild)===J&&((q=(V=J.closest(dc))==null?void 0:V.querySelector(eH))==null||q.scrollIntoView({block:"nearest"})),J.scrollIntoView({block:"nearest"}))}function D(){var E;return(E=N.current)==null?void 0:E.querySelector(`${oA}[aria-selected="true"]`)}function F(){var E;return Array.from(((E=N.current)==null?void 0:E.querySelectorAll(Zj))||[])}function W(E){let V=F()[E];V&&k.setState("value",V.getAttribute(wa))}function R(E){var V;let q=D(),J=F(),oe=J.findIndex(Y=>Y===q),A=J[oe+E];(V=l.current)!=null&&V.loop&&(A=oe+E<0?J[J.length-1]:oe+E===J.length?J[0]:J[oe+E]),A&&k.setState("value",A.getAttribute(wa))}function M(E){let V=D(),q=V==null?void 0:V.closest(dc),J;for(;q&&!J;)q=E>0?uH(q,dc):dH(q,dc),J=q==null?void 0:q.querySelector(Zj);J?k.setState("value",J.getAttribute(wa)):R(E)}let L=()=>W(F().length-1),X=E=>{E.preventDefault(),E.metaKey?L():E.altKey?M(1):R(1)},le=E=>{E.preventDefault(),E.metaKey?W(0):E.altKey?M(-1):R(-1)};return h.createElement(we.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:E=>{var V;(V=v.onKeyDown)==null||V.call(v,E);let q=E.nativeEvent.isComposing||E.keyCode===229;if(!(E.defaultPrevented||q))switch(E.key){case"n":case"j":{w&&E.ctrlKey&&X(E);break}case"ArrowDown":{X(E);break}case"p":case"k":{w&&E.ctrlKey&&le(E);break}case"ArrowUp":{le(E);break}case"Home":{E.preventDefault(),W(0);break}case"End":{E.preventDefault(),L();break}case"Enter":{E.preventDefault();let J=D();if(J){let oe=new Event(Qv);J.dispatchEvent(oe)}}}}},h.createElement("label",{"cmdk-label":"",htmlFor:I.inputId,id:I.labelId,style:pH},c),fp(e,E=>h.createElement(lA.Provider,{value:k},h.createElement(aA.Provider,{value:I},E))))}),nH=h.forwardRef((e,t)=>{var n,r;let s=nn(),o=h.useRef(null),a=h.useContext(cA),l=Ku(),c=dA(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:a==null?void 0:a.forceMount;Ho(()=>{if(!u)return l.item(s,a==null?void 0:a.id)},[u]);let d=hA(s,o,[e.value,e.children,o],e.keywords),f=E0(),m=Ki(C=>C.value&&C.value===d.current),p=Ki(C=>u||l.filter()===!1?!0:C.search?C.filtered.items.get(s)>0:!0);h.useEffect(()=>{let C=o.current;if(!(!C||e.disabled))return C.addEventListener(Qv,y),()=>C.removeEventListener(Qv,y)},[p,e.onSelect,e.disabled]);function y(){var C,k;g(),(k=(C=c.current).onSelect)==null||k.call(C,d.current)}function g(){f.setState("value",d.current,!0)}if(!p)return null;let{disabled:w,value:v,onSelect:x,forceMount:b,keywords:_,...N}=e;return h.createElement(we.div,{ref:Gs(o,t),...N,id:s,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!m,"data-disabled":!!w,"data-selected":!!m,onPointerMove:w||l.getDisablePointerSelection()?void 0:g,onClick:w?void 0:y},e.children)}),rH=h.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:s,...o}=e,a=nn(),l=h.useRef(null),c=h.useRef(null),u=nn(),d=Ku(),f=Ki(p=>s||d.filter()===!1?!0:p.search?p.filtered.groups.has(a):!0);Ho(()=>d.group(a),[]),hA(a,l,[e.value,e.heading,c]);let m=h.useMemo(()=>({id:a,forceMount:s}),[s]);return h.createElement(we.div,{ref:Gs(l,t),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&h.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),fp(e,p=>h.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},h.createElement(cA.Provider,{value:m},p))))}),sH=h.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,s=h.useRef(null),o=Ki(a=>!a.search);return!n&&!o?null:h.createElement(we.div,{ref:Gs(s,t),...r,"cmdk-separator":"",role:"separator"})}),iH=h.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,s=e.value!=null,o=E0(),a=Ki(u=>u.search),l=Ki(u=>u.selectedItemId),c=Ku();return h.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),h.createElement(we.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:s?e.value:a,onChange:u=>{s||o.setState("search",u.target.value),n==null||n(u.target.value)}})}),oH=h.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...s}=e,o=h.useRef(null),a=h.useRef(null),l=Ki(u=>u.selectedItemId),c=Ku();return h.useEffect(()=>{if(a.current&&o.current){let u=a.current,d=o.current,f,m=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let p=u.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(f),m.unobserve(u)}}},[]),h.createElement(we.div,{ref:Gs(o,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},fp(e,u=>h.createElement("div",{ref:Gs(a,c.listInnerRef),"cmdk-list-sizer":""},u)))}),aH=h.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:o,container:a,...l}=e;return h.createElement(l0,{open:n,onOpenChange:r},h.createElement(c0,{container:a},h.createElement(sp,{"cmdk-overlay":"",className:s}),h.createElement(ip,{"aria-label":e.label,"cmdk-dialog":"",className:o},h.createElement(uA,{ref:t,...l}))))}),lH=h.forwardRef((e,t)=>Ki(n=>n.filtered.count===0)?h.createElement(we.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),cH=h.forwardRef((e,t)=>{let{progress:n,children:r,label:s="Loading...",...o}=e;return h.createElement(we.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},fp(e,a=>h.createElement("div",{"aria-hidden":!0},a)))}),rr=Object.assign(uA,{List:oH,Item:nH,Input:iH,Group:rH,Separator:sH,Dialog:aH,Empty:lH,Loading:cH});function uH(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function dH(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function dA(e){let t=h.useRef(e);return Ho(()=>{t.current=e}),t}var Ho=typeof window>"u"?h.useEffect:h.useLayoutEffect;function ba(e){let t=h.useRef();return t.current===void 0&&(t.current=e()),t}function Ki(e){let t=E0(),n=()=>e(t.snapshot());return h.useSyncExternalStore(t.subscribe,n,n)}function hA(e,t,n,r=[]){let s=h.useRef(),o=Ku();return Ho(()=>{var a;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():s.current}})(),c=r.map(u=>u.trim());o.value(e,l,c),(a=t.current)==null||a.setAttribute(wa,l),s.current=l}),s}var hH=()=>{let[e,t]=h.useState(),n=ba(()=>new Map);return Ho(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,s)=>{n.current.set(r,s),t({})}};function fH(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function fp({asChild:e,children:t},n){return e&&h.isValidElement(t)?h.cloneElement(fH(t),{ref:t.ref},n(t.props.children)):n(t)}var pH={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const fA=h.forwardRef(({className:e,...t},n)=>i.jsx(rr,{ref:n,className:ve("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));fA.displayName=rr.displayName;const pA=h.forwardRef(({className:e,...t},n)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(jl,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(rr.Input,{ref:n,className:ve("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));pA.displayName=rr.Input.displayName;const mA=h.forwardRef(({className:e,...t},n)=>i.jsx(rr.List,{ref:n,className:ve("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));mA.displayName=rr.List.displayName;const gA=h.forwardRef((e,t)=>i.jsx(rr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));gA.displayName=rr.Empty.displayName;const vA=h.forwardRef(({className:e,...t},n)=>i.jsx(rr.Group,{ref:n,className:ve("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));vA.displayName=rr.Group.displayName;const mH=h.forwardRef(({className:e,...t},n)=>i.jsx(rr.Separator,{ref:n,className:ve("-mx-1 h-px bg-border",e),...t}));mH.displayName=rr.Separator.displayName;const xA=h.forwardRef(({className:e,...t},n)=>i.jsx(rr.Item,{ref:n,className:ve("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));xA.displayName=rr.Item.displayName;var pp="Switch",[gH,HH]=yn(pp),[vH,xH]=gH(pp),yA=h.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,p]=h.useState(null),y=He(t,b=>p(b)),g=h.useRef(!1),w=m?d||!!m.closest("form"):!0,[v,x]=xr({prop:s,defaultProp:o??!1,onChange:u,caller:pp});return i.jsxs(vH,{scope:n,checked:v,disabled:l,children:[i.jsx(we.button,{type:"button",role:"switch","aria-checked":v,"aria-required":a,"data-state":jA(v),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:de(e.onClick,b=>{x(_=>!_),w&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),w&&i.jsx(_A,{control:m,bubbles:!g.current,name:r,value:c,checked:v,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});yA.displayName=pp;var wA="SwitchThumb",bA=h.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=xH(wA,n);return i.jsx(we.span,{"data-state":jA(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});bA.displayName=wA;var yH="SwitchBubbleInput",_A=h.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const a=h.useRef(null),l=He(a,o),c=e0(n),u=uy(t);return h.useEffect(()=>{const d=a.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&p){const y=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(y)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});_A.displayName=yH;function jA(e){return e?"checked":"unchecked"}var SA=yA,wH=bA;const mo=h.forwardRef(({className:e,...t},n)=>i.jsx(SA,{className:ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:i.jsx(wH,{className:ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));mo.displayName=SA.displayName;const NA=h.forwardRef(({className:e,...t},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:ve("w-full caption-bottom text-sm",e),...t})}));NA.displayName="Table";const kA=h.forwardRef(({className:e,...t},n)=>i.jsx("thead",{ref:n,className:ve("[&_tr]:border-b",e),...t}));kA.displayName="TableHeader";const CA=h.forwardRef(({className:e,...t},n)=>i.jsx("tbody",{ref:n,className:ve("[&_tr:last-child]:border-0",e),...t}));CA.displayName="TableBody";const bH=h.forwardRef(({className:e,...t},n)=>i.jsx("tfoot",{ref:n,className:ve("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));bH.displayName="TableFooter";const Xv=h.forwardRef(({className:e,...t},n)=>i.jsx("tr",{ref:n,className:ve("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Xv.displayName="TableRow";const hs=h.forwardRef(({className:e,...t},n)=>i.jsx("th",{ref:n,className:ve("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));hs.displayName="TableHead";const fs=h.forwardRef(({className:e,...t},n)=>i.jsx("td",{ref:n,className:ve("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));fs.displayName="TableCell";const _H=h.forwardRef(({className:e,...t},n)=>i.jsx("caption",{ref:n,className:ve("mt-4 text-sm text-muted-foreground",e),...t}));_H.displayName="TableCaption";function jH(){const[e,t]=h.useState([]),[n,r]=h.useState(""),[s,o]=h.useState(!0),[a,l]=h.useState(""),[c,u]=h.useState("all"),[d,f]=h.useState(null);h.useEffect(()=>{m()},[]);const m=async()=>{var v;o(!0);try{const[x,b,_,N,C,k]=await Promise.all([S.from("profiles").select("user_id, full_name, phone, bio, avatar_url, created_at"),S.from("user_roles").select("id, user_id, role, admin_notes"),S.from("lessons").select("id, teacher_id"),S.from("bookings").select("teacher_id, amount, status"),S.from("reviews").select("teacher_id, rating"),S.functions.invoke("get-user-emails")]),I=((v=k.data)==null?void 0:v.emails)??{},$=x.data??[],O=b.data??[],U=new Map;for(const W of O){const R=U.get(W.user_id)??{roles:[]};R.roles.push(W.role),W.role==="teacher"&&(R.teacherRoleId=W.id,R.admin_notes=W.admin_notes??""),U.set(W.user_id,R)}const P=new Map;for(const W of _.data??[])P.set(W.teacher_id,(P.get(W.teacher_id)??0)+1);const K=new Map;for(const W of N.data??[]){const R=K.get(W.teacher_id)??{count:0,income:0};R.count++,W.status==="completed"&&(R.income+=Number(W.amount)),K.set(W.teacher_id,R)}const D=new Map;for(const W of C.data??[]){const R=D.get(W.teacher_id)??{sum:0,count:0};R.sum+=W.rating,R.count++,D.set(W.teacher_id,R)}const F=$.map(W=>{const R=U.get(W.user_id),M=K.get(W.user_id),L=D.get(W.user_id);return{user_id:W.user_id,full_name:W.full_name||" ",phone:W.phone,bio:W.bio,avatar_url:W.avatar_url,created_at:W.created_at,email:I[W.user_id]??"",isTeacher:(R==null?void 0:R.roles.includes("teacher"))??!1,roleId:R==null?void 0:R.teacherRoleId,admin_notes:(R==null?void 0:R.admin_notes)??"",roles:(R==null?void 0:R.roles)??[],lessonCount:P.get(W.user_id)??0,bookingCount:(M==null?void 0:M.count)??0,avgRating:L?Math.round(L.sum/L.count*10)/10:0,totalIncome:(M==null?void 0:M.income)??0}});t(F)}catch(x){console.error("Error loading users:",x)}finally{o(!1)}},p=async v=>{v.isTeacher&&v.roleId?(await S.from("user_roles").delete().eq("id",v.roleId),Q.success("   ")):(await S.from("user_roles").insert({user_id:v.user_id,role:"teacher"}),Q.success("   ")),f(null),m()},y=async v=>{v.roleId&&(await S.from("user_roles").update({admin_notes:a}).eq("id",v.roleId),Q.success("  "),m())},g=e.filter(v=>c==="teachers"?v.isTeacher:c==="non-teachers"?!v.isTeacher:!0).filter(v=>{var x,b;return v.full_name.includes(n)||((x=v.phone)==null?void 0:x.includes(n))||((b=v.email)==null?void 0:b.includes(n))||v.user_id.includes(n)}),w=e.filter(v=>v.isTeacher).length;return s?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:" ..."}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"bg-primary/10 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-primary",children:e.length}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]}),i.jsxs("div",{className:"bg-secondary/10 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-secondary",children:w}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:""})]}),i.jsxs("div",{className:"bg-accent/10 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-accent",children:e.length-w}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(jl,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(he,{placeholder:"   ...",value:n,onChange:v=>r(v.target.value),className:"pr-10"})]}),i.jsxs("select",{className:"rounded-lg border border-border px-2 bg-background text-xs",value:c,onChange:v=>u(v.target.value),children:[i.jsx("option",{value:"all",children:""}),i.jsx("option",{value:"teachers",children:" "}),i.jsx("option",{value:"non-teachers",children:" "})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.length," "]}),i.jsxs("div",{className:"space-y-2",children:[g.map(v=>i.jsx("div",{className:"bg-card rounded-xl p-3 border border-border cursor-pointer hover:border-primary/40 transition-colors",onClick:()=>{f(v),l(v.admin_notes??"")},children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center shrink-0 overflow-hidden",children:v.avatar_url?i.jsx("img",{src:v.avatar_url,alt:"",className:"h-full w-full object-cover"}):i.jsx(er,{className:"h-5 w-5 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:v.full_name}),v.isTeacher&&i.jsx(il,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:""})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:v.email||v.phone||" "})]}),v.isTeacher&&i.jsxs("div",{className:"flex gap-3 text-[10px] text-muted-foreground shrink-0",children:[i.jsxs("span",{className:"flex items-center gap-0.5",children:[i.jsx(Bs,{className:"h-3 w-3"}),v.lessonCount]}),i.jsxs("span",{className:"flex items-center gap-0.5",children:[i.jsx(Qa,{className:"h-3 w-3 text-yellow-500"}),v.avgRating||"-"]})]})]})},v.user_id)),g.length===0&&i.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"  "})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"font-bold text-base mb-3",children:"  "}),i.jsxs("div",{className:"space-y-2",children:[e.filter(v=>v.isTeacher).filter(v=>{var x,b;return v.full_name.includes(n)||((x=v.phone)==null?void 0:x.includes(n))||((b=v.email)==null?void 0:b.includes(n))}).map(v=>i.jsx("div",{className:"bg-card rounded-xl p-3 border border-primary/20 cursor-pointer hover:border-primary/40 transition-colors",onClick:()=>{f(v),l(v.admin_notes??"")},children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center shrink-0 overflow-hidden",children:v.avatar_url?i.jsx("img",{src:v.avatar_url,alt:"",className:"h-full w-full object-cover"}):i.jsx(er,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:v.full_name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:v.email||v.phone||" "})]}),i.jsxs("div",{className:"flex gap-3 text-[10px] text-muted-foreground shrink-0",children:[i.jsxs("span",{className:"flex items-center gap-0.5",children:[i.jsx(Bs,{className:"h-3 w-3"}),v.lessonCount]}),i.jsxs("span",{className:"flex items-center gap-0.5",children:[i.jsx(Qa,{className:"h-3 w-3 text-yellow-500"}),v.avgRating||"-"]}),i.jsxs("span",{className:"flex items-center gap-0.5",children:[i.jsx(Mi,{className:"h-3 w-3"}),v.bookingCount]})]})]})},v.user_id)),e.filter(v=>v.isTeacher).length===0&&i.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"  "})]})]}),i.jsx(yr,{open:!!d,onOpenChange:v=>{v||f(null)},children:i.jsx(nr,{className:"max-w-md max-h-[85vh] overflow-y-auto",children:d&&i.jsxs(i.Fragment,{children:[i.jsx(Mr,{children:i.jsxs(Lr,{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center shrink-0 overflow-hidden",children:d.avatar_url?i.jsx("img",{src:d.avatar_url,alt:"",className:"h-full w-full object-cover"}):i.jsx(er,{className:"h-5 w-5 text-muted-foreground"})}),i.jsxs("div",{children:[i.jsx("p",{children:d.full_name}),i.jsx("div",{className:"flex gap-1 mt-1",children:d.roles.map(v=>i.jsx(il,{variant:"outline",className:"text-[10px]",children:v==="admin"?"":v==="teacher"?"":v==="supervisor"?"":""},v))})]})]})}),i.jsxs("div",{className:"space-y-3 mt-2",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[d.email&&i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx($g,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"truncate",children:d.email})]}),i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(CM,{className:"h-3.5 w-3.5"}),i.jsx("span",{children:d.phone??" "})]}),i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(Mi,{className:"h-3.5 w-3.5"}),i.jsx("span",{children:new Date(d.created_at).toLocaleDateString("ar")})]})]}),d.bio&&i.jsxs("div",{className:"bg-muted/50 rounded-lg p-2.5",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:" "}),i.jsx("p",{className:"text-sm",children:d.bio})]}),d.isTeacher&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-primary/5 rounded-lg p-3 text-center",children:[i.jsx(Bs,{className:"h-4 w-4 mx-auto mb-1 text-primary"}),i.jsx("p",{className:"text-base font-bold",children:d.lessonCount}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:""})]}),i.jsxs("div",{className:"bg-secondary/5 rounded-lg p-3 text-center",children:[i.jsx(Mi,{className:"h-4 w-4 mx-auto mb-1 text-secondary"}),i.jsx("p",{className:"text-base font-bold",children:d.bookingCount}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:""})]}),i.jsxs("div",{className:"bg-yellow-500/5 rounded-lg p-3 text-center",children:[i.jsx(Qa,{className:"h-4 w-4 mx-auto mb-1 text-yellow-500"}),i.jsx("p",{className:"text-base font-bold",children:d.avgRating||"-"}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:""})]}),i.jsxs("div",{className:"bg-green-500/5 rounded-lg p-3 text-center",children:[i.jsx(Dg,{className:"h-4 w-4 mx-auto mb-1 text-green-600"}),i.jsxs("p",{className:"text-base font-bold",children:[d.totalIncome," ."]}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:""})]})]}),d.isTeacher&&i.jsxs("div",{children:[i.jsx(re,{className:"text-xs mb-1 block",children:" "}),i.jsx(fr,{value:a,onChange:v=>l(v.target.value),placeholder:"    ...",rows:3}),i.jsxs(te,{onClick:()=>y(d),variant:"outline",size:"sm",className:"mt-2 w-full",children:[i.jsx(Fg,{className:"h-3 w-3 ml-1"})," "]})]}),i.jsx(te,{variant:d.isTeacher?"destructive":"hero",className:"w-full",onClick:()=>p(d),children:d.isTeacher?i.jsxs(i.Fragment,{children:[i.jsx(IM,{className:"h-4 w-4 ml-1"}),"  "]}):i.jsxs(i.Fragment,{children:[i.jsx(ak,{className:"h-4 w-4 ml-1"})," "]})})]})]})})})]})}const e1={pending:{label:" ",color:"bg-yellow-100 text-yellow-800 border-yellow-300"},accepted:{label:"",color:"bg-blue-100 text-blue-800 border-blue-300"},scheduled:{label:"",color:"bg-indigo-100 text-indigo-800 border-indigo-300"},completed:{label:"",color:"bg-green-100 text-green-800 border-green-300"},cancelled:{label:"",color:"bg-red-100 text-red-800 border-red-300"}};function SH(){const{format:e}=ei(),[t,n]=h.useState([]),[r,s]=h.useState({}),[o,a]=h.useState({}),[l,c]=h.useState({}),[u,d]=h.useState(!0),[f,m]=h.useState(""),[p,y]=h.useState("all"),[g,w]=h.useState(null),[v,x]=h.useState(""),[b,_]=h.useState(""),[N,C]=h.useState(!1);h.useEffect(()=>{k()},[]);const k=async()=>{d(!0);const{data:O}=await S.from("bookings").select("*").order("created_at",{ascending:!1}),U=O??[];n(U);const P=[...new Set(U.flatMap(F=>[F.student_id,F.teacher_id]))],K=[...new Set(U.map(F=>F.lesson_id))];if(P.length>0){const{data:F}=await S.from("profiles").select("user_id, full_name, phone").in("user_id",P),W={};F==null||F.forEach(R=>{W[R.user_id]=R}),s(W)}if(K.length>0){const{data:F}=await S.from("lessons").select("id, title, price, duration_minutes, lesson_type, total_sessions, expected_students").in("id",K),W={};F==null||F.forEach(R=>{W[R.id]=R}),a(W)}const D=U.map(F=>F.id);if(D.length>0){const{data:F}=await S.from("invoices").select("id, booking_id, amount, status, payment_method, created_at").in("booking_id",D).order("created_at",{ascending:!0}),W={};(F??[]).forEach(R=>{W[R.booking_id]||(W[R.booking_id]=[]),W[R.booking_id].push(R)}),c(W)}d(!1)},I=async()=>{if(!g)return;C(!0);const O={};if(b&&(O.status=b),v&&(O.scheduled_at=new Date(v).toISOString()),Object.keys(O).length===0){Q.error("  "),C(!1);return}b==="completed"&&(O.zoom_join_url=null,O.zoom_start_url=null,O.zoom_meeting_id=null);const{error:U}=await S.from("bookings").update(O).eq("id",g.id);U?Q.error("  "):(Q.success("   "),w(null),x(""),_(""),k()),C(!1)},$=t.filter(O=>{var W,R,M;const U=((W=r[O.student_id])==null?void 0:W.full_name)||"",P=((R=r[O.teacher_id])==null?void 0:R.full_name)||"",K=((M=o[O.lesson_id])==null?void 0:M.title)||"",D=!f||U.includes(f)||P.includes(f)||K.includes(f),F=p==="all"||O.status===p;return D&&F});return u?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"  ..."}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(jl,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(he,{placeholder:"   ...",value:f,onChange:O=>m(O.target.value),className:"pr-10"})]}),i.jsxs(gt,{value:p,onValueChange:y,children:[i.jsx(ht,{className:"w-full sm:w-40",children:i.jsx(vt,{placeholder:""})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"all",children:""}),i.jsx(Le,{value:"pending",children:" "}),i.jsx(Le,{value:"scheduled",children:""}),i.jsx(Le,{value:"completed",children:""}),i.jsx(Le,{value:"cancelled",children:""}),i.jsx(Le,{value:"accepted",children:""})]})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[$.length," "]}),i.jsxs("div",{className:"space-y-2",children:[$.map(O=>{const U=r[O.student_id],P=r[O.teacher_id],K=o[O.lesson_id],D=e1[O.status]||{label:O.status,color:"bg-muted"},F=(K==null?void 0:K.lesson_type)==="group",W=O.is_installment,R=l[O.id]||[];return i.jsx("div",{className:"bg-card rounded-xl p-4 border border-border hover:border-primary/40 transition-colors cursor-pointer",onClick:()=>{w(O),_(O.status),x(O.scheduled_at?new Date(O.scheduled_at).toISOString().slice(0,16):"")},children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("p",{className:"font-semibold text-sm",children:(K==null?void 0:K.title)||" "}),i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border font-medium ${D.color}`,children:D.label}),F&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-purple-100 text-purple-800 border-purple-300",children:" "}),W&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-indigo-100 text-indigo-800 border-indigo-300",children:""})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[i.jsxs("span",{children:[": ",(U==null?void 0:U.full_name)||""]}),i.jsxs("span",{children:[": ",(P==null?void 0:P.full_name)||""]}),W&&R.length>0&&i.jsxs("span",{className:"text-indigo-600 font-medium",children:[R.filter(M=>M.status==="paid").length,"/",O.total_installments||"?"," "]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:e(O.amount)}),i.jsx("span",{children:O.payment_method==="paypal"?"PayPal":O.payment_method==="bank_transfer"?" ":""}),i.jsx("span",{children:new Date(O.created_at).toLocaleDateString("ar")})]}),O.scheduled_at&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary",children:[i.jsx(Mi,{className:"h-3 w-3"}),i.jsx("span",{children:new Date(O.scheduled_at).toLocaleString("ar")})]})]}),i.jsx(eh,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-1"})]})},O.id)}),$.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"  "})]}),i.jsx(yr,{open:!!g,onOpenChange:O=>{O||(w(null),_(""),x(""))},children:i.jsx(nr,{className:"max-w-md max-h-[85vh] overflow-y-auto",children:g&&(()=>{const O=g,U=r[O.student_id],P=r[O.teacher_id],K=o[O.lesson_id],D=e1[O.status]||{label:O.status,color:"bg-muted"},F=(K==null?void 0:K.lesson_type)==="group",W=O.is_installment,R=l[O.id]||[],M={pending:{label:" ",color:"bg-yellow-100 text-yellow-800 border-yellow-300"},paid:{label:"",color:"bg-green-100 text-green-800 border-green-300"},rejected:{label:"",color:"bg-red-100 text-red-800 border-red-300"}};return i.jsxs(i.Fragment,{children:[i.jsx(Mr,{children:i.jsx(Lr,{className:"text-right",children:" "})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("p",{className:"font-semibold text-sm",children:(K==null?void 0:K.title)||" "}),F&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-purple-100 text-purple-800 border-purple-300",children:" "}),W&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-indigo-100 text-indigo-800 border-indigo-300",children:""})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-3 text-xs text-muted-foreground",children:[i.jsxs("span",{children:[K==null?void 0:K.duration_minutes," "]}),i.jsx("span",{children:e(O.amount)}),i.jsx("span",{children:(K==null?void 0:K.lesson_type)==="tutoring"?" ":(K==null?void 0:K.lesson_type)==="skills"?"":(K==null?void 0:K.lesson_type)==="group"?" ":" "})]}),F&&i.jsxs("div",{className:"flex flex-wrap gap-x-3 text-xs text-muted-foreground mt-1 pt-1 border-t border-border",children:[(K==null?void 0:K.total_sessions)&&i.jsxs("span",{children:[" : ",K.total_sessions]}),(K==null?void 0:K.expected_students)&&i.jsxs("span",{children:[" : ",K.expected_students," "]}),(K==null?void 0:K.price)&&i.jsxs("span",{children:[" : ",e(K.price)]}),W&&i.jsxs("span",{children:[" : ",O.paid_sessions||0,"/",(K==null?void 0:K.total_sessions)||"?"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-muted/30 rounded-lg p-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:""}),i.jsx("p",{className:"font-medium text-xs",children:(U==null?void 0:U.full_name)||""}),(U==null?void 0:U.phone)&&i.jsx("p",{className:"text-[10px] text-muted-foreground",dir:"ltr",children:U.phone})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:""}),i.jsx("p",{className:"font-medium text-xs",children:(P==null?void 0:P.full_name)||""}),(P==null?void 0:P.phone)&&i.jsx("p",{className:"text-[10px] text-muted-foreground",dir:"ltr",children:P.phone})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-medium",children:" "}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[i.jsx("span",{className:"bg-muted px-2 py-1 rounded",children:O.payment_method==="paypal"?"PayPal":O.payment_method==="bank_transfer"?" ":" "}),i.jsx("span",{className:"bg-muted px-2 py-1 rounded",children:e(O.amount)})]}),O.payment_receipt_url&&i.jsxs("a",{href:O.payment_receipt_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-primary hover:underline",children:[i.jsx(ey,{className:"h-3 w-3"}),"  "]})]}),R.length>0&&(W||R.length>1)&&i.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 space-y-2",children:[i.jsxs("p",{className:"text-xs font-semibold text-indigo-800",children:["  (",R.length," )"]}),i.jsx("div",{className:"space-y-1.5",children:R.map((L,X)=>{const le=M[L.status]||{label:L.status,color:"bg-muted"};return i.jsxs("div",{className:"flex items-center justify-between text-xs p-2 rounded-lg bg-white/60",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"font-semibold text-indigo-700",children:[" ",X+1]}),i.jsx("span",{className:"text-muted-foreground",children:L.payment_method==="paypal"?"PayPal":" "})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:e(L.amount)}),i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full border ${le.color}`,children:le.label}),i.jsx("span",{className:"text-muted-foreground",children:new Date(L.created_at).toLocaleDateString("ar")})]})]},L.id)})}),i.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-indigo-200 text-xs",children:[i.jsx("span",{className:"font-semibold text-indigo-800",children:" "}),i.jsx("span",{className:"font-bold text-indigo-900",children:e(R.filter(L=>L.status==="paid").reduce((L,X)=>L+X.amount,0))})]})]}),(O.zoom_join_url||O.zoom_start_url)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-medium",children:" "}),i.jsxs("div",{className:"flex flex-col gap-1",children:[O.zoom_start_url&&i.jsxs("a",{href:O.zoom_start_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-primary hover:underline",children:[i.jsx(ob,{className:"h-3 w-3"}),"   ()"]}),O.zoom_join_url&&i.jsxs("a",{href:O.zoom_join_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-primary hover:underline",children:[i.jsx(ob,{className:"h-3 w-3"}),"  ()"]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs font-medium",children:" "}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border font-medium ${D.color}`,children:D.label})]}),i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[i.jsxs("p",{children:[" : ",new Date(O.created_at).toLocaleString("ar")]}),O.scheduled_at&&i.jsxs("p",{children:[" : ",new Date(O.scheduled_at).toLocaleString("ar")]})]}),i.jsxs("div",{className:"border-t border-border pt-4 space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsxs(gt,{value:b,onValueChange:_,children:[i.jsx(ht,{children:i.jsx(vt,{})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"pending",children:" "}),i.jsx(Le,{value:"accepted",children:""}),i.jsx(Le,{value:"scheduled",children:""}),i.jsx(Le,{value:"completed",children:""}),i.jsx(Le,{value:"cancelled",children:""})]})]})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{type:"datetime-local",value:v,onChange:L=>x(L.target.value)})]}),i.jsx(te,{onClick:I,disabled:N,className:"w-full",variant:"hero",children:N?" ...":" "})]})]})]})})()})})]})}const Ld={pending:{label:" ",color:"bg-yellow-100 text-yellow-800 border-yellow-300"},paid:{label:"",color:"bg-green-100 text-green-800 border-green-300"},rejected:{label:"",color:"bg-red-100 text-red-800 border-red-300"}};function NH(){const{format:e}=ei(),[t,n]=h.useState([]),[r,s]=h.useState({}),[o,a]=h.useState({}),[l,c]=h.useState({}),[u,d]=h.useState({}),[f,m]=h.useState({}),[p,y]=h.useState(!0),[g,w]=h.useState(""),[v,x]=h.useState("all"),[b,_]=h.useState(""),[N,C]=h.useState("all"),[k,I]=h.useState("all"),[$,O]=h.useState(null),[U,P]=h.useState(""),[K,D]=h.useState(!1),[F,W]=h.useState(null),[R,M]=h.useState(null),L=h.useRef(null);h.useEffect(()=>{le(),X()},[]);const X=async()=>{try{const{data:A,error:Y}=await S.functions.invoke("get-user-emails");A!=null&&A.emails&&a(A.emails)}catch{}},le=async()=>{y(!0);const{data:A}=await S.from("invoices").select("*").order("created_at",{ascending:!1}),Y=A??[];n(Y);const ee=[...new Set(Y.flatMap(ye=>[ye.student_id,ye.teacher_id]))],H=[...new Set(Y.map(ye=>ye.lesson_id))],ge=[...new Set(Y.map(ye=>ye.booking_id))];if(ee.length>0){const{data:ye}=await S.from("profiles").select("user_id, full_name, phone").in("user_id",ee),Ae={};ye==null||ye.forEach(Ge=>{Ae[Ge.user_id]=Ge}),s(Ae)}if(H.length>0){const{data:ye}=await S.from("lessons").select("id, title, price, duration_minutes, lesson_type, total_sessions, expected_students, curricula(name), grade_levels(name), subjects(name)").in("id",H),Ae={};ye==null||ye.forEach(Ge=>{Ae[Ge.id]=Ge}),c(Ae)}if(ge.length>0){const{data:ye}=await S.from("bookings").select("id, is_installment, total_installments, paid_sessions, status, amount").in("id",ge),Ae={};ye==null||ye.forEach(Ge=>{Ae[Ge.id]=Ge}),d(Ae)}const ke={};Y.forEach(ye=>{ke[ye.booking_id]||(ke[ye.booking_id]=[]),ke[ye.booking_id].push(ye)}),m(ke),y(!1)},E=async()=>{if(!$)return;D(!0);const{error:A}=await S.from("invoices").update({status:"paid",admin_notes:U||null}).eq("id",$.id);if(A)Q.error("  ");else{const Y=l[$.lesson_id],ee=u[$.booking_id],ge={status:(Y==null?void 0:Y.lesson_type)==="group"?"scheduled":"accepted"};if(ee!=null&&ee.is_installment&&(Y==null?void 0:Y.lesson_type)==="group"){const Ae=Y.total_sessions||0;let Ge=2;Ae>=11&&Ae<=20?Ge=4:Ae>=21&&Ae<=50&&(Ge=6);const bt=Math.ceil(Ae/Ge),Ke=(ee.paid_sessions||0)+bt;ge.paid_sessions=Ke;const{data:pt}=await S.from("course_installments").select("id").eq("booking_id",$.booking_id).eq("status","pending").order("installment_number").limit(1);pt&&pt.length>0&&await S.from("course_installments").update({status:"paid",paid_at:new Date().toISOString()}).eq("id",pt[0].id)}await S.from("bookings").update(ge).eq("id",$.booking_id);const{data:ke}=await S.from("conversations").select("id").eq("booking_id",$.booking_id).maybeSingle();ke||await S.from("conversations").insert({student_id:$.student_id,teacher_id:$.teacher_id,booking_id:$.booking_id});const ye=(Y==null?void 0:Y.lesson_type)==="group"?"       ":"       ";Q.success(ye),O(null),P(""),le()}D(!1)},V=async()=>{if(!$)return;if(!U.trim()){Q.error("     ");return}D(!0);const{error:A}=await S.from("invoices").update({status:"rejected",admin_notes:U}).eq("id",$.id);A?Q.error("  "):(await S.from("bookings").update({status:"cancelled"}).eq("id",$.booking_id),Q.success("  "),O(null),P(""),le()),D(!1)},q=A=>{M(A),setTimeout(()=>{if(L.current){const Y=window.open("","_blank");if(!Y)return;const ee=L.current.innerHTML;Y.document.write(`
          <!DOCTYPE html>
          <html dir="rtl" lang="ar">
          <head>
            <meta charset="utf-8" />
            <title> #${A.id.slice(0,8)}</title>
            <style>
              @page { size: A4; margin: 20mm; }
              * { box-sizing: border-box; margin: 0; padding: 0; }
              body { font-family: 'Segoe UI', Tahoma, Arial, sans-serif; direction: rtl; color: #1a1a1a; font-size: 14px; line-height: 1.6; }
              .invoice-page { width: 100%; max-width: 210mm; min-height: 297mm; margin: 0 auto; padding: 20mm; }
              .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid #2563eb; padding-bottom: 16px; margin-bottom: 24px; }
              .header h1 { font-size: 28px; color: #2563eb; }
              .header .invoice-num { font-size: 13px; color: #666; }
              .section { margin-bottom: 20px; }
              .section-title { font-size: 15px; font-weight: 700; color: #2563eb; border-bottom: 1px solid #e5e7eb; padding-bottom: 6px; margin-bottom: 10px; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px 24px; }
              .info-row { display: flex; gap: 8px; }
              .info-label { color: #666; min-width: 100px; }
              .info-value { font-weight: 600; }
              table { width: 100%; border-collapse: collapse; margin-top: 8px; }
              th, td { border: 1px solid #e5e7eb; padding: 10px 14px; text-align: right; }
              th { background: #f0f4ff; font-weight: 700; color: #2563eb; }
              .total-row td { font-weight: 700; font-size: 16px; background: #f8fafc; }
              .status-badge { display: inline-block; padding: 4px 16px; border-radius: 20px; font-size: 13px; font-weight: 600; }
              .status-paid { background: #dcfce7; color: #166534; }
              .status-pending { background: #fef9c3; color: #854d0e; }
              .status-rejected { background: #fee2e2; color: #991b1b; }
              .footer { margin-top: 40px; text-align: center; color: #999; font-size: 12px; border-top: 1px solid #e5e7eb; padding-top: 16px; }
              @media print { body { print-color-adjust: exact; -webkit-print-color-adjust: exact; } }
            </style>
          </head>
          <body>
            ${ee}
          </body>
          </html>
        `),Y.document.close(),Y.focus(),setTimeout(()=>{Y.print()},300)}M(null)},100)},J=t.filter(A=>{var Ke,pt,z;const Y=((Ke=r[A.student_id])==null?void 0:Ke.full_name)||"",ee=((pt=r[A.teacher_id])==null?void 0:pt.full_name)||"",H=((z=l[A.lesson_id])==null?void 0:z.title)||"",ge=!g||Y.includes(g)||ee.includes(g)||H.includes(g),ke=v==="all"||A.status===v,ye=new Date(A.created_at),Ae=!b||ye.getDate()===parseInt(b),Ge=N==="all"||ye.getMonth()+1===parseInt(N),bt=k==="all"||ye.getFullYear()===parseInt(k);return ge&&ke&&Ae&&Ge&&bt});if(p)return i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"  ..."});const oe=A=>{var Ae,Ge;const Y=r[A.student_id],ee=r[A.teacher_id],H=l[A.lesson_id],ge=o[A.student_id]||"",ke=Ld[A.status]||{label:A.status},ye=A.status==="paid"?"status-paid":A.status==="rejected"?"status-rejected":"status-pending";return i.jsxs("div",{className:"invoice-page",children:[i.jsxs("div",{className:"header",children:[i.jsxs("div",{children:[i.jsx("h1",{children:""}),i.jsxs("div",{className:"invoice-num",children:[" : ",A.id.slice(0,8).toUpperCase()]})]}),i.jsxs("div",{style:{textAlign:"left"},children:[i.jsxs("div",{style:{fontSize:"13px",color:"#666"},children:[": ",new Date(A.created_at).toLocaleDateString("ar")]}),i.jsx("span",{className:`status-badge ${ye}`,children:ke.label})]})]}),i.jsxs("div",{className:"section",children:[i.jsx("div",{className:"section-title",children:" "}),i.jsxs("div",{className:"info-grid",children:[i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:":"}),i.jsx("span",{className:"info-value",children:(Y==null?void 0:Y.full_name)||""})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:" :"}),i.jsx("span",{className:"info-value",dir:"ltr",children:ge})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:" :"}),i.jsx("span",{className:"info-value",dir:"ltr",children:(Y==null?void 0:Y.phone)||""})]})]})]}),i.jsxs("div",{className:"section",children:[i.jsx("div",{className:"section-title",children:" "}),i.jsxs("div",{className:"info-grid",children:[i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:":"}),i.jsx("span",{className:"info-value",children:(ee==null?void 0:ee.full_name)||""})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:" :"}),i.jsx("span",{className:"info-value",dir:"ltr",children:(ee==null?void 0:ee.phone)||""})]})]})]}),i.jsxs("div",{className:"section",children:[i.jsx("div",{className:"section-title",children:" "}),i.jsxs("table",{children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""}),i.jsx("th",{children:""})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:(H==null?void 0:H.title)||""}),i.jsx("td",{children:(H==null?void 0:H.lesson_type)==="tutoring"?" ":(H==null?void 0:H.lesson_type)==="skills"?"":" "}),i.jsxs("td",{children:[(H==null?void 0:H.duration_minutes)||""," "]}),i.jsx("td",{children:((Ae=H==null?void 0:H.curricula)==null?void 0:Ae.name)||""}),i.jsx("td",{children:((Ge=H==null?void 0:H.subjects)==null?void 0:Ge.name)||""}),i.jsx("td",{children:e(A.amount)})]}),i.jsxs("tr",{className:"total-row",children:[i.jsx("td",{colSpan:5,children:""}),i.jsx("td",{children:e(A.amount)})]})]})]})]}),i.jsxs("div",{className:"section",children:[i.jsx("div",{className:"section-title",children:" "}),i.jsxs("div",{className:"info-grid",children:[i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:" :"}),i.jsx("span",{className:"info-value",children:A.payment_method==="paypal"?"PayPal":A.payment_method==="bank_transfer"?" ":" "})]}),i.jsxs("div",{className:"info-row",children:[i.jsx("span",{className:"info-label",children:" :"}),i.jsx("span",{className:"info-value",children:new Date(A.created_at).toLocaleString("ar")})]})]})]}),A.admin_notes&&i.jsxs("div",{className:"section",children:[i.jsx("div",{className:"section-title",children:""}),i.jsx("p",{children:A.admin_notes})]}),i.jsx("div",{className:"footer",children:"    "})]})};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-yellow-700",children:t.filter(A=>A.status==="pending").length}),i.jsx("p",{className:"text-[10px] text-yellow-600",children:" "})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-green-700",children:t.filter(A=>A.status==="paid").length}),i.jsx("p",{className:"text-[10px] text-green-600",children:""})]}),i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-lg font-bold text-red-700",children:t.filter(A=>A.status==="rejected").length}),i.jsx("p",{className:"text-[10px] text-red-600",children:""})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(jl,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(he,{placeholder:"   ...",value:g,onChange:A=>w(A.target.value),className:"pr-10"})]}),i.jsxs(gt,{value:v,onValueChange:x,children:[i.jsx(ht,{className:"w-full sm:w-40",children:i.jsx(vt,{placeholder:""})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"all",children:" "}),i.jsx(Le,{value:"pending",children:" "}),i.jsx(Le,{value:"paid",children:""}),i.jsx(Le,{value:"rejected",children:""})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx(he,{type:"number",min:"1",max:"31",placeholder:" (1-31)",value:b,onChange:A=>_(A.target.value),className:"w-full sm:w-32"}),i.jsxs(gt,{value:N,onValueChange:C,children:[i.jsx(ht,{className:"w-full sm:w-36",children:i.jsx(vt,{placeholder:""})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"all",children:" "}),["","","","","","","","","","","",""].map((A,Y)=>i.jsx(Le,{value:String(Y+1),children:A},Y))]})]}),i.jsxs(gt,{value:k,onValueChange:I,children:[i.jsx(ht,{className:"w-full sm:w-32",children:i.jsx(vt,{placeholder:""})}),i.jsxs(ft,{children:[i.jsx(Le,{value:"all",children:" "}),Array.from(new Set(t.map(A=>new Date(A.created_at).getFullYear()))).sort((A,Y)=>Y-A).map(A=>i.jsx(Le,{value:String(A),children:A},A))]})]})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[J.length," "]}),i.jsxs("div",{className:"space-y-2",children:[J.map(A=>{const Y=r[A.student_id],ee=r[A.teacher_id],H=l[A.lesson_id],ge=u[A.booking_id],ke=Ld[A.status]||{label:A.status,color:"bg-muted"},ye=(ge==null?void 0:ge.is_installment)||(H==null?void 0:H.lesson_type)==="group",Ae=(f[A.booking_id]||[]).length;return i.jsx("div",{className:"bg-card rounded-xl p-4 border border-border hover:border-primary/40 transition-colors cursor-pointer",onClick:()=>{O(A),P(A.admin_notes||"")},children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx(Dg,{className:"h-4 w-4 text-primary shrink-0"}),i.jsx("p",{className:"font-semibold text-sm",children:(H==null?void 0:H.title)||" "}),i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border font-medium ${ke.color}`,children:ke.label}),ye&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-indigo-100 text-indigo-800 border-indigo-300",children:" "}),(H==null?void 0:H.lesson_type)==="group"&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-purple-100 text-purple-800 border-purple-300",children:" "})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[i.jsxs("span",{children:[": ",(Y==null?void 0:Y.full_name)||""]}),i.jsxs("span",{children:[": ",(ee==null?void 0:ee.full_name)||""]}),ye&&Ae>1&&i.jsxs("span",{className:"text-indigo-600 font-medium",children:[Ae," "]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:e(A.amount)}),i.jsx("span",{children:A.payment_method==="paypal"?"PayPal":A.payment_method==="bank_transfer"?" ":""}),i.jsx("span",{children:new Date(A.created_at).toLocaleDateString("ar")})]})]}),A.status==="pending"&&i.jsx(Xx,{className:"h-4 w-4 text-yellow-500 shrink-0 mt-1 animate-pulse"})]})},A.id)}),J.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"  "})]}),i.jsx(yr,{open:!!$,onOpenChange:A=>{A||(O(null),P(""))},children:i.jsx(nr,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:$&&(()=>{var bt,Ke,pt;const A=$,Y=r[A.student_id],ee=r[A.teacher_id],H=l[A.lesson_id],ge=u[A.booking_id],ke=o[A.student_id]||"",ye=Ld[A.status]||{label:A.status,color:"bg-muted"},Ae=(ge==null?void 0:ge.is_installment)||(H==null?void 0:H.lesson_type)==="group",Ge=(f[A.booking_id]||[]).sort((z,pe)=>new Date(z.created_at).getTime()-new Date(pe.created_at).getTime());return i.jsxs(i.Fragment,{children:[i.jsx(Mr,{children:i.jsxs(Lr,{className:"text-right flex items-center gap-2",children:[i.jsx(Dg,{className:"h-5 w-5 text-primary"})," #",A.id.slice(0,8)]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:" "}),i.jsx("span",{className:`text-xs px-3 py-1 rounded-full border font-medium ${ye.color}`,children:ye.label})]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1",children:[i.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:" "}),i.jsx("p",{className:"text-sm font-medium",children:(Y==null?void 0:Y.full_name)||""}),i.jsx("p",{className:"text-xs text-muted-foreground",dir:"ltr",children:ke}),(Y==null?void 0:Y.phone)&&i.jsx("p",{className:"text-xs text-muted-foreground",dir:"ltr",children:Y.phone})]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1",children:[i.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:" "}),i.jsx("p",{className:"text-sm font-medium",children:(ee==null?void 0:ee.full_name)||""}),(ee==null?void 0:ee.phone)&&i.jsx("p",{className:"text-xs text-muted-foreground",dir:"ltr",children:ee.phone})]}),i.jsxs("div",{className:"bg-primary/5 rounded-lg p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:" "}),Ae&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-indigo-100 text-indigo-800 border-indigo-300",children:" "}),(H==null?void 0:H.lesson_type)==="group"&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border font-medium bg-purple-100 text-purple-800 border-purple-300",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold",children:(H==null?void 0:H.title)||""}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:": "}),i.jsx("span",{className:"font-medium",children:(H==null?void 0:H.lesson_type)==="tutoring"?" ":(H==null?void 0:H.lesson_type)==="skills"?"":(H==null?void 0:H.lesson_type)==="group"?" ":" "})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:": "}),i.jsxs("span",{className:"font-medium",children:[H==null?void 0:H.duration_minutes," "]})]}),(H==null?void 0:H.lesson_type)==="group"&&(H==null?void 0:H.total_sessions)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:" : "}),i.jsxs("span",{className:"font-medium",children:[H.total_sessions," "]})]}),(H==null?void 0:H.lesson_type)==="group"&&(H==null?void 0:H.expected_students)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:" : "}),i.jsxs("span",{className:"font-medium",children:[H.expected_students," "]})]}),(H==null?void 0:H.lesson_type)==="group"&&(H==null?void 0:H.price)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"  : "}),i.jsx("span",{className:"font-medium",children:e(H.price)})]}),((bt=H==null?void 0:H.curricula)==null?void 0:bt.name)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:": "}),i.jsx("span",{className:"font-medium",children:H.curricula.name})]}),((Ke=H==null?void 0:H.grade_levels)==null?void 0:Ke.name)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:": "}),i.jsx("span",{className:"font-medium",children:H.grade_levels.name})]}),((pt=H==null?void 0:H.subjects)==null?void 0:pt.name)&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-muted-foreground",children:": "}),i.jsx("span",{className:"font-medium",children:H.subjects.name})]})]})]}),Ae&&Ge.length>1&&i.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 space-y-2",children:[i.jsxs("p",{className:"text-xs font-semibold text-indigo-800",children:["  (",Ge.length," )"]}),i.jsx("div",{className:"space-y-1.5",children:Ge.map((z,pe)=>{const Fe=Ld[z.status]||{label:z.status,color:"bg-muted"},be=z.id===A.id;return i.jsxs("div",{className:`flex items-center justify-between text-xs p-2 rounded-lg ${be?"bg-indigo-100 border border-indigo-300":"bg-white/60"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"font-semibold text-indigo-700",children:[" ",pe+1]}),be&&i.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-indigo-200 text-indigo-800 rounded",children:""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:e(z.amount)}),i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full border ${Fe.color}`,children:Fe.label}),i.jsx("span",{className:"text-muted-foreground",children:new Date(z.created_at).toLocaleDateString("ar")})]})]},z.id)})}),i.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-indigo-200 text-xs",children:[i.jsx("span",{className:"font-semibold text-indigo-800",children:" "}),i.jsx("span",{className:"font-bold text-indigo-900",children:e(Ge.filter(z=>z.status==="paid").reduce((z,pe)=>z+pe.amount,0))})]})]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:" "}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm",children:""}),i.jsx("span",{className:"text-lg font-bold text-primary",children:e(A.amount)})]}),i.jsxs("div",{className:"flex justify-between items-center text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:" "}),i.jsx("span",{children:A.payment_method==="paypal"?"PayPal":A.payment_method==="bank_transfer"?" ":" "})]}),i.jsxs("div",{className:"flex justify-between items-center text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:" "}),i.jsx("span",{children:new Date(A.created_at).toLocaleString("ar")})]})]}),A.payment_receipt_url&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-xs font-semibold text-muted-foreground flex items-center gap-1",children:[i.jsx(ey,{className:"h-3 w-3"})," "]}),i.jsx("div",{className:"border border-border rounded-lg overflow-hidden cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>W(A.payment_receipt_url),children:i.jsx("img",{src:A.payment_receipt_url,alt:" ",className:"w-full max-h-48 object-contain bg-muted"})}),i.jsx("a",{href:A.payment_receipt_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline",children:"    "})]}),A.status==="pending"?i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(fr,{placeholder:"  (   )...",value:U,onChange:z=>P(z.target.value),rows:2})]}):A.admin_notes&&i.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-1",children:" "}),i.jsx("p",{className:"text-sm",children:A.admin_notes})]}),i.jsxs("div",{className:"flex gap-2 pt-2 flex-wrap",children:[i.jsxs(te,{onClick:z=>{z.stopPropagation(),q(A)},variant:"outline",size:"sm",children:[i.jsx(EM,{className:"h-4 w-4 ml-1"})," "]}),A.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsxs(te,{onClick:E,disabled:K,className:"flex-1",variant:"hero",children:[i.jsx(Hn,{className:"h-4 w-4 ml-1"}),K?"...":""]}),i.jsxs(te,{onClick:V,disabled:K,variant:"destructive",className:"flex-1",children:[i.jsx(wM,{className:"h-4 w-4 ml-1"}),K?"...":""]})]})]})]})]})})()})}),i.jsx(yr,{open:!!F,onOpenChange:A=>{A||W(null)},children:i.jsx(nr,{className:"max-w-2xl",children:F&&i.jsx("img",{src:F,alt:" ",className:"w-full object-contain"})})}),R&&i.jsx("div",{style:{position:"absolute",left:"-9999px",top:0},children:i.jsx("div",{ref:L,children:oe(R)})})]})}function kH(){var L0,$0,F0;const{user:e,loading:t,isAdmin:n,isSupervisor:r,signOut:s}=wn(),{format:o,exchangeRate:a,currency:l}=ei(),[c,u]=h.useState(!0),d=Xi(),[f,m]=h.useState({students:0,teachers:0,lessons:0,income:0,platformEarnings:0,teacherEarnings:0}),[p,y]=h.useState([]),[g,w]=h.useState([]),[v,x]=h.useState([]),[b,_]=h.useState([]),[N,C]=h.useState([]),[k,I]=h.useState([]),[$,O]=h.useState([]),[U,P]=h.useState([]),[K,D]=h.useState(null),[F,W]=h.useState(""),[R,M]=h.useState(""),[L,X]=h.useState(""),[le,E]=h.useState(""),[V,q]=h.useState(!1),[J,oe]=h.useState(""),[A,Y]=h.useState(""),[ee,H]=h.useState(""),[ge,ke]=h.useState(""),[ye,Ae]=h.useState(""),[Ge,bt]=h.useState("all"),[Ke,pt]=h.useState(!1),[z,pe]=h.useState(!1),[Fe,be]=h.useState(!1),[Ze,ut]=h.useState(""),[Je,nt]=h.useState(""),[Dt,Rn]=h.useState(""),[Ie,_t]=h.useState(""),[cn,zn]=h.useState(""),[ae,_e]=h.useState(""),[G,Ne]=h.useState([]),[et,at]=h.useState(!1),[qe,dt]=h.useState({paypal:{enabled:!0,email:"",client_id:"",sandbox:!0},bank_transfer:{enabled:!0,account_number:"",account_holder:"",branch:"",bank_logo_url:""}}),[un,rn]=h.useState("USD"),[Ue,kt]=h.useState("1"),[Oe,tt]=h.useState(!1),[ot,bn]=h.useState("20"),[Yt,sr]=h.useState([]),[T,ue]=h.useState({}),[Ee,Be]=h.useState([]),[Te,Qe]=h.useState({month:"",name:"",status:"",amount:""}),[Pe,Ct]=h.useState(new Date().getFullYear().toString()),[_r,ls]=h.useState({email:"",phone:"",whatsapp:""}),[ir,Ps]=h.useState([]),[cs,mp]=h.useState(["announcements","promo_banners","lesson_types","offers"]),[gp,T0]=h.useState({tutoring:!0,bag_review:!0,group:!0,skills:!0}),[jr,ta]=h.useState({recording_mode:"manual",cloud_account_id:"",cloud_client_id:"",cloud_client_secret:""}),[na,Hu]=h.useState({enabled:!1,app_id:"",rest_api_key:""}),[Vt,or]=h.useState({body_font_size:"16",body_font_color:"#1a1a2e",heading_font_size:"20",heading_font_color:"#1a1a2e",primary_color:"#2563eb",secondary_color:"#e97a1f",background_color:"#f5f7fa"}),[ni,qn]=h.useState("curricula"),[sn,Rs]=h.useState("design"),[vp,Wn]=h.useState(new Set(["curricula"])),[P0,EA]=h.useState(0),[Gu,TA]=h.useState(0),[Yu,PA]=h.useState(0),[R0,RA]=h.useState([]),[AA,A0]=h.useState(!1);h.useEffect(()=>{if(t)return;if(!e||!n&&!r){d("/");return}u(!0),ar().finally(()=>u(!1));const j=S.channel("admin-dash-realtime").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>{ar(),ra()}).on("postgres_changes",{event:"*",schema:"public",table:"invoices"},()=>ar()).on("postgres_changes",{event:"*",schema:"public",table:"withdrawal_requests"},()=>ar()).on("postgres_changes",{event:"*",schema:"public",table:"lessons"},()=>{ar(),ra()}).on("postgres_changes",{event:"*",schema:"public",table:"group_session_schedules"},()=>{ra()}).subscribe();return()=>{S.removeChannel(j)}},[e,t,n,r]),h.useEffect(()=>{const j=setInterval(()=>{ra()},15e3);return()=>clearInterval(j)},[]);const ar=async()=>{const[j,B,se,fe,ze,Ve,$e]=await Promise.all([S.from("curricula").select("*"),S.from("grade_levels").select("*, curricula(name)"),S.from("subjects").select("*, grade_levels(name, curricula(name))"),S.from("skills_categories").select("*"),S.from("announcements").select("*").order("display_order"),S.from("user_roles").select("*").eq("role","student"),S.from("user_roles").select("*").eq("role","teacher")]);y(j.data??[]),w(B.data??[]),x(se.data??[]),_(fe.data??[]),C(ze.data??[]);const Bt=[...(Ve.data??[]).map(ne=>ne.user_id),...($e.data??[]).map(ne=>ne.user_id)],dn=[...new Set(Bt)];let _n={};if(dn.length>0){const{data:ne}=await S.from("profiles").select("user_id, full_name, phone, bio, avatar_url, created_at").in("user_id",dn);ne==null||ne.forEach(Re=>{_n[Re.user_id]=Re})}const ro=(Ve.data??[]).map(ne=>({...ne,profiles:_n[ne.user_id]||null})),sa=($e.data??[]).map(ne=>({...ne,profiles:_n[ne.user_id]||null}));O(ro),P(sa);const{count:Yl}=await S.from("lessons").select("*",{count:"exact",head:!0}),{data:so}=await S.from("bookings").select("amount").eq("status","completed"),io=(so==null?void 0:so.reduce((ne,Re)=>ne+Number(Re.amount),0))??0,{data:ia}=await S.from("accounting_records").select("*").order("created_at",{ascending:!1}),ri=ia??[];sr(ri);const Jl=ri.reduce((ne,Re)=>ne+Number(Re.platform_share),0),me=ri.reduce((ne,Re)=>ne+Number(Re.teacher_share),0),lt=[...new Set(ri.map(ne=>ne.teacher_id))];if(lt.length>0){const{data:ne}=await S.from("profiles").select("user_id, full_name").in("user_id",lt),Re={};ne==null||ne.forEach(mt=>{Re[mt.user_id]=mt}),ue(Re)}m({students:ro.length,teachers:sa.length,lessons:Yl??0,income:io,platformEarnings:Jl,teacherEarnings:me});{const{data:ne,error:Re}=await S.from("monthly_expenses").select("*").order("period_month",{ascending:!1});if(!Re)Be(ne??[]);else{const{data:mt}=await S.from("site_settings").select("*").eq("key","monthly_expenses").maybeSingle(),Sr=(Array.isArray(mt==null?void 0:mt.value)?mt==null?void 0:mt.value:[]).map(hn=>({...hn,amount:typeof hn.amount=="number"?hn.amount:typeof hn.amount_usd=="number"?hn.amount_usd:0}));Be(Sr)}}if(n){const[ne,Re,mt]=await Promise.all([S.from("bookings").select("*",{count:"exact",head:!0}).eq("status","accepted"),S.from("invoices").select("*",{count:"exact",head:!0}).eq("status","pending"),S.from("withdrawal_requests").select("*").order("created_at",{ascending:!1})]);EA(ne.count??0),TA(Re.count??0);const jn=mt.data??[];PA(jn.filter(Jt=>Jt.status==="pending").length);const Sr=[...new Set(jn.map(Jt=>Jt.teacher_id))];let hn={};if(Sr.length>0){const{data:Jt}=await S.from("profiles").select("user_id, full_name").in("user_id",Sr);Jt==null||Jt.forEach($r=>{hn[$r.user_id]=$r})}const us=jn.map(Jt=>({...Jt,profiles:hn[Jt.teacher_id]||null}));I(us)}const{data:Tt}=await S.from("site_settings").select("*");if(Tt)for(const ne of Tt){if(ne.key==="maintenance_mode"&&be(ne.value===!0),ne.key==="home_banner_title"&&ut(typeof ne.value=="string"?ne.value:""),ne.key==="home_banner_description"&&nt(typeof ne.value=="string"?ne.value:""),ne.key==="home_banner_image"&&Rn(typeof ne.value=="string"?ne.value:""),ne.key==="site_logo"&&_t(typeof ne.value=="string"?ne.value:""),ne.key==="site_name"&&zn(typeof ne.value=="string"?ne.value:""),ne.key==="site_favicon"&&_e(typeof ne.value=="string"?ne.value:""),ne.key==="offers"&&Ne(Array.isArray(ne.value)?ne.value:[]),ne.key==="payment_methods"&&typeof ne.value=="object"&&ne.value!==null){const Re=ne.value;dt(mt=>({paypal:{...mt.paypal,...Re.paypal},bank_transfer:{...mt.bank_transfer,...Re.bank_transfer}}))}if(ne.key==="currency_settings"&&typeof ne.value=="object"&&ne.value!==null){const Re=ne.value;rn(Re.activeCurrency||"USD"),kt(String(Re.exchangeRate||1))}if(ne.key==="commission_rate"&&typeof ne.value=="number"&&bn(String(ne.value)),ne.key==="contact_info"&&typeof ne.value=="object"&&ne.value!==null){const Re=ne.value;ls({email:Re.email||"",phone:Re.phone||"",whatsapp:Re.whatsapp||""})}if(ne.key==="promo_banners"&&Array.isArray(ne.value)&&Ps(ne.value),ne.key==="homepage_sections_order"&&Array.isArray(ne.value)&&mp(ne.value),ne.key==="lesson_types_visibility"&&typeof ne.value=="object"&&ne.value!==null&&T0(Re=>({...Re,...ne.value})),ne.key==="zoom_settings"&&typeof ne.value=="object"&&ne.value!==null){const Re=ne.value;ta({recording_mode:Re.recording_mode||"manual",cloud_account_id:Re.cloud_account_id||"",cloud_client_id:Re.cloud_client_id||"",cloud_client_secret:Re.cloud_client_secret||""})}if(ne.key==="onesignal_settings"&&typeof ne.value=="object"&&ne.value!==null){const Re=ne.value;Hu({enabled:Re.enabled||!1,app_id:Re.app_id||"",rest_api_key:Re.rest_api_key||""})}ne.key==="theme_settings"&&typeof ne.value=="object"&&ne.value!==null&&or(Re=>({...Re,...ne.value}))}await ra()},ra=async()=>{A0(!0);try{const j=new Date(Date.now()-36e5).toISOString(),B=new Date(Date.now()+7*24*60*60*1e3).toISOString(),{data:se}=await S.from("bookings").select("id, teacher_id, scheduled_at, status, zoom_meeting_id, zoom_join_url, zoom_start_url, lessons:lesson_id(title, lesson_type, duration_minutes, curriculum_id, grade_level_id, subject_id, teacher_id, grade_levels:grade_level_id(name, curricula:curriculum_id(name)), subjects:subject_id(name))").gte("scheduled_at",j).lte("scheduled_at",B).not("scheduled_at","is",null).in("status",["scheduled","accepted"]),{data:fe}=await S.from("group_session_schedules").select("id, lesson_id, scheduled_at, zoom_meeting_id, zoom_join_url, lessons:lesson_id(title, lesson_type, duration_minutes, curriculum_id, grade_level_id, subject_id, teacher_id, grade_levels:grade_level_id(name, curricula:curriculum_id(name)), subjects:subject_id(name))").gte("scheduled_at",j).lte("scheduled_at",B).not("scheduled_at","is",null),ze=se??[],Ve=fe??[],$e=[...new Set([...ze.map(me=>me.teacher_id),...Ve.map(me=>{var lt;return(lt=me.lessons)==null?void 0:lt.teacher_id})].filter(Boolean))];let Bt={};if($e.length>0){const{data:me}=await S.from("profiles").select("user_id, full_name").in("user_id",$e);me==null||me.forEach(lt=>{Bt[lt.user_id]=lt.full_name})}const dn={};ze.filter(me=>{var lt;return((lt=me.lessons)==null?void 0:lt.lesson_type)==="group"}).forEach(me=>{var Tt;if(!me.scheduled_at)return;const lt=`${((Tt=me.lessons)==null?void 0:Tt.id)||me.lesson_id}-${new Date(me.scheduled_at).toISOString()}`;dn[lt]=(dn[lt]??0)+1});const _n=me=>me==="group"?"":me==="skills"?"":"",ro=(me,lt,Tt,ne,Re,mt,jn,Sr,hn,us,Jt,$r,oo)=>{let Fr=!1;return lt==="group"?Fr=oo==="active"||!!hn||!!us||!!Jt:Fr=!!hn||!!us||!!Jt,{title:me||"",type:_n(lt),teacher:Tt&&Bt[Tt]||"",scheduledAt:ne,duration:Re,curriculum:mt||"-",grade:jn||"-",subject:Sr||"-",live:Fr,participants:$r??(lt==="group"?Fr?$r??0:0:Fr?1:0)}},sa=new Set(Ve.filter(me=>me.status==="active"&&me.scheduled_at).map(me=>`${me.lesson_id}-${new Date(me.scheduled_at).toISOString()}`)),Yl=new Set(Ve.filter(me=>me.scheduled_at&&(me.zoom_start_url||me.zoom_meeting_id||me.zoom_join_url)).map(me=>`${me.lesson_id}-${new Date(me.scheduled_at).toISOString()}`)),so=ze.map(me=>{var mt,jn,Sr,hn,us,Jt,$r,oo,Fr,Ql;const lt=(mt=me.lessons)==null?void 0:mt.lesson_type,Tt=me.scheduled_at?`${me.lesson_id}-${new Date(me.scheduled_at).toISOString()}`:"",ne=lt==="group"&&Tt&&(sa.has(Tt)||Yl.has(Tt)),Re=ne?dn[Tt]??0:0;return ro((jn=me.lessons)==null?void 0:jn.title,lt,me.teacher_id,me.scheduled_at,((Sr=me.lessons)==null?void 0:Sr.duration_minutes)||60,(Jt=(us=(hn=me.lessons)==null?void 0:hn.grade_levels)==null?void 0:us.curricula)==null?void 0:Jt.name,(oo=($r=me.lessons)==null?void 0:$r.grade_levels)==null?void 0:oo.name,(Ql=(Fr=me.lessons)==null?void 0:Fr.subjects)==null?void 0:Ql.name,me.zoom_meeting_id,me.zoom_join_url,me.zoom_start_url,lt==="group"?Re:void 0,ne?"active":void 0)}),io=[...new Set([...ze.map(me=>me.zoom_meeting_id).filter(Boolean),...Ve.map(me=>me.zoom_meeting_id).filter(Boolean)])].map(String);let ia={};if(io.length>0){const me=new Date(Date.now()-216e5).toISOString(),{data:lt}=await S.from("attendance_events").select("meeting_id, participant_id, event_type, participant_role, created_at").in("meeting_id",io).gte("created_at",me),Tt={};(lt??[]).forEach(ne=>{const Re=`${ne.meeting_id}-${ne.participant_id||ne.participant_email||ne.participant_name}`,mt=Tt[Re];(!mt||new Date(ne.created_at).getTime()>mt.createdAt)&&(Tt[Re]={event_type:ne.event_type,role:ne.participant_role||null},Tt[Re].createdAt=new Date(ne.created_at).getTime())}),io.forEach(ne=>{let Re=0;Object.entries(Tt).forEach(([mt,jn])=>{mt.startsWith(ne+"-")&&jn.event_type==="joined"&&(jn.role??"").toLowerCase()!=="host"&&(jn.role??"").toLowerCase()!=="cohost"&&Re++}),ia[ne]=Re})}const ri=Ve.map(me=>{var mt,jn,Sr,hn,us,Jt,$r,oo,Fr,Ql,U0;const lt=`${me.lesson_id}-${new Date(me.scheduled_at).toISOString()}`,Tt=dn[lt]??0,ne=me.zoom_meeting_id?String(me.zoom_meeting_id):"",Re=ne?ia[ne]??Tt:Tt;return ro((mt=me.lessons)==null?void 0:mt.title,(jn=me.lessons)==null?void 0:jn.lesson_type,(Sr=me.lessons)==null?void 0:Sr.teacher_id,me.scheduled_at,((hn=me.lessons)==null?void 0:hn.duration_minutes)||60,($r=(Jt=(us=me.lessons)==null?void 0:us.grade_levels)==null?void 0:Jt.curricula)==null?void 0:$r.name,(Fr=(oo=me.lessons)==null?void 0:oo.grade_levels)==null?void 0:Fr.name,(U0=(Ql=me.lessons)==null?void 0:Ql.subjects)==null?void 0:U0.name,me.zoom_meeting_id,me.zoom_join_url,me.zoom_start_url,Re,me.status)}),Jl=[...so,...ri].sort((me,lt)=>new Date(me.scheduledAt).getTime()-new Date(lt.scheduledAt).getTime());RA(Jl)}finally{A0(!1)}},IA=async()=>{J&&(await S.from("curricula").insert({name:J}),oe(""),Q.success(" "),ar())},OA=async()=>{!J||!A||(await S.from("grade_levels").insert({name:J,curriculum_id:A}),oe(""),Q.success(" "),ar())},DA=async()=>{!J||!ee||(await S.from("subjects").insert({name:J,grade_level_id:ee}),oe(""),Q.success(" "),ar())},MA=async()=>{J&&(await S.from("skills_categories").insert({name:J}),oe(""),Q.success(" "),ar())},LA=async()=>{if(ge){pt(!0);try{const{error:j}=await S.functions.invoke("send-push-notification",{body:{type:"broadcast",broadcast_target:Ge,title:ge,body:ye}});j&&console.error("Push notification error:",j),ke(""),Ae(""),bt("all"),Q.success("   "),ar()}catch(j){console.error("Announcement error:",j),Q.error("   ")}finally{pt(!1)}}},[Ju,I0]=h.useState(null),[O0,xp]=h.useState(!1);h.useState(null);const D0=async(j,B)=>{const se=k.find(fe=>fe.id===j);if(B==="approved"){if(!Ju){Q.error("     ");return}xp(!0);const fe=Ju.name.split(".").pop(),ze=`withdrawal-receipts/${j}.${fe}`;try{const{publicUrl:Ve}=await sl("uploads",ze,Ju,{upsert:!0});await S.from("withdrawal_requests").update({status:B,receipt_url:Ve}).eq("id",j)}catch(Ve){console.error("Upload error:",Ve),Q.error("  "),xp(!1);return}I0(null),xp(!1),se!=null&&se.teacher_id&&await S.from("notifications").insert({user_id:se.teacher_id,type:"withdrawal",title:"   ",body:"             ",metadata:{withdrawal_id:j}})}else B==="rejected"?(await S.from("withdrawal_requests").update({status:B}).eq("id",j),se!=null&&se.teacher_id&&await S.from("notifications").insert({user_id:se.teacher_id,type:"withdrawal",title:"   ",body:"        ",metadata:{withdrawal_id:j}})):await S.from("withdrawal_requests").update({status:B}).eq("id",j);Q.success(" "),ar()},$A=async()=>{if(!K)return;q(!0);const{error:j}=await S.from("profiles").update({full_name:R,phone:L,bio:le}).eq("user_id",K.user_id);j?Q.error("   "):(Q.success("   "),D(null),ar()),q(!1)},Gl=async(j,B)=>{await S.from(j).delete().eq("id",B),Q.success(" "),ar()},yp=async(j,B)=>{const se=`${B}/${Date.now()}-${j.name}`,{error:fe}=await S.storage.from("uploads").upload(se,j);if(fe)return Q.error("   "),null;const{data:{publicUrl:ze}}=S.storage.from("uploads").getPublicUrl(se);return ze},FA=async j=>{var se;const B=(se=j.target.files)==null?void 0:se[0];if(B)try{const ze=`branding/site_logo.${B.name.split(".").pop()}`,{publicUrl:Ve}=await sl("uploads",ze,B,{upsert:!0});_t(Ve);const{data:$e}=await S.from("site_settings").select("id").eq("key","site_logo").maybeSingle();$e?await S.from("site_settings").update({value:Ve}).eq("key","site_logo"):await S.from("site_settings").insert({key:"site_logo",value:Ve}),Q.success("    ")}catch(fe){console.error("Logo upload error:",fe),Q.error("  ")}},UA=async j=>{var se;const B=(se=j.target.files)==null?void 0:se[0];if(B)try{const ze=`branding/home_banner.${B.name.split(".").pop()}`,{publicUrl:Ve}=await sl("uploads",ze,B,{upsert:!0});Rn(Ve);const{data:$e}=await S.from("site_settings").select("id").eq("key","home_banner_image").maybeSingle();$e?await S.from("site_settings").update({value:Ve}).eq("key","home_banner_image"):await S.from("site_settings").insert({key:"home_banner_image",value:Ve}),Q.success("     ")}catch(fe){console.error("Banner upload error:",fe),Q.error("   ")}},VA=async(j,B)=>{var ze;const se=(ze=B.target.files)==null?void 0:ze[0];if(!se)return;const fe=await yp(se,"offers");if(fe){const Ve=[...G];Ve[j]={...Ve[j],image_url:fe},Ne(Ve)}},BA=async()=>{at(!0);const j=[S.from("site_settings").update({value:Fe}).eq("key","maintenance_mode"),S.from("site_settings").update({value:Ie}).eq("key","site_logo"),S.from("site_settings").update({value:G}).eq("key","offers")],{data:B}=await S.from("site_settings").select("id").eq("key","home_banner_title").maybeSingle();B?j.push(S.from("site_settings").update({value:Ze}).eq("key","home_banner_title")):j.push(S.from("site_settings").insert({key:"home_banner_title",value:Ze}));const{data:se}=await S.from("site_settings").select("id").eq("key","home_banner_description").maybeSingle();se?j.push(S.from("site_settings").update({value:Je}).eq("key","home_banner_description")):j.push(S.from("site_settings").insert({key:"home_banner_description",value:Je}));const{data:fe}=await S.from("site_settings").select("id").eq("key","home_banner_image").maybeSingle();fe?j.push(S.from("site_settings").update({value:Dt}).eq("key","home_banner_image")):j.push(S.from("site_settings").insert({key:"home_banner_image",value:Dt}));const{data:ze}=await S.from("site_settings").select("id").eq("key","site_name").maybeSingle();ze?j.push(S.from("site_settings").update({value:cn}).eq("key","site_name")):j.push(S.from("site_settings").insert({key:"site_name",value:cn}));const{data:Ve}=await S.from("site_settings").select("id").eq("key","site_favicon").maybeSingle();Ve?j.push(S.from("site_settings").update({value:ae}).eq("key","site_favicon")):j.push(S.from("site_settings").insert({key:"site_favicon",value:ae}));const{data:$e}=await S.from("site_settings").select("id").eq("key","payment_methods").maybeSingle();$e?j.push(S.from("site_settings").update({value:qe}).eq("key","payment_methods")):j.push(S.from("site_settings").insert({key:"payment_methods",value:qe}));const Bt={activeCurrency:un,exchangeRate:parseFloat(Ue)||1},{data:dn}=await S.from("site_settings").select("id").eq("key","currency_settings").maybeSingle();dn?j.push(S.from("site_settings").update({value:Bt}).eq("key","currency_settings")):j.push(S.from("site_settings").insert({key:"currency_settings",value:Bt}));const _n=parseFloat(ot)||20,{data:ro}=await S.from("site_settings").select("id").eq("key","commission_rate").maybeSingle();ro?j.push(S.from("site_settings").update({value:_n}).eq("key","commission_rate")):j.push(S.from("site_settings").insert({key:"commission_rate",value:_n}));const{data:sa}=await S.from("site_settings").select("id").eq("key","contact_info").maybeSingle();sa?j.push(S.from("site_settings").update({value:_r}).eq("key","contact_info")):j.push(S.from("site_settings").insert({key:"contact_info",value:_r}));const{data:Yl}=await S.from("site_settings").select("id").eq("key","promo_banners").maybeSingle();Yl?j.push(S.from("site_settings").update({value:ir}).eq("key","promo_banners")):j.push(S.from("site_settings").insert({key:"promo_banners",value:ir}));const{data:so}=await S.from("site_settings").select("id").eq("key","homepage_sections_order").maybeSingle();so?j.push(S.from("site_settings").update({value:cs}).eq("key","homepage_sections_order")):j.push(S.from("site_settings").insert({key:"homepage_sections_order",value:cs}));const{data:io}=await S.from("site_settings").select("id").eq("key","lesson_types_visibility").maybeSingle();io?j.push(S.from("site_settings").update({value:gp}).eq("key","lesson_types_visibility")):j.push(S.from("site_settings").insert({key:"lesson_types_visibility",value:gp}));const{data:ia}=await S.from("site_settings").select("id").eq("key","zoom_settings").maybeSingle();ia?j.push(S.from("site_settings").update({value:jr}).eq("key","zoom_settings")):j.push(S.from("site_settings").insert({key:"zoom_settings",value:jr}));const{data:ri}=await S.from("site_settings").select("id").eq("key","onesignal_settings").maybeSingle();ri?j.push(S.from("site_settings").update({value:na}).eq("key","onesignal_settings")):j.push(S.from("site_settings").insert({key:"onesignal_settings",value:na}));const{data:Jl}=await S.from("site_settings").select("id").eq("key","theme_settings").maybeSingle();Jl?j.push(S.from("site_settings").update({value:Vt}).eq("key","theme_settings")):j.push(S.from("site_settings").insert({key:"theme_settings",value:Vt})),(await Promise.all(j)).some(Tt=>Tt.error)?Q.error("   "):Q.success("  "),at(!1)},zA=()=>{Ne([...G,{title:"",description:"",image_url:""}])},qA=j=>{Ne(G.filter((B,se)=>se!==j))},M0=(j,B,se)=>{const fe=[...G];fe[j]={...fe[j],[B]:se},Ne(fe)},WA=[{label:"",value:f.students,icon:ns,color:"text-primary"},{label:"",value:f.teachers,icon:Mg,color:"text-secondary"},{label:"",value:f.lessons,icon:Bs,color:"text-accent"},{label:" ",value:o(f.income),icon:gc,color:"text-success"},{label:" ",value:o(f.platformEarnings),icon:Jp,color:"text-primary"}];return c?i.jsx("div",{className:"min-h-screen flex items-center justify-center text-muted-foreground",children:" ..."}):i.jsxs("div",{className:"min-h-screen bg-background dashboard-large-text",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-md border-b border-border",children:i.jsxs("div",{className:"container flex items-center justify-between h-14",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ft,{to:"/",className:"flex items-center gap-2",children:Ie?i.jsx("img",{src:Ie,alt:" ",className:"h-8 object-contain"}):i.jsx("span",{className:"text-xl font-bold text-primary",children:cn||(n?" ":" ")})}),i.jsx("span",{className:"text-sm text-muted-foreground hidden sm:block",children:n?" ":" "})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ft,{to:"/",children:i.jsx(te,{variant:"ghost",size:"icon","aria-label":" ",children:i.jsx(Mh,{className:"h-5 w-5"})})}),i.jsx(Ft,{to:"/profile",children:i.jsx(te,{variant:"ghost",size:"icon","aria-label":" ",children:i.jsx(er,{className:"h-5 w-5"})})}),i.jsx(te,{variant:"ghost",size:"icon",onClick:async()=>{await s(),d("/")},"aria-label":" ",children:i.jsx(sk,{className:"h-5 w-5"})})]})]})}),i.jsxs("div",{className:"container py-6",children:[n&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:WA.map(j=>i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border text-center",children:[i.jsx(j.icon,{className:`h-6 w-6 mx-auto mb-1 ${j.color}`}),i.jsx("p",{className:"text-xl font-bold",children:j.value}),i.jsx("p",{className:"text-xs text-muted-foreground",children:j.label})]},j.label))}),i.jsxs(Tl,{defaultValue:"curricula",value:ni,onValueChange:j=>{qn(j),Wn(B=>new Set(B).add(j))},children:[i.jsxs("div",{className:"flex flex-wrap gap-2 bg-muted p-2 rounded-lg",children:[i.jsxs(Dd,{children:[i.jsx(Md,{asChild:!0,children:i.jsxs(te,{variant:["curricula","grades","subjects","skills"].includes(ni)?"default":"ghost",size:"sm",className:"gap-1",children:[i.jsx(Bs,{className:"h-4 w-4"})," ",i.jsx($s,{className:"h-3 w-3"})]})}),i.jsxs(bc,{align:"start",className:"min-w-[140px]",children:[i.jsx(Qt,{onClick:()=>{qn("curricula"),Wn(j=>new Set(j).add("curricula"))},children:""}),i.jsx(Qt,{onClick:()=>{qn("subjects"),Wn(j=>new Set(j).add("subjects"))},children:""}),n&&i.jsx(Qt,{onClick:()=>{qn("skills"),Wn(j=>new Set(j).add("skills"))},children:""}),i.jsx(Qt,{onClick:()=>{qn("grades"),Wn(j=>new Set(j).add("grades"))},children:""})]})]}),i.jsxs(Dd,{children:[i.jsx(Md,{asChild:!0,children:i.jsxs(te,{variant:["students","teachers"].includes(ni)?"default":"ghost",size:"sm",className:"gap-1",children:[i.jsx(ns,{className:"h-4 w-4"}),"",i.jsx($s,{className:"h-3 w-3"})]})}),i.jsxs(bc,{align:"start",className:"min-w-[140px]",children:[i.jsx(Qt,{onClick:()=>{qn("teachers"),Wn(j=>new Set(j).add("teachers"))},children:""}),i.jsx(Qt,{onClick:()=>{qn("students"),Wn(j=>new Set(j).add("students"))},children:""})]})]}),n&&i.jsxs(Dd,{children:[i.jsx(Md,{asChild:!0,children:i.jsxs(te,{variant:["withdrawals","invoices","accounting"].includes(ni)?"default":"ghost",size:"sm",className:"gap-1 relative",children:[i.jsx(gc,{className:"h-4 w-4"}),"",i.jsx($s,{className:"h-3 w-3"}),(!vp.has("invoices")&&Gu>0||!vp.has("withdrawals")&&Yu>0)&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:(Gu||0)+(Yu||0)})]})}),i.jsxs(bc,{align:"start",className:"min-w-[140px]",children:[i.jsxs(Qt,{onClick:()=>{qn("invoices"),Wn(j=>new Set(j).add("invoices"))},className:"relative",children:["",Gu>0&&i.jsx("span",{className:"mr-auto bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:Gu})]}),i.jsxs(Qt,{onClick:()=>{qn("withdrawals"),Wn(j=>new Set(j).add("withdrawals"))},className:"relative",children:[" ",Yu>0&&i.jsx("span",{className:"mr-auto bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:Yu})]}),i.jsx(Qt,{onClick:()=>{qn("accounting"),Wn(j=>new Set(j).add("accounting"))},children:" "})]})]}),i.jsxs(te,{variant:ni==="announcements"?"default":"ghost",size:"sm",onClick:()=>{qn("announcements"),Wn(j=>new Set(j).add("announcements"))},children:[i.jsx(lb,{className:"h-4 w-4 ml-1"}),""]}),n&&i.jsxs(te,{variant:ni==="orders"?"default":"ghost",size:"sm",className:"relative",onClick:()=>{qn("orders"),Wn(j=>new Set(j).add("orders"))},children:[i.jsx(Bs,{className:"h-4 w-4 ml-1"}),"",!vp.has("orders")&&P0>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:P0})]}),n&&i.jsxs(te,{variant:ni==="site-settings"?"default":"ghost",size:"sm",onClick:()=>{qn("site-settings"),Wn(j=>new Set(j).add("site-settings"))},children:[i.jsx(th,{className:"h-4 w-4 ml-1"})," "]}),i.jsxs(te,{variant:ni==="upcoming"?"default":"ghost",size:"sm",onClick:()=>{qn("upcoming"),Wn(j=>new Set(j).add("upcoming"))},children:[i.jsx(Mi,{className:"h-4 w-4 ml-1"}),""]})]}),i.jsxs(it,{value:"students",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(jl,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(he,{placeholder:"   ...",value:F,onChange:j=>W(j.target.value),className:"pr-10"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[$.filter(j=>{var fe,ze;const B=((fe=j.profiles)==null?void 0:fe.full_name)||"",se=((ze=j.profiles)==null?void 0:ze.phone)||"";return B.includes(F)||se.includes(F)}).length," "]}),i.jsx("div",{className:"space-y-2",children:$.filter(j=>{var fe,ze;const B=((fe=j.profiles)==null?void 0:fe.full_name)||"",se=((ze=j.profiles)==null?void 0:ze.phone)||"";return B.includes(F)||se.includes(F)}).map(j=>{var B,se,fe;return i.jsx("div",{className:"bg-card rounded-xl p-3 border border-border cursor-pointer hover:border-primary/40 transition-colors",onClick:()=>{var ze,Ve,$e;D(j),M(((ze=j.profiles)==null?void 0:ze.full_name)||""),X(((Ve=j.profiles)==null?void 0:Ve.phone)||""),E((($e=j.profiles)==null?void 0:$e.bio)||"")},children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center shrink-0",children:i.jsx(er,{className:"h-5 w-5 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:((B=j.profiles)==null?void 0:B.full_name)??" "}),i.jsx("p",{className:"text-xs text-muted-foreground",children:((se=j.profiles)==null?void 0:se.phone)||" "})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:((fe=j.profiles)==null?void 0:fe.created_at)&&new Date(j.profiles.created_at).toLocaleDateString("ar")})]})},j.id)})}),i.jsx(yr,{open:!!K,onOpenChange:j=>{j||D(null)},children:i.jsx(nr,{className:"max-w-md max-h-[85vh] overflow-y-auto",children:K&&i.jsxs(i.Fragment,{children:[i.jsx(Mr,{children:i.jsxs(Lr,{className:"flex items-center gap-2",children:[i.jsx(er,{className:"h-5 w-5 text-primary"})," "]})}),i.jsxs("div",{className:"space-y-4 mt-2",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs mb-1 block",children:""}),i.jsx(he,{value:R,onChange:j=>M(j.target.value)})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs mb-1 block",children:""}),i.jsx(he,{value:L,onChange:j=>X(j.target.value),dir:"ltr"})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs mb-1 block",children:""}),i.jsx(fr,{value:le,onChange:j=>E(j.target.value),rows:3,placeholder:"  ..."})]}),i.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(Mi,{className:"h-3 w-3"})," : ",(L0=K.profiles)!=null&&L0.created_at?new Date(K.profiles.created_at).toLocaleDateString("ar"):" "]}),i.jsxs(te,{onClick:$A,variant:"hero",className:"w-full",disabled:V,children:[i.jsx(Fg,{className:"h-4 w-4 ml-1"}),V?" ...":" "]})]})]})})})]}),i.jsx(it,{value:"teachers",className:"mt-4",children:i.jsx(jH,{})}),i.jsxs(it,{value:"curricula",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(he,{placeholder:" ",value:J,onChange:j=>oe(j.target.value)}),i.jsx(te,{onClick:IA,variant:"hero",children:i.jsx(fi,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"space-y-2",children:p.map(j=>i.jsxs("div",{className:"bg-card rounded-lg p-3 border border-border flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-sm",children:j.name}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>Gl("curricula",j.id),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]},j.id))})]}),i.jsxs(it,{value:"grades",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("select",{className:"w-full rounded-lg border border-border p-2 bg-background text-sm",value:A,onChange:j=>Y(j.target.value),children:[i.jsx("option",{value:"",children:" "}),p.map(j=>i.jsx("option",{value:j.id,children:j.name},j.id))]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(he,{placeholder:" ",value:J,onChange:j=>oe(j.target.value)}),i.jsx(te,{onClick:OA,variant:"hero",children:i.jsx(fi,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"space-y-2",children:g.map(j=>{var B;return i.jsxs("div",{className:"bg-card rounded-lg p-3 border border-border flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-sm",children:j.name}),i.jsxs("span",{className:"text-xs text-muted-foreground mr-2",children:["(",(B=j.curricula)==null?void 0:B.name,")"]})]}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>Gl("grade_levels",j.id),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]},j.id)})})]}),i.jsxs(it,{value:"subjects",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("select",{className:"w-full rounded-lg border border-border p-2 bg-background text-sm",value:ee,onChange:j=>H(j.target.value),children:[i.jsx("option",{value:"",children:" "}),g.map(j=>{var B;return i.jsxs("option",{value:j.id,children:[j.name," - ",((B=j.curricula)==null?void 0:B.name)??""]},j.id)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(he,{placeholder:" ",value:J,onChange:j=>oe(j.target.value)}),i.jsx(te,{onClick:DA,variant:"hero",children:i.jsx(fi,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"space-y-2",children:v.map(j=>{var B,se,fe;return i.jsxs("div",{className:"bg-card rounded-lg p-3 border border-border flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-sm",children:j.name}),i.jsxs("span",{className:"text-xs text-muted-foreground mr-2",children:["(",(B=j.grade_levels)==null?void 0:B.name,")  ",(fe=(se=j.grade_levels)==null?void 0:se.curricula)==null?void 0:fe.name]})]}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>Gl("subjects",j.id),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]},j.id)})})]}),i.jsxs(it,{value:"announcements",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"space-y-3 bg-card rounded-xl p-4 border border-border",children:[i.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[i.jsx(lb,{className:"h-5 w-5"})," "]}),i.jsx(he,{placeholder:" ",value:ge,onChange:j=>ke(j.target.value)}),i.jsxs("div",{className:"relative",children:[i.jsx(fr,{placeholder:" ...    ",value:ye,onChange:j=>Ae(j.target.value),rows:3}),i.jsx("div",{className:"flex items-center gap-2 mt-1",children:i.jsxs(cv,{open:z,onOpenChange:pe,children:[i.jsx(uv,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",type:"button",children:" "})}),i.jsx(Gh,{className:"w-80 p-2",align:"start",children:i.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-48 overflow-y-auto text-xl",children:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(j=>i.jsx("button",{type:"button",className:"hover:bg-muted rounded p-1 cursor-pointer text-center",onClick:()=>{Ae(B=>B+j),pe(!1)},children:j},j))})})]})})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-sm font-medium mb-2 block",children:"  :"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:[{value:"all",label:" ",icon:""},{value:"students",label:" ",icon:""},{value:"teachers",label:" ",icon:""}].map(j=>i.jsxs(te,{type:"button",variant:Ge===j.value?"default":"outline",size:"sm",onClick:()=>bt(j.value),children:[j.icon," ",j.label]},j.value))})]}),i.jsx(te,{onClick:LA,variant:"hero",className:"w-full",disabled:Ke||!ge,children:Ke?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"animate-spin mr-2",children:""})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Mo,{className:"h-4 w-4 ml-2"}),"   "]})})]}),i.jsx("div",{className:"space-y-2",children:N.map(j=>i.jsxs("div",{className:"bg-card rounded-lg p-3 border border-border flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:j.title}),j.description&&i.jsx("p",{className:"text-xs text-muted-foreground",children:j.description})]}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>Gl("announcements",j.id),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]},j.id))})]}),i.jsx(it,{value:"upcoming",className:"mt-4 space-y-4",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"   "}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(te,{size:"sm",variant:"ghost",onClick:ra,children:""})})]}),AA?i.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((j,B)=>i.jsx("div",{className:"h-10 rounded-lg bg-muted animate-pulse"},B))}):i.jsx(i.Fragment,{children:R0.length===0?i.jsx("p",{className:"text-xs text-muted-foreground",children:"       "}):i.jsxs(NA,{className:"rounded-xl overflow-hidden",children:[i.jsx(kA,{children:i.jsxs(Xv,{className:"bg-muted/40",children:[i.jsx(hs,{children:""}),i.jsx(hs,{children:""}),i.jsx(hs,{children:""}),i.jsx(hs,{children:""}),i.jsx(hs,{children:" /"}),i.jsx(hs,{children:""}),i.jsx(hs,{children:""}),i.jsx(hs,{children:""}),i.jsx(hs,{children:" "})]})}),i.jsx(CA,{children:R0.map((j,B)=>i.jsxs(Xv,{className:"hover:shadow-sm",children:[i.jsx(fs,{children:i.jsx("span",{className:`px-2 py-1 rounded-full text-[11px] font-bold ${j.type===""?"bg-primary/10 text-primary":j.type===""?"bg-secondary/10 text-secondary":"bg-amber-100 text-amber-700"}`,children:j.type})}),i.jsx(fs,{children:j.curriculum}),i.jsx(fs,{children:j.subject}),i.jsx(fs,{children:j.grade}),i.jsx(fs,{className:"font-medium",children:j.title}),i.jsx(fs,{children:j.teacher}),i.jsx(fs,{children:new Date(j.scheduledAt).toLocaleString("ar")}),i.jsx(fs,{children:j.live?i.jsxs("span",{className:"inline-flex items-center gap-1 text-success font-bold",children:[i.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-success animate-pulse"})," "]}):i.jsx("span",{className:"text-muted-foreground",children:" "})}),i.jsx(fs,{children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(ns,{className:"h-4 w-4"}),j.participants]})})]},B))})]})})]})}),n&&i.jsx(it,{value:"invoices",className:"mt-4",children:i.jsx(NH,{})}),n&&i.jsx(it,{value:"orders",className:"mt-4",children:i.jsx(SH,{})}),n&&i.jsxs(it,{value:"skills",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(he,{placeholder:" ",value:J,onChange:j=>oe(j.target.value)}),i.jsx(te,{onClick:MA,variant:"hero",children:i.jsx(fi,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"space-y-2",children:b.map(j=>i.jsxs("div",{className:"bg-card rounded-lg p-3 border border-border flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-sm",children:j.name}),i.jsx(te,{variant:"ghost",size:"icon",onClick:()=>Gl("skills_categories",j.id),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]},j.id))})]}),n&&i.jsx(it,{value:"withdrawals",className:"mt-4 space-y-3",children:k.map(j=>{var B;return i.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:(B=j.profiles)==null?void 0:B.full_name}),i.jsx("p",{className:"text-lg font-bold",children:o(j.amount)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(j.created_at).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric"})})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${j.status==="approved"?"bg-success/10 text-success":j.status==="rejected"?"bg-destructive/10 text-destructive":"bg-warning/10 text-warning"}`,children:j.status==="pending"?" ":j.status==="approved"?"":""})]}),j.status==="pending"&&i.jsxs("div",{className:"space-y-2 mt-2",children:[i.jsx(re,{className:"text-xs",children:"  ( )"}),i.jsx(he,{type:"file",accept:"image/*,.pdf",onChange:se=>{var fe;return I0(((fe=se.target.files)==null?void 0:fe[0])||null)}}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{size:"sm",variant:"hero",className:"flex-1",disabled:O0||!Ju,onClick:()=>D0(j.id,"approved"),children:O0?" ...":""}),i.jsx(te,{size:"sm",variant:"destructive",className:"flex-1",onClick:()=>D0(j.id,"rejected"),children:""})]})]}),j.status==="approved"&&j.receipt_url&&i.jsx("div",{className:"mt-2",children:i.jsxs("a",{href:j.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary underline flex items-center gap-1",children:[i.jsx(eh,{className:"h-3 w-3"}),"   "]})})]},j.id)})}),n&&i.jsxs(it,{value:"site-settings",className:"mt-4 space-y-4",children:[i.jsxs(Dd,{children:[i.jsx(Md,{asChild:!0,children:i.jsxs(te,{variant:"outline",size:"sm",className:"gap-1 w-full justify-between",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(th,{className:"h-4 w-4"}),sn==="design"&&"",sn==="payment"&&" ",sn==="currency"&&" ",sn==="commission"&&" ",sn==="maintenance"&&" ",sn==="contact"&&" ",sn==="homepage"&&"  ",sn==="zoom"&&" ",sn==="onesignal"&&" OneSignal"]}),i.jsx($s,{className:"h-3 w-3"})]})}),i.jsxs(bc,{align:"start",className:"min-w-[180px]",children:[i.jsxs(Qt,{onClick:()=>Rs("design"),children:[i.jsx(cb,{className:"h-4 w-4 ml-1"})," "]}),i.jsxs(Qt,{onClick:()=>Rs("payment"),children:[i.jsx(tk,{className:"h-4 w-4 ml-1"}),"  "]}),i.jsxs(Qt,{onClick:()=>Rs("currency"),children:[i.jsx(ab,{className:"h-4 w-4 ml-1"}),"  "]}),i.jsxs(Qt,{onClick:()=>Rs("commission"),children:[i.jsx(kM,{className:"h-4 w-4 ml-1"}),"  "]}),i.jsxs(Qt,{onClick:()=>Rs("maintenance"),children:[i.jsx(TM,{className:"h-4 w-4 ml-1"}),"  "]}),i.jsxs(Qt,{onClick:()=>Rs("contact"),children:[i.jsx($g,{className:"h-4 w-4 ml-1"}),"  "]}),i.jsxs(Qt,{onClick:()=>Rs("homepage"),children:[i.jsx(eh,{className:"h-4 w-4 ml-1"}),"   "]}),i.jsxs(Qt,{onClick:()=>Rs("zoom"),children:[i.jsx(Ss,{className:"h-4 w-4 ml-1"}),"  "]}),i.jsxs(Qt,{onClick:()=>Rs("onesignal"),children:[i.jsx(Mo,{className:"h-4 w-4 ml-1"}),"  OneSignal"]})]})]}),sn==="design"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:" "}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"        "}),i.jsx(he,{value:cn,onChange:j=>zn(j.target.value),placeholder:" "})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"  (Favicon)"}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" : 3232  6464    PNG  ICO"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-dashed border-border cursor-pointer hover:border-primary/40 transition-colors",children:[i.jsx(oc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:" "}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async j=>{var fe;const B=(fe=j.target.files)==null?void 0:fe[0];if(!B)return;const se=await yp(B,"favicons");se&&_e(se)}})]}),ae&&i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:ae,alt:"Favicon",className:"h-8 w-8 object-contain rounded bg-muted p-0.5"}),i.jsx("button",{onClick:()=>_e(""),className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground rounded-full h-4 w-4 flex items-center justify-center text-[10px]",children:""})]})]})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:" "}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" : 20050  ( 4:1)   PNG      500 "}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-dashed border-border cursor-pointer hover:border-primary/40 transition-colors",children:[i.jsx(oc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"  "}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:FA})]}),Ie&&i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:Ie,alt:"",className:"h-12 object-contain rounded-lg bg-muted p-1"}),i.jsx("button",{onClick:()=>_t(""),className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground rounded-full h-4 w-4 flex items-center justify-center text-[10px]",children:""})]})]})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"  "}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{value:Ze,onChange:j=>ut(j.target.value)})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{value:Je,onChange:j=>nt(j.target.value)})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx("p",{className:"text-[10px] text-muted-foreground mb-1",children:" : 1200400  ( 3:1)   JPG  PNG    2 "}),i.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[i.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-dashed border-border cursor-pointer hover:border-primary/40 transition-colors",children:[i.jsx(oc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:" "}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:UA})]}),Dt&&i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:Dt,alt:"",className:"h-16 w-28 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>Rn(""),className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground rounded-full h-4 w-4 flex items-center justify-center text-[10px]",children:""})]})]})]})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-sm",children:" "}),i.jsxs(te,{size:"sm",variant:"outline",onClick:zA,children:[i.jsx(fi,{className:"h-4 w-4 ml-1"})," "]})]}),G.map((j,B)=>i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",B+1]}),i.jsx(te,{size:"icon",variant:"ghost",onClick:()=>qA(B),children:i.jsx(Ds,{className:"h-3 w-3 text-destructive"})})]}),i.jsx(he,{placeholder:" ",value:j.title,onChange:se=>M0(B,"title",se.target.value)}),i.jsx(he,{placeholder:" ",value:j.description,onChange:se=>M0(B,"description",se.target.value)}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" : 600300  ( 2:1)  JPG  PNG   1 "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{className:"flex items-center gap-1 px-2 py-1.5 rounded-lg border border-dashed border-border cursor-pointer hover:border-primary/40 transition-colors",children:[i.jsx(oc,{className:"h-3 w-3 text-muted-foreground"}),i.jsx("span",{className:"text-[10px] text-muted-foreground",children:""}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:se=>VA(B,se)})]}),j.image_url&&i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:j.image_url,alt:"",className:"h-10 w-16 object-cover rounded"}),i.jsx("button",{onClick:()=>{const se=[...G];se[B]={...se[B],image_url:""},Ne(se)},className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground rounded-full h-3.5 w-3.5 flex items-center justify-center text-[8px]",children:""})]})]})]},B))]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-sm",children:" "}),i.jsxs(te,{size:"sm",variant:"outline",onClick:()=>Ps([...ir,{title:"",description:"",image_url:""}]),children:[i.jsx(fi,{className:"h-4 w-4 ml-1"})," "]})]}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"           "}),ir.map((j,B)=>i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",B+1]}),i.jsx(te,{size:"icon",variant:"ghost",onClick:()=>Ps(ir.filter((se,fe)=>fe!==B)),children:i.jsx(Ds,{className:"h-3 w-3 text-destructive"})})]}),i.jsx(he,{placeholder:" ",value:j.title,onChange:se=>{const fe=[...ir];fe[B]={...fe[B],title:se.target.value},Ps(fe)}}),i.jsx(he,{placeholder:" ",value:j.description,onChange:se=>{const fe=[...ir];fe[B]={...fe[B],description:se.target.value},Ps(fe)}}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" : 1200400  ( 3:1)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{className:"flex items-center gap-1 px-2 py-1.5 rounded-lg border border-dashed border-border cursor-pointer hover:border-primary/40 transition-colors",children:[i.jsx(oc,{className:"h-3 w-3 text-muted-foreground"}),i.jsx("span",{className:"text-[10px] text-muted-foreground",children:""}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async se=>{var Ve;const fe=(Ve=se.target.files)==null?void 0:Ve[0];if(!fe)return;const ze=await yp(fe,"promo-banners");if(ze){const $e=[...ir];$e[B]={...$e[B],image_url:ze},Ps($e)}}})]}),j.image_url&&i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:j.image_url,alt:"",className:"h-10 w-20 object-cover rounded"}),i.jsx("button",{onClick:()=>{const se=[...ir];se[B]={...se[B],image_url:""},Ps(se)},className:"absolute -top-1 -right-1 bg-destructive text-destructive-foreground rounded-full h-3.5 w-3.5 flex items-center justify-center text-[8px]",children:""})]})]})]},B))]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(cb,{className:"h-4 w-4 text-primary"})," "]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"text-xs font-medium text-muted-foreground",children:""}),i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-3",children:[i.jsx("p",{className:"text-xs font-medium",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"  (px)"}),i.jsx(he,{type:"number",min:"12",max:"24",value:Vt.body_font_size,onChange:j=>or(B=>({...B,body_font_size:j.target.value}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:Vt.body_font_color,onChange:j=>or(B=>({...B,body_font_color:j.target.value})),className:"h-10 w-10 rounded border border-border cursor-pointer"}),i.jsx(he,{dir:"ltr",value:Vt.body_font_color,onChange:j=>or(B=>({...B,body_font_color:j.target.value})),className:"font-mono text-xs"})]})]})]}),i.jsx("p",{style:{fontSize:`${Vt.body_font_size}px`,color:Vt.body_font_color},children:":     "})]}),i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-3",children:[i.jsx("p",{className:"text-xs font-medium",children:" "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"  (px)"}),i.jsx(he,{type:"number",min:"14",max:"36",value:Vt.heading_font_size,onChange:j=>or(B=>({...B,heading_font_size:j.target.value}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:Vt.heading_font_color,onChange:j=>or(B=>({...B,heading_font_color:j.target.value})),className:"h-10 w-10 rounded border border-border cursor-pointer"}),i.jsx(he,{dir:"ltr",value:Vt.heading_font_color,onChange:j=>or(B=>({...B,heading_font_color:j.target.value})),className:"font-mono text-xs"})]})]})]}),i.jsx("p",{style:{fontSize:`${Vt.heading_font_size}px`,color:Vt.heading_font_color,fontWeight:700},children:":  "})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"text-xs font-medium text-muted-foreground",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2",children:[i.jsx("p",{className:"text-xs font-medium",children:" "}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"      "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:Vt.primary_color,onChange:j=>or(B=>({...B,primary_color:j.target.value})),className:"h-10 w-10 rounded border border-border cursor-pointer"}),i.jsx(he,{dir:"ltr",value:Vt.primary_color,onChange:j=>or(B=>({...B,primary_color:j.target.value})),className:"font-mono text-xs"}),i.jsx("div",{className:"h-8 w-16 rounded",style:{backgroundColor:Vt.primary_color}})]})]}),i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2",children:[i.jsx("p",{className:"text-xs font-medium",children:" "}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:'    "    "'}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:Vt.secondary_color,onChange:j=>or(B=>({...B,secondary_color:j.target.value})),className:"h-10 w-10 rounded border border-border cursor-pointer"}),i.jsx(he,{dir:"ltr",value:Vt.secondary_color,onChange:j=>or(B=>({...B,secondary_color:j.target.value})),className:"font-mono text-xs"}),i.jsx("div",{className:"h-8 w-16 rounded",style:{backgroundColor:Vt.secondary_color}})]})]}),i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2",children:[i.jsx("p",{className:"text-xs font-medium",children:" "}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"   "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"color",value:Vt.background_color,onChange:j=>or(B=>({...B,background_color:j.target.value})),className:"h-10 w-10 rounded border border-border cursor-pointer"}),i.jsx(he,{dir:"ltr",value:Vt.background_color,onChange:j=>or(B=>({...B,background_color:j.target.value})),className:"font-mono text-xs"}),i.jsx("div",{className:"h-8 w-16 rounded border border-border",style:{backgroundColor:Vt.background_color}})]})]})]})]})]})]}),sn==="payment"&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(gc,{className:"h-4 w-4 text-primary"})," "]}),i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm",children:"PayPal"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"   "})]}),i.jsx(mo,{checked:qe.paypal.enabled,onCheckedChange:j=>dt(B=>({...B,paypal:{...B.paypal,enabled:j}}))})]}),qe.paypal.enabled&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"   (PayPal Email)"}),i.jsx(he,{dir:"ltr",type:"email",placeholder:"payment@example.com",value:qe.paypal.email,onChange:j=>dt(B=>({...B,paypal:{...B.paypal,email:j.target.value}}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"PayPal Client ID"}),i.jsx(he,{dir:"ltr",placeholder:"Client ID   PayPal Developer",value:qe.paypal.client_id||"",onChange:j=>dt(B=>({...B,paypal:{...B.paypal,client_id:j.target.value}}))})]}),i.jsxs("div",{className:"flex items-center justify-between border border-border rounded-lg p-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-xs",children:"   (Sandbox)"}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"         PayPal Developer"})]}),i.jsx(mo,{checked:qe.paypal.sandbox??!0,onCheckedChange:j=>dt(B=>({...B,paypal:{...B.paypal,sandbox:j}}))})]})]})]}),i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm",children:" "}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"    "})]}),i.jsx(mo,{checked:qe.bank_transfer.enabled,onCheckedChange:j=>dt(B=>({...B,bank_transfer:{...B.bank_transfer,enabled:j}}))})]}),qe.bank_transfer.enabled&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{dir:"ltr",placeholder:"  ",value:qe.bank_transfer.account_number,onChange:j=>dt(B=>({...B,bank_transfer:{...B.bank_transfer,account_number:j.target.value}}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"  "}),i.jsx(he,{placeholder:"     ",value:qe.bank_transfer.account_holder,onChange:j=>dt(B=>({...B,bank_transfer:{...B.bank_transfer,account_holder:j.target.value}}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:""}),i.jsx(he,{placeholder:" ",value:qe.bank_transfer.branch,onChange:j=>dt(B=>({...B,bank_transfer:{...B.bank_transfer,branch:j.target.value}}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),qe.bank_transfer.bank_logo_url&&i.jsx("img",{src:qe.bank_transfer.bank_logo_url,alt:" ",className:"h-12 w-auto mb-2 rounded border border-border object-contain"}),i.jsx(he,{type:"file",accept:"image/*",onChange:async j=>{var Ve;const B=(Ve=j.target.files)==null?void 0:Ve[0];if(!B)return;const se=`bank-logos/${Date.now()}-${B.name}`,{error:fe}=await S.storage.from("uploads").upload(se,B);if(fe){Q.error("  ");return}const{data:ze}=S.storage.from("uploads").getPublicUrl(se);dt($e=>({...$e,bank_transfer:{...$e.bank_transfer,bank_logo_url:ze.publicUrl}})),Q.success("  ")}})]})]})]})]}),sn==="currency"&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(ab,{className:"h-4 w-4 text-primary"})," "]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"    (USD)        "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsxs(cv,{open:Oe,onOpenChange:tt,children:[i.jsx(uv,{asChild:!0,children:i.jsxs(te,{variant:"outline",role:"combobox",className:"w-full justify-between font-normal",children:[(()=>{const j=jo.find(B=>B.code===un);return j?`${j.symbol} - ${j.name} (${j.code})`:" "})(),i.jsx(jl,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Gh,{className:"w-full min-w-[280px] p-0 z-50",align:"start",children:i.jsxs(fA,{children:[i.jsx(pA,{placeholder:"  ...",className:"text-right",dir:"rtl"}),i.jsxs(mA,{className:"max-h-60",children:[i.jsx(gA,{children:"    "}),i.jsx(vA,{children:jo.map(j=>i.jsx(xA,{value:`${j.code} ${j.name} ${j.symbol}`,onSelect:()=>{rn(j.code),tt(!1)},className:"cursor-pointer",children:i.jsxs("span",{className:un===j.code?"font-bold text-primary":"",children:[j.symbol," - ",j.name," (",j.code,")"]})},j.code))})]})]})})]})]}),un!=="USD"&&i.jsxs("div",{children:[i.jsxs(re,{className:"text-xs",children:["  (1  =  ",($0=jo.find(j=>j.code===un))==null?void 0:$0.symbol,")"]}),i.jsx(he,{type:"number",step:"0.01",min:"0",dir:"ltr",value:Ue,onChange:j=>kt(j.target.value),placeholder:": 3.75"}),i.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[":     10$   ",(10*(parseFloat(Ue)||1)).toFixed(2)," ",(F0=jo.find(j=>j.code===un))==null?void 0:F0.symbol]})]})]})]}),sn==="commission"&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(Jp,{className:"h-4 w-4 text-primary"}),"  "]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"              "}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"  (%)"}),i.jsx(he,{type:"number",step:"1",min:"0",max:"100",dir:"ltr",value:ot,onChange:j=>bn(j.target.value),placeholder:": 20"}),i.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[":   100$  : ",(100*(parseFloat(ot)||0)/100).toFixed(2),"$ | : ",(100-100*(parseFloat(ot)||0)/100).toFixed(2),"$"]})]})]}),sn==="maintenance"&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm",children:"  "}),i.jsx("p",{className:"text-xs text-muted-foreground",children:'    " " '})]}),i.jsx(mo,{checked:Fe,onCheckedChange:be})]}),Fe&&i.jsxs("div",{className:"bg-destructive/10 rounded-lg p-3 text-destructive text-xs flex items-center gap-2",children:[i.jsx(Lh,{className:"h-4 w-4"}),"   -    "]})]}),sn==="contact"&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx($g,{className:"h-4 w-4 text-primary"})," "]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:'     " "   '}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{dir:"ltr",type:"email",placeholder:"support@example.com",value:_r.email,onChange:j=>ls(B=>({...B,email:j.target.value}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{dir:"ltr",placeholder:"+249 123 456 789",value:_r.phone,onChange:j=>ls(B=>({...B,phone:j.target.value}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx(he,{dir:"ltr",placeholder:"+249123456789",value:_r.whatsapp,onChange:j=>ls(B=>({...B,whatsapp:j.target.value}))})]})]}),sn==="homepage"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(eh,{className:"h-4 w-4 text-primary"}),"   "]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"       "}),i.jsx("div",{className:"space-y-2",children:cs.map((j,B)=>{const se={announcements:"  ",promo_banners:" ",lesson_types:" ",offers:" "};return i.jsxs("div",{className:"flex items-center gap-2 p-3 border border-border rounded-lg bg-muted/30",children:[i.jsx("span",{className:"text-sm font-medium flex-1",children:se[j]||j}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(te,{size:"icon",variant:"ghost",className:"h-7 w-7",disabled:B===0,onClick:()=>{const fe=[...cs];[fe[B-1],fe[B]]=[fe[B],fe[B-1]],mp(fe)},children:i.jsx($s,{className:"h-3 w-3 rotate-180"})}),i.jsx(te,{size:"icon",variant:"ghost",className:"h-7 w-7",disabled:B===cs.length-1,onClick:()=>{const fe=[...cs];[fe[B],fe[B+1]]=[fe[B+1],fe[B]],mp(fe)},children:i.jsx($s,{className:"h-3 w-3"})})]})]},j)})})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(Bs,{className:"h-4 w-4 text-primary"})," /   "]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"        "}),i.jsx("div",{className:"space-y-2",children:[{id:"tutoring",label:" "},{id:"bag_review",label:" "},{id:"group",label:" "},{id:"skills",label:" "}].map(j=>i.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg bg-muted/30",children:[i.jsx("span",{className:"text-sm font-medium",children:j.label}),i.jsx(mo,{checked:gp[j.id]!==!1,onCheckedChange:B=>T0(se=>({...se,[j.id]:B}))})]},j.id))})]})]}),sn==="zoom"&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-primary"})," "]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"    .           ."}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(re,{className:"text-xs font-semibold",children:" "}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${jr.recording_mode==="manual"?"border-primary bg-primary/5":"border-border hover:border-primary/40"}`,onClick:()=>ta(j=>({...j,recording_mode:"manual"})),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`h-4 w-4 rounded-full border-2 flex items-center justify-center ${jr.recording_mode==="manual"?"border-primary":"border-muted-foreground"}`,children:jr.recording_mode==="manual"&&i.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})}),i.jsx("span",{className:"font-medium text-sm",children:" "})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1 mr-6",children:"             "})]}),i.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${jr.recording_mode==="cloud"?"border-primary bg-primary/5":"border-border hover:border-primary/40"}`,onClick:()=>ta(j=>({...j,recording_mode:"cloud"})),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`h-4 w-4 rounded-full border-2 flex items-center justify-center ${jr.recording_mode==="cloud"?"border-primary":"border-muted-foreground"}`,children:jr.recording_mode==="cloud"&&i.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})}),i.jsx("span",{className:"font-medium text-sm",children:"  "})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1 mr-6",children:"              (   )"})]})]})]}),jr.recording_mode==="cloud"&&i.jsxs("div",{className:"space-y-3 border-t border-border pt-4",children:[i.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(th,{className:"h-4 w-4 text-muted-foreground"})," API  (Server-to-Server OAuth)"]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["      "," ",i.jsx("a",{href:"https://marketplace.zoom.us",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"Zoom Marketplace"})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"Account ID"}),i.jsx(he,{dir:"ltr",placeholder:" Account ID",value:jr.cloud_account_id,onChange:j=>ta(B=>({...B,cloud_account_id:j.target.value}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"Client ID"}),i.jsx(he,{dir:"ltr",placeholder:" Client ID",value:jr.cloud_client_id,onChange:j=>ta(B=>({...B,cloud_client_id:j.target.value}))})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"Client Secret"}),i.jsx(he,{dir:"ltr",type:"password",placeholder:" Client Secret",value:jr.cloud_client_secret,onChange:j=>ta(B=>({...B,cloud_client_secret:j.target.value}))})]}),i.jsxs("div",{className:"bg-warning/10 rounded-lg p-3 text-xs text-warning space-y-1",children:[i.jsx("p",{className:"font-semibold",children:"  :"}),i.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[i.jsx("li",{children:"     Zoom Pro     "}),i.jsx("li",{children:'    "Cloud Recording"  '}),i.jsx("li",{children:'      "cloud"   '})]})]})]})]}),sn==="onesignal"&&i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(Mo,{className:"h-4 w-4 text-primary"})," OneSignal"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:" OneSignal      ( / iOS)       Median.co    ."}),i.jsxs("div",{className:"flex items-center justify-between border border-border rounded-lg p-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm",children:" OneSignal"}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:"      OneSignal   "})]}),i.jsx(mo,{checked:na.enabled,onCheckedChange:j=>Hu(B=>({...B,enabled:j}))})]}),na.enabled&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"OneSignal App ID"}),i.jsx(he,{dir:"ltr",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",value:na.app_id,onChange:j=>Hu(B=>({...B,app_id:j.target.value}))}),i.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"    OneSignal  Settings  Keys & IDs  OneSignal App ID"})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs",children:"REST API Key"}),i.jsx(he,{dir:"ltr",type:"password",placeholder:" REST API Key",value:na.rest_api_key,onChange:j=>Hu(B=>({...B,rest_api_key:j.target.value}))}),i.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"    OneSignal  Settings  Keys & IDs  REST API Key"})]}),i.jsxs("div",{className:"bg-primary/5 rounded-lg p-3 text-xs space-y-2",children:[i.jsx("p",{className:"font-semibold",children:"  :"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:["   ",i.jsx("a",{href:"https://onesignal.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"OneSignal.com"})]}),i.jsx("li",{children:"     (Android / iOS / Web)"}),i.jsx("li",{children:"     (Firebase  APNs )"}),i.jsx("li",{children:" App ID  REST API Key    OneSignal  "}),i.jsx("li",{children:"     Median.co   OneSignal   Median"})]})]}),i.jsxs("div",{className:"bg-warning/10 rounded-lg p-3 text-xs text-warning space-y-1",children:[i.jsx("p",{className:"font-semibold",children:"  :"}),i.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[i.jsx("li",{children:"REST API Key       "}),i.jsx("li",{children:"    OneSignal    Web Push "}),i.jsx("li",{children:"    External User ID (    )"})]})]})]})]}),i.jsxs(te,{onClick:BA,variant:"hero",className:"w-full",disabled:et,children:[i.jsx(Fg,{className:"h-4 w-4 ml-1"}),et?" ...":"  "]})]}),n&&i.jsxs(it,{value:"accounting",className:"mt-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border text-center",children:[i.jsx(gc,{className:"h-6 w-6 mx-auto mb-1 text-primary"}),i.jsx("p",{className:"text-lg font-bold",children:o(f.income)}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border text-center",children:[i.jsx(Jp,{className:"h-6 w-6 mx-auto mb-1 text-success"}),i.jsx("p",{className:"text-lg font-bold",children:o(f.platformEarnings)}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border text-center",children:[i.jsx(Mg,{className:"h-6 w-6 mx-auto mb-1 text-secondary"}),i.jsx("p",{className:"text-lg font-bold",children:o(f.teacherEarnings)}),i.jsx("p",{className:"text-[10px] text-muted-foreground",children:" "})]})]}),i.jsxs(Tl,{defaultValue:"accounting-expenses",className:"space-y-4",children:[i.jsxs(Hl,{className:"w-full flex-wrap h-auto",children:[i.jsx(Ut,{value:"accounting-expenses",className:"flex-1",children:""}),i.jsx(Ut,{value:"accounting-monthly-summary",className:"flex-1",children:"  "}),i.jsx(Ut,{value:"accounting-teachers",className:"flex-1",children:"  "}),i.jsx(Ut,{value:"accounting-recent",className:"flex-1",children:" "})]}),i.jsxs(it,{value:"accounting-expenses",className:"space-y-4",children:[i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(re,{className:"text-xs mb-1 block",children:""}),i.jsx(he,{type:"month",value:Te.month,onChange:j=>Qe({...Te,month:j.target.value}),dir:"ltr"})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs mb-1 block",children:" "}),i.jsx(he,{value:Te.name,onChange:j=>Qe({...Te,name:j.target.value})})]}),i.jsxs("div",{children:[i.jsx(re,{className:"text-xs mb-1 block",children:"/ "}),i.jsx(he,{value:Te.status,onChange:j=>Qe({...Te,status:j.target.value})})]}),i.jsxs("div",{children:[i.jsxs(re,{className:"text-xs mb-1 block",children:[" (",l.name,")"]}),i.jsx(he,{type:"number",value:Te.amount,onChange:j=>Qe({...Te,amount:j.target.value}),dir:"ltr"})]})]}),i.jsx(te,{variant:"hero",className:"w-full",onClick:async()=>{if(!Te.month||!Te.name||!Te.status||!Te.amount){Q.error("   ");return}const j=Te.month,B=parseFloat(Te.amount),se=isNaN(B)?0:a>0?Math.round(B/a*100)/100:B;try{const{error:fe}=await S.from("monthly_expenses").insert({period_month:j,name:Te.name,status:Te.status,amount:se});if(fe)throw fe;Q.success("  "),Qe({month:"",name:"",status:"",amount:""});const{data:ze}=await S.from("monthly_expenses").select("*").order("period_month",{ascending:!1});Be(ze??[])}catch{const ze={id:crypto.randomUUID(),period_month:j,name:Te.name,status:Te.status,amount_usd:se,created_at:new Date().toISOString()},{data:Ve}=await S.from("site_settings").select("*").eq("key","monthly_expenses").maybeSingle(),$e=Array.isArray(Ve==null?void 0:Ve.value)?Ve==null?void 0:Ve.value:[],Bt=[ze,...$e];Ve?await S.from("site_settings").update({value:Bt}).eq("id",Ve.id):await S.from("site_settings").insert({key:"monthly_expenses",value:Bt});const dn=Bt.map(_n=>({..._n,amount:typeof _n.amount=="number"?_n.amount:typeof _n.amount_usd=="number"?_n.amount_usd:0}));Be(dn),Qe({month:"",name:"",status:"",amount:""}),Q.success("   ( )")}},children:" "})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:" "}),i.jsx(te,{variant:"outline",className:"w-full",onClick:async()=>{if(window.confirm("    "))try{const{error:j}=await S.from("monthly_expenses").delete().not("id","is",null);j&&console.warn("Delete monthly_expenses error:",j.message);const{data:B}=await S.from("site_settings").select("*").eq("key","monthly_expenses").maybeSingle();B&&await S.from("site_settings").update({value:[]}).eq("id",B.id),Be([]),Q.success("     ")}catch{Q.error("  ")}},children:"  "})]}),i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"  "}),i.jsxs("div",{className:"space-y-2",children:[Ee.length===0&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"   "}),Ee.map(j=>i.jsxs("div",{className:"border border-border rounded-lg p-3 text-xs flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:j.name}),i.jsx("p",{className:"text-muted-foreground",children:j.status}),i.jsx("p",{className:"text-muted-foreground",children:j.period_month})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:o(j.amount)}),i.jsx("p",{className:"text-muted-foreground",children:new Date(j.created_at).toLocaleDateString("ar")})]})]},j.id))]})]})]}),i.jsx(it,{value:"accounting-teachers",className:"space-y-4",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"  "}),(()=>{const j={};Yt.forEach(se=>{j[se.teacher_id]||(j[se.teacher_id]={total:0,platform:0,teacher:0,count:0}),j[se.teacher_id].total+=Number(se.total_amount),j[se.teacher_id].platform+=Number(se.platform_share),j[se.teacher_id].teacher+=Number(se.teacher_share),j[se.teacher_id].count+=1});const B=Object.entries(j);return B.length===0?i.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"    "}):B.map(([se,fe])=>{var ze;return i.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"font-medium text-sm",children:((ze=T[se])==null?void 0:ze.full_name)||""}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[fe.count,"  "]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[i.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[i.jsx("p",{className:"font-bold",children:o(fe.total)}),i.jsx("p",{className:"text-muted-foreground",children:""})]}),i.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[i.jsx("p",{className:"font-bold text-primary",children:o(fe.platform)}),i.jsx("p",{className:"text-muted-foreground",children:" "})]}),i.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[i.jsx("p",{className:"font-bold text-success",children:o(fe.teacher)}),i.jsx("p",{className:"text-muted-foreground",children:" "})]})]})]},se)})})()]})}),i.jsx(it,{value:"accounting-monthly-summary",className:"space-y-4",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(re,{className:"text-xs",children:" "}),i.jsx("select",{className:"rounded-lg border border-border p-2 bg-background text-sm",value:Pe,onChange:j=>Ct(j.target.value),children:(()=>{const j=new Set;Yt.forEach(se=>j.add(new Date(se.created_at).getFullYear().toString())),Ee.forEach(se=>{const fe=(se.period_month||"").split("-")[0];fe&&j.add(fe)});const B=Array.from(j);return B.length===0&&B.push(new Date().getFullYear().toString()),B.sort().map(se=>i.jsx("option",{value:se,children:se},se))})()})]}),(()=>{const j=$e=>`${$e.getFullYear()}-${String($e.getMonth()+1).padStart(2,"0")}`,B={};Yt.forEach($e=>{const Bt=new Date($e.created_at),dn=j(Bt);B[dn]=(B[dn]??0)+Number($e.platform_share)});const se={};Ee.forEach($e=>{const Bt=$e.period_month;se[Bt]=(se[Bt]??0)+Number($e.amount)});const ze=Array.from(new Set([...Object.keys(B),...Object.keys(se)])).filter($e=>$e.startsWith(Pe)).sort().map($e=>{const Bt=B[$e]??0,dn=se[$e]??0,_n=Bt-dn;return{m:$e,earnings:Bt,expenses:dn,net:_n}}),Ve=ze.reduce(($e,Bt)=>$e+Bt.net,0);return i.jsxs(i.Fragment,{children:[i.jsxs("h3",{className:"font-semibold text-sm",children:["    ",Pe]}),i.jsxs("div",{className:"space-y-2",children:[ze.length===0&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"    "}),ze.map($e=>i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[i.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[i.jsx("span",{className:"font-bold",children:$e.m}),i.jsx("div",{className:"text-muted-foreground",children:""})]}),i.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[i.jsx("span",{className:"font-bold text-primary",children:o($e.earnings)}),i.jsx("div",{className:"text-muted-foreground",children:" "})]}),i.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[i.jsx("span",{className:"font-bold text-destructive",children:o($e.expenses)}),i.jsx("div",{className:"text-muted-foreground",children:""})]}),i.jsxs("div",{className:"col-span-3 p-2 bg-muted/30 rounded text-center",children:[": ",i.jsx("span",{className:$e.net>=0?"text-success font-bold":"text-destructive font-bold",children:o($e.net)})]})]},$e.m))]}),i.jsxs("div",{className:"text-center p-3 border border-border rounded-lg",children:[i.jsx("p",{className:"text-sm",children:"     "}),i.jsx("p",{className:"text-xl font-bold",children:o(Ve)})]})]})})()]})}),i.jsx(it,{value:"accounting-recent",className:"space-y-4",children:i.jsxs("div",{className:"bg-card rounded-xl p-4 border border-border space-y-3",children:[i.jsx("h3",{className:"font-semibold text-sm",children:"  "}),i.jsxs("div",{className:"space-y-2",children:[Yt.slice(0,20).map(j=>{var B;return i.jsxs("div",{className:"border border-border rounded-lg p-3 text-xs space-y-1",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium",children:((B=T[j.teacher_id])==null?void 0:B.full_name)||""}),i.jsx("span",{className:"text-muted-foreground",children:new Date(j.created_at).toLocaleDateString("ar")})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{children:[": ",o(j.total_amount)]}),i.jsxs("span",{children:[": ",j.commission_rate,"%"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-primary",children:[": ",o(j.platform_share)]}),i.jsxs("span",{className:"text-success",children:[": ",o(j.teacher_share)]})]})]},j.id)}),Yt.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4 text-xs",children:"          "})]})]})})]})]})]})]})]})}const _a=h.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ve("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));_a.displayName="Card";const ja=h.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ve("flex flex-col space-y-1.5 p-6",e),...t}));ja.displayName="CardHeader";const Sa=h.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:ve("text-2xl font-semibold leading-none tracking-tight",e),...t}));Sa.displayName="CardTitle";const Na=h.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:ve("text-sm text-muted-foreground",e),...t}));Na.displayName="CardDescription";const ka=h.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ve("p-6 pt-0",e),...t}));ka.displayName="CardContent";const CH=h.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ve("flex items-center p-6 pt-0",e),...t}));CH.displayName="CardFooter";const EH={supabaseUrl:"",supabaseAnonKey:"",supabaseServiceRoleKey:"",zoomAccountId:"",zoomClientId:"",zoomClientSecret:"",vapidPublicKey:"",vapidPrivateKey:"",oneSignalAppId:""},$d=[{id:"welcome",title:"",icon:ik},{id:"database",title:" ",icon:nk},{id:"zoom",title:"Zoom",icon:Ss},{id:"notifications",title:"",icon:Mo},{id:"finish",title:" ",icon:PM}];function TH(){const[e,t]=h.useState(0),[n,r]=h.useState(EH),[s,o]=h.useState(!1),[a,l]=h.useState(null),c=(g,w)=>{r(v=>({...v,[g]:w})),l(null)},u=async()=>{if(!n.supabaseUrl||!n.supabaseAnonKey){Q.error("    Supabase ");return}o(!0),l(null);try{const g=await fetch(`${n.supabaseUrl}/rest/v1/`,{headers:{apikey:n.supabaseAnonKey,Authorization:`Bearer ${n.supabaseAnonKey}`}});g.ok||g.status===200?(l("success"),Q.success("    !")):(l("error"),Q.error("    "))}catch{l("error"),Q.error("    ")}o(!1)},d=()=>{const g=n.supabaseUrl.replace("https://","").replace(".supabase.co","");return`VITE_SUPABASE_URL="${n.supabaseUrl}"
VITE_SUPABASE_PUBLISHABLE_KEY="${n.supabaseAnonKey}"
VITE_SUPABASE_PROJECT_ID="${g}"`},f=()=>{const g={};return n.supabaseServiceRoleKey&&(g.SUPABASE_SERVICE_ROLE_KEY=n.supabaseServiceRoleKey),n.zoomAccountId&&(g.ZOOM_ACCOUNT_ID=n.zoomAccountId),n.zoomClientId&&(g.ZOOM_CLIENT_ID=n.zoomClientId),n.zoomClientSecret&&(g.ZOOM_CLIENT_SECRET=n.zoomClientSecret),n.vapidPublicKey&&(g.VAPID_PUBLIC_KEY=n.vapidPublicKey),n.vapidPrivateKey&&(g.VAPID_PRIVATE_KEY=n.vapidPrivateKey),Object.entries(g).map(([w,v])=>`supabase secrets set ${w}="${v}"`).join(`
`)},m=g=>{navigator.clipboard.writeText(g),Q.success(" !")},p=()=>t(g=>Math.min(g+1,$d.length-1)),y=()=>t(g=>Math.max(g-1,0));return i.jsxs("div",{className:"min-h-screen bg-background",dir:"rtl",children:[i.jsx("div",{className:"border-b border-border bg-card",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary flex items-center justify-center",children:i.jsx(Lh,{className:"h-5 w-5 text-primary-foreground"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-foreground",children:"  "}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"     "})]})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-8",children:$d.map((g,w)=>{const v=g.icon,x=w===e,b=w<e;return i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsxs("button",{onClick:()=>t(w),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all text-sm ${x?"bg-primary text-primary-foreground":b?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:[b?i.jsx(Hn,{className:"h-4 w-4"}):i.jsx(v,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:g.title})]}),w<$d.length-1&&i.jsx("div",{className:`flex-1 h-0.5 mx-1 ${w<e?"bg-primary":"bg-border"}`})]},g.id)})}),e===0&&i.jsxs(_a,{children:[i.jsxs(ja,{className:"text-center",children:[i.jsx("div",{className:"h-20 w-20 mx-auto rounded-2xl bg-primary/10 flex items-center justify-center mb-4",children:i.jsx(ik,{className:"h-10 w-10 text-primary"})}),i.jsx(Sa,{className:"text-2xl",children:"    "}),i.jsx(Na,{className:"text-base mt-2",children:"         "})]}),i.jsxs(ka,{className:"space-y-4",children:[i.jsxs("div",{className:"bg-muted rounded-xl p-4 space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:" :"}),i.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(Hn,{className:"h-4 w-4 text-primary"}),"  Supabase   "]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(Hn,{className:"h-4 w-4 text-primary"})," Node.js 18+  npm "]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(Hn,{className:"h-4 w-4 text-primary"}),"  Zoom ( -  )"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(Hn,{className:"h-4 w-4 text-primary"}),"  VAPID ( - )"]})]})]}),i.jsxs("div",{className:"bg-muted rounded-xl p-4 space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:" :"}),i.jsxs("ol",{className:"space-y-2 text-sm text-muted-foreground list-decimal list-inside",children:[i.jsx("li",{children:"   GitHub"}),i.jsxs("li",{children:[" ",i.jsx("code",{className:"bg-background px-1 rounded",children:"npm install"})]}),i.jsx("li",{children:"     "}),i.jsxs("li",{children:[" ",i.jsx("code",{className:"bg-background px-1 rounded",children:"npm run build"})]}),i.jsxs("li",{children:["  ",i.jsx("code",{className:"bg-background px-1 rounded",children:"dist"}),"  "]})]})]})]})]}),e===1&&i.jsxs(_a,{children:[i.jsxs(ja,{children:[i.jsxs(Sa,{className:"flex items-center gap-2",children:[i.jsx(nk,{className:"h-5 w-5"}),"    (Supabase)"]}),i.jsxs(Na,{children:["   "," ",i.jsx("a",{href:"https://supabase.com",target:"_blank",className:"text-primary underline",children:"supabase.com"})," ","   "]})]}),i.jsxs(ka,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(re,{children:["  (Project URL) ",i.jsx(il,{variant:"destructive",className:"text-[10px] mr-1",children:""})]}),i.jsx(he,{dir:"ltr",placeholder:"https://xxxxx.supabase.co",value:n.supabaseUrl,onChange:g=>c("supabaseUrl",g.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(re,{children:["  (anon/public key) ",i.jsx(il,{variant:"destructive",className:"text-[10px] mr-1",children:""})]}),i.jsx(he,{dir:"ltr",placeholder:"eyJhbGciOiJIUzI1NiIs...",value:n.supabaseAnonKey,onChange:g=>c("supabaseAnonKey",g.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(re,{children:["  (service_role key) ",i.jsx(il,{variant:"outline",className:"text-[10px] mr-1",children:"  Edge Functions"})]}),i.jsx(he,{dir:"ltr",type:"password",placeholder:"eyJhbGciOiJIUzI1NiIs...",value:n.supabaseServiceRoleKey,onChange:g=>c("supabaseServiceRoleKey",g.target.value)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"  Edge Functions      "})]}),i.jsx(rl,{}),i.jsxs(te,{onClick:u,disabled:s,variant:"outline",className:"w-full gap-2",children:[s?" ...":" ",a==="success"&&i.jsx(Hn,{className:"h-4 w-4 text-green-500"})]}),a==="success"&&i.jsx("div",{className:"bg-green-500/10 text-green-700 dark:text-green-400 rounded-lg p-3 text-sm text-center",children:"   "}),a==="error"&&i.jsx("div",{className:"bg-destructive/10 text-destructive rounded-lg p-3 text-sm text-center",children:"   -   "}),i.jsxs("div",{className:"bg-muted rounded-xl p-4 space-y-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"  :"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["   Supabase    Migration   ",i.jsx("code",{className:"bg-background px-1 rounded mx-1",children:"supabase/migrations/"}),"     .  :"]}),i.jsx("code",{className:"block bg-background p-2 rounded text-xs",dir:"ltr",children:"npx supabase db push --linked"})]})]})]}),e===2&&i.jsxs(_a,{children:[i.jsxs(ja,{children:[i.jsxs(Sa,{className:"flex items-center gap-2",children:[i.jsx(Ss,{className:"h-5 w-5"}),"  Zoom ()"]}),i.jsx(Na,{children:"    .      ."})]}),i.jsxs(ka,{className:"space-y-4",children:[i.jsxs("div",{className:"bg-muted rounded-xl p-4 text-sm space-y-2",children:[i.jsx("p",{children:"   Zoom:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:["  ",i.jsx("a",{href:"https://marketplace.zoom.us",target:"_blank",className:"text-primary underline",children:"Zoom Marketplace"})]}),i.jsx("li",{children:"  Server-to-Server OAuth"}),i.jsx("li",{children:" Account ID  Client ID  Client Secret"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:"Account ID"}),i.jsx(he,{dir:"ltr",placeholder:"xxxxxxxx",value:n.zoomAccountId,onChange:g=>c("zoomAccountId",g.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:"Client ID"}),i.jsx(he,{dir:"ltr",placeholder:"xxxxxxxx",value:n.zoomClientId,onChange:g=>c("zoomClientId",g.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:"Client Secret"}),i.jsx(he,{dir:"ltr",type:"password",placeholder:"xxxxxxxx",value:n.zoomClientSecret,onChange:g=>c("zoomClientSecret",g.target.value)})]})]})]}),e===3&&i.jsxs(_a,{children:[i.jsxs(ja,{children:[i.jsxs(Sa,{className:"flex items-center gap-2",children:[i.jsx(Mo,{className:"h-5 w-5"}),"   ()"]}),i.jsx(Na,{children:"   Push .    ."})]}),i.jsxs(ka,{className:"space-y-4",children:[i.jsxs("div",{className:"bg-muted rounded-xl p-4 text-sm space-y-2",children:[i.jsx("p",{children:"  VAPID:"}),i.jsx("code",{className:"block bg-background p-2 rounded text-xs",dir:"ltr",children:"npx web-push generate-vapid-keys"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:"VAPID Public Key"}),i.jsx(he,{dir:"ltr",placeholder:"BxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxQ=",value:n.vapidPublicKey,onChange:g=>c("vapidPublicKey",g.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(re,{children:"VAPID Private Key"}),i.jsx(he,{dir:"ltr",type:"password",placeholder:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",value:n.vapidPrivateKey,onChange:g=>c("vapidPrivateKey",g.target.value)})]})]})]}),e===4&&i.jsxs(_a,{children:[i.jsxs(ja,{className:"text-center",children:[i.jsx("div",{className:"h-20 w-20 mx-auto rounded-2xl bg-green-500/10 flex items-center justify-center mb-4",children:i.jsx(Hn,{className:"h-10 w-10 text-green-500"})}),i.jsx(Sa,{className:"text-2xl",children:" !"}),i.jsx(Na,{children:"    "})]}),i.jsxs(ka,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(re,{className:"text-base font-semibold",children:["  ",i.jsx("code",{children:".env"})]}),i.jsxs(te,{size:"sm",variant:"outline",className:"gap-1",onClick:()=>m(d()),children:[i.jsx(ib,{className:"h-3 w-3"})," "]})]}),i.jsx("pre",{className:"bg-muted rounded-lg p-4 text-xs overflow-x-auto",dir:"ltr",children:d()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"      "})]}),i.jsx(rl,{}),f()&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(re,{className:"text-base font-semibold",children:"  Supabase Secrets"}),i.jsxs(te,{size:"sm",variant:"outline",className:"gap-1",onClick:()=>m(f()),children:[i.jsx(ib,{className:"h-3 w-3"})," "]})]}),i.jsx("pre",{className:"bg-muted rounded-lg p-4 text-xs overflow-x-auto",dir:"ltr",children:f()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"    terminal    Supabase"})]}),i.jsx(rl,{}),i.jsxs("div",{className:"bg-muted rounded-xl p-4 space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"    :"}),i.jsxs("ol",{className:"space-y-2 text-sm text-muted-foreground list-decimal list-inside",children:[i.jsxs("li",{children:["  ",i.jsx("code",{className:"bg-background px-1 rounded",children:".env"}),"     "]}),i.jsxs("li",{children:["  Supabase:"," ",i.jsx("code",{className:"bg-background px-1 rounded",dir:"ltr",children:"npx supabase link --project-ref YOUR_PROJECT_ID"})]}),i.jsxs("li",{children:["  Migrations:"," ",i.jsx("code",{className:"bg-background px-1 rounded",dir:"ltr",children:"npx supabase db push"})]}),i.jsxs("li",{children:[" Secrets:"," ","  "]}),i.jsxs("li",{children:[" Edge Functions:"," ",i.jsx("code",{className:"bg-background px-1 rounded",dir:"ltr",children:"npx supabase functions deploy"})]}),i.jsxs("li",{children:[" :"," ",i.jsx("code",{className:"bg-background px-1 rounded",dir:"ltr",children:"npm run build"})]}),i.jsxs("li",{children:["   ",i.jsx("code",{className:"bg-background px-1 rounded",children:"dist"}),"  "]})]})]}),i.jsxs(te,{className:"w-full gap-2",variant:"hero",onClick:()=>{const g=d(),w=new Blob([g],{type:"text/plain"}),v=URL.createObjectURL(w),x=document.createElement("a");x.href=v,x.download=".env",x.click(),URL.revokeObjectURL(v),Q.success("   .env")},children:[i.jsx(bM,{className:"h-4 w-4"}),"   .env"]})]})]}),i.jsxs("div",{className:"flex justify-between mt-6",children:[i.jsxs(te,{variant:"outline",onClick:y,disabled:e===0,className:"gap-2",children:[i.jsx(bo,{className:"h-4 w-4"})," "]}),e<$d.length-1?i.jsxs(te,{onClick:p,className:"gap-2",children:[" ",i.jsx(sb,{className:"h-4 w-4"})]}):i.jsxs(te,{variant:"hero",onClick:()=>window.location.href="/",className:"gap-2",children:["  ",i.jsx(sb,{className:"h-4 w-4"})]})]})]})]})}const PH=new r$,RH=()=>i.jsx(i$,{client:PH,children:i.jsxs(I3,{children:[i.jsx(v4,{}),i.jsx(Y4,{}),i.jsx(t5,{children:i.jsx(FU,{children:i.jsx(UU,{children:i.jsxs(G$,{children:[i.jsx(lr,{path:"/",element:i.jsx(r9,{})}),i.jsx(lr,{path:"/auth",element:i.jsx(u9,{})}),i.jsx(lr,{path:"/lessons/:type",element:i.jsx(B9,{})}),i.jsx(lr,{path:"/lesson/:id",element:i.jsx(zW,{})}),i.jsx(lr,{path:"/schedule",element:i.jsx(qW,{})}),i.jsx(lr,{path:"/messages",element:i.jsx(KW,{})}),i.jsx(lr,{path:"/profile",element:i.jsx(f7,{})}),i.jsx(lr,{path:"/favorites",element:i.jsx(p7,{})}),i.jsx(lr,{path:"/teacher/dashboard",element:i.jsx(T7,{})}),i.jsx(lr,{path:"/admin",element:i.jsx(kH,{})}),i.jsx(lr,{path:"/setup",element:i.jsx(TH,{})}),i.jsx(lr,{path:"*",element:i.jsx(s9,{})})]})})})})]})});jN(document.getElementById("root")).render(i.jsx(RH,{}));
